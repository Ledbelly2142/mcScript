****** BUILD Of 'DoorSensor' (2016-11-04 2:21:51 PM)


****** EVENT HANDLERS
                                                                                                                                                                                                                                         0:    0x007E   Address Priority 0 Event.   Code for 'Boot' starts at 126.
                                                                                                                                                                                                                                         1:    0x00F4   Address Priority 1 Event.   Code for 'NewGateway' starts at 244.
                                                                                                                                                                                                                                         2:    0x0170   Address Priority 2 Event.   Code for 'AccelerometerInt1' starts at 368.
                                                                                                                                                                                                                                         3:    0x020B   Address Priority 3 Event.   Code for 'ReedSwitchChanged' starts at 523.
                                                                                                                                                                                                                                         4:    0x0254   Address Priority 4 Event.   Code for 'SubscriptionDelivery' starts at 596.
                                                                                                                                                                                                                                         5:    0x02BF   Address Priority 5 Event.   Code for 'Status' starts at 703.
                                                                                                                                                                                                                                         6:    0x02CF   Address Priority 6 Event.   Code for 'Publish' starts at 719.
                                                                                                                                                                                                                                         7:    0x04F8   Address Priority 7 Event.   Code for 'Publish_Queue' starts at 1272.
                                                                                                                                                                                                                                         8:    0x0000   Address Priority 8 Event.   No Event defined.
                                                                                                                                                                                                                                         9:    0x0000   Address Priority 9 Event.   No Event defined.
                                                                                                                                                                                                                                         10:   0x0000   Address Priority 10 Event.  No Event defined.
                                                                                                                                                                                                                                         11:   0x0000   Address Priority 11 Event.  No Event defined.
                                                                                                                                                                                                                                         12:   0x0000   Address Priority 12 Event.  No Event defined.
                                                                                                                                                                                                                                         13:   0x0000   Address Priority 13 Event.  No Event defined.
                                                                                                                                                                                                                                         14:   0x0000   Address Priority 14 Event.  No Event defined.
                                                                                                                                                                                                                                         15:   0x0000   Address Priority 15 Event.  No Event defined.
                                                                                                                                                                                                                                         16:   0x0000   Address Priority 16 Event.  No Event defined.
                                                                                                                                                                                                                                         17:   0x0000   Address Priority 17 Event.  No Event defined.
                                                                                                                                                                                                                                         18:   0x0000   Address Priority 18 Event.  No Event defined.
                                                                                                                                                                                                                                         19:   0x0000   Address Priority 19 Event.  No Event defined.
                                                                                                                                                                                                                                         20:   0x0000   Address Priority 20 Event.  No Event defined.
                                                                                                                                                                                                                                         21:   0x0000   Address Priority 21 Event.  No Event defined.
                                                                                                                                                                                                                                         22:   0x0000   Address Priority 22 Event.  No Event defined.
                                                                                                                                                                                                                                         23:   0x0000   Address Priority 23 Event.  No Event defined.
                                                                                                                                                                                                                                         24:   0x0000   Address Priority 24 Event.  No Event defined.
                                                                                                                                                                                                                                         25:   0x0000   Address Priority 25 Event.  No Event defined.
                                                                                                                                                                                                                                         26:   0x0000   Address Priority 26 Event.  No Event defined.
                                                                                                                                                                                                                                         27:   0x0000   Address Priority 27 Event.  No Event defined.
                                                                                                                                                                                                                                         28:   0x0000   Address Priority 28 Event.  No Event defined.
                                                                                                                                                                                                                                         29:   0x0000   Address Priority 29 Event.  No Event defined.
                                                                                                                                                                                                                                         30:   0x0000   Address Priority 30 Event.  No Event defined.
                                                                                                                                                                                                                                         31:   0x0000   Address Priority 31 Event.  No Event defined.

****** RUNTIME INFORMATION
                                                                                                                                                                                                                                         32:   0x0EB4   ScriptSizeLS (Size of the code in 2-byte instructions = 3764)
                                                                                                                                                                                                                                         33:   0x0000   CodeSizeMS (Size of the code in 2-byte instructions = 3764)
                                                                                                                                                                                                                                         34:   0x003B   CodeSizeInBlocks = 59
                                                                                                                                                                                                                                         35:   0x0007   StringSizeInBlocks = 7
                                                                                                                                                                                                                                         36:   0x0000   Reserved
                                                                                                                                                                                                                                         37:   0x0000   Reserved
                                                                                                                                                                                                                                         38:   0x55FF   Compile Date and Time 2016-11-04 14:21:51
                                                                                                                                                                                                                                         39:   0x1FAF   Compile Date and Time 2016-11-04 14:21:51
                                                                                                                                                                                                                                         40:   0x0000   Reserved
                                                                                                                                                                                                                                         41:   0x0000   Reserved
                                                                                                                                                                                                                                         42:   0x0000   Reserved
                                                                                                                                                                                                                                         43:   0x0000   Reserved
                                                                                                                                                                                                                                         44:   0x0000   Reserved
                                                                                                                                                                                                                                         45:   0x0000   PinMode Pin0=NotUsed  Pin1=NotUsed
                                                                                                                                                                                                                                         46:   0x0000   PinMode Pin2=NotUsed  Pin3=NotUsed
                                                                                                                                                                                                                                         47:   0x0000   PinMode Pin4=NotUsed  Pin5=NotUsed
                                                                                                                                                                                                                                         48:   0x0000   PinMode Pin6=NotUsed  Pin7=NotUsed
                                                                                                                                                                                                                                         49:   0x0000   PinMode Pin8=NotUsed   Pin9=NotUsed
                                                                                                                                                                                                                                         50:   0x0000   PinMode Pin10=NotUsed   Pin11=NotUsed
                                                                                                                                                                                                                                         51:   0x0000   PinMode Pin12=NotUsed   Pin13=NotUsed
                                                                                                                                                                                                                                         52:   0x0000   PinMode Pin14=NotUsed   Pin15=NotUsed
                                                                                                                                                                                                                                         53:   0x0000   PinMode Pin16=NotUsed   Pin17=NotUsed
                                                                                                                                                                                                                                         54:   0x0000   PinMode Pin18=NotUsed   Pin19=NotUsed
                                                                                                                                                                                                                                         55:   0x0000   PinMode Pin20=NotUsed   Pin21=NotUsed
                                                                                                                                                                                                                                         56:   0x0000   PinMode Pin22=NotUsed   Pin23=NotUsed
                                                                                                                                                                                                                                         57:   0x0000   Reserved
                                                                                                                                                                                                                                         58:   0x0000   Reserved
                                                                                                                                                                                                                                         59:   0x0000   Reserved
                                                                                                                                                                                                                                         60:   0x0000   Reserved
                                                                                                                                                                                                                                         61:   0x1800   IdleThread EntryPoint ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         62:   0x0015   SystemIdle
                                                                                                                                                                                                                                         63:   0x5002   BranchBack 62

****** CLASS INFORMATION
                                                                                                                                                                                                                                         64:   0x0049   Class Descriptor for class 'Global'. Next Descriptor at 73.
                                                                                                                                                                                                                                         65:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                                                                                         66:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                                                                                         67:   0x0010   Size of RefObject data.(16).
                                                                                                                                                                                                                                         68:   0x0034   Size of all data.(52).
                                                                                                                                                                                                                                         69:   0x6C47   Part of the class name 'Global'.
                                                                                                                                                                                                                                         70:   0x626F   Part of the class name 'Global'.
                                                                                                                                                                                                                                         71:   0x6C61   Part of the class name 'Global'.
                                                                                                                                                                                                                                         72:   0x0000   Part of the class name 'Global'.
                                                                                                                                                                                                                                         73:   0x0051   Class Descriptor for class 'Main'. Next Descriptor at 81.
                                                                                                                                                                                                                                         74:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                                                                                         75:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                                                                                         76:   0x0000   Size of RefObject data.(0).
                                                                                                                                                                                                                                         77:   0x0000   Size of all data.(0).
                                                                                                                                                                                                                                         78:   0x614D   Part of the class name 'Main'.
                                                                                                                                                                                                                                         79:   0x6E69   Part of the class name 'Main'.
                                                                                                                                                                                                                                         80:   0x0000   Part of the class name 'Main'.
                                                                                                                                                                                                                                         81:   0x005C   Class Descriptor for class 'TempSensor'. Next Descriptor at 92.
                                                                                                                                                                                                                                         82:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                                                                                         83:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                                                                                         84:   0x0000   Size of RefObject data.(0).
                                                                                                                                                                                                                                         85:   0x0000   Size of all data.(0).
                                                                                                                                                                                                                                         86:   0x6554   Part of the class name 'TempSensor'.
                                                                                                                                                                                                                                         87:   0x706D   Part of the class name 'TempSensor'.
                                                                                                                                                                                                                                         88:   0x6553   Part of the class name 'TempSensor'.
                                                                                                                                                                                                                                         89:   0x736E   Part of the class name 'TempSensor'.
                                                                                                                                                                                                                                         90:   0x726F   Part of the class name 'TempSensor'.
                                                                                                                                                                                                                                         91:   0x0000   Part of the class name 'TempSensor'.
                                                                                                                                                                                                                                         92:   0x0068   Class Descriptor for class 'MQTT_Message'. Next Descriptor at 104.
                                                                                                                                                                                                                                         93:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                                                                                         94:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                                                                                         95:   0x000C   Size of RefObject data.(12).
                                                                                                                                                                                                                                         96:   0x0014   Size of all data.(20).
                                                                                                                                                                                                                                         97:   0x514D   Part of the class name 'MQTT_Message'.
                                                                                                                                                                                                                                         98:   0x5454   Part of the class name 'MQTT_Message'.
                                                                                                                                                                                                                                         99:   0x4D5F   Part of the class name 'MQTT_Message'.
                                                                                                                                                                                                                                         100:  0x7365   Part of the class name 'MQTT_Message'.
                                                                                                                                                                                                                                         101:  0x6173   Part of the class name 'MQTT_Message'.
                                                                                                                                                                                                                                         102:  0x6567   Part of the class name 'MQTT_Message'.
                                                                                                                                                                                                                                         103:  0x0000   Part of the class name 'MQTT_Message'.
                                                                                                                                                                                                                                         104:  0x0070   Class Descriptor for class 'MQTT'. Next Descriptor at 112.
                                                                                                                                                                                                                                         105:  0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                                                                                         106:  0x0000   Offset of RefObject data.(0).
                                                                                                                                                                                                                                         107:  0x0000   Size of RefObject data.(0).
                                                                                                                                                                                                                                         108:  0x0000   Size of all data.(0).
                                                                                                                                                                                                                                         109:  0x514D   Part of the class name 'MQTT'.
                                                                                                                                                                                                                                         110:  0x5454   Part of the class name 'MQTT'.
                                                                                                                                                                                                                                         111:  0x0000   Part of the class name 'MQTT'.
                                                                                                                                                                                                                                         112:  0x0079   Class Descriptor for class 'MMA8652'. Next Descriptor at 121.
                                                                                                                                                                                                                                         113:  0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                                                                                         114:  0x0000   Offset of RefObject data.(0).
                                                                                                                                                                                                                                         115:  0x0004   Size of RefObject data.(4).
                                                                                                                                                                                                                                         116:  0x0008   Size of all data.(8).
                                                                                                                                                                                                                                         117:  0x4D4D   Part of the class name 'MMA8652'.
                                                                                                                                                                                                                                         118:  0x3841   Part of the class name 'MMA8652'.
                                                                                                                                                                                                                                         119:  0x3536   Part of the class name 'MMA8652'.
                                                                                                                                                                                                                                         120:  0x0032   Part of the class name 'MMA8652'.
                                                                                                                                                                                                                                         121:  0x0000   End Of Class Data.

****** APPLIACTION STATEMENTS
*************************************************************************************************************

000014  Class Main                                                                                                                                                                                                                       122:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000015      
000016      Const Version As String = "V2.1"
000017      Shared data As dataType
000018      Shared Sub_Topic_Publish_Enable As String
000019      Shared Sub_Topic_Knock_Enable As String
000020      Shared Knock_Enable As Boolean
000021      Shared Publish_data As Boolean
000022      Shared accel As MMA8652
000023      Shared TimeSinceKnockTriggered As Integer
000024      Shared TimeSinceDoorClosed As Integer
000025      Const KnockLockoutPeriod As Integer = 60 //no repeat knocks within 60 seconds if triggered
000026      Const DoorLockoutPeriod As Integer = 5 //no detection until door has been closed for 5 seconds
000027      Shared Door_Status As Boolean
000028      
                                                                                                                                                                                                                                         124:  0x0001                           EventType=Boot
                                                                                                                                                                                                                                         125:  0x0700                           EventCategory=Interrupt
000029      Shared Event Boot()                                                                                                                                                                                                          126:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000030          Publish_data = True                                                                                                                                                                                                      127:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         128:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         129:  0xC81D   PopFieldU8              Publish_data

000031          Sub_Topic_Publish_Enable = "MCThings/" + Device.mcUID().ToString("X8") + "/EnablePublish"                                                                                                                                130:  0x840F   PushLiteral             15
                                                                                                                                                                                                                                         131:  0x8413   PushLiteral             19
                                                                                                                                                                                                                                         132:  0x00F8   DeviceUID               
                                                                                                                                                                                                                                         133:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         134:  0x0069   StrFormat               
                                                                                                                                                                                                                                         135:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         136:  0x8415   PushLiteral             21
                                                                                                                                                                                                                                         137:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         138:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         139:  0xD400   PopFieldRef             Sub_Topic_Publish_Enable

000032          Sub_Topic_Knock_Enable = "MCThings/" + Device.mcUID().ToString("X8") + "/EnableDoorKnock"                                                                                                                                140:  0x840F   PushLiteral             15
                                                                                                                                                                                                                                         141:  0x8413   PushLiteral             19
                                                                                                                                                                                                                                         142:  0x00F8   DeviceUID               
                                                                                                                                                                                                                                         143:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         144:  0x0069   StrFormat               
                                                                                                                                                                                                                                         145:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         146:  0x841A   PushLiteral             26
                                                                                                                                                                                                                                         147:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         148:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         149:  0xD404   PopFieldRef             Sub_Topic_Knock_Enable

000033          TimeSinceKnockTriggered = 0 - KnockLockoutPeriod //so door knock detection is enabled on boot                                                                                                                            150:  0xE83B   PushConstNeg8           -60 (0xFFFFFFC4)
                                                                                                                                                                                                                                         151:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         152:  0xD024   PopFieldI32             TimeSinceKnockTriggered

000034          TimeSinceDoorClosed = 0                                                                                                                                                                                                  153:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         154:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         155:  0xD028   PopFieldI32             TimeSinceDoorClosed

000035          MQTT.Subscribe(Sub_Topic_Publish_Enable)                                                                                                                                                                                 156:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         157:  0xC400   PushFieldRef            Sub_Topic_Publish_Enable
                                                                                                                                                                                                                                         158:  0x000E   PushNothing             
                                                                                                                                                                                                                                         159:  0x5800   JumpSubr                1409
                                                                                                                                                                                                                                         160:  0x0581                           

000036          MQTT.Subscribe(Sub_Topic_Knock_Enable) //note, cannot debug in run mode on mc-dev with subscriptions enabled.                                                                                                            161:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         162:  0xC404   PushFieldRef            Sub_Topic_Knock_Enable
                                                                                                                                                                                                                                         163:  0x000E   PushNothing             
                                                                                                                                                                                                                                         164:  0x5800   JumpSubr                1409
                                                                                                                                                                                                                                         165:  0x0581                           

000037          MQTT.Publish("Status", "Booted: " + Version)                                                                                                                                                                             166:  0x8420   PushLiteral             32
                                                                                                                                                                                                                                         167:  0x8423   PushLiteral             35
                                                                                                                                                                                                                                         168:  0x000E   PushNothing             
                                                                                                                                                                                                                                         169:  0x1F44   BranchSubr              1006

000038          accel = New MMA8652()                                                                                                                                                                                                    170:  0x8070   PushConstU10            112 (0x0070)
                                                                                                                                                                                                                                         171:  0x0010   ClassNew                
                                                                                                                                                                                                                                         172:  0x5800   JumpSubr                1418
                                                                                                                                                                                                                                         173:  0x058A                           
                                                                                                                                                                                                                                         174:  0x5800   JumpSubr                1473
                                                                                                                                                                                                                                         175:  0x05C1                           
                                                                                                                                                                                                                                         176:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         177:  0xD408   PopFieldRef             accel

000039          If accel.online Then                                                                                                                                                                                                     178:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         179:  0xC408   PushFieldRef            accel
                                                                                                                                                                                                                                         180:  0xB804   PushFieldU8             online
                                                                                                                                                                                                                                         181:  0x3C28   BranchFalse             222

000040              MQTT.Publish("Status", "Accel Sensor Online")                                                                                                                                                                        182:  0x8420   PushLiteral             32
                                                                                                                                                                                                                                         183:  0x8428   PushLiteral             40
                                                                                                                                                                                                                                         184:  0x000E   PushNothing             
                                                                                                                                                                                                                                         185:  0x1F34   BranchSubr              1006

000041              accel.Setup(MMA8652_ACTIVE_ODR._400HZ, MMA8652_MODS.LOW_POWER, MMA8652_SLEEP_ODR._12_5HZ, MMA8652_SMODS.MOD_LOW_POWER)                                                                                               186:  0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         187:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         188:  0x8040   PushConstU10            64 (0x0040)
                                                                                                                                                                                                                                         189:  0x8018   PushConstU10            24 (0x0018)
                                                                                                                                                                                                                                         190:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         191:  0xC408   PushFieldRef            accel
                                                                                                                                                                                                                                         192:  0x5800   JumpSubr                2526
                                                                                                                                                                                                                                         193:  0x09DE                           
                                                                                                                                                                                                                                         194:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000042              //may need to play with these settings to match your door characteristics (g, duration etc)
000043              'accel.ConfigureShockInterrupt(0.1, 10) //default 0.1, 20 (magnitude in g, duraton in ms)
000044              //pulse (click) detection works better for knock detection...
000045              accel.ConfigurePulseInterrupt(0.15, 50, 50, 2000) //default 0.1, 20 (magnitude in g, duraton in ms, minnimum time between pulses, window for second pulse detection)                                                 195:  0x0110   PushConstI32            1041865114 (0x3E19999A)
                                                                                                                                                                                                                                         196:  0x999A                           
                                                                                                                                                                                                                                         197:  0x3E19                           
                                                                                                                                                                                                                                         198:  0xEA32   PushConstFlt            50.0
                                                                                                                                                                                                                                         199:  0xEA32   PushConstFlt            50.0
                                                                                                                                                                                                                                         200:  0x0110   PushConstI32            2000 (0x000007D0)
                                                                                                                                                                                                                                         201:  0x07D0                           
                                                                                                                                                                                                                                         202:  0x0000                           
                                                                                                                                                                                                                                         203:  0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                         204:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         205:  0xC408   PushFieldRef            accel
                                                                                                                                                                                                                                         206:  0x5800   JumpSubr                3131
                                                                                                                                                                                                                                         207:  0x0C3B                           
                                                                                                                                                                                                                                         208:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000046              accel.EnableSleepMode(2000) //enable sleep mode, 2s wake time                                                                                                                                                        209:  0x0110   PushConstI32            2000 (0x000007D0)
                                                                                                                                                                                                                                         210:  0x07D0                           
                                                                                                                                                                                                                                         211:  0x0000                           
                                                                                                                                                                                                                                         212:  0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                         213:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         214:  0xC408   PushFieldRef            accel
                                                                                                                                                                                                                                         215:  0x5800   JumpSubr                2436
                                                                                                                                                                                                                                         216:  0x0984                           
                                                                                                                                                                                                                                         217:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000047              Knock_Enable = True                                                                                                                                                                                                  218:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         219:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         220:  0xC81C   PopFieldU8              Knock_Enable

                                                                                                                                                                                                                                         221:  0x4007   Branch                  229
000048          Else                                                                                                                                                                                                                     

000049              MQTT.Publish("Status", "Accel Sensor Offline")                                                                                                                                                                       222:  0x8420   PushLiteral             32
                                                                                                                                                                                                                                         223:  0x842E   PushLiteral             46
                                                                                                                                                                                                                                         224:  0x000E   PushNothing             
                                                                                                                                                                                                                                         225:  0x1F0C   BranchSubr              1006

000050              Knock_Enable = False                                                                                                                                                                                                 226:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         227:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         228:  0xC81C   PopFieldU8              Knock_Enable

000051          End If
000052          Door_Status = ReedSwitch                                                                                                                                                                                                 229:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                         230:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         231:  0xC81E   PopFieldU8              Door_Status

000053          MQTT.Publish("Door", Door_Status) //publish door status on boot                                                                                                                                                          232:  0x8435   PushLiteral             53
                                                                                                                                                                                                                                         233:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         234:  0xB81E   PushFieldU8             Door_Status
                                                                                                                                                                                                                                         235:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         236:  0x000E   PushNothing             
                                                                                                                                                                                                                                         237:  0x1F08   BranchSubr              1014

000054          MQTT.use_queue = True //enable MQTT queueing - try to work around "stop publishing bug"                                                                                                                                  238:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         239:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         240:  0xC82C   PopFieldU8              use_queue

000055      End Event                                                                                                                                                                                                                    241:  0x0091   Return                  

000056      
                                                                                                                                                                                                                                         242:  0x0005                           EventType=NewGateway
                                                                                                                                                                                                                                         243:  0x0700                           EventCategory=Interrupt
000057      Shared Event NewGateway()                                                                                                                                                                                                    244:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000058          MQTT.Subscribe(Sub_Topic_Publish_Enable)                                                                                                                                                                                 245:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         246:  0xC400   PushFieldRef            Sub_Topic_Publish_Enable
                                                                                                                                                                                                                                         247:  0x000E   PushNothing             
                                                                                                                                                                                                                                         248:  0x5800   JumpSubr                1409
                                                                                                                                                                                                                                         249:  0x0581                           

000059          MQTT.Subscribe(Sub_Topic_Knock_Enable)                                                                                                                                                                                   250:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         251:  0xC404   PushFieldRef            Sub_Topic_Knock_Enable
                                                                                                                                                                                                                                         252:  0x000E   PushNothing             
                                                                                                                                                                                                                                         253:  0x5800   JumpSubr                1409
                                                                                                                                                                                                                                         254:  0x0581                           

000060      End Event                                                                                                                                                                                                                    255:  0x0091   Return                  

000061      
000062      Public Function getUptimeString() As String                                                                                                                                                                                  256:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         257:  0xE081   AllocateStackSpace      ValTypeSize=4, RefTypeSize=1

000063          //Kludge until DateTime Functions work
000064          Dim secs As Integer = Device.Uptime()                                                                                                                                                                                    258:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         259:  0x9000   PopLocalI32             secs

000065          
000066          Dim day As Integer = (secs / 86400).ToInteger                                                                                                                                                                            260:  0x8800   PushLocalI32            secs
                                                                                                                                                                                                                                         261:  0x0110   PushConstI32            86400 (0x00015180)
                                                                                                                                                                                                                                         262:  0x5180                           
                                                                                                                                                                                                                                         263:  0x0001                           
                                                                                                                                                                                                                                         264:  0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                         265:  0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                         266:  0x003B   FltDiv                  
                                                                                                                                                                                                                                         267:  0x007B   CvtFltToInt             
                                                                                                                                                                                                                                         268:  0x9001   PopLocalI32             day

000067          secs -= 86400 * day                                                                                                                                                                                                      269:  0x8800   PushLocalI32            secs
                                                                                                                                                                                                                                         270:  0x0110   PushConstI32            86400 (0x00015180)
                                                                                                                                                                                                                                         271:  0x5180                           
                                                                                                                                                                                                                                         272:  0x0001                           
                                                                                                                                                                                                                                         273:  0x8801   PushLocalI32            day
                                                                                                                                                                                                                                         274:  0x002A   IntMul                  
                                                                                                                                                                                                                                         275:  0x0031   IntSub                  
                                                                                                                                                                                                                                         276:  0x9000   PopLocalI32             secs

000068          Dim hrs As Integer = (secs / 3600).ToInteger                                                                                                                                                                             277:  0x8800   PushLocalI32            secs
                                                                                                                                                                                                                                         278:  0x0110   PushConstI32            3600 (0x00000E10)
                                                                                                                                                                                                                                         279:  0x0E10                           
                                                                                                                                                                                                                                         280:  0x0000                           
                                                                                                                                                                                                                                         281:  0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                         282:  0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                         283:  0x003B   FltDiv                  
                                                                                                                                                                                                                                         284:  0x007B   CvtFltToInt             
                                                                                                                                                                                                                                         285:  0x9002   PopLocalI32             hrs

000069          secs -= 3600 * hrs                                                                                                                                                                                                       286:  0x8800   PushLocalI32            secs
                                                                                                                                                                                                                                         287:  0x0110   PushConstI32            3600 (0x00000E10)
                                                                                                                                                                                                                                         288:  0x0E10                           
                                                                                                                                                                                                                                         289:  0x0000                           
                                                                                                                                                                                                                                         290:  0x8802   PushLocalI32            hrs
                                                                                                                                                                                                                                         291:  0x002A   IntMul                  
                                                                                                                                                                                                                                         292:  0x0031   IntSub                  
                                                                                                                                                                                                                                         293:  0x9000   PopLocalI32             secs

000070          Dim mins As Integer = (secs / 60).ToInteger                                                                                                                                                                              294:  0x8800   PushLocalI32            secs
                                                                                                                                                                                                                                         295:  0x803C   PushConstU10            60 (0x003C)
                                                                                                                                                                                                                                         296:  0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                         297:  0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                         298:  0x003B   FltDiv                  
                                                                                                                                                                                                                                         299:  0x007B   CvtFltToInt             
                                                                                                                                                                                                                                         300:  0x9003   PopLocalI32             mins

000071          secs -= 60 * mins                                                                                                                                                                                                        301:  0x8800   PushLocalI32            secs
                                                                                                                                                                                                                                         302:  0x803C   PushConstU10            60 (0x003C)
                                                                                                                                                                                                                                         303:  0x8803   PushLocalI32            mins
                                                                                                                                                                                                                                         304:  0x002A   IntMul                  
                                                                                                                                                                                                                                         305:  0x0031   IntSub                  
                                                                                                                                                                                                                                         306:  0x9000   PopLocalI32             secs

000072          
000073          Dim uptime_string As String = day.ToString+ ":" + hrs.ToString+ ":" + mins.ToString+ ":" + secs.ToString                                                                                                                 307:  0x8801   PushLocalI32            day
                                                                                                                                                                                                                                         308:  0x0080   CvtIntToStr             
                                                                                                                                                                                                                                         309:  0x8438   PushLiteral             56
                                                                                                                                                                                                                                         310:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         311:  0x8802   PushLocalI32            hrs
                                                                                                                                                                                                                                         312:  0x0080   CvtIntToStr             
                                                                                                                                                                                                                                         313:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         314:  0x8438   PushLiteral             56
                                                                                                                                                                                                                                         315:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         316:  0x8803   PushLocalI32            mins
                                                                                                                                                                                                                                         317:  0x0080   CvtIntToStr             
                                                                                                                                                                                                                                         318:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         319:  0x8438   PushLiteral             56
                                                                                                                                                                                                                                         320:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         321:  0x8800   PushLocalI32            secs
                                                                                                                                                                                                                                         322:  0x0080   CvtIntToStr             
                                                                                                                                                                                                                                         323:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         324:  0x9400   PopLocalRef             uptime_string

000074          Return uptime_string                                                                                                                                                                                                     325:  0x8C00   PushLocalRef            uptime_string
                                                                                                                                                                                                                                         326:  0x0095   ReturnRefType           

000075      End Function                                                                                                                                                                                                                 327:  0x0096   ReturnNothing           

000076      
000077      Public Sub setLedGreen(on As Boolean)                                                                                                                                                                                        328:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000078          If Not on Then                                                                                                                                                                                                           329:  0x8800   PushLocalI32            on
                                                                                                                                                                                                                                         330:  0x001D   BooNot                  
                                                                                                                                                                                                                                         331:  0x3C03   BranchFalse             335

000079              LedGreen = False //turn LED off                                                                                                                                                                                      332:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         333:  0x080A   PopAndSetDigitalPin     Pin10

                                                                                                                                                                                                                                         334:  0x4008   Branch                  343
000080          Else                                                                                                                                                                                                                     

000081              If Not Publish_data Then //dont turn on LED if not publishing (battery saving)                                                                                                                                       335:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         336:  0xB81D   PushFieldU8             Publish_data
                                                                                                                                                                                                                                         337:  0x001D   BooNot                  
                                                                                                                                                                                                                                         338:  0x3C02   BranchFalse             341

000082                  Return                                                                                                                                                                                                           339:  0x0091   Return                  

                                                                                                                                                                                                                                         340:  0x4002   Branch                  343
000083              Else                                                                                                                                                                                                                 

000084                  LedGreen = True //turn LED on                                                                                                                                                                                    341:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         342:  0x080A   PopAndSetDigitalPin     Pin10

000085              End If
000086          End If
000087      End Sub                                                                                                                                                                                                                      343:  0x0091   Return                  

000088      
000089      Public Function isKnockEnabled() As Boolean                                                                                                                                                                                  344:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000090          //should we be looking for door knocks?
000091          Return (Not ReedSwitch And Knock_Enable And (Device.Uptime() - TimeSinceKnockTriggered > KnockLockoutPeriod) And (Device.Uptime() - TimeSinceDoorClosed > DoorLockoutPeriod))                                            345:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                         346:  0x001D   BooNot                  
                                                                                                                                                                                                                                         347:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         348:  0xB81C   PushFieldU8             Knock_Enable
                                                                                                                                                                                                                                         349:  0x001F   IntAnd                  
                                                                                                                                                                                                                                         350:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         351:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         352:  0xC024   PushFieldI32            TimeSinceKnockTriggered
                                                                                                                                                                                                                                         353:  0x0031   IntSub                  
                                                                                                                                                                                                                                         354:  0x803C   PushConstU10            60 (0x003C)
                                                                                                                                                                                                                                         355:  0x0022   IntCmpGT                
                                                                                                                                                                                                                                         356:  0x001F   IntAnd                  
                                                                                                                                                                                                                                         357:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         358:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         359:  0xC028   PushFieldI32            TimeSinceDoorClosed
                                                                                                                                                                                                                                         360:  0x0031   IntSub                  
                                                                                                                                                                                                                                         361:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                                                                                         362:  0x0022   IntCmpGT                
                                                                                                                                                                                                                                         363:  0x001F   IntAnd                  
                                                                                                                                                                                                                                         364:  0x0092   ReturnValType           

000092      End Function                                                                                                                                                                                                                 365:  0x0093   Return0                 

000093      
                                                                                                                                                                                                                                         366:  0x0212                           EventType=AccelerometerInt1
                                                                                                                                                                                                                                         367:  0x0700                           EventCategory=Interrupt
000094      Shared Event AccelerometerInt1()                                                                                                                                                                                             368:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         369:  0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000095          If Not Knock_Enable Then //disable accelerator by not processing interrupts, if not enabled.                                                                                                                             370:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         371:  0xB81C   PushFieldU8             Knock_Enable
                                                                                                                                                                                                                                         372:  0x001D   BooNot                  
                                                                                                                                                                                                                                         373:  0x3C01   BranchFalse             375

000096              Return                                                                                                                                                                                                               374:  0x0091   Return                  

000097          End If
000098          While Not isKnockEnabled() //dont process interrupts while door is open or knock not enabled for some other reason                                                                                                       375:  0x000D   PushMe                  
                                                                                                                                                                                                                                         376:  0x5421   BranchSubrBack          344
                                                                                                                                                                                                                                         377:  0x001D   BooNot                  
                                                                                                                                                                                                                                         378:  0x3C08   BranchFalse             387

000099              Thread.Sleep(5000000) // 5 s delay                                                                                                                                                                                   379:  0x0110   PushConstI32            5000000 (0x004C4B40)
                                                                                                                                                                                                                                         380:  0x4B40                           
                                                                                                                                                                                                                                         381:  0x004C                           
                                                                                                                                                                                                                                         382:  0x00D5   ThreadSleep             
                                                                                                                                                                                                                                         383:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000100              Thread.ClearHardwareEvent()                                                                                                                                                                                          384:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         385:  0x00FA   SetCleartHardwareEvent  

000101          End While                                                                                                                                                                                                                386:  0x500C   BranchBack              375

000102          Dim intType As ListOfString = accel.GetIntSource() //get interrupt source                                                                                                                                                387:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         388:  0xC408   PushFieldRef            accel
                                                                                                                                                                                                                                         389:  0x5800   JumpSubr                3447
                                                                                                                                                                                                                                         390:  0x0D77                           
                                                                                                                                                                                                                                         391:  0x9400   PopLocalRef             intType

000103          While intType.Count> 0 //while we have uncleared interrupts                                                                                                                                                              392:  0x8C00   PushLocalRef            intType
                                                                                                                                                                                                                                         393:  0xC000   PushFieldI32            Offset=0
                                                                                                                                                                                                                                         394:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         395:  0x2C52   BranchLE                478

                                                                                                                                                                                                                                         396:  0x8C00   PushLocalRef            intType
                                                                                                                                                                                                                                         397:  0x000E   PushNothing             
                                                                                                                                                                                                                                         398:  0x0003   ExchangeRef             
                                                                                                                                                                                                                                         399:  0x0018   DupRef1                 
                                                                                                                                                                                                                                         400:  0xC000   PushFieldI32            Offset=0
                                                                                                                                                                                                                                         401:  0x0016   PushConstMinus1         
000104              For Each interrupt In intType                                                                                                                                                                                        402:  0x4C44   BranchForEach           471

000105                  //MQTT.Publish("Interrupt", interrupt)  //debug - careful, this can try to publish a lot!
000106                  Select interrupt                                                                                                                                                                                                 403:  0x8C01   PushLocalRef            interrupt
                                                                                                                                                                                                                                         404:  0x0122   CaseComputed            
                                                                                                                                                                                                                                         405:  0x0009                           CaseCommonClass=String
                                                                                                                                                                                                                                         406:  0x0003                           NumberOfCaseEntries=3
                                                                                                                                                                                                                                         407:  0x0036                           CaseElseBranch=462
                                                                                                                                                                                                                                         408:  0x003A                           LSH CaseValue=58
                                                                                                                                                                                                                                         409:  0x0000                           MSH CaseValue=58
                                                                                                                                                                                                                                         410:  0x0009                           CaseBranch=417
                                                                                                                                                                                                                                         411:  0x003D                           LSH CaseValue=61
                                                                                                                                                                                                                                         412:  0x0000                           MSH CaseValue=61
                                                                                                                                                                                                                                         413:  0x0017                           CaseBranch=431
                                                                                                                                                                                                                                         414:  0x0043                           LSH CaseValue=67
                                                                                                                                                                                                                                         415:  0x0000                           MSH CaseValue=67
                                                                                                                                                                                                                                         416:  0x002C                           CaseBranch=452

000107                      Case "shock"
000108                          'Transient interrupt occured
000109                          setLedGreen(True)                                                                                                                                                                                        417:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         418:  0x000D   PushMe                  
                                                                                                                                                                                                                                         419:  0x545C   BranchSubrBack          328

000110                          DetectDoorKnock()                                                                                                                                                                                        420:  0x000D   PushMe                  
                                                                                                                                                                                                                                         421:  0x1C3E   BranchSubr              484

000111                          setLedGreen(False)                                                                                                                                                                                       422:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         423:  0x000D   PushMe                  
                                                                                                                                                                                                                                         424:  0x5461   BranchSubrBack          328

000112                          accel.Shock() // Must read shock data to clear interrupt (returns ListOfString giving axis and +/-) but can ignore this                                                                                  425:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         426:  0xC408   PushFieldRef            accel
                                                                                                                                                                                                                                         427:  0x5800   JumpSubr                3685
                                                                                                                                                                                                                                         428:  0x0E65                           
                                                                                                                                                                                                                                         429:  0xE401   FreeStackSpace          ValTypeSize=0, RefTypeSize=1

                                                                                                                                                                                                                                         430:  0x4027   Branch                  470
000113                      Case "pulse"                                                                                                                                                                                                 

000114                          'click interrupt occured
000115                          setLedGreen(True)                                                                                                                                                                                        431:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         432:  0x000D   PushMe                  
                                                                                                                                                                                                                                         433:  0x546A   BranchSubrBack          328

000116                          If (accel.Pulse() = "double") Then // Must read pulse data to clear interrupt                                                                                                                            434:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         435:  0xC408   PushFieldRef            accel
                                                                                                                                                                                                                                         436:  0x5800   JumpSubr                3664
                                                                                                                                                                                                                                         437:  0x0E50                           
                                                                                                                                                                                                                                         438:  0x8440   PushLiteral             64
                                                                                                                                                                                                                                         439:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         440:  0x0058   StrCmpEQ                
                                                                                                                                                                                                                                         441:  0x3C04   BranchFalse             446

000117                              Trigger_DoorKnock(1000) //if it's a double click (pulse)                                                                                                                                             442:  0x83E8   PushConstU10            1000 (0x03E8)
                                                                                                                                                                                                                                         443:  0x000D   PushMe                  
                                                                                                                                                                                                                                         444:  0x1C39   BranchSubr              502

                                                                                                                                                                                                                                         445:  0x4002   Branch                  448
000118                          Else                                                                                                                                                                                                     

000119                              DetectDoorKnock() //single click (pulse)                                                                                                                                                             446:  0x000D   PushMe                  
                                                                                                                                                                                                                                         447:  0x1C24   BranchSubr              484

000120                          End If
000121                          setLedGreen(False)                                                                                                                                                                                       448:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         449:  0x000D   PushMe                  
                                                                                                                                                                                                                                         450:  0x547B   BranchSubrBack          328

                                                                                                                                                                                                                                         451:  0x4012   Branch                  470
000122                      Case "autosleep"                                                                                                                                                                                             

000123                          LedRed = True                                                                                                                                                                                            452:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         453:  0x0809   PopAndSetDigitalPin     Pin9

000124                          accel.Autosleep() // Must read Autosleep to clear interrupt                                                                                                                                              454:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         455:  0xC408   PushFieldRef            accel
                                                                                                                                                                                                                                         456:  0x5800   JumpSubr                3504
                                                                                                                                                                                                                                         457:  0x0DB0                           
                                                                                                                                                                                                                                         458:  0xE401   FreeStackSpace          ValTypeSize=0, RefTypeSize=1

000125                          LedRed = False                                                                                                                                                                                           459:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         460:  0x0809   PopAndSetDigitalPin     Pin9

                                                                                                                                                                                                                                         461:  0x4008   Branch                  470
000126                      Case Else                                                                                                                                                                                                    

000127                          LedRed = True                                                                                                                                                                                            462:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         463:  0x0809   PopAndSetDigitalPin     Pin9

000128                          MQTT.Publish("Unhandled Interrupt", interrupt)                                                                                                                                                           464:  0x8447   PushLiteral             71
                                                                                                                                                                                                                                         465:  0x8C01   PushLocalRef            interrupt
                                                                                                                                                                                                                                         466:  0x000E   PushNothing             
                                                                                                                                                                                                                                         467:  0x1E1A   BranchSubr              1006

000129                          //clear unhandled interupt here
000130                          LedRed = False                                                                                                                                                                                           468:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         469:  0x0809   PopAndSetDigitalPin     Pin9

000131                  End Select 
                                                                                                                                                                                                                                         470:  0x5045   BranchBack              402
000132              Next                                                                                                                                                                                                                 471:  0xE442   FreeStackSpace          ValTypeSize=2, RefTypeSize=2

000133              
000134              intType = accel.GetIntSource() //any more interupts?                                                                                                                                                                 472:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         473:  0xC408   PushFieldRef            accel
                                                                                                                                                                                                                                         474:  0x5800   JumpSubr                3447
                                                                                                                                                                                                                                         475:  0x0D77                           
                                                                                                                                                                                                                                         476:  0x9400   PopLocalRef             intType

000135              
000136          End While                                                                                                                                                                                                                477:  0x5056   BranchBack              392

000137          Thread.Sleep(300000) //Do not allow events to trigger too fast (300ms delay)                                                                                                                                             478:  0x0110   PushConstI32            300000 (0x000493E0)
                                                                                                                                                                                                                                         479:  0x93E0                           
                                                                                                                                                                                                                                         480:  0x0004                           
                                                                                                                                                                                                                                         481:  0x00D5   ThreadSleep             
                                                                                                                                                                                                                                         482:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000138      End Event                                                                                                                                                                                                                    483:  0x0091   Return                  

000139      
000140      Public Sub DetectDoorKnock()                                                                                                                                                                                                 484:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         485:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000141          Dim timeSinceLastTransient As Integer = Device.GetTimeSpan()                                                                                                                                                             486:  0x00FB   DeviceGetTimeSpan       
                                                                                                                                                                                                                                         487:  0x9000   PopLocalI32             timeSinceLastTransient

000142          'If at least two transients within 1.5 seconds (note sleep time is 2 seconds)
000143          If timeSinceLastTransient < 1500000 And timeSinceLastTransient > 0 Then //debounce door by setting timeSinceLastTransient > 0                                                                                            488:  0x8800   PushLocalI32            timeSinceLastTransient
                                                                                                                                                                                                                                         489:  0x0110   PushConstI32            1500000 (0x0016E360)
                                                                                                                                                                                                                                         490:  0xE360                           
                                                                                                                                                                                                                                         491:  0x0016                           
                                                                                                                                                                                                                                         492:  0x0024   IntCmpLT                
                                                                                                                                                                                                                                         493:  0x8800   PushLocalI32            timeSinceLastTransient
                                                                                                                                                                                                                                         494:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         495:  0x0022   IntCmpGT                
                                                                                                                                                                                                                                         496:  0x001F   IntAnd                  
                                                                                                                                                                                                                                         497:  0x3C03   BranchFalse             501

000144              Trigger_DoorKnock(1000)                                                                                                                                                                                              498:  0x83E8   PushConstU10            1000 (0x03E8)
                                                                                                                                                                                                                                         499:  0x000D   PushMe                  
                                                                                                                                                                                                                                         500:  0x1C01   BranchSubr              502

000145          End If
000146      End Sub                                                                                                                                                                                                                      501:  0x0091   Return                  

000147      
000148      Public Sub Trigger_DoorKnock(duration As Integer)                                                                                                                                                                            502:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000149          Thread.Sleep(duration * 1000) //sleep duration in ms (1 s seems about right)                                                                                                                                             503:  0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         504:  0x83E8   PushConstU10            1000 (0x03E8)
                                                                                                                                                                                                                                         505:  0x002A   IntMul                  
                                                                                                                                                                                                                                         506:  0x00D5   ThreadSleep             
                                                                                                                                                                                                                                         507:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000150          If isKnockEnabled() Then //If door is still closed etc (prevent door opening transients from triggering)                                                                                                                 508:  0x000D   PushMe                  
                                                                                                                                                                                                                                         509:  0x54A6   BranchSubrBack          344
                                                                                                                                                                                                                                         510:  0x3C09   BranchFalse             520

000151              TimeSinceKnockTriggered = Device.Uptime()                                                                                                                                                                            511:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         512:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         513:  0xD024   PopFieldI32             TimeSinceKnockTriggered

000152              MQTT.Publish_Priority("Doorknock", True, QoS.ExactlyOnce)                                                                                                                                                            514:  0x844D   PushLiteral             77
                                                                                                                                                                                                                                         515:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         516:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         517:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         518:  0x000E   PushNothing             
                                                                                                                                                                                                                                         519:  0x1E29   BranchSubr              1073

000153          End If
000154      End Sub                                                                                                                                                                                                                      520:  0x0091   Return                  

000155      
                                                                                                                                                                                                                                         521:  0x030C                           EventType=ReedSwitchChanged
                                                                                                                                                                                                                                         522:  0x0700                           EventCategory=Interrupt
000156      Shared Event ReedSwitchChanged()                                                                                                                                                                                             523:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000157          Thread.Sleep(20000) //debounce                                                                                                                                                                                           524:  0x0110   PushConstI32            20000 (0x00004E20)
                                                                                                                                                                                                                                         525:  0x4E20                           
                                                                                                                                                                                                                                         526:  0x0000                           
                                                                                                                                                                                                                                         527:  0x00D5   ThreadSleep             
                                                                                                                                                                                                                                         528:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000158          Thread.ClearHardwareEvent()                                                                                                                                                                                              529:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         530:  0x00FA   SetCleartHardwareEvent  

000159          LedGreen = True                                                                                                                                                                                                          531:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         532:  0x080A   PopAndSetDigitalPin     Pin10

000160          TimeSinceDoorClosed = Device.Uptime()                                                                                                                                                                                    533:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         534:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         535:  0xD028   PopFieldI32             TimeSinceDoorClosed

000161          TimeSinceKnockTriggered = 0                                                                                                                                                                                              536:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         537:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         538:  0xD024   PopFieldI32             TimeSinceKnockTriggered

000162          If Door_Status <> ReedSwitch Then                                                                                                                                                                                        539:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         540:  0xB81E   PushFieldU8             Door_Status
                                                                                                                                                                                                                                         541:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                         542:  0x200F   BranchEQ                558

000163              Door_Status = ReedSwitch                                                                                                                                                                                             543:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                         544:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         545:  0xC81E   PopFieldU8              Door_Status

000164              MQTT.Publish("Door", Door_Status)                                                                                                                                                                                    546:  0x8435   PushLiteral             53
                                                                                                                                                                                                                                         547:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         548:  0xB81E   PushFieldU8             Door_Status
                                                                                                                                                                                                                                         549:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         550:  0x000E   PushNothing             
                                                                                                                                                                                                                                         551:  0x1DCE   BranchSubr              1014

000165              MQTT.BeaconPublish(dataType.DOOR, Door_Status)                                                                                                                                                                       552:  0x800B   PushConstU10            11 (0x000B)
                                                                                                                                                                                                                                         553:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         554:  0xB81E   PushFieldU8             Door_Status
                                                                                                                                                                                                                                         555:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         556:  0x000E   PushNothing             
                                                                                                                                                                                                                                         557:  0x1F01   BranchSubr              1327

000166          End If
000167          LedGreen = False                                                                                                                                                                                                         558:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         559:  0x080A   PopAndSetDigitalPin     Pin10

000168          Do
000169              Thread.Sleep(1000000)                                                                                                                                                                                                560:  0x0110   PushConstI32            1000000 (0x000F4240)
                                                                                                                                                                                                                                         561:  0x4240                           
                                                                                                                                                                                                                                         562:  0x000F                           
                                                                                                                                                                                                                                         563:  0x00D5   ThreadSleep             
                                                                                                                                                                                                                                         564:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000170              Thread.ClearHardwareEvent()                                                                                                                                                                                          565:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         566:  0x00FA   SetCleartHardwareEvent  

000171          While (Device.Uptime() - MQTT.timeSincePublish < 2) //ignore other events for 2 seconds then publish status                                                                                                              567:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         568:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         569:  0xC030   PushFieldI32            timeSincePublish
                                                                                                                                                                                                                                         570:  0x0031   IntSub                  
                                                                                                                                                                                                                                         571:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         572:  0x3401   BranchGE                574
                                                                                                                                                                                                                                         573:  0x500E   BranchBack              560

000172          If Door_Status <> ReedSwitch Then                                                                                                                                                                                        574:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         575:  0xB81E   PushFieldU8             Door_Status
                                                                                                                                                                                                                                         576:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                         577:  0x200F   BranchEQ                593

000173              Door_Status = ReedSwitch                                                                                                                                                                                             578:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                         579:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         580:  0xC81E   PopFieldU8              Door_Status

000174              MQTT.Publish("Door", Door_Status)                                                                                                                                                                                    581:  0x8435   PushLiteral             53
                                                                                                                                                                                                                                         582:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         583:  0xB81E   PushFieldU8             Door_Status
                                                                                                                                                                                                                                         584:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         585:  0x000E   PushNothing             
                                                                                                                                                                                                                                         586:  0x1DAB   BranchSubr              1014

000175              MQTT.BeaconPublish(dataType.DOOR, Door_Status)                                                                                                                                                                       587:  0x800B   PushConstU10            11 (0x000B)
                                                                                                                                                                                                                                         588:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         589:  0xB81E   PushFieldU8             Door_Status
                                                                                                                                                                                                                                         590:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         591:  0x000E   PushNothing             
                                                                                                                                                                                                                                         592:  0x1EDE   BranchSubr              1327

000176          End If
000177      End Event                                                                                                                                                                                                                    593:  0x0091   Return                  

000178      
                                                                                                                                                                                                                                         594:  0x0003                           EventType=SubscriptionDelivery
                                                                                                                                                                                                                                         595:  0x0700                           EventCategory=Interrupt
000179      Shared Event SubscriptionDelivery()                                                                                                                                                                                          596:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         597:  0xE023   AllocateStackSpace      ValTypeSize=1, RefTypeSize=3

000180          Dim msg As Message = Lplan.GetDelivery()                                                                                                                                                                                 598:  0x00FE   LplanGetDelivery        
                                                                                                                                                                                                                                         599:  0x9400   PopLocalRef             msg

000181          'Dim payload As ListOfByte = msg.PayLoad
000182          Dim tmp As Boolean = True 'payload.ExtractFloat(0)                                                                                                                                                                       600:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         601:  0x9000   PopLocalI32             tmp

000183          Dim tmp_str As String = msg.PayLoad.ToString()                                                                                                                                                                           602:  0x8C00   PushLocalRef            msg
                                                                                                                                                                                                                                         603:  0xC404   PushFieldRef            Offset=4
                                                                                                                                                                                                                                         604:  0x006B   StrFromListOfByte       
                                                                                                                                                                                                                                         605:  0x9401   PopLocalRef             tmp_str

000184          Dim topic As String = msg.Topic.ToString()                                                                                                                                                                               606:  0x8C00   PushLocalRef            msg
                                                                                                                                                                                                                                         607:  0xC400   PushFieldRef            Offset=0
                                                                                                                                                                                                                                         608:  0x9402   PopLocalRef             topic

000185          'MQTT.Publish("Status", "Received Message: " + topic + " : " + tmp_str)
000186          If topic = Sub_Topic_Publish_Enable Then                                                                                                                                                                                 609:  0x8C02   PushLocalRef            topic
                                                                                                                                                                                                                                         610:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         611:  0xC400   PushFieldRef            Sub_Topic_Publish_Enable
                                                                                                                                                                                                                                         612:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         613:  0x0058   StrCmpEQ                
                                                                                                                                                                                                                                         614:  0x3C16   BranchFalse             637

000187              If Boolean.TryConvert(tmp_str, tmp) Then                                                                                                                                                                             615:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                                                                                         616:  0x8800   PushLocalI32            tmp
                                                                                                                                                                                                                                         617:  0x008A   TryCvtStrToBoo          
                                                                                                                                                                                                                                         618:  0x9000   PopLocalI32             tmp
                                                                                                                                                                                                                                         619:  0x3C0A   BranchFalse             630

000188                  Publish_data = tmp                                                                                                                                                                                               620:  0x8800   PushLocalI32            tmp
                                                                                                                                                                                                                                         621:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         622:  0xC81D   PopFieldU8              Publish_data

000189                  MQTT.Publish("Publish", Publish_data)                                                                                                                                                                            623:  0x8451   PushLiteral             81
                                                                                                                                                                                                                                         624:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         625:  0xB81D   PushFieldU8             Publish_data
                                                                                                                                                                                                                                         626:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         627:  0x000E   PushNothing             
                                                                                                                                                                                                                                         628:  0x1D81   BranchSubr              1014

                                                                                                                                                                                                                                         629:  0x4006   Branch                  636
000190              Else                                                                                                                                                                                                                 

000191                  MQTT.Publish("Publish", tmp_str + " :Boolean Conversion failed")                                                                                                                                                 630:  0x8451   PushLiteral             81
                                                                                                                                                                                                                                         631:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                                                                                         632:  0x8454   PushLiteral             84
                                                                                                                                                                                                                                         633:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         634:  0x000E   PushNothing             
                                                                                                                                                                                                                                         635:  0x1D72   BranchSubr              1006

000192              End If
                                                                                                                                                                                                                                         636:  0x403F   Branch                  700
000193          ElseIf topic = Sub_Topic_Knock_Enable Then                                                                                                                                                                               637:  0x8C02   PushLocalRef            topic
                                                                                                                                                                                                                                         638:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         639:  0xC404   PushFieldRef            Sub_Topic_Knock_Enable
                                                                                                                                                                                                                                         640:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         641:  0x0058   StrCmpEQ                
                                                                                                                                                                                                                                         642:  0x3C35   BranchFalse             696

000194              If Boolean.TryConvert(tmp_str, tmp) Then                                                                                                                                                                             643:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                                                                                         644:  0x8800   PushLocalI32            tmp
                                                                                                                                                                                                                                         645:  0x008A   TryCvtStrToBoo          
                                                                                                                                                                                                                                         646:  0x9000   PopLocalI32             tmp
                                                                                                                                                                                                                                         647:  0x3C29   BranchFalse             689

000195                  Knock_Enable = tmp                                                                                                                                                                                               648:  0x8800   PushLocalI32            tmp
                                                                                                                                                                                                                                         649:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         650:  0xC81C   PopFieldU8              Knock_Enable

000196                  If accel.online Then                                                                                                                                                                                             651:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         652:  0xC408   PushFieldRef            accel
                                                                                                                                                                                                                                         653:  0xB804   PushFieldU8             online
                                                                                                                                                                                                                                         654:  0x3C19   BranchFalse             680

000197                      MQTT.Publish("KnockEnable", Knock_Enable)                                                                                                                                                                    655:  0x845C   PushLiteral             92
                                                                                                                                                                                                                                         656:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         657:  0xB81C   PushFieldU8             Knock_Enable
                                                                                                                                                                                                                                         658:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         659:  0x000E   PushNothing             
                                                                                                                                                                                                                                         660:  0x1D61   BranchSubr              1014

000198                      If Knock_Enable Then //clear accelerator interrupts to enable it                                                                                                                                             661:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         662:  0xB81C   PushFieldU8             Knock_Enable
                                                                                                                                                                                                                                         663:  0x3C0F   BranchFalse             679

000199                          accel.Shock()                                                                                                                                                                                            664:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         665:  0xC408   PushFieldRef            accel
                                                                                                                                                                                                                                         666:  0x5800   JumpSubr                3685
                                                                                                                                                                                                                                         667:  0x0E65                           
                                                                                                                                                                                                                                         668:  0xE401   FreeStackSpace          ValTypeSize=0, RefTypeSize=1

000200                          accel.Pulse()                                                                                                                                                                                            669:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         670:  0xC408   PushFieldRef            accel
                                                                                                                                                                                                                                         671:  0x5800   JumpSubr                3664
                                                                                                                                                                                                                                         672:  0x0E50                           
                                                                                                                                                                                                                                         673:  0xE401   FreeStackSpace          ValTypeSize=0, RefTypeSize=1

000201                          accel.Autosleep()                                                                                                                                                                                        674:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         675:  0xC408   PushFieldRef            accel
                                                                                                                                                                                                                                         676:  0x5800   JumpSubr                3504
                                                                                                                                                                                                                                         677:  0x0DB0                           
                                                                                                                                                                                                                                         678:  0xE401   FreeStackSpace          ValTypeSize=0, RefTypeSize=1

000202                      End If
                                                                                                                                                                                                                                         679:  0x4008   Branch                  688
000203                  Else                                                                                                                                                                                                             

000204                      MQTT.Publish("Status", "Accel Sensor Offline")                                                                                                                                                               680:  0x8420   PushLiteral             32
                                                                                                                                                                                                                                         681:  0x842E   PushLiteral             46
                                                                                                                                                                                                                                         682:  0x000E   PushNothing             
                                                                                                                                                                                                                                         683:  0x1D42   BranchSubr              1006

000205                      MQTT.Publish("KnockEnable", "False")                                                                                                                                                                         684:  0x845C   PushLiteral             92
                                                                                                                                                                                                                                         685:  0x8404   PushLiteral             4
                                                                                                                                                                                                                                         686:  0x000E   PushNothing             
                                                                                                                                                                                                                                         687:  0x1D3E   BranchSubr              1006

000206                  End If
                                                                                                                                                                                                                                         688:  0x4006   Branch                  695
000207              Else                                                                                                                                                                                                                 

000208                  MQTT.Publish("KnockEnable", tmp_str + " :Boolean Conversion failed")                                                                                                                                             689:  0x845C   PushLiteral             92
                                                                                                                                                                                                                                         690:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                                                                                         691:  0x8454   PushLiteral             84
                                                                                                                                                                                                                                         692:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         693:  0x000E   PushNothing             
                                                                                                                                                                                                                                         694:  0x1D37   BranchSubr              1006

000209              End If  
                                                                                                                                                                                                                                         695:  0x4004   Branch                  700
000210          Else                                                                                                                                                                                                                     

000211              MQTT.Publish("Unknown", tmp_str)                                                                                                                                                                                     696:  0x8460   PushLiteral             96
                                                                                                                                                                                                                                         697:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                                                                                         698:  0x000E   PushNothing             
                                                                                                                                                                                                                                         699:  0x1D32   BranchSubr              1006

000212          End If
000213      End Event                                                                                                                                                                                                                    700:  0x0091   Return                  

000214      
                                                                                                                                                                                                                                         701:  0x0005                           TimeValue=5
                                                                                                                                                                                                                                         702:  0x0400                           EventCategory=TimeInMinutes
000215      Shared Event Status() RaiseEvent Every 5 Minutes //publish status of Knock Detection on/off, and publish on/off                                                                                                              703:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000216          MQTT.Publish("KnockEnable", Knock_Enable)                                                                                                                                                                                704:  0x845C   PushLiteral             92
                                                                                                                                                                                                                                         705:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         706:  0xB81C   PushFieldU8             Knock_Enable
                                                                                                                                                                                                                                         707:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         708:  0x000E   PushNothing             
                                                                                                                                                                                                                                         709:  0x1D30   BranchSubr              1014

000217          MQTT.Publish("PublishEnable", Publish_data)                                                                                                                                                                              710:  0x8463   PushLiteral             99
                                                                                                                                                                                                                                         711:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         712:  0xB81D   PushFieldU8             Publish_data
                                                                                                                                                                                                                                         713:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         714:  0x000E   PushNothing             
                                                                                                                                                                                                                                         715:  0x1D2A   BranchSubr              1014

000218      End Event                                                                                                                                                                                                                    716:  0x0091   Return                  

000219      
                                                                                                                                                                                                                                         717:  0x0001                           TimeValue=1
                                                                                                                                                                                                                                         718:  0x0400                           EventCategory=TimeInMinutes
000220      Shared Event Publish() RaiseEvent Every 1 Minutes                                                                                                                                                                            719:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000221          LedGreen = True                                                                                                                                                                                                          720:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         721:  0x080A   PopAndSetDigitalPin     Pin10

000222          If Door_Status <> ReedSwitch Then                                                                                                                                                                                        722:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         723:  0xB81E   PushFieldU8             Door_Status
                                                                                                                                                                                                                                         724:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                         725:  0x200F   BranchEQ                741

000223              Door_Status = ReedSwitch                                                                                                                                                                                             726:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                         727:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         728:  0xC81E   PopFieldU8              Door_Status

000224              MQTT.Publish("Door", Door_Status) //True = OPEN False = CLOSED                                                                                                                                                       729:  0x8435   PushLiteral             53
                                                                                                                                                                                                                                         730:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         731:  0xB81E   PushFieldU8             Door_Status
                                                                                                                                                                                                                                         732:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         733:  0x000E   PushNothing             
                                                                                                                                                                                                                                         734:  0x1D17   BranchSubr              1014

000225              MQTT.BeaconPublish(dataType.DOOR, Door_Status)                                                                                                                                                                       735:  0x800B   PushConstU10            11 (0x000B)
                                                                                                                                                                                                                                         736:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         737:  0xB81E   PushFieldU8             Door_Status
                                                                                                                                                                                                                                         738:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         739:  0x000E   PushNothing             
                                                                                                                                                                                                                                         740:  0x1E4A   BranchSubr              1327

000226          End If
000227          Select data                                                                                                                                                                                                              741:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         742:  0xC020   PushFieldI32            data
                                                                                                                                                                                                                                         743:  0x0122   CaseComputed            
                                                                                                                                                                                                                                         744:  0x0002                           CaseCommonClass=Byte
                                                                                                                                                                                                                                         745:  0x0004                           NumberOfCaseEntries=4
                                                                                                                                                                                                                                         746:  0x0068                           CaseElseBranch=851
                                                                                                                                                                                                                                         747:  0x0002                           CaseValue=2
                                                                                                                                                                                                                                         748:  0x0008                           CaseBranch=755
                                                                                                                                                                                                                                         749:  0x0003                           CaseValue=3
                                                                                                                                                                                                                                         750:  0x0027                           CaseBranch=786
                                                                                                                                                                                                                                         751:  0x0004                           CaseValue=4
                                                                                                                                                                                                                                         752:  0x003C                           CaseBranch=807
                                                                                                                                                                                                                                         753:  0x000B                           CaseValue=11
                                                                                                                                                                                                                                         754:  0x0052                           CaseBranch=829

000228              Case dataType.UPTIME                                                                                                                                                                                                 755:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000229                  Dim Uptime As Integer = Device.Uptime()                                                                                                                                                                          756:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         757:  0x9000   PopLocalI32             Uptime

000230                  If Publish_data Then                                                                                                                                                                                             758:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         759:  0xB81D   PushFieldU8             Publish_data
                                                                                                                                                                                                                                         760:  0x3C0A   BranchFalse             771

000231                      MQTT.Publish("Uptime", Uptime)                                                                                                                                                                               761:  0x8468   PushLiteral             104
                                                                                                                                                                                                                                         762:  0x8800   PushLocalI32            Uptime
                                                                                                                                                                                                                                         763:  0x1404   Box                     BoxInteger
                                                                                                                                                                                                                                         764:  0x000E   PushNothing             
                                                                                                                                                                                                                                         765:  0x1CF8   BranchSubr              1014

000232                      MQTT.Publish("UptimeString", getUptimeString())                                                                                                                                                              766:  0x846B   PushLiteral             107
                                                                                                                                                                                                                                         767:  0x000D   PushMe                  
                                                                                                                                                                                                                                         768:  0x5601   BranchSubrBack          256
                                                                                                                                                                                                                                         769:  0x000E   PushNothing             
                                                                                                                                                                                                                                         770:  0x1CEB   BranchSubr              1006

000233                  End If
000234                  If Uptime < Short.MaxValue Then                                                                                                                                                                                  771:  0x8800   PushLocalI32            Uptime
                                                                                                                                                                                                                                         772:  0x0110   PushConstI32            32767 (0x00007FFF)
                                                                                                                                                                                                                                         773:  0x7FFF                           
                                                                                                                                                                                                                                         774:  0x0000                           
                                                                                                                                                                                                                                         775:  0x3405   BranchGE                781

000235                      MQTT.BeaconPublish(dataType.UPTIME, Uptime)                                                                                                                                                                  776:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         777:  0x8800   PushLocalI32            Uptime
                                                                                                                                                                                                                                         778:  0x1404   Box                     BoxInteger
                                                                                                                                                                                                                                         779:  0x000E   PushNothing             
                                                                                                                                                                                                                                         780:  0x1E22   BranchSubr              1327

000236                  End If
000237                  data = dataType.BATTVOLTAGE                                                                                                                                                                                      781:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         782:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         783:  0xD020   PopFieldI32             data

                                                                                                                                                                                                                                         784:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                                                                                         785:  0x4048   Branch                  858
000238              Case dataType.BATTVOLTAGE                                                                                                                                                                                            786:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000239                  Dim BattVolt As Integer = Device.BatteryVoltage()                                                                                                                                                                787:  0x00ED   DeviceBatteryVoltage    
                                                                                                                                                                                                                                         788:  0x9000   PopLocalI32             BattVolt

000240                  If Publish_data Then                                                                                                                                                                                             789:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         790:  0xB81D   PushFieldU8             Publish_data
                                                                                                                                                                                                                                         791:  0x3C05   BranchFalse             797

000241                      MQTT.Publish("BatteryVoltage", BattVolt)                                                                                                                                                                     792:  0x8470   PushLiteral             112
                                                                                                                                                                                                                                         793:  0x8800   PushLocalI32            BattVolt
                                                                                                                                                                                                                                         794:  0x1404   Box                     BoxInteger
                                                                                                                                                                                                                                         795:  0x000E   PushNothing             
                                                                                                                                                                                                                                         796:  0x1CD9   BranchSubr              1014

000242                  End If
000243                  MQTT.BeaconPublish(dataType.BATTVOLTAGE, BattVolt)                                                                                                                                                               797:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         798:  0x8800   PushLocalI32            BattVolt
                                                                                                                                                                                                                                         799:  0x1404   Box                     BoxInteger
                                                                                                                                                                                                                                         800:  0x000E   PushNothing             
                                                                                                                                                                                                                                         801:  0x1E0D   BranchSubr              1327

000244                  data = dataType.TEMPERATURE                                                                                                                                                                                      802:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         803:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         804:  0xD020   PopFieldI32             data

                                                                                                                                                                                                                                         805:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                                                                                         806:  0x4033   Branch                  858
000245              Case dataType.TEMPERATURE                                                                                                                                                                                            807:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000246                  Dim TempC As Float = TempSensor.GetTemp                                                                                                                                                                          808:  0x000E   PushNothing             
                                                                                                                                                                                                                                         809:  0x1C35   BranchSubr              863
                                                                                                                                                                                                                                         810:  0x9000   PopLocalI32             TempC

000247                  If Publish_data Then                                                                                                                                                                                             811:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         812:  0xB81D   PushFieldU8             Publish_data
                                                                                                                                                                                                                                         813:  0x3C05   BranchFalse             819

000248                      MQTT.Publish("Temperature", TempC)                                                                                                                                                                           814:  0x8475   PushLiteral             117
                                                                                                                                                                                                                                         815:  0x8800   PushLocalI32            TempC
                                                                                                                                                                                                                                         816:  0x1406   Box                     BoxFloat
                                                                                                                                                                                                                                         817:  0x000E   PushNothing             
                                                                                                                                                                                                                                         818:  0x1CC3   BranchSubr              1014

000249                  End If
000250                  MQTT.BeaconPublish(dataType.TEMPERATURE, TempC)                                                                                                                                                                  819:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         820:  0x8800   PushLocalI32            TempC
                                                                                                                                                                                                                                         821:  0x1406   Box                     BoxFloat
                                                                                                                                                                                                                                         822:  0x000E   PushNothing             
                                                                                                                                                                                                                                         823:  0x1DF7   BranchSubr              1327

000251                  data = dataType.DOOR                                                                                                                                                                                             824:  0x800B   PushConstU10            11 (0x000B)
                                                                                                                                                                                                                                         825:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         826:  0xD020   PopFieldI32             data

                                                                                                                                                                                                                                         827:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                                                                                         828:  0x401D   Branch                  858
000252              Case dataType.DOOR                                                                                                                                                                                                   

000253                  Door_Status = ReedSwitch                                                                                                                                                                                         829:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                         830:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         831:  0xC81E   PopFieldU8              Door_Status

000254                  If Publish_data Then                                                                                                                                                                                             832:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         833:  0xB81D   PushFieldU8             Publish_data
                                                                                                                                                                                                                                         834:  0x3C06   BranchFalse             841

000255                      MQTT.Publish("Door", Door_Status) //True = OPEN False = CLOSED                                                                                                                                               835:  0x8435   PushLiteral             53
                                                                                                                                                                                                                                         836:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         837:  0xB81E   PushFieldU8             Door_Status
                                                                                                                                                                                                                                         838:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         839:  0x000E   PushNothing             
                                                                                                                                                                                                                                         840:  0x1CAD   BranchSubr              1014

000256                  End If
000257                  MQTT.BeaconPublish(dataType.DOOR, Door_Status)                                                                                                                                                                   841:  0x800B   PushConstU10            11 (0x000B)
                                                                                                                                                                                                                                         842:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         843:  0xB81E   PushFieldU8             Door_Status
                                                                                                                                                                                                                                         844:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         845:  0x000E   PushNothing             
                                                                                                                                                                                                                                         846:  0x1DE0   BranchSubr              1327

000258                  data = dataType.UPTIME                                                                                                                                                                                           847:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         848:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         849:  0xD020   PopFieldI32             data

                                                                                                                                                                                                                                         850:  0x4007   Branch                  858
000259              Case Else                                                                                                                                                                                                            

000260                  MQTT.Publish("Status", "OnLine")                                                                                                                                                                                 851:  0x8420   PushLiteral             32
                                                                                                                                                                                                                                         852:  0x8479   PushLiteral             121
                                                                                                                                                                                                                                         853:  0x000E   PushNothing             
                                                                                                                                                                                                                                         854:  0x1C97   BranchSubr              1006

000261                  data = dataType.UPTIME                                                                                                                                                                                           855:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         856:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         857:  0xD020   PopFieldI32             data

000262          End Select
000263          LedGreen = False                                                                                                                                                                                                         858:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         859:  0x080A   PopAndSetDigitalPin     Pin10

000264      End Event                                                                                                                                                                                                                    860:  0x0091   Return                  

000265  End Class                                                                                                                                                                                                                        123:  0x0097   ReturnMe                


****** BLOCKS and VARIABLES for Main
    Block Class (Line 14:265)
        Main            Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        String          Version         (Literal="V2.1")
        dataType        data            (SharedValTypVariableOffset=32)
        String          Sub_Topic_Publis(SharedRefTypVariableOffset=0)
        String          Sub_Topic_Knock_(SharedRefTypVariableOffset=4)
        Boolean         Knock_Enable    (SharedValTypVariableOffset=28)
        Boolean         Publish_data    (SharedValTypVariableOffset=29)
        MMA8652         accel           (SharedRefTypVariableOffset=8)
        Integer         TimeSinceKnockTr(SharedValTypVariableOffset=36)
        Integer         TimeSinceDoorClo(SharedValTypVariableOffset=40)
        Integer         KnockLockoutPeri(Literal=60)
        Integer         DoorLockoutPerio(Literal=5)
        Boolean         Door_Status     (SharedValTypVariableOffset=30)
        Block Event Boot (Line 29:55)
            Block If Then  (Line 39:48)
            End Block
            Block Else (Line 48:51)
            End Block
        End Block
        Block Event NewGateway (Line 57:60)
        End Block
        Block Function getUptimeString (Line 62:75)
            Integer         secs            (LocalValTypVariableOffset=0)
            Integer         day             (LocalValTypVariableOffset=1)
            Integer         hrs             (LocalValTypVariableOffset=2)
            Integer         mins            (LocalValTypVariableOffset=3)
            String          uptime_string   (LocalRefTypVariableOffset=0)
        End Block
        Block Sub setLedGreen (Line 77:87)
            Boolean         on              (LocalValTypVariableOffset=0)
            Block If Then  (Line 78:80)
            End Block
            Block Else (Line 80:86)
                Block If Then  (Line 81:83)
                End Block
                Block Else (Line 83:85)
                End Block
            End Block
        End Block
        Block Function isKnockEnabled (Line 89:92)
        End Block
        Block Event AccelerometerInt1 (Line 94:138)
            ListOfString    intType         (LocalRefTypVariableOffset=0)
            Block If Then  (Line 95:97)
            End Block
            Block While  (Line 98:101)
            End Block
            Block While  (Line 103:136)
                Block For Each  (Line 104:132)
                    String          interrupt       (LocalRefTypVariableOffset=1)
                End Block
            End Block
        End Block
        Block Sub DetectDoorKnock (Line 140:146)
            Integer         timeSinceLastTra(LocalValTypVariableOffset=0)
            Block If Then  (Line 143:145)
            End Block
        End Block
        Block Sub Trigger_DoorKnock (Line 148:154)
            Integer         duration        (LocalValTypVariableOffset=0)
            Block If Then  (Line 150:153)
            End Block
        End Block
        Block Event ReedSwitchChanged (Line 156:177)
            Block If Then  (Line 162:166)
            End Block
            Block Do (Line 168:171)
            End Block
            Block If Then  (Line 172:176)
            End Block
        End Block
        Block Event SubscriptionDelivery (Line 179:213)
            Message         msg             (LocalRefTypVariableOffset=0)
            Boolean         tmp             (LocalValTypVariableOffset=0)
            String          tmp_str         (LocalRefTypVariableOffset=1)
            String          topic           (LocalRefTypVariableOffset=2)
            Block If Then  (Line 186:193)
                Block If Then  (Line 187:190)
                End Block
                Block Else (Line 190:192)
                End Block
            End Block
            Block ElseIf (Line 193:210)
                Block If Then  (Line 194:207)
                    Block If Then  (Line 196:203)
                        Block If Then  (Line 198:202)
                        End Block
                    End Block
                    Block Else (Line 203:206)
                    End Block
                End Block
                Block Else (Line 207:209)
                End Block
            End Block
            Block Else (Line 210:212)
            End Block
        End Block
        Block Event Status (Line 215:218)
        End Block
        Block Event Publish (Line 220:264)
            Block If Then  (Line 222:226)
            End Block
        End Block
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000001  Class TempSensor                                                                                                                                                                                                                 861:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000002      // Function returns the temperature in degree celcius or 
000003      // Float.NaN if something is wrong
000004      Shared Function GetTemp() As Float                                                                                                                                                                                           863:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         864:  0xE022   AllocateStackSpace      ValTypeSize=1, RefTypeSize=2

000005          // Define the properties of the I2C peripheral and device address
000006          Dim sensor As I2c
000007          sensor = I2c.Create(250000, Pin.SCL, Pin.SDA, 0x48)                                                                                                                                                                      865:  0x0110   PushConstI32            250000 (0x0003D090)
                                                                                                                                                                                                                                         866:  0xD090                           
                                                                                                                                                                                                                                         867:  0x0003                           
                                                                                                                                                                                                                                         868:  0x800D   PushConstU10            13 (0x000D)
                                                                                                                                                                                                                                         869:  0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                                                                                         870:  0x8048   PushConstU10            72 (0x0048)
                                                                                                                                                                                                                                         871:  0x803B   PushConstU10            59 (0x003B)
                                                                                                                                                                                                                                         872:  0x0010   ClassNew                
                                                                                                                                                                                                                                         873:  0x9400   PopLocalRef             sensor

000008          
000009          // Power up the sensor and give it some time to settle
000010          Device.EnableTempSensor()                                                                                                                                                                                                874:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         875:  0x00F0   DeviceEnableTemp        

000011          Thread.Sleep(40000) // See page 13 of the datasheet                                                                                                                                                                      876:  0x0110   PushConstI32            40000 (0x00009C40)
                                                                                                                                                                                                                                         877:  0x9C40                           
                                                                                                                                                                                                                                         878:  0x0000                           
                                                                                                                                                                                                                                         879:  0x00D5   ThreadSleep             
                                                                                                                                                                                                                                         880:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000012          
000013          // Read the sensor (only 2 bytes to read
000014          Dim res As ListOfByte = sensor.Read(2)                                                                                                                                                                                   881:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         882:  0x8C00   PushLocalRef            sensor
                                                                                                                                                                                                                                         883:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         884:  0x00E0   I2cDeviceRead           
                                                                                                                                                                                                                                         885:  0x9401   PopLocalRef             res

000015          
000016          // See Tmp102 documentation how to interpret the data (page 8)
000017          Dim temp As Float = Float.NaN                                                                                                                                                                                            886:  0x0110   PushConstI32            -4194304 (0xFFC00000)
                                                                                                                                                                                                                                         887:  0x0000                           
                                                                                                                                                                                                                                         888:  0xFFC0                           
                                                                                                                                                                                                                                         889:  0x9000   PopLocalI32             temp

000018          If res <> Nothing Then                                                                                                                                                                                                   890:  0x8C01   PushLocalRef            res
                                                                                                                                                                                                                                         891:  0x000E   PushNothing             
                                                                                                                                                                                                                                         892:  0x000B   RefCmpNE                
                                                                                                                                                                                                                                         893:  0x3C16   BranchFalse             916
                                                                                                                                                                                                                                         894:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000019              // Shift the partial part to the right nibble
000020              Dim part As Float = res(1) >> 4                                                                                                                                                                                      895:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         896:  0x8C01   PushLocalRef            res
                                                                                                                                                                                                                                         897:  0x00B4   ListItemGet             
                                                                                                                                                                                                                                         898:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         899:  0x002F   IntShr                  
                                                                                                                                                                                                                                         900:  0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                         901:  0x9001   PopLocalI32             part

000021              // Temperature partial is 1/16*n where n is between 0 and 15            
000022              part = part / 16                                                                                                                                                                                                     902:  0x8801   PushLocalI32            part
                                                                                                                                                                                                                                         903:  0xEA10   PushConstFlt            16.0
                                                                                                                                                                                                                                         904:  0x003B   FltDiv                  
                                                                                                                                                                                                                                         905:  0x9001   PopLocalI32             part

000023              // Sign extend the byte to an integer
000024              temp = res(0).SignExtend() + part                                                                                                                                                                                    906:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         907:  0x8C01   PushLocalRef            res
                                                                                                                                                                                                                                         908:  0x00B4   ListItemGet             
                                                                                                                                                                                                                                         909:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         910:  0x0005   SignExtend              
                                                                                                                                                                                                                                         911:  0x8801   PushLocalI32            part
                                                                                                                                                                                                                                         912:  0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                         913:  0x0039   FltAdd                  
                                                                                                                                                                                                                                         914:  0x9000   PopLocalI32             temp

                                                                                                                                                                                                                                         915:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
000025          End If                                                                                                                                                                                                                   

000026          
000027          // power off
000028          Device.DisableTempSensor()                                                                                                                                                                                               916:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         917:  0x00F0   DeviceEnableTemp        

000029          Return temp                                                                                                                                                                                                              918:  0x8800   PushLocalI32            temp
                                                                                                                                                                                                                                         919:  0x0092   ReturnValType           

000030      End Function                                                                                                                                                                                                                 920:  0x0093   Return0                 

000031      
000032      Shared Function GetDieTemp() As Float                                                                                                                                                                                        921:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000033          // Just get the temperature and return
000034          Return Device.TempDie                                                                                                                                                                                                    922:  0x00F7   DeviceTempDie           
                                                                                                                                                                                                                                         923:  0x0092   ReturnValType           

000035      End Function                                                                                                                                                                                                                 924:  0x0093   Return0                 

000036      
000037      Shared Function ToFarenheit(celcius As Float) As Float                                                                                                                                                                       925:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000038          Return (celcius * 9) / 5 + 32                                                                                                                                                                                            926:  0x8800   PushLocalI32            celcius
                                                                                                                                                                                                                                         927:  0xEA09   PushConstFlt            9.0
                                                                                                                                                                                                                                         928:  0x003C   FltMul                  
                                                                                                                                                                                                                                         929:  0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         930:  0x003B   FltDiv                  
                                                                                                                                                                                                                                         931:  0xEA20   PushConstFlt            32.0
                                                                                                                                                                                                                                         932:  0x0039   FltAdd                  
                                                                                                                                                                                                                                         933:  0x0092   ReturnValType           

000039      End Function                                                                                                                                                                                                                 934:  0x0093   Return0                 

000040      
000041      Shared Function ToCelcius(farenheit As Float) As Float                                                                                                                                                                       935:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000042          Return (farenheit - 32) * 5 / 9                                                                                                                                                                                          936:  0x8800   PushLocalI32            farenheit
                                                                                                                                                                                                                                         937:  0xEA20   PushConstFlt            32.0
                                                                                                                                                                                                                                         938:  0x003F   FltSub                  
                                                                                                                                                                                                                                         939:  0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         940:  0x003C   FltMul                  
                                                                                                                                                                                                                                         941:  0xEA09   PushConstFlt            9.0
                                                                                                                                                                                                                                         942:  0x003B   FltDiv                  
                                                                                                                                                                                                                                         943:  0x0092   ReturnValType           

000043      End Function                                                                                                                                                                                                                 944:  0x0093   Return0                 

000044      
000045  End Class                                                                                                                                                                                                                        862:  0x0097   ReturnMe                


****** BLOCKS and VARIABLES for TempSensor
    Block Class (Line 1:45)
        TempSensor      Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        Block Function GetTemp (Line 4:30)
            I2c             sensor          (LocalRefTypVariableOffset=0)
            ListOfByte      res             (LocalRefTypVariableOffset=1)
            Float           temp            (LocalValTypVariableOffset=0)
            Block If Then  (Line 18:25)
                Float           part            (LocalValTypVariableOffset=1)
            End Block
        End Block
        Block Function GetDieTemp (Line 32:35)
        End Block
        Block Function ToFarenheit (Line 37:39)
            Float           celcius         (LocalValTypVariableOffset=0)
        End Block
        Block Function ToCelcius (Line 41:43)
            Float           farenheit       (LocalValTypVariableOffset=0)
        End Block
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000003  Enum dataType As Byte
000004      NONE = 0
000005      VERSION = 1 //default beacon data for MQTT
000006      UPTIME = 2
000007      BATTVOLTAGE = 3
000008      TEMPERATURE = 4
000009      TEMPERATURE2 = 5
000010      HUMIDITY = 6
000011      DEWPOINT = 7
000012      PRESSURE = 8
000013      ALTITUDE = 9
000014      MOTION = 10
000015      DOOR = 11
000016      KNOCK = 12
000017      LOWBATT = 13
000018  End Enum

****** BLOCKS and VARIABLES for dataType
    Block Struct (Line 3:18)
        dataType        NONE            (Literal=0)
        dataType        VERSION         (Literal=1)
        dataType        UPTIME          (Literal=2)
        dataType        BATTVOLTAGE     (Literal=3)
        dataType        TEMPERATURE     (Literal=4)
        dataType        TEMPERATURE2    (Literal=5)
        dataType        HUMIDITY        (Literal=6)
        dataType        DEWPOINT        (Literal=7)
        dataType        PRESSURE        (Literal=8)
        dataType        ALTITUDE        (Literal=9)
        dataType        MOTION          (Literal=10)
        dataType        DOOR            (Literal=11)
        dataType        KNOCK           (Literal=12)
        dataType        LOWBATT         (Literal=13)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000020  Class MQTT_Message                                                                                                                                                                                                               945:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000021      //class to act as MQTT message structure
000022      Public __topic As String
000023      Public __payload As ListOfByte
000024      Public __quality As QoS
000025      Public __exact As Boolean
000026      Public device_specific As String = "MCThings/" + Device.mcUID().ToString("X8") + "/"                                                                                                                                         946:  0x840F   PushLiteral             15
                                                                                                                                                                                                                                         947:  0x8413   PushLiteral             19
                                                                                                                                                                                                                                         948:  0x00F8   DeviceUID               
                                                                                                                                                                                                                                         949:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         950:  0x0069   StrFormat               
                                                                                                                                                                                                                                         951:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         952:  0x847C   PushLiteral             124
                                                                                                                                                                                                                                         953:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         954:  0xB408   PopMemberRef            device_specific

000027      
000028      Public Sub New()                                                                                                                                                                                                             956:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000029      End Sub                                                                                                                                                                                                                      957:  0x0097   ReturnMe                

000030      
000031      Public Sub New(_topic As String, _text As String, _quality As QoS, _exact As Boolean)                                                                                                                                        958:  0x1822   EntryPoint              ValTypParams=2, RefTypParams=2

000032          __topic = _topic                                                                                                                                                                                                         959:  0x8C00   PushLocalRef            _topic
                                                                                                                                                                                                                                         960:  0xB400   PopMemberRef            __topic

000033          __payload = New ListOfByte()                                                                                                                                                                                             961:  0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                         962:  0x0010   ClassNew                
                                                                                                                                                                                                                                         963:  0xB404   PopMemberRef            __payload

000034          __payload.Add(_text)                                                                                                                                                                                                     964:  0x8C01   PushLocalRef            _text
                                                                                                                                                                                                                                         965:  0xA404   PushMemberRef           __payload
                                                                                                                                                                                                                                         966:  0x00A6   ListAddString           

000035          __quality = _quality                                                                                                                                                                                                     967:  0x8800   PushLocalI32            _quality
                                                                                                                                                                                                                                         968:  0xB010   PopMemberI32            __quality

000036          __exact = _exact                                                                                                                                                                                                         969:  0x8801   PushLocalI32            _exact
                                                                                                                                                                                                                                         970:  0xA80C   PopMemberU8             __exact

000037      End Sub                                                                                                                                                                                                                      971:  0x0097   ReturnMe                

000038      
000039      Public Function topic() As String                                                                                                                                                                                            972:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000040          If exact() Then                                                                                                                                                                                                          973:  0x000D   PushMe                  
                                                                                                                                                                                                                                         974:  0x1C11   BranchSubr              992
                                                                                                                                                                                                                                         975:  0x3C03   BranchFalse             979

000041              Return __topic                                                                                                                                                                                                       976:  0xA400   PushMemberRef           __topic
                                                                                                                                                                                                                                         977:  0x0095   ReturnRefType           

                                                                                                                                                                                                                                         978:  0x4004   Branch                  983
000042          Else                                                                                                                                                                                                                     

000043              Return (device_specific + __topic)                                                                                                                                                                                   979:  0xA408   PushMemberRef           device_specific
                                                                                                                                                                                                                                         980:  0xA400   PushMemberRef           __topic
                                                                                                                                                                                                                                         981:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         982:  0x0095   ReturnRefType           

000044          End If
000045      End Function                                                                                                                                                                                                                 983:  0x0096   ReturnNothing           

000046      
000047      Public Function payload() As ListOfByte                                                                                                                                                                                      984:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000048          Return __payload                                                                                                                                                                                                         985:  0xA404   PushMemberRef           __payload
                                                                                                                                                                                                                                         986:  0x0095   ReturnRefType           

000049      End Function                                                                                                                                                                                                                 987:  0x0096   ReturnNothing           

000050      
000051      Public Function quality() As QoS                                                                                                                                                                                             988:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000052          Return __quality                                                                                                                                                                                                         989:  0xA010   PushMemberI32           __quality
                                                                                                                                                                                                                                         990:  0x0092   ReturnValType           

000053      End Function                                                                                                                                                                                                                 991:  0x0093   Return0                 

000054      
000055      Public Function exact() As Boolean                                                                                                                                                                                           992:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000056          Return __exact                                                                                                                                                                                                           993:  0x980C   PushMemberU8            __exact
                                                                                                                                                                                                                                         994:  0x0092   ReturnValType           

000057      End Function                                                                                                                                                                                                                 995:  0x0093   Return0                 

000058      
000059      Public Sub Publish()                                                                                                                                                                                                         996:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000060          Lplan.Publish(topic(), __payload, __quality)                                                                                                                                                                             997:  0x000D   PushMe                  
                                                                                                                                                                                                                                         998:  0x541B   BranchSubrBack          972
                                                                                                                                                                                                                                         999:  0xA404   PushMemberRef           __payload
                                                                                                                                                                                                                                         1000: 0xA010   PushMemberI32           __quality
                                                                                                                                                                                                                                         1001: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1002: 0x0101   LplanPublish            

000061      End Sub                                                                                                                                                                                                                      1003: 0x0091   Return                  

000062      
000063  End Class                                                                                                                                                                                                                        955:  0x0097   ReturnMe                


****** BLOCKS and VARIABLES for MQTT_Message
    Block Class (Line 20:63)
        MQTT_Message    Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        String          __topic         (MemberRefTypVariableOffset=0)
        ListOfByte      __payload       (MemberRefTypVariableOffset=4)
        QoS             __quality       (MemberValTypVariableOffset=16)
        Boolean         __exact         (MemberValTypVariableOffset=12)
        String          device_specific (MemberRefTypVariableOffset=8)
        Block Sub New (Line 28:29)
        End Block
        Block Sub New (Line 31:37)
            String          _topic          (LocalRefTypVariableOffset=0)
            String          _text           (LocalRefTypVariableOffset=1)
            QoS             _quality        (LocalValTypVariableOffset=0)
            Boolean         _exact          (LocalValTypVariableOffset=1)
        End Block
        Block Function topic (Line 39:45)
            Block If Then  (Line 40:42)
            End Block
            Block Else (Line 42:44)
            End Block
        End Block
        Block Function payload (Line 47:49)
        End Block
        Block Function quality (Line 51:53)
        End Block
        Block Function exact (Line 55:57)
        End Block
        Block Sub Publish (Line 59:61)
        End Block
        Total Size of Member data including base classes = 20.
    End Block


*************************************************************************************************************

000065  Class MQTT                                                                                                                                                                                                                       1004: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000066      //MQTT Publishing class
000067      Shared use_queue As Boolean //Use publish queueing to prevent module becoming unresponsive (bug)
000068      Shared MQTT_priority As Boolean //Publish immediately (bypass queue)
000069      Shared queue As ListOfObject //FIFO
000070      Shared timeSincePublish As Integer //publishing timer
000071      Shared running As Boolean //crude mutex
000072      
000073      Shared Sub Publish(topic As String, text As String)                                                                                                                                                                          1006: 0x1802   EntryPoint              ValTypParams=0, RefTypParams=2

000074          MQTT.Publish_String(topic, text, QoS.AtMostOnce, False)                                                                                                                                                                  1007: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         1008: 0x8C01   PushLocalRef            text
                                                                                                                                                                                                                                         1009: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1010: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1011: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1012: 0x1CAF   BranchSubr              1188

000075      End Sub                                                                                                                                                                                                                      1013: 0x0091   Return                  

000076      
000077      Shared Sub Publish(topic As String, value As Object)                                                                                                                                                                         1014: 0x1802   EntryPoint              ValTypParams=0, RefTypParams=2
                                                                                                                                                                                                                                         1015: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000078          Dim text As String = value.ToString()                                                                                                                                                                                    1016: 0x8C01   PushLocalRef            value
                                                                                                                                                                                                                                         1017: 0x0081   CvtObjToStr             
                                                                                                                                                                                                                                         1018: 0x9402   PopLocalRef             text

000079          MQTT.Publish_String(topic, text, QoS.AtMostOnce, False)                                                                                                                                                                  1019: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         1020: 0x8C02   PushLocalRef            text
                                                                                                                                                                                                                                         1021: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1022: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1023: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1024: 0x1CA3   BranchSubr              1188

000080      End Sub                                                                                                                                                                                                                      1025: 0x0091   Return                  

000081      
000082      Shared Sub Publish(topic As String, text As String, quality As QoS)                                                                                                                                                          1026: 0x1812   EntryPoint              ValTypParams=1, RefTypParams=2

000083          MQTT.Publish_String(topic, text, quality, False)                                                                                                                                                                         1027: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         1028: 0x8C01   PushLocalRef            text
                                                                                                                                                                                                                                         1029: 0x8800   PushLocalI32            quality
                                                                                                                                                                                                                                         1030: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1031: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1032: 0x1C9B   BranchSubr              1188

000084      End Sub                                                                                                                                                                                                                      1033: 0x0091   Return                  

000085      
000086      Shared Sub Publish(topic As String, value As Object, quality As QoS)                                                                                                                                                         1034: 0x1812   EntryPoint              ValTypParams=1, RefTypParams=2
                                                                                                                                                                                                                                         1035: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000087          Dim text As String = value.ToString()                                                                                                                                                                                    1036: 0x8C01   PushLocalRef            value
                                                                                                                                                                                                                                         1037: 0x0081   CvtObjToStr             
                                                                                                                                                                                                                                         1038: 0x9402   PopLocalRef             text

000088          MQTT.Publish_String(topic, text, quality, False)                                                                                                                                                                         1039: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         1040: 0x8C02   PushLocalRef            text
                                                                                                                                                                                                                                         1041: 0x8800   PushLocalI32            quality
                                                                                                                                                                                                                                         1042: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1043: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1044: 0x1C8F   BranchSubr              1188

000089      End Sub                                                                                                                                                                                                                      1045: 0x0091   Return                  

000090      
000091      Shared Sub Publish_exact(topic As String, text As String)                                                                                                                                                                    1046: 0x1802   EntryPoint              ValTypParams=0, RefTypParams=2

000092          MQTT.Publish_String(topic, text, QoS.AtMostOnce, True)                                                                                                                                                                   1047: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         1048: 0x8C01   PushLocalRef            text
                                                                                                                                                                                                                                         1049: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1050: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1051: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1052: 0x1C87   BranchSubr              1188

000093      End Sub                                                                                                                                                                                                                      1053: 0x0091   Return                  

000094      
000095      Shared Sub Publish_exact(topic As String, text As String, quality As QoS)                                                                                                                                                    1054: 0x1812   EntryPoint              ValTypParams=1, RefTypParams=2

000096          MQTT.Publish_String(topic, text, quality, True)                                                                                                                                                                          1055: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         1056: 0x8C01   PushLocalRef            text
                                                                                                                                                                                                                                         1057: 0x8800   PushLocalI32            quality
                                                                                                                                                                                                                                         1058: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1059: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1060: 0x1C7F   BranchSubr              1188

000097      End Sub                                                                                                                                                                                                                      1061: 0x0091   Return                  

000098      
000099      Shared Sub Publish_Priority(topic As String, value As Object)                                                                                                                                                                1062: 0x1802   EntryPoint              ValTypParams=0, RefTypParams=2
                                                                                                                                                                                                                                         1063: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000100          Dim text As String = value.ToString()                                                                                                                                                                                    1064: 0x8C01   PushLocalRef            value
                                                                                                                                                                                                                                         1065: 0x0081   CvtObjToStr             
                                                                                                                                                                                                                                         1066: 0x9402   PopLocalRef             text

000101          MQTT.Publish_Priority(topic, text, QoS.AtMostOnce)                                                                                                                                                                       1067: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         1068: 0x8C02   PushLocalRef            text
                                                                                                                                                                                                                                         1069: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1070: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1071: 0x1C13   BranchSubr              1091

000102      End Sub                                                                                                                                                                                                                      1072: 0x0091   Return                  

000103      
000104      Shared Sub Publish_Priority(topic As String, value As Object, quality As QoS)                                                                                                                                                1073: 0x1812   EntryPoint              ValTypParams=1, RefTypParams=2
                                                                                                                                                                                                                                         1074: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000105          Dim text As String = value.ToString()                                                                                                                                                                                    1075: 0x8C01   PushLocalRef            value
                                                                                                                                                                                                                                         1076: 0x0081   CvtObjToStr             
                                                                                                                                                                                                                                         1077: 0x9402   PopLocalRef             text

000106          MQTT.Publish_Priority(topic, text, quality)                                                                                                                                                                              1078: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         1079: 0x8C02   PushLocalRef            text
                                                                                                                                                                                                                                         1080: 0x8800   PushLocalI32            quality
                                                                                                                                                                                                                                         1081: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1082: 0x1C08   BranchSubr              1091

000107      End Sub                                                                                                                                                                                                                      1083: 0x0091   Return                  

000108      
000109      Shared Sub Publish_Priority(topic As String, text As String)                                                                                                                                                                 1084: 0x1802   EntryPoint              ValTypParams=0, RefTypParams=2

000110          MQTT.Publish_Priority(topic, text, QoS.AtMostOnce)                                                                                                                                                                       1085: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         1086: 0x8C01   PushLocalRef            text
                                                                                                                                                                                                                                         1087: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1088: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1089: 0x1C01   BranchSubr              1091

000111      End Sub                                                                                                                                                                                                                      1090: 0x0091   Return                  

000112      
000113      Shared Sub Publish_Priority(topic As String, text As String, quality As QoS)                                                                                                                                                 1091: 0x1812   EntryPoint              ValTypParams=1, RefTypParams=2

000114          MQTT_priority = True                                                                                                                                                                                                     1092: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1093: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1094: 0xC82D   PopFieldU8              MQTT_priority

000115          MQTT.Publish_String(topic, text, quality, False)                                                                                                                                                                         1095: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         1096: 0x8C01   PushLocalRef            text
                                                                                                                                                                                                                                         1097: 0x8800   PushLocalI32            quality
                                                                                                                                                                                                                                         1098: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1099: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1100: 0x1C57   BranchSubr              1188

000116      End Sub                                                                                                                                                                                                                      1101: 0x0091   Return                  

000117      
000118      Shared Sub remove(index As Integer) //workaround until list remove is fixed                                                                                                                                                  1102: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                                                                                         1103: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000119          If queue = Nothing Or queue.Count() = 0 Then                                                                                                                                                                             1104: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1105: 0xC40C   PushFieldRef            queue
                                                                                                                                                                                                                                         1106: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1107: 0x000A   RefCmpEQ                
                                                                                                                                                                                                                                         1108: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1109: 0xC40C   PushFieldRef            queue
                                                                                                                                                                                                                                         1110: 0xC000   PushFieldI32            Offset=0
                                                                                                                                                                                                                                         1111: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1112: 0x0020   IntCmpEQ                
                                                                                                                                                                                                                                         1113: 0x002D   IntOr                   
                                                                                                                                                                                                                                         1114: 0x3C01   BranchFalse             1116

000120              Return                                                                                                                                                                                                               1115: 0x0091   Return                  

000121          End If
000122          Dim list As ListOfObject = New ListOfObject()                                                                                                                                                                            1116: 0x800A   PushConstU10            10 (0x000A)
                                                                                                                                                                                                                                         1117: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1118: 0x9400   PopLocalRef             list

                                                                                                                                                                                                                                         1119: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1120: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1121: 0x0004   DupVal2                 
                                                                                                                                                                                                                                         1122: 0x0031   IntSub                  
                                                                                                                                                                                                                                         1123: 0x0002   ExchangeVal             
                                                                                                                                                                                                                                         1124: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1125: 0xC40C   PushFieldRef            queue
                                                                                                                                                                                                                                         1126: 0xC000   PushFieldI32            Offset=0
                                                                                                                                                                                                                                         1127: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1128: 0x0031   IntSub                  
000123          For i As Integer = 0 To queue.Count- 1                                                                                                                                                                                   1129: 0x480A   BranchForNextInt        1140

000124              If i <> index Then                                                                                                                                                                                                   1130: 0x8801   PushLocalI32            i
                                                                                                                                                                                                                                         1131: 0x8800   PushLocalI32            index
                                                                                                                                                                                                                                         1132: 0x2006   BranchEQ                1139

000125                  list.Add(queue(i))                                                                                                                                                                                               1133: 0x8801   PushLocalI32            i
                                                                                                                                                                                                                                         1134: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1135: 0xC40C   PushFieldRef            queue
                                                                                                                                                                                                                                         1136: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         1137: 0x8C00   PushLocalRef            list
                                                                                                                                                                                                                                         1138: 0x00A3   ListAdd                 

000126              End If
                                                                                                                                                                                                                                         1139: 0x500B   BranchBack              1129
000127          Next                                                                                                                                                                                                                     1140: 0xE460   FreeStackSpace          ValTypeSize=3, RefTypeSize=0

000128          queue.Clear()                                                                                                                                                                                                            1141: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1142: 0xC40C   PushFieldRef            queue
                                                                                                                                                                                                                                         1143: 0x00AC   ListClear               

000129          If list.Count> 0 Then                                                                                                                                                                                                    1144: 0x8C00   PushLocalRef            list
                                                                                                                                                                                                                                         1145: 0xC000   PushFieldI32            Offset=0
                                                                                                                                                                                                                                         1146: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1147: 0x2C06   BranchLE                1154

000130              queue.AddRange(list)                                                                                                                                                                                                 1148: 0x8C00   PushLocalRef            list
                                                                                                                                                                                                                                         1149: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1150: 0xC40C   PushFieldRef            queue
                                                                                                                                                                                                                                         1151: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1152: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                         1153: 0x00A5   ListAddRange            

000131          End If
000132      End Sub                                                                                                                                                                                                                      1154: 0x0091   Return                  

000133      
000134      Shared Sub Insert(value As Object) //workaround until list InsertAt is fixed (add to top of list)                                                                                                                            1155: 0x1801   EntryPoint              ValTypParams=0, RefTypParams=1
                                                                                                                                                                                                                                         1156: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000135          If queue.Count() = 0 Then                                                                                                                                                                                                1157: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1158: 0xC40C   PushFieldRef            queue
                                                                                                                                                                                                                                         1159: 0xC000   PushFieldI32            Offset=0
                                                                                                                                                                                                                                         1160: 0x3805   BranchTrue              1166

000136              queue.Add(value)                                                                                                                                                                                                     1161: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1162: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1163: 0xC40C   PushFieldRef            queue
                                                                                                                                                                                                                                         1164: 0x00A3   ListAdd                 

000137              Return                                                                                                                                                                                                               1165: 0x0091   Return                  

000138          End If
000139          Dim list As ListOfObject = New ListOfObject()                                                                                                                                                                            1166: 0x800A   PushConstU10            10 (0x000A)
                                                                                                                                                                                                                                         1167: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1168: 0x9401   PopLocalRef             list

000140          list.Add(value)                                                                                                                                                                                                          1169: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1170: 0x8C01   PushLocalRef            list
                                                                                                                                                                                                                                         1171: 0x00A3   ListAdd                 

000141          list.AddRange(queue)                                                                                                                                                                                                     1172: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1173: 0xC40C   PushFieldRef            queue
                                                                                                                                                                                                                                         1174: 0x8C01   PushLocalRef            list
                                                                                                                                                                                                                                         1175: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1176: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                         1177: 0x00A5   ListAddRange            

000142          queue.Clear()                                                                                                                                                                                                            1178: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1179: 0xC40C   PushFieldRef            queue
                                                                                                                                                                                                                                         1180: 0x00AC   ListClear               

000143          queue.AddRange(list)                                                                                                                                                                                                     1181: 0x8C01   PushLocalRef            list
                                                                                                                                                                                                                                         1182: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1183: 0xC40C   PushFieldRef            queue
                                                                                                                                                                                                                                         1184: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1185: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                         1186: 0x00A5   ListAddRange            

000144      End Sub                                                                                                                                                                                                                      1187: 0x0091   Return                  

000145      
000146      Shared Sub Publish_String(topic As String, text As String, quality As QoS, exact As Boolean)                                                                                                                                 1188: 0x1822   EntryPoint              ValTypParams=2, RefTypParams=2
                                                                                                                                                                                                                                         1189: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000147          If queue = Nothing Then //initialize on first run                                                                                                                                                                        1190: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1191: 0xC40C   PushFieldRef            queue
                                                                                                                                                                                                                                         1192: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1193: 0x000A   RefCmpEQ                
                                                                                                                                                                                                                                         1194: 0x3C07   BranchFalse             1202

000148              queue = New ListOfObject()                                                                                                                                                                                           1195: 0x800A   PushConstU10            10 (0x000A)
                                                                                                                                                                                                                                         1196: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1197: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1198: 0xD40C   PopFieldRef             queue

000149              timeSincePublish = 0                                                                                                                                                                                                 1199: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1200: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1201: 0xD030   PopFieldI32             timeSincePublish

000150          End If
000151          
000152          Dim _Message As MQTT_Message = New MQTT_Message(topic, text, quality, exact)                                                                                                                                             1202: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         1203: 0x8C01   PushLocalRef            text
                                                                                                                                                                                                                                         1204: 0x8800   PushLocalI32            quality
                                                                                                                                                                                                                                         1205: 0x8801   PushLocalI32            exact
                                                                                                                                                                                                                                         1206: 0x805C   PushConstU10            92 (0x005C)
                                                                                                                                                                                                                                         1207: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1208: 0x5508   BranchSubrBack          945
                                                                                                                                                                                                                                         1209: 0x54FC   BranchSubrBack          958
                                                                                                                                                                                                                                         1210: 0x9402   PopLocalRef             _Message

000153          
000154          If Not use_queue Then                                                                                                                                                                                                    1211: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1212: 0xB82C   PushFieldU8             use_queue
                                                                                                                                                                                                                                         1213: 0x001D   BooNot                  
                                                                                                                                                                                                                                         1214: 0x3C07   BranchFalse             1222

000155              MQTT.Publish(_Message) //publish direct and return if queuing is not selected                                                                                                                                        1215: 0x8C02   PushLocalRef            _Message
                                                                                                                                                                                                                                         1216: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1217: 0x1C2D   BranchSubr              1263

000156              MQTT_priority = False                                                                                                                                                                                                1218: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1219: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1220: 0xC82D   PopFieldU8              MQTT_priority

000157              Return                                                                                                                                                                                                               1221: 0x0091   Return                  

000158          End If
000159          
000160          While running                                                                                                                                                                                                            1222: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1223: 0xB82E   PushFieldU8             running
                                                                                                                                                                                                                                         1224: 0x3C06   BranchFalse             1231

000161              Thread.Sleep(10000) //10ms delay loop while waiting for queue/publish thread to end                                                                                                                                  1225: 0x0110   PushConstI32            10000 (0x00002710)
                                                                                                                                                                                                                                         1226: 0x2710                           
                                                                                                                                                                                                                                         1227: 0x0000                           
                                                                                                                                                                                                                                         1228: 0x00D5   ThreadSleep             
                                                                                                                                                                                                                                         1229: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000162          End While                                                                                                                                                                                                                1230: 0x5009   BranchBack              1222

000163          
000164          If (Device.Uptime() - timeSincePublish > 2) And queue.Count= 0 Then //direct publish                                                                                                                                     1231: 0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         1232: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1233: 0xC030   PushFieldI32            timeSincePublish
                                                                                                                                                                                                                                         1234: 0x0031   IntSub                  
                                                                                                                                                                                                                                         1235: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         1236: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         1237: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1238: 0xC40C   PushFieldRef            queue
                                                                                                                                                                                                                                         1239: 0xC000   PushFieldI32            Offset=0
                                                                                                                                                                                                                                         1240: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1241: 0x0020   IntCmpEQ                
                                                                                                                                                                                                                                         1242: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1243: 0x3C04   BranchFalse             1248

000165              MQTT.Publish(_Message)                                                                                                                                                                                               1244: 0x8C02   PushLocalRef            _Message
                                                                                                                                                                                                                                         1245: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1246: 0x1C10   BranchSubr              1263

                                                                                                                                                                                                                                         1247: 0x400B   Branch                  1259
000166          Else                                                                                                                                                                                                                     

000167              If MQTT_priority Then                                                                                                                                                                                                1248: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1249: 0xB82D   PushFieldU8             MQTT_priority
                                                                                                                                                                                                                                         1250: 0x3C04   BranchFalse             1255

000168                  'queue.InsertAt(0, _Message) //or add to top of queue FIFO - not working (bug)
000169                  MQTT.Insert(_Message) //or add to top of queue FIFO                                                                                                                                                              1251: 0x8C02   PushLocalRef            _Message
                                                                                                                                                                                                                                         1252: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1253: 0x5463   BranchSubrBack          1155

                                                                                                                                                                                                                                         1254: 0x4004   Branch                  1259
000170              Else                                                                                                                                                                                                                 

000171                  queue.Add(_Message) //or add to end of queue FIFO                                                                                                                                                                1255: 0x8C02   PushLocalRef            _Message
                                                                                                                                                                                                                                         1256: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1257: 0xC40C   PushFieldRef            queue
                                                                                                                                                                                                                                         1258: 0x00A3   ListAdd                 

000172              End If 
000173          End If
000174          MQTT_priority = False                                                                                                                                                                                                    1259: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1260: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1261: 0xC82D   PopFieldU8              MQTT_priority

000175      End Sub                                                                                                                                                                                                                      1262: 0x0091   Return                  

000176      
000177      Shared Sub Publish(msg As MQTT_Message)                                                                                                                                                                                      1263: 0x1801   EntryPoint              ValTypParams=0, RefTypParams=1

000178          //Actual publishing method
000179          msg.Publish()                                                                                                                                                                                                            1264: 0x8C00   PushLocalRef            msg
                                                                                                                                                                                                                                         1265: 0x550E   BranchSubrBack          996

000180          timeSincePublish = Device.Uptime()                                                                                                                                                                                       1266: 0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         1267: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1268: 0xD030   PopFieldI32             timeSincePublish

000181      End Sub                                                                                                                                                                                                                      1269: 0x0091   Return                  

000182      
                                                                                                                                                                                                                                         1270: 0x0003                           TimeValue=3
                                                                                                                                                                                                                                         1271: 0x0300                           EventCategory=TimeInSeconds
000183      Shared Event Publish_Queue() RaiseEvent Every 3 Seconds //limit publishing to once per 3 seconds                                                                                                                             1272: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000184          If queue = Nothing Or (Device.Uptime() - timeSincePublish < 3) Or Not use_queue Then                                                                                                                                     1273: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1274: 0xC40C   PushFieldRef            queue
                                                                                                                                                                                                                                         1275: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1276: 0x000A   RefCmpEQ                
                                                                                                                                                                                                                                         1277: 0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         1278: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1279: 0xC030   PushFieldI32            timeSincePublish
                                                                                                                                                                                                                                         1280: 0x0031   IntSub                  
                                                                                                                                                                                                                                         1281: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         1282: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         1283: 0x002D   IntOr                   
                                                                                                                                                                                                                                         1284: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1285: 0xB82C   PushFieldU8             use_queue
                                                                                                                                                                                                                                         1286: 0x001D   BooNot                  
                                                                                                                                                                                                                                         1287: 0x002D   IntOr                   
                                                                                                                                                                                                                                         1288: 0x3C01   BranchFalse             1290

000185              Return                                                                                                                                                                                                               1289: 0x0091   Return                  

000186          End If
000187          running = True //crude mutex                                                                                                                                                                                             1290: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1291: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1292: 0xC82E   PopFieldU8              running

000188          If queue.Count> 0 Then                                                                                                                                                                                                   1293: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1294: 0xC40C   PushFieldRef            queue
                                                                                                                                                                                                                                         1295: 0xC000   PushFieldI32            Offset=0
                                                                                                                                                                                                                                         1296: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1297: 0x2C19   BranchLE                1323
                                                                                                                                                                                                                                         1298: 0xE002   AllocateStackSpace      ValTypeSize=0, RefTypeSize=2

000189              Dim msg As MQTT_Message = New MQTT_Message()                                                                                                                                                                         1299: 0x805C   PushConstU10            92 (0x005C)
                                                                                                                                                                                                                                         1300: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1301: 0x5565   BranchSubrBack          945
                                                                                                                                                                                                                                         1302: 0x555B   BranchSubrBack          956
                                                                                                                                                                                                                                         1303: 0x9400   PopLocalRef             msg

000190              Dim msg_queue As Object = queue(0).Clone() //make shallow copy of top FIFO message object                                                                                                                            1304: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1305: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1306: 0xC40C   PushFieldRef            queue
                                                                                                                                                                                                                                         1307: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         1308: 0x000F   ClassClone              
                                                                                                                                                                                                                                         1309: 0x9401   PopLocalRef             msg_queue

000191              msg = msg_queue.Cast(MQTT_Message) //cast as MQTT_Message                                                                                                                                                            1310: 0x805C   PushConstU10            92 (0x005C)
                                                                                                                                                                                                                                         1311: 0x8C01   PushLocalRef            msg_queue
                                                                                                                                                                                                                                         1312: 0x0007   Cast                    
                                                                                                                                                                                                                                         1313: 0x9400   PopLocalRef             msg

000192              MQTT.Publish(msg) //publish message                                                                                                                                                                                  1314: 0x8C00   PushLocalRef            msg
                                                                                                                                                                                                                                         1315: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1316: 0x5436   BranchSubrBack          1263

000193              queue.RemoveAt(0) //remove from top of queue                                                                                                                                                                         1317: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1318: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1319: 0xC40C   PushFieldRef            queue
                                                                                                                                                                                                                                         1320: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1321: 0x00BA   ListRemoveRange         

                                                                                                                                                                                                                                         1322: 0xE402   FreeStackSpace          ValTypeSize=0, RefTypeSize=2
000194          End If                                                                                                                                                                                                                   

000195          running = False                                                                                                                                                                                                          1323: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1324: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1325: 0xC82E   PopFieldU8              running

000196      End Event                                                                                                                                                                                                                    1326: 0x0091   Return                  

000197      
000198      //**************************************************************************/
000199      //*!
000200      //    Encodes Float or Integer into 4 bytes of beacon data
000201      //    encoding is - byte 0 is data type (numeric value)
000202      //    Integer as Short (2 bytes) 
000203      //    Fraction as byte (1 byte)
000204      //*/
000205      //**************************************************************************/
000206      Shared Sub BeaconPublish(data_Type As Byte, value As Object)                                                                                                                                                                 1327: 0x1811   EntryPoint              ValTypParams=1, RefTypParams=1
                                                                                                                                                                                                                                         1328: 0xE041   AllocateStackSpace      ValTypeSize=2, RefTypeSize=1

000207          Dim fraction As Byte = 0
000208          Dim data As Short = 0
000209          If value Is Float Then                                                                                                                                                                                                   1329: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1330: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                         1331: 0x0006   ClassIs                 
                                                                                                                                                                                                                                         1332: 0x3C12   BranchFalse             1351

000210              data = value.Cast(Float).ToShort() //get integer part (16 bit only)                                                                                                                                                  1333: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                         1334: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1335: 0x0007   Cast                    
                                                                                                                                                                                                                                         1336: 0x007B   CvtFltToInt             
                                                                                                                                                                                                                                         1337: 0x007F   CvtIntToSho             
                                                                                                                                                                                                                                         1338: 0x9002   PopLocalI32             data

000211              fraction = ((value.Cast(Float) - data) * 100.0).ToByte()                                                                                                                                                             1339: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                         1340: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1341: 0x0007   Cast                    
                                                                                                                                                                                                                                         1342: 0x8802   PushLocalI32            data
                                                                                                                                                                                                                                         1343: 0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                         1344: 0x003F   FltSub                  
                                                                                                                                                                                                                                         1345: 0xEA64   PushConstFlt            100.0
                                                                                                                                                                                                                                         1346: 0x003C   FltMul                  
                                                                                                                                                                                                                                         1347: 0x007B   CvtFltToInt             
                                                                                                                                                                                                                                         1348: 0x007D   CvtIntToByt             
                                                                                                                                                                                                                                         1349: 0x9001   PopLocalI32             fraction

                                                                                                                                                                                                                                         1350: 0x4029   Branch                  1392
000212          ElseIf value Is Integer Then                                                                                                                                                                                             1351: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1352: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         1353: 0x0006   ClassIs                 
                                                                                                                                                                                                                                         1354: 0x3C06   BranchFalse             1361

000213              data = value.Cast(Integer).ToShort() //get integer part (16 bit only)                                                                                                                                                1355: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         1356: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1357: 0x0007   Cast                    
                                                                                                                                                                                                                                         1358: 0x007F   CvtIntToSho             
                                                                                                                                                                                                                                         1359: 0x9002   PopLocalI32             data

                                                                                                                                                                                                                                         1360: 0x401F   Branch                  1392
000214          ElseIf value Is Short Then                                                                                                                                                                                               1361: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1362: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         1363: 0x0006   ClassIs                 
                                                                                                                                                                                                                                         1364: 0x3C05   BranchFalse             1370

000215              data = value.Cast(Short)                                                                                                                                                                                             1365: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         1366: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1367: 0x0007   Cast                    
                                                                                                                                                                                                                                         1368: 0x9002   PopLocalI32             data

                                                                                                                                                                                                                                         1369: 0x4016   Branch                  1392
000216          ElseIf value Is Byte Then                                                                                                                                                                                                1370: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1371: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         1372: 0x0006   ClassIs                 
                                                                                                                                                                                                                                         1373: 0x3C05   BranchFalse             1379

000217              data = value.Cast(Byte).ToShort() //get integer part (16 bit only)                                                                                                                                                   1374: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         1375: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1376: 0x0007   Cast                    
                                                                                                                                                                                                                                         1377: 0x9002   PopLocalI32             data

                                                                                                                                                                                                                                         1378: 0x400D   Branch                  1392
000218          ElseIf value Is Boolean Then                                                                                                                                                                                             1379: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1380: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1381: 0x0006   ClassIs                 
                                                                                                                                                                                                                                         1382: 0x3C09   BranchFalse             1392
                                                                                                                                                                                                                                         1383: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000219              Dim on As Boolean = value.Cast(Boolean)                                                                                                                                                                              1384: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1385: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1386: 0x0007   Cast                    
                                                                                                                                                                                                                                         1387: 0x9003   PopLocalI32             on

000220              If on Then                                                                                                                                                                                                           1388: 0x8803   PushLocalI32            on
                                                                                                                                                                                                                                         1389: 0x3C01   BranchFalse             1391

000221                  data = 1                                                                                                                                                                                                         1390: 0x6402   Const1toLocalI32        data

000222              End If
                                                                                                                                                                                                                                         1391: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
000223          End If                                                                                                                                                                                                                   

000224          Dim beaconData As ListOfByte = New ListOfByte()                                                                                                                                                                          1392: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                         1393: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1394: 0x9401   PopLocalRef             beaconData

000225          beaconData.Add(data_Type)                                                                                                                                                                                                1395: 0x8800   PushLocalI32            data_Type
                                                                                                                                                                                                                                         1396: 0x8C01   PushLocalRef            beaconData
                                                                                                                                                                                                                                         1397: 0x00A3   ListAdd                 

000226          beaconData.AddShort(data)                                                                                                                                                                                                1398: 0x8802   PushLocalI32            data
                                                                                                                                                                                                                                         1399: 0x8C01   PushLocalRef            beaconData
                                                                                                                                                                                                                                         1400: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1401: 0x00A7   ListAdd2Byte            

000227          beaconData.Add(fraction)                                                                                                                                                                                                 1402: 0x8801   PushLocalI32            fraction
                                                                                                                                                                                                                                         1403: 0x8C01   PushLocalRef            beaconData
                                                                                                                                                                                                                                         1404: 0x00A3   ListAdd                 

000228          Lplan.SetBeaconData(beaconData)                                                                                                                                                                                          1405: 0x8C01   PushLocalRef            beaconData
                                                                                                                                                                                                                                         1406: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                         1407: 0x0105   LplanSetBeacon          

000229          //Lplan.SendBeacon()
000230          //Lplan.BeaconNow () //does not seem to work
000231      End Sub                                                                                                                                                                                                                      1408: 0x0091   Return                  

000232      
000233      Shared Sub Subscribe(topic As String)                                                                                                                                                                                        1409: 0x1801   EntryPoint              ValTypParams=0, RefTypParams=1

000234          Lplan.Subscribe(topic)                                                                                                                                                                                                   1410: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         1411: 0x0102   LplanSubscribe          

000235      End Sub                                                                                                                                                                                                                      1412: 0x0091   Return                  

000236      
000237      Shared Sub Subscribe(topic As String, quality As QoS)                                                                                                                                                                        1413: 0x1811   EntryPoint              ValTypParams=1, RefTypParams=1

000238          Lplan.Subscribe(topic, quality)                                                                                                                                                                                          1414: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         1415: 0x8800   PushLocalI32            quality
                                                                                                                                                                                                                                         1416: 0x0102   LplanSubscribe          

000239      End Sub                                                                                                                                                                                                                      1417: 0x0091   Return                  

000240      
000241  End Class                                                                                                                                                                                                                        1005: 0x0097   ReturnMe                


****** BLOCKS and VARIABLES for MQTT
    Block Class (Line 65:241)
        MQTT            Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        Boolean         use_queue       (SharedValTypVariableOffset=44)
        Boolean         MQTT_priority   (SharedValTypVariableOffset=45)
        ListOfObject    queue           (SharedRefTypVariableOffset=12)
        Integer         timeSincePublish(SharedValTypVariableOffset=48)
        Boolean         running         (SharedValTypVariableOffset=46)
        Block Sub Publish (Line 73:75)
            String          topic           (LocalRefTypVariableOffset=0)
            String          text            (LocalRefTypVariableOffset=1)
        End Block
        Block Sub Publish (Line 77:80)
            String          text            (LocalRefTypVariableOffset=2)
            String          topic           (LocalRefTypVariableOffset=0)
            Object          value           (LocalRefTypVariableOffset=1)
        End Block
        Block Sub Publish (Line 82:84)
            String          topic           (LocalRefTypVariableOffset=0)
            String          text            (LocalRefTypVariableOffset=1)
            QoS             quality         (LocalValTypVariableOffset=0)
        End Block
        Block Sub Publish (Line 86:89)
            String          text            (LocalRefTypVariableOffset=2)
            String          topic           (LocalRefTypVariableOffset=0)
            Object          value           (LocalRefTypVariableOffset=1)
            QoS             quality         (LocalValTypVariableOffset=0)
        End Block
        Block Sub Publish_exact (Line 91:93)
            String          topic           (LocalRefTypVariableOffset=0)
            String          text            (LocalRefTypVariableOffset=1)
        End Block
        Block Sub Publish_exact (Line 95:97)
            String          topic           (LocalRefTypVariableOffset=0)
            String          text            (LocalRefTypVariableOffset=1)
            QoS             quality         (LocalValTypVariableOffset=0)
        End Block
        Block Sub Publish_Priority (Line 99:102)
            String          text            (LocalRefTypVariableOffset=2)
            String          topic           (LocalRefTypVariableOffset=0)
            Object          value           (LocalRefTypVariableOffset=1)
        End Block
        Block Sub Publish_Priority (Line 104:107)
            String          text            (LocalRefTypVariableOffset=2)
            String          topic           (LocalRefTypVariableOffset=0)
            Object          value           (LocalRefTypVariableOffset=1)
            QoS             quality         (LocalValTypVariableOffset=0)
        End Block
        Block Sub Publish_Priority (Line 109:111)
            String          topic           (LocalRefTypVariableOffset=0)
            String          text            (LocalRefTypVariableOffset=1)
        End Block
        Block Sub Publish_Priority (Line 113:116)
            String          topic           (LocalRefTypVariableOffset=0)
            String          text            (LocalRefTypVariableOffset=1)
            QoS             quality         (LocalValTypVariableOffset=0)
        End Block
        Block Sub remove (Line 118:132)
            ListOfObject    list            (LocalRefTypVariableOffset=0)
            Integer         index           (LocalValTypVariableOffset=0)
            Block If Then  (Line 119:121)
            End Block
            Block For  (Line 123:127)
                Integer         i               (LocalValTypVariableOffset=1)
                Block If Then  (Line 124:126)
                End Block
            End Block
            Block If Then  (Line 129:131)
            End Block
        End Block
        Block Sub Insert (Line 134:144)
            ListOfObject    list            (LocalRefTypVariableOffset=1)
            Object          value           (LocalRefTypVariableOffset=0)
            Block If Then  (Line 135:138)
            End Block
        End Block
        Block Sub Publish_String (Line 146:175)
            MQTT_Message    _Message        (LocalRefTypVariableOffset=2)
            String          topic           (LocalRefTypVariableOffset=0)
            String          text            (LocalRefTypVariableOffset=1)
            QoS             quality         (LocalValTypVariableOffset=0)
            Boolean         exact           (LocalValTypVariableOffset=1)
            Block If Then  (Line 147:150)
            End Block
            Block If Then  (Line 154:158)
            End Block
            Block While  (Line 160:162)
            End Block
            Block If Then  (Line 164:166)
            End Block
            Block Else (Line 166:173)
                Block If Then  (Line 167:170)
                End Block
                Block Else (Line 170:172)
                End Block
            End Block
        End Block
        Block Sub Publish (Line 177:181)
            MQTT_Message    msg             (LocalRefTypVariableOffset=0)
        End Block
        Block Event Publish_Queue (Line 183:196)
            Block If Then  (Line 184:186)
            End Block
            Block If Then  (Line 188:194)
                MQTT_Message    msg             (LocalRefTypVariableOffset=0)
                Object          msg_queue       (LocalRefTypVariableOffset=1)
            End Block
        End Block
        Block Sub BeaconPublish (Line 206:231)
            Byte            fraction        (LocalValTypVariableOffset=1)
            Short           data            (LocalValTypVariableOffset=2)
            ListOfByte      beaconData      (LocalRefTypVariableOffset=1)
            Byte            data_Type       (LocalValTypVariableOffset=0)
            Object          value           (LocalRefTypVariableOffset=0)
            Block If Then  (Line 209:212)
            End Block
            Block ElseIf (Line 212:214)
            End Block
            Block ElseIf (Line 214:216)
            End Block
            Block ElseIf (Line 216:218)
            End Block
            Block ElseIf (Line 218:223)
                Boolean         on              (LocalValTypVariableOffset=3)
                Block If Then  (Line 220:222)
                End Block
            End Block
        End Block
        Block Sub Subscribe (Line 233:235)
            String          topic           (LocalRefTypVariableOffset=0)
        End Block
        Block Sub Subscribe (Line 237:239)
            String          topic           (LocalRefTypVariableOffset=0)
            QoS             quality         (LocalValTypVariableOffset=0)
        End Block
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000001  Enum MMA8652_ACTIVE_ODR As Byte
000002      _800HZ = 0x00
000003      _400HZ = 0x08
000004      _200HZ = 0x10
000005      _100HZ = 0x18
000006      _50HZ = 0x20
000007      _12_5HZ = 0x28 // 12.5 Hz, etc.
000008      _6_25HZ = 0x30
000009      _1_56HZ = 0x38
000010  End Enum

****** BLOCKS and VARIABLES for MMA8652_ACTIVE_ODR
    Block Struct (Line 1:10)
        MMA8652_ACTIVE_O_800HZ          (Literal=0)
        MMA8652_ACTIVE_O_400HZ          (Literal=8)
        MMA8652_ACTIVE_O_200HZ          (Literal=16)
        MMA8652_ACTIVE_O_100HZ          (Literal=24)
        MMA8652_ACTIVE_O_50HZ           (Literal=32)
        MMA8652_ACTIVE_O_12_5HZ         (Literal=40)
        MMA8652_ACTIVE_O_6_25HZ         (Literal=48)
        MMA8652_ACTIVE_O_1_56HZ         (Literal=56)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000012  Enum MMA8652_MODS As Byte
000013      NORMAL = 0x00
000014      LOW_POWER_LOW_NOISE = 0x01
000015      HIGH_RES = 0x02
000016      LOW_POWER = 0x03
000017  End Enum

****** BLOCKS and VARIABLES for MMA8652_MODS
    Block Struct (Line 12:17)
        MMA8652_MODS    NORMAL          (Literal=0)
        MMA8652_MODS    LOW_POWER_LOW_NO(Literal=1)
        MMA8652_MODS    HIGH_RES        (Literal=2)
        MMA8652_MODS    LOW_POWER       (Literal=3)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000019  Enum MMA8652_SLEEP_ODR As Byte
000020      _50HZ = 0x00
000021      _12_5HZ = 0x40 // 12.5 Hz, etc.
000022      _6_25HZ = 0x80
000023      _1_56HZ = 0xc0
000024  End Enum

****** BLOCKS and VARIABLES for MMA8652_SLEEP_ODR
    Block Struct (Line 19:24)
        MMA8652_SLEEP_OD_50HZ           (Literal=0)
        MMA8652_SLEEP_OD_12_5HZ         (Literal=64)
        MMA8652_SLEEP_OD_6_25HZ         (Literal=128)
        MMA8652_SLEEP_OD_1_56HZ         (Literal=192)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000026  Enum MMA8652_SMODS As Byte
000027      NORMAL = 0x00
000028      LOW_POWER_LOW_NOISE = 0x08
000029      MOD_HIGH_RES = 0x10
000030      MOD_LOW_POWER = 0x18
000031  End Enum

****** BLOCKS and VARIABLES for MMA8652_SMODS
    Block Struct (Line 26:31)
        MMA8652_SMODS   NORMAL          (Literal=0)
        MMA8652_SMODS   LOW_POWER_LOW_NO(Literal=8)
        MMA8652_SMODS   MOD_HIGH_RES    (Literal=16)
        MMA8652_SMODS   MOD_LOW_POWER   (Literal=24)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000033  Enum MMA8652_BF_ANGLE As Byte
000034      _80 = 0x00
000035      _75 = 0x40
000036      _70 = 0x80
000037      _65 = 0xc0
000038  End Enum

****** BLOCKS and VARIABLES for MMA8652_BF_ANGLE
    Block Struct (Line 33:38)
        MMA8652_BF_ANGLE_80             (Literal=0)
        MMA8652_BF_ANGLE_75             (Literal=64)
        MMA8652_BF_ANGLE_70             (Literal=128)
        MMA8652_BF_ANGLE_65             (Literal=192)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000040  Enum MMA8652_THS_ANGLE As Byte
000041      _15 = 0x38
000042      _20 = 0x48
000043      _30 = 0x60
000044      _35 = 0x68
000045      _40 = 0x78
000046      _45 = 0x80
000047      _55 = 0x98
000048      _60 = 0xa0
000049      _70 = 0xb8
000050      _75 = 0xc8
000051  End Enum

****** BLOCKS and VARIABLES for MMA8652_THS_ANGLE
    Block Struct (Line 40:51)
        MMA8652_THS_ANGL_15             (Literal=56)
        MMA8652_THS_ANGL_20             (Literal=72)
        MMA8652_THS_ANGL_30             (Literal=96)
        MMA8652_THS_ANGL_35             (Literal=104)
        MMA8652_THS_ANGL_40             (Literal=120)
        MMA8652_THS_ANGL_45             (Literal=128)
        MMA8652_THS_ANGL_55             (Literal=152)
        MMA8652_THS_ANGL_60             (Literal=160)
        MMA8652_THS_ANGL_70             (Literal=184)
        MMA8652_THS_ANGL_75             (Literal=200)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000053  Enum MMA8652_HYS_ANGLE As Byte
000054      _0 = 0x00
000055      _4 = 0x01
000056      _7 = 0x02
000057      _11 = 0x03
000058      _14 = 0x04
000059      _17 = 0x05
000060      _21 = 0x06
000061      '_24 = 0x07 // Using this with 75 THS does not work properly on the device
000062  End Enum

****** BLOCKS and VARIABLES for MMA8652_HYS_ANGLE
    Block Struct (Line 53:62)
        MMA8652_HYS_ANGL_0              (Literal=0)
        MMA8652_HYS_ANGL_4              (Literal=1)
        MMA8652_HYS_ANGL_7              (Literal=2)
        MMA8652_HYS_ANGL_11             (Literal=3)
        MMA8652_HYS_ANGL_14             (Literal=4)
        MMA8652_HYS_ANGL_17             (Literal=5)
        MMA8652_HYS_ANGL_21             (Literal=6)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000064  Enum MMA8652_SCALES As Byte
000065      _2G = 0x00
000066      _4G = 0x01
000067      _8G = 0x02
000068  End Enum

****** BLOCKS and VARIABLES for MMA8652_SCALES
    Block Struct (Line 64:68)
        MMA8652_SCALES  _2G             (Literal=0)
        MMA8652_SCALES  _4G             (Literal=1)
        MMA8652_SCALES  _8G             (Literal=2)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000072  Class MMA8652                                                                                                                                                                                                                    1418: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000073      Const VERSION As String = "0.1.0" // Adheres to semantic versioning
000074      
000075      Const MMA8652_I2C_ADDR As Byte = 0x1d
000076      Const I2C_SPEED As Integer = 400000
000077      
000078      'Registers
000079      'Assume all are read only. If commented with a "W", they are R/W
000080      'Assume all have values initialized to 0x00 by the hardware unless otherwise commented
000081      'Const STATUS_REG As Byte = 0x00
000082      Const OUT_X_MSB_REG As Byte = 0x01 // 8 Most Significant Bits (MSB)
000083      Const OUT_X_LSB_REG As Byte = 0x02 // 4 Least Significant Bits (MSB)
000084      Const OUT_Y_MSB_REG As Byte = 0x03
000085      Const OUT_Y_LSB_REG As Byte = 0x04
000086      Const OUT_Z_MSB_REG As Byte = 0x05
000087      Const OUT_Z_LSB_REG As Byte = 0x06
000088      'Const F_SETUP_REG As Byte = 0x09 // "W" First in first out (FIFO) setup
000089      'Const TRIG_CFG_REG As Byte = 0x0a // "W" Trigger config mode
000090      Const SYSMOD_REG As Byte = 0x0b // System mode
000091      Const INT_SOURCE_REG As Byte = 0x0c // Interrupt soruce/status
000092      Const WHO_AM_I_REG As Byte = 0x0d // Value should be 0x4A
000093      Const XYZ_DATA_CFG_REG As Byte = 0x0e // "W" Dynamic range settings
000094      Const HP_FILTER_CUTOFF_REG As Byte = 0x0f // "W" High pass filter selection
000095      Const PL_STATUS_REG As Byte = 0x10 // Portrait/Landscape (PL)
000096      Const PL_CFG_REG As Byte = 0x11 // "W" Config as 0x80 by default
000097      Const PL_COUNT_REG As Byte = 0x12 // "W" Debounce counter
000098      Const PL_BF_ZCOMP_REG As Byte = 0x13 // "W" Back/Front (BF) Z-Lock Trip Threshold as 0x44 by default
000099      Const PL_THS_REG As Byte = 0x14 // "W" Threshold (THS) and Hysteresis as 0x84 by default
000100      Const FF_MT_CFG_REG As Byte = 0x15 // "W" Freefall/Motion (FF_MT) functional block configuration
000101      Const FF_MT_SRC_REG As Byte = 0x16 // Event source
000102      Const FF_MT_THS_REG As Byte = 0x17 // "W"
000103      Const FF_MT_COUNT_REG As Byte = 0x18 // "W" Debounce counter
000104      Const TRANSIENT_CFG_REG As Byte = 0x1d // "W"
000105      Const TRANSIENT_SRC_REG As Byte = 0x1e // Event status
000106      Const TRANSIENT_THS_REG As Byte = 0x1f // "W"
000107      Const TRANSIENT_COUNT_REG As Byte = 0x20 // Debounce counter
000108      Const PULSE_CFG_REG As Byte = 0x21 // "W" Enable configuration
000109      Const PULSE_SRC_REG As Byte = 0x22 // Detection source
000110      Const PULSE_THSX_REG As Byte = 0x23 // "W" Threshold (THS) X
000111      Const PULSE_THSY_REG As Byte = 0x24 // "W"
000112      Const PULSE_THSZ_REG As Byte = 0x25 // "W"
000113      Const PULSE_TMLT_REG As Byte = 0x26 // "W" Time limit for pulse
000114      Const PULSE_LTCY_REG As Byte = 0x27 // "W" Latency time for 2nd pulse
000115      Const PULSE_WIND_REG As Byte = 0x28 // "W" Window time for 2nd pulse
000116      Const ASLP_COUNT_REG As Byte = 0x29 // "W" Counter setting for auto-sleep (ASLP)
000117      Const CTRL_REG1_REG As Byte = 0x2a // "W" Data rates and modes setting
000118      Const CTRL_REG2_REG As Byte = 0x2b // "W" Sleep Enable, OS modes, Software Reset (RST), Self-Test (ST)
000119      Const CTRL_REG3_REG As Byte = 0x2c // "W" Wake from sleep, Interrupt polarity (IPOL), Push-Pull/Open-Drain (PP_OD)
000120      Const CTRL_REG4_REG As Byte = 0x2d // "W" Interrupt enable register
000121      Const CTRL_REG5_REG As Byte = 0x2e // "W" Interrupt pin (INT1/INT2) map
000122      'Const OFF_X_REG As Byte = 0x2f // "W" X-axis offset adjust
000123      'Const OFF_Y_REG As Byte = 0x30 // "W" Y-axis offset adjust
000124      'Const OOF_Z_REG As Byte = 0x31 // "W" Z-axis offset adjust
000125      
000126      
000127      // Below are register bits, named
000128      
000129      // Readonly
000130      'Const STATUS_ZYXOW As Byte = 0x80 // Overwrite (OW)
000131      'Const STATUS_ZOW As Byte = 0x40 // Overwrite (OW)
000132      'Const STATUS_YOW As Byte = 0x20 // Overwrite (OW)
000133      'Const STATUS_XOW As Byte = 0x10 // Overwrite (OW)
000134      'Const STATUS_ZYXDR As Byte = 0x08 // Data ready (DR)
000135      'Const STATUS_ZDR As Byte = 0x04 // Data ready (DR)
000136      'Const STATUS_YDR As Byte = 0x02 // Data ready (DR)
000137      'Const STATUS_XDR As Byte = 0x01 // Data ready (DR)
000138      
000139      'Const F_SETUP_F_MODE As Byte = 0xc0 // All FIFO Mode bits
000140      'Const F_SETUP_F_WMRK As Byte = 0x3f // All FIFO WMRK bits
000141      
000142      // Trigger configuration bits are reset by reading the appropriate source register
000143      // 0xc0 bits are empty
000144      'Const TRIG_CFG_Trig_TRANS As Byte = 0x20
000145      'Const TRIG_CFG_Trig_LNDPRT As Byte = 0x10
000146      'Const TRIG_CFG_Trig_PULSE As Byte = 0x08
000147      'Const TRIG_CFG_Trig_FF_MT As Byte = 0x04
000148      // 0x03 bits are empty
000149      
000150      // Readonly
000151      'Const SYSMOD_FGERR As Byte = 0x80 // FIFO Gate error
000152      'Const SYSMOD_FGT As Byte = 0x7c // All FGT bits. Number of ODR time units since FGERR was asserted
000153      Const SYSMOD_STANDBY As Byte = 0x00
000154      Const SYSMOD_WAKE As Byte = 0x01
000155      Const SYSMOD_SLEEP As Byte = 0x02
000156      Const SYSMOD_SYSMOD As Byte = 0x03 // All system mode SYSMOD bits
000157      
000158      // Readonly
000159      Const INT_SOURCE_SRC_ASLP As Byte = 0x80 // Auto-SLEEP/WAKE (ASLP)
000160      'Const INT_SOURCE_SRC_FIFO As Byte = 0x40 // MMA8652 only
000161      Const INT_SOURCE_SRC_TRANS As Byte = 0x20 // Transient
000162      Const INT_SOURCE_SRC_LNDPRT As Byte = 0x10 // Landscape/Portrait Orientation
000163      Const INT_SOURCE_SRC_PULSE As Byte = 0x08
000164      Const INT_SOURCE_SRC_FF_MT As Byte = 0x04 // Freefall/Motion
000165      // 0x02 is empty
000166      'Const INT_SOURCE_SRC_DRDY As Byte = 0x01 // Data Ready
000167      
000168      // Readonly
000169      Const WHO_AM_I_ As Byte = 0x4a
000170      
000171      // Bits 0xe0 are empty
000172      Const XYZ_DATA_CFG_HPF_OUT As Byte = 0x10 // Enable high-pass output data
000173      // Bits 0x0c are empty
000174      Const XYZ_DATA_CFG_FS As Byte = 0x03 // Both full-scale bits, 0x00 2g, 0x01 4g, 0x10 8g
000175      
000176      // Bits 0xc0 are empty
000177      'Const HP_FILTER_CUTOFF_Pulse_HPF_BYP As Byte = 0x20
000178      Const HP_FILTER_CUTOFF_Pulse_LPF_EN As Byte = 0x10
000179      // Bits 0x0c are empty
000180      'Const HP_FILTER_CUTOFF_Pulse_SEL As Byte = 0x03 // Both SEL bits
000181      
000182      // Readonly
000183      'Const PL_STATUS_NEWLP As Byte = 0x80 // Landscape/Portrait status change flag
000184      'Const PL_STATUS_LO As Byte = 0x40 // Z-Tilt angle lockout
000185      // 0x38 bits are empty
000186      Const PL_STATUS_LAPO As Byte = 0x06 // Both Landscape/Portrait orientation bits
000187      Const PL_STATUS_BAFRO As Byte = 0x01 // Back or front orientation
000188      
000189      Const PL_CFG_DBCNTM As Byte = 0x80 // Debounce counter mode selection
000190      Const PL_CFG_PL_EN As Byte = 0x40 // Portrait/Landscape detection enable
000191      // Bits 0x3f are empty
000192      
000193      'Const PL_COUNT_DBNCE As Byte = 0xff // All PL debounce bits
000194      
000195      Const PL_BF_ZCOMP_BKFR As Byte = 0xc0 // All Back/Front trip angle threshold bits
000196      // bits 0x38 are empty
000197      Const PL_BF_ZCOMP_ZLOCK As Byte = 0x07 // All z-lock angle threshold bits
000198      
000199      Const PL_THS_THS As Byte = 0xf8 // All Portrait/Landscape trip threshold angle bits
000200      Const PL_THS_HYS As Byte = 0x07 // All Hysteresis value bits
000201      
000202      Const FF_MT_CFG_ELE As Byte = 0x80 // Event latch enable (ELE)
000203      Const FF_MT_CFG_OAE As Byte = 0x40 // Motion/Freefall detect
000204      Const FF_MT_CFG_ZEFE As Byte = 0x20 // Event flag enable on Z
000205      Const FF_MT_CFG_YEFE As Byte = 0x10 // Y
000206      Const FF_MT_CFG_XEFE As Byte = 0x08 // X
000207      // 0x07 bits are empty
000208      Const FF_MT_CFG_EFE As Byte = 0x38 // All direction event flag
000209      
000210      // Readonly
000211      'Const FF_MT_SRC_EA As Byte = 0x80 // Event active flag
000212      // 0x40 bit is empty
000213      Const FF_MT_SRC_ZHE As Byte = 0x20 // Z Motion
000214      Const FF_MT_SRC_ZHP As Byte = 0x10 // Z-Motion polarity
000215      Const FF_MT_SRC_YHE As Byte = 0x08
000216      Const FF_MT_SRC_YHP As Byte = 0x04
000217      Const FF_MT_SRC_XHE As Byte = 0x02
000218      Const FF_MT_SRC_XHP As Byte = 0x01
000219      
000220      'Const FF_MT_THS_DBCNTM As Byte = 0x80 // Debounce counter mode selection
000221      'Const FF_MT_THS_THS As Byte = 0x6f // All THS bits
000222      
000223      'Const FF_MT_COUNT_D As Byte = 0xff // All Motion counter data bits
000224      
000225      // 0xe0 bits are empty
000226      Const TRANSIENT_CFG_ELE As Byte = 0x10 // Event flag latch
000227      'Const TRANSIENT_CFG_ZTEFE As Byte = 0x08 // Event flag enable for z-Transient acceleration
000228      'Const TRANSIENT_CFG_YTEFE As Byte = 0x04
000229      'Const TRANSIENT_CFG_XTEFE As Byte = 0x02
000230      Const TRANSIENT_CFG_TEFE As Byte = 0x0e // For all directions
000231      'Const TRANSIENT_CFG_HPF_BYP As Byte = 0x01 // High-pass filter bypass
000232      
000233      // Readonly
000234      // 0x80 is empty
000235      'Const TRANSIENT_SRC_EA As Byte = 0x40 // Event Active flag
000236      Const TRANSIENT_SRC_ZTRANSE As Byte = 0x20 // Z-transient event
000237      Const TRANSIENT_SRC_Z_TRANS_POL As Byte = 0x10 // Polarity of Z-Transient event that triggered the interrupt
000238      Const TRANSIENT_SRC_YTRANSE As Byte = 0x08
000239      Const TRANSIENT_SRC_Y_TRANS_POL As Byte = 0x04
000240      Const TRANSIENT_SRC_XTRANSE As Byte = 0x02
000241      Const TRANSIENT_SRC_X_TRANS_POL As Byte = 0x01
000242      
000243      'Const TRANSIENT_THS_DBCNTM As Byte = 0x80
000244      'Const TRANSIENT_THS_THS As Byte = 0x6f // All THS bits
000245      
000246      'Const TRANSIENT_COUNT_D As Byte = 0xff // All Transient counter data bits
000247      
000248      Const PULSE_CFG_DPA As Byte = 0x80 // Double pulse abort
000249      Const PULSE_CFG_ELE As Byte = 0x40 // Event Flag Latch
000250      'Const PULSE_CFG_ZDPEFE As Byte = 0x20 // Z Double Pulse
000251      'Const PULSE_CFG_ZSPEFE As Byte = 0x10 // Z Single Pulse
000252      'Const PULSE_CFG_YDPEFE As Byte = 0x08
000253      'Const PULSE_CFG_YSPEFE As Byte = 0x04
000254      'Const PULSE_CFG_XDPEFE As Byte = 0x02
000255      'Const PULSE_CFG_XSPEFE As Byte = 0x01
000256      Const PULSE_CFG_PEFE As Byte = 0x3f // For all directions
000257      
000258      // Readonly
000259      'Const PULSE_SRC_EA As Byte = 0x80 // Event Active
000260      'Const PULSE_SRC_AxZ As Byte = 0x40 // Z axis event
000261      'Const PULSE_SRC_AxY As Byte = 0x20
000262      'Const PULSE_SRC_AxX As Byte = 0x10
000263      Const PULSE_SRC_DPE As Byte = 0x08 // Double pulse?
000264      'Const PULSE_SRC_Pol_Z As Byte = 0x04 // Pulse polarity
000265      'Const PULSE_SRC_Pol_Y As Byte = 0x02
000266      'Const PULSE_SRC_Pol_X As Byte = 0x01
000267      
000268      // 0x80 bit is empty
000269      'Const PULSE_THSX_THSX As Byte = 0x6f // All Pulse threshold in X bits
000270      
000271      // 0x80 bit is empty
000272      'Const PULSE_THSY_THSY As Byte = 0x6f // All Pulse threshold in Y bits
000273      
000274      // 0x80 bit is empty
000275      'Const PULSE_THSZ_THSZ As Byte = 0x6f // All Pulse threshold in Z bits
000276      
000277      'Const PULSE_TMLT_TMLT As Byte = 0xff // All Pulse Time limit bits
000278      
000279      'Const PULSE_LTCY_LTCY As Byte = 0xff // All Pulse latency (ignore window) bits
000280      
000281      'Const PULSE_WIND_WIND As Byte = 0xff // All Window after latency for 2nd pulse bits
000282      
000283      'Const ASLP_COUNT_D As Byte = 0xff // All Autosleep counter data bits
000284      
000285      Const CTRL_REG1_ASLP_RATE As Byte = 0xc0 // Both Auto-WAKE sample frequency when in SLEEP mode bits
000286      Const CTRL_REG1_DR As Byte = 0x38 // All 3 Data rate selection bits
000287      // Bit 0x04 is empty
000288      'Const CTRL_REG1_FREAD As Byte = 0x02 // Fast-read mode
000289      Const CTRL_REG1_ACTIVE As Byte = 0x01 // Full-scale selection
000290      
000291      'Const CTRL_REG2_ST As Byte = 0x80 // Self-Test Enable
000292      Const CTRL_REG2_RST As Byte = 0x40 // Software Reset
000293      /// 0x20 is empty
000294      Const CTRL_REG2_SMODS As Byte = 0x18 // Both SLEEP mode oower scheme selection bits
000295      Const CTRL_REG2_SLPE As Byte = 0x04 // Auto-SLEEP enable
000296      Const CTRL_REG2_MODS As Byte = 0x03 // Both ACTIVE mode power scheme selection bits
000297      
000298      'Const CTRL_REG3_FIFO_GATE As Byte = 0x80 // MMA8652 only
000299      Const CTRL_REG3_WAKE_TRANS As Byte = 0x40 // MMA8652 only. Wake from transient interrupt
000300      Const CTRL_REG3_WAKE_LNDPRT As Byte = 0x20 // Wake from orientation interrupt
000301      Const CTRL_REG3_WAKE_PULSE As Byte = 0x10 // MMA8652 only. Wake from pulse interrupt
000302      Const CTRL_REG3_WAKE_FF_MT As Byte = 0x08 // Wake from freefall/motion interrupt
000303      // 0x04 is 0
000304      'Const CTRL_REG3_IPOL As Byte = 0x02 // Interrupt polarity
000305      'Const CTRL_REG3_PP_OD As Byte = 0x01 // Push-Pull/Open-Drain selection on interrupt pad
000306      'Const CTRL_REG3_WAKE_CLEAR As Byte = 0x78 // Clear all wake interrupts
000307      
000308      Const CTRL_REG4_INT_EN_ASLP As Byte = 0x80 // Auto-SLEEP/WAKE interrupt enable
000309      'Const CTRL_REG4_INT_EN_FIFO As Byte = 0x40 // MMA8652 only. FIFO interrupt enable
000310      Const CTRL_REG4_INT_EN_TRANS As Byte = 0x20 // MMA8652 only. Transient interrupt enable
000311      Const CTRL_REG4_INT_EN_LNDPRT As Byte = 0x10 // Orientation interrupt enable
000312      Const CTRL_REG4_INT_EN_PULSE As Byte = 0x08 // MMA8652 only. Pulse detection interrupt enable
000313      Const CTRL_REG4_INT_EN_FF_MT As Byte = 0x04 // Freefall/Motion interrupt enable
000314      // 0x02 is empty
000315      'Const CTRL_REG4_INT_EN_DRDY As Byte = 0x01 // Data Ready interrupt enable
000316      'Const CTRL_REG4_INT_CLEAR As Byte = 0xfd // Disable all interrupts
000317      
000318      'Set INT2/INT1 pins (0/1 as value)
000319      Const CTRL_REG5_INT_CFG_ASLP As Byte = 0x80
000320      'Const CTRL_REG5_INT_CFG_FIFO As Byte = 0x40 // MMA8652 only
000321      Const CTRL_REG5_INT_CFG_TRANS As Byte = 0x20 // MMA8652 only
000322      Const CTRL_REG5_INT_CFG_LNDPRT As Byte = 0x10
000323      Const CTRL_REG5_INT_CFG_PULSE As Byte = 0x08 // MMA8652 only
000324      Const CTRL_REG5_INT_CFG_FF_MT As Byte = 0x04
000325      // 0x02 is empty
000326      'Const CTRL_REG5_INT_CFG_DRDY As Byte = 0x01
000327      'Const CTRL_REG5_INT_CFG_CLEAR As Byte = 0xfd // Map all interrupts to the same pin
000328      
000329      'Const OFF_X_D As Byte = 0xff // All offset x bits
000330      
000331      'Const OFF_Y_D As Byte = 0xff // All offset y bits
000332      
000333      'Const OFF_Z_D As Byte = 0xff // All offset z bits
000334      
000335      
000336      Const LOW_ZLOCK_THRESHOLD As Float = 14.0
000337      Const HIGH_ZLOCK_THRESHOLD As Float = 42.0
000338      Const ZLOCK_THRESHOLD_RESOLUTION As Float = 4.0
000339      
000340      Const LOW_GRAVITY_THRESHOLD As Float = 0.0
000341      Const HIGH_GRAVITY_THRESHOLD As Float = 8.0
000342      Const GRAVITY_THRESHOLD_RESOLUTION As Float = 0.063
000343      
000344      Const LOW_ASLP_DURATION As Float = 0.0
000345      Const NORMAL_ASLP_DURATION As Float = 81000.0
000346      Const HIGH_ASLP_DURATION As Float = 162000.0
000347      Const NORMAL_ASLP_COUNT_RESOLUTION As Float = 320.0
000348      Const HIGH_ASLP_COUNT_RESOLUTION As Float = 640.0
000349      
000350      Private gAccelerometer As I2c
000351      Public online As Boolean = False
000352      
000353      
000354      Private Function Init(enableHighPassFilter As Boolean, outputDataFormat As MMA8652_SCALES) As Nothing                                                                                                                        1420: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0

000355          gAccelerometer = I2c.Create(I2C_SPEED, Pin.SCL, Pin.SDA, MMA8652_I2C_ADDR)                                                                                                                                               1421: 0x0110   PushConstI32            400000 (0x00061A80)
                                                                                                                                                                                                                                         1422: 0x1A80                           
                                                                                                                                                                                                                                         1423: 0x0006                           
                                                                                                                                                                                                                                         1424: 0x800D   PushConstU10            13 (0x000D)
                                                                                                                                                                                                                                         1425: 0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                                                                                         1426: 0x801D   PushConstU10            29 (0x001D)
                                                                                                                                                                                                                                         1427: 0x803B   PushConstU10            59 (0x003B)
                                                                                                                                                                                                                                         1428: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1429: 0xB400   PopMemberRef            gAccelerometer

000356          If Read(WHO_AM_I_REG) = WHO_AM_I_ Then                                                                                                                                                                                   1430: 0x800D   PushConstU10            13 (0x000D)
                                                                                                                                                                                                                                         1431: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1432: 0x1C8D   BranchSubr              1574
                                                                                                                                                                                                                                         1433: 0x804A   PushConstU10            74 (0x004A)
                                                                                                                                                                                                                                         1434: 0x2425   BranchNE                1472

000357              online = True                                                                                                                                                                                                        1435: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1436: 0xA804   PopMemberU8             online

000358              online = online And Reset()                                                                                                                                                                                          1437: 0x9804   PushMemberU8            online
                                                                                                                                                                                                                                         1438: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1439: 0x1CC4   BranchSubr              1636
                                                                                                                                                                                                                                         1440: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1441: 0xA804   PopMemberU8             online

000359              
000360              online = online And Standby()                                                                                                                                                                                        1442: 0x9804   PushMemberU8            online
                                                                                                                                                                                                                                         1443: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1444: 0x1F6C   BranchSubr              2321
                                                                                                                                                                                                                                         1445: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1446: 0xA804   PopMemberU8             online

000361              
000362              If enableHighPassFilter Then                                                                                                                                                                                         1447: 0x8800   PushLocalI32            enableHighPassFilter
                                                                                                                                                                                                                                         1448: 0x3C07   BranchFalse             1456

000363                  online = online And Write(XYZ_DATA_CFG_REG, XYZ_DATA_CFG_HPF_OUT)                                                                                                                                                1449: 0x9804   PushMemberU8            online
                                                                                                                                                                                                                                         1450: 0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                                                                                         1451: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         1452: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1453: 0x1C9D   BranchSubr              1611
                                                                                                                                                                                                                                         1454: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1455: 0xA804   PopMemberU8             online

000364              End If
000365              
000366              online = online And Write(XYZ_DATA_CFG_REG, Read(XYZ_DATA_CFG_REG) & outputDataFormat)                                                                                                                               1456: 0x9804   PushMemberU8            online
                                                                                                                                                                                                                                         1457: 0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                                                                                         1458: 0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                                                                                         1459: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1460: 0x1C71   BranchSubr              1574
                                                                                                                                                                                                                                         1461: 0x8801   PushLocalI32            outputDataFormat
                                                                                                                                                                                                                                         1462: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1463: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1464: 0x1C92   BranchSubr              1611
                                                                                                                                                                                                                                         1465: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1466: 0xA804   PopMemberU8             online

000367              
000368              online = online And Activate()                                                                                                                                                                                       1467: 0x9804   PushMemberU8            online
                                                                                                                                                                                                                                         1468: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1469: 0x1F5E   BranchSubr              2332
                                                                                                                                                                                                                                         1470: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1471: 0xA804   PopMemberU8             online

000369          End If
000370      End Function // Init                                                                                                                                                                                                         1472: 0x0096   ReturnNothing           

000371      
000372      
000373      Public Sub New()                                                                                                                                                                                                             1473: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000374          Init(False, MMA8652_SCALES._2G)                                                                                                                                                                                          1474: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1475: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1476: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1477: 0x543A   BranchSubrBack          1420
                                                                                                                                                                                                                                         1478: 0xE401   FreeStackSpace          ValTypeSize=0, RefTypeSize=1

000375      End Sub // New                                                                                                                                                                                                               1479: 0x0097   ReturnMe                

000376      
000377      
000378      Public Sub New(enableHighPassFilter As Boolean, outputDataFormat As MMA8652_SCALES)                                                                                                                                          1480: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0

000379          Init(enableHighPassFilter, outputDataFormat)                                                                                                                                                                             1481: 0x8800   PushLocalI32            enableHighPassFilter
                                                                                                                                                                                                                                         1482: 0x8801   PushLocalI32            outputDataFormat
                                                                                                                                                                                                                                         1483: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1484: 0x5441   BranchSubrBack          1420
                                                                                                                                                                                                                                         1485: 0xE401   FreeStackSpace          ValTypeSize=0, RefTypeSize=1

000380      End Sub // New                                                                                                                                                                                                               1486: 0x0097   ReturnMe                

000381      
000382      
000383      Public Function Accel() As ListOfFloat                                                                                                                                                                                       1487: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         1488: 0xE082   AllocateStackSpace      ValTypeSize=4, RefTypeSize=2

000384          Dim data As ListOfByte = Read(OUT_X_MSB_REG, 6)                                                                                                                                                                          1489: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1490: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                         1491: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1492: 0x1C63   BranchSubr              1592
                                                                                                                                                                                                                                         1493: 0x9400   PopLocalRef             data

000385          Dim output As ListOfFloat = New ListOfFloat                                                                                                                                                                              1494: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         1495: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1496: 0x9401   PopLocalRef             output

000386          Dim outputDataFormat As Byte = Read(XYZ_DATA_CFG_REG) & XYZ_DATA_CFG_FS                                                                                                                                                  1497: 0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                                                                                         1498: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1499: 0x1C4A   BranchSubr              1574
                                                                                                                                                                                                                                         1500: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         1501: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1502: 0x9000   PopLocalI32             outputDataFormat

000387          Dim accelerationReading As Short
000388          Dim convertedReading As Float
000389          Dim scaleFactor As Float
000390          
000391          Select outputDataFormat                                                                                                                                                                                                  1503: 0x8800   PushLocalI32            outputDataFormat
                                                                                                                                                                                                                                         1504: 0x0122   CaseComputed            
                                                                                                                                                                                                                                         1505: 0x0002                           CaseCommonClass=Byte
                                                                                                                                                                                                                                         1506: 0x0003                           NumberOfCaseEntries=3
                                                                                                                                                                                                                                         1507: 0x0014                           CaseElseBranch=1528
                                                                                                                                                                                                                                         1508: 0x0000                           CaseValue=0
                                                                                                                                                                                                                                         1509: 0x0006                           CaseBranch=1514
                                                                                                                                                                                                                                         1510: 0x0001                           CaseValue=1
                                                                                                                                                                                                                                         1511: 0x000B                           CaseBranch=1519
                                                                                                                                                                                                                                         1512: 0x0002                           CaseValue=2
                                                                                                                                                                                                                                         1513: 0x0010                           CaseBranch=1524

000392              Case MMA8652_SCALES._2G
000393                  scaleFactor = 0.00098                                                                                                                                                                                            1514: 0x0110   PushConstI32            981496664 (0x3A807358)
                                                                                                                                                                                                                                         1515: 0x7358                           
                                                                                                                                                                                                                                         1516: 0x3A80                           
                                                                                                                                                                                                                                         1517: 0x9003   PopLocalI32             scaleFactor

                                                                                                                                                                                                                                         1518: 0x4009   Branch                  1528
000394              Case MMA8652_SCALES._4G                                                                                                                                                                                              

000395                  scaleFactor = 0.00196                                                                                                                                                                                            1519: 0x0110   PushConstI32            989885272 (0x3B007358)
                                                                                                                                                                                                                                         1520: 0x7358                           
                                                                                                                                                                                                                                         1521: 0x3B00                           
                                                                                                                                                                                                                                         1522: 0x9003   PopLocalI32             scaleFactor

                                                                                                                                                                                                                                         1523: 0x4004   Branch                  1528
000396              Case MMA8652_SCALES._8G                                                                                                                                                                                              

000397                  scaleFactor = 0.0039                                                                                                                                                                                             1524: 0x0110   PushConstI32            998217508 (0x3B7F9724)
                                                                                                                                                                                                                                         1525: 0x9724                           
                                                                                                                                                                                                                                         1526: 0x3B7F                           
                                                                                                                                                                                                                                         1527: 0x9003   PopLocalI32             scaleFactor

000398          End Select
000399          
                                                                                                                                                                                                                                         1528: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         1529: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1530: 0x0004   DupVal2                 
                                                                                                                                                                                                                                         1531: 0x0031   IntSub                  
                                                                                                                                                                                                                                         1532: 0x0002   ExchangeVal             
                                                                                                                                                                                                                                         1533: 0x8005   PushConstU10            5 (0x0005)
000400          For axisCount As Integer = 0 To 5 Step 2                                                                                                                                                                                 1534: 0x4823   BranchForNextInt        1570

000401              accelerationReading = ((data(axisCount) << 8) | data(axisCount + 1)) >> 4                                                                                                                                            1535: 0x8804   PushLocalI32            axisCount
                                                                                                                                                                                                                                         1536: 0x8C00   PushLocalRef            data
                                                                                                                                                                                                                                         1537: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         1538: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         1539: 0x002E   IntShl                  
                                                                                                                                                                                                                                         1540: 0x8804   PushLocalI32            axisCount
                                                                                                                                                                                                                                         1541: 0x0028   IntInc                  
                                                                                                                                                                                                                                         1542: 0x8C00   PushLocalRef            data
                                                                                                                                                                                                                                         1543: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         1544: 0x002D   IntOr                   
                                                                                                                                                                                                                                         1545: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         1546: 0x002F   IntShr                  
                                                                                                                                                                                                                                         1547: 0x9001   PopLocalI32             accelerationReading

000402              
000403              'We need to 2s compliment negative numbers
000404              If ((accelerationReading & 0x0800) = 0x0800) Then                                                                                                                                                                    1548: 0x8801   PushLocalI32            accelerationReading
                                                                                                                                                                                                                                         1549: 0xE90B   PushConstBit            1<<11  (0x00000800 Or 2048)
                                                                                                                                                                                                                                         1550: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1551: 0xE90B   PushConstBit            1<<11  (0x00000800 Or 2048)
                                                                                                                                                                                                                                         1552: 0x2408   BranchNE                1561

000405                  accelerationReading = (accelerationReading ^ 0x0fff) * -1                                                                                                                                                        1553: 0x8801   PushLocalI32            accelerationReading
                                                                                                                                                                                                                                         1554: 0x0110   PushConstI32            4095 (0x00000FFF)
                                                                                                                                                                                                                                         1555: 0x0FFF                           
                                                                                                                                                                                                                                         1556: 0x0000                           
                                                                                                                                                                                                                                         1557: 0x0032   IntXor                  
                                                                                                                                                                                                                                         1558: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                         1559: 0x002A   IntMul                  
                                                                                                                                                                                                                                         1560: 0x9001   PopLocalI32             accelerationReading

000406              End If
000407              
000408              convertedReading = scaleFactor * accelerationReading                                                                                                                                                                 1561: 0x8803   PushLocalI32            scaleFactor
                                                                                                                                                                                                                                         1562: 0x8801   PushLocalI32            accelerationReading
                                                                                                                                                                                                                                         1563: 0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                         1564: 0x003C   FltMul                  
                                                                                                                                                                                                                                         1565: 0x9002   PopLocalI32             convertedReading

000409              output.Add(convertedReading)                                                                                                                                                                                         1566: 0x8802   PushLocalI32            convertedReading
                                                                                                                                                                                                                                         1567: 0x8C01   PushLocalRef            output
                                                                                                                                                                                                                                         1568: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         1569: 0x5024   BranchBack              1534
000410          Next                                                                                                                                                                                                                     1570: 0xE460   FreeStackSpace          ValTypeSize=3, RefTypeSize=0

000411          
000412          Return output                                                                                                                                                                                                            1571: 0x8C01   PushLocalRef            output
                                                                                                                                                                                                                                         1572: 0x0095   ReturnRefType           

000413      End Function // Accel                                                                                                                                                                                                        1573: 0x0096   ReturnNothing           

000414      
000415      
000416      Private Function Read(address As Byte) As Byte                                                                                                                                                                               1574: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                                                                                         1575: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

000417          Dim result As Byte = 0
000418          Dim value As ListOfByte = Read(address, 1) // Read single byte                                                                                                                                                           1576: 0x8800   PushLocalI32            address
                                                                                                                                                                                                                                         1577: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1578: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1579: 0x1C0C   BranchSubr              1592
                                                                                                                                                                                                                                         1580: 0x9400   PopLocalRef             value

000419          
000420          If value <> Nothing Then                                                                                                                                                                                                 1581: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1582: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1583: 0x000B   RefCmpNE                
                                                                                                                                                                                                                                         1584: 0x3C04   BranchFalse             1589

000421              result = value(0)                                                                                                                                                                                                    1585: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1586: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1587: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         1588: 0x9001   PopLocalI32             result

000422          End If
000423          Return result                                                                                                                                                                                                            1589: 0x8801   PushLocalI32            result
                                                                                                                                                                                                                                         1590: 0x0092   ReturnValType           

000424      End Function // Read                                                                                                                                                                                                         1591: 0x0093   Return0                 

000425      
000426      
000427      Private Function Read(address As Byte, length As Byte) As ListOfByte                                                                                                                                                         1592: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0
                                                                                                                                                                                                                                         1593: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000428          Dim data As ListOfByte = New ListOfByte                                                                                                                                                                                  1594: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                         1595: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1596: 0x9400   PopLocalRef             data

000429          
000430          data.Add(address)                                                                                                                                                                                                        1597: 0x8800   PushLocalI32            address
                                                                                                                                                                                                                                         1598: 0x8C00   PushLocalRef            data
                                                                                                                                                                                                                                         1599: 0x00A3   ListAdd                 

000431          gAccelerometer.Write(data, False)                                                                                                                                                                                        1600: 0x8C00   PushLocalRef            data
                                                                                                                                                                                                                                         1601: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1602: 0xA400   PushMemberRef           gAccelerometer
                                                                                                                                                                                                                                         1603: 0x00E1   I2cDeviceWrite          
                                                                                                                                                                                                                                         1604: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000432          
000433          Return gAccelerometer.Read(length, True)                                                                                                                                                                                 1605: 0x8801   PushLocalI32            length
                                                                                                                                                                                                                                         1606: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1607: 0xA400   PushMemberRef           gAccelerometer
                                                                                                                                                                                                                                         1608: 0x00E0   I2cDeviceRead           
                                                                                                                                                                                                                                         1609: 0x0095   ReturnRefType           

000434      End Function // Read                                                                                                                                                                                                         1610: 0x0096   ReturnNothing           

000435      
000436      
000437      Private Function Write(address As Byte, value As Byte) As Boolean                                                                                                                                                            1611: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0
                                                                                                                                                                                                                                         1612: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000438          Dim data As ListOfByte = New ListOfByte                                                                                                                                                                                  1613: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                         1614: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1615: 0x9400   PopLocalRef             data

000439          
000440          data.Add(value)                                                                                                                                                                                                          1616: 0x8801   PushLocalI32            value
                                                                                                                                                                                                                                         1617: 0x8C00   PushLocalRef            data
                                                                                                                                                                                                                                         1618: 0x00A3   ListAdd                 

000441          
000442          Return Write(address, data) // Write single byte                                                                                                                                                                         1619: 0x8800   PushLocalI32            address
                                                                                                                                                                                                                                         1620: 0x8C00   PushLocalRef            data
                                                                                                                                                                                                                                         1621: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1622: 0x1C02   BranchSubr              1625
                                                                                                                                                                                                                                         1623: 0x0092   ReturnValType           

000443      End Function // Write                                                                                                                                                                                                        1624: 0x0093   Return0                 

000444      
000445      
000446      Private Function Write(address As Byte, values As ListOfByte) As Boolean                                                                                                                                                     1625: 0x1811   EntryPoint              ValTypParams=1, RefTypParams=1

000447          values.InsertAt(0, address)                                                                                                                                                                                              1626: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1627: 0x8800   PushLocalI32            address
                                                                                                                                                                                                                                         1628: 0x8C00   PushLocalRef            values
                                                                                                                                                                                                                                         1629: 0x00B2   ListInsertAt            

000448          
000449          Return gAccelerometer.Write(values, True)                                                                                                                                                                                1630: 0x8C00   PushLocalRef            values
                                                                                                                                                                                                                                         1631: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1632: 0xA400   PushMemberRef           gAccelerometer
                                                                                                                                                                                                                                         1633: 0x00E1   I2cDeviceWrite          
                                                                                                                                                                                                                                         1634: 0x0092   ReturnValType           

000450      End Function // Write                                                                                                                                                                                                        1635: 0x0093   Return0                 

000451      
000452      
000453      'Reset the accelerometer. This may take some time.
000454      Public Function Reset() As Boolean                                                                                                                                                                                           1636: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         1637: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000455          Dim result As Boolean = Write(CTRL_REG2_REG, CTRL_REG2_RST)                                                                                                                                                              1638: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         1639: 0x8040   PushConstU10            64 (0x0040)
                                                                                                                                                                                                                                         1640: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1641: 0x541F   BranchSubrBack          1611
                                                                                                                                                                                                                                         1642: 0x9000   PopLocalI32             result

000456          While (Read(CTRL_REG2_REG) & CTRL_REG2_RST) = CTRL_REG2_RST                                                                                                                                                              1643: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         1644: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1645: 0x5448   BranchSubrBack          1574
                                                                                                                                                                                                                                         1646: 0x8040   PushConstU10            64 (0x0040)
                                                                                                                                                                                                                                         1647: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1648: 0x8040   PushConstU10            64 (0x0040)
                                                                                                                                                                                                                                         1649: 0x2404   BranchNE                1654

000457              Thread.Sleep(1000) // Wait for reset to end, if necessary                                                                                                                                                            1650: 0x83E8   PushConstU10            1000 (0x03E8)
                                                                                                                                                                                                                                         1651: 0x00D5   ThreadSleep             
                                                                                                                                                                                                                                         1652: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000458          End While                                                                                                                                                                                                                1653: 0x500B   BranchBack              1643

000459          Return result                                                                                                                                                                                                            1654: 0x8800   PushLocalI32            result
                                                                                                                                                                                                                                         1655: 0x0092   ReturnValType           

000460      End Function // Reset                                                                                                                                                                                                        1656: 0x0093   Return0                 

000461      
000462      
000463      'Returns list of length 2: maxTime, timeStep (both in ms)
000464      Private Function GetMaxTimeAndTimeStep(stepSize As String) As ListOfFloat                                                                                                                                                    1657: 0x1801   EntryPoint              ValTypParams=0, RefTypParams=1
                                                                                                                                                                                                                                         1658: 0xE0A2   AllocateStackSpace      ValTypeSize=5, RefTypeSize=2

000465          Dim frequency As Byte = Read(CTRL_REG1_REG) & CTRL_REG1_DR                                                                                                                                                               1659: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         1660: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1661: 0x5458   BranchSubrBack          1574
                                                                                                                                                                                                                                         1662: 0x8038   PushConstU10            56 (0x0038)
                                                                                                                                                                                                                                         1663: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1664: 0x9000   PopLocalI32             frequency

000466          Dim mode As Byte = Read(CTRL_REG2_REG) & CTRL_REG2_MODS                                                                                                                                                                  1665: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         1666: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1667: 0x545E   BranchSubrBack          1574
                                                                                                                                                                                                                                         1668: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         1669: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1670: 0x9001   PopLocalI32             mode

000467          Dim ms As Float
000468          Dim time As Float
000469          Dim offset As Integer
000470          Dim msTable As ListOfFloat = New ListOfFloat                                                                                                                                                                             1671: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         1672: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1673: 0x9401   PopLocalRef             msTable

000471          Dim result As ListOfFloat = New ListOfFloat                                                                                                                                                                              1674: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         1675: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1676: 0x9402   PopLocalRef             result

000472          
000473          Select stepSize                                                                                                                                                                                                          1677: 0x8C00   PushLocalRef            stepSize
                                                                                                                                                                                                                                         1678: 0x0122   CaseComputed            
                                                                                                                                                                                                                                         1679: 0x0009                           CaseCommonClass=String
                                                                                                                                                                                                                                         1680: 0x0003                           NumberOfCaseEntries=3
                                                                                                                                                                                                                                         1681: 0x0192                           CaseElseBranch=2084
                                                                                                                                                                                                                                         1682: 0x007E                           LSH CaseValue=126
                                                                                                                                                                                                                                         1683: 0x0000                           MSH CaseValue=126
                                                                                                                                                                                                                                         1684: 0x0009                           CaseBranch=1691
                                                                                                                                                                                                                                         1685: 0x0081                           LSH CaseValue=129
                                                                                                                                                                                                                                         1686: 0x0000                           MSH CaseValue=129
                                                                                                                                                                                                                                         1687: 0x0090                           CaseBranch=1826
                                                                                                                                                                                                                                         1688: 0x0084                           LSH CaseValue=132
                                                                                                                                                                                                                                         1689: 0x0000                           MSH CaseValue=132
                                                                                                                                                                                                                                         1690: 0x0111                           CaseBranch=1955

000474              Case "short"
000475                  msTable.Add(0.625)                                                                                                                                                                                               1691: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1692: 0x0000                           
                                                                                                                                                                                                                                         1693: 0x3F20                           
                                                                                                                                                                                                                                         1694: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1695: 0x00A3   ListAdd                 

000476                  msTable.Add(0.625)                                                                                                                                                                                               1696: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1697: 0x0000                           
                                                                                                                                                                                                                                         1698: 0x3F20                           
                                                                                                                                                                                                                                         1699: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1700: 0x00A3   ListAdd                 

000477                  msTable.Add(1.25)                                                                                                                                                                                                1701: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1702: 0x0000                           
                                                                                                                                                                                                                                         1703: 0x3FA0                           
                                                                                                                                                                                                                                         1704: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1705: 0x00A3   ListAdd                 

000478                  msTable.Add(2.5)                                                                                                                                                                                                 1706: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1707: 0x0000                           
                                                                                                                                                                                                                                         1708: 0x4020                           
                                                                                                                                                                                                                                         1709: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1710: 0x00A3   ListAdd                 

000479                  msTable.Add(5.0)                                                                                                                                                                                                 1711: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1712: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1713: 0x00A3   ListAdd                 

000480                  msTable.Add(5.0)                                                                                                                                                                                                 1714: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1715: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1716: 0x00A3   ListAdd                 

000481                  msTable.Add(5.0)                                                                                                                                                                                                 1717: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1718: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1719: 0x00A3   ListAdd                 

000482                  msTable.Add(5.0)                                                                                                                                                                                                 1720: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1721: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1722: 0x00A3   ListAdd                 

000483                  
000484                  msTable.Add(0.625)                                                                                                                                                                                               1723: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1724: 0x0000                           
                                                                                                                                                                                                                                         1725: 0x3F20                           
                                                                                                                                                                                                                                         1726: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1727: 0x00A3   ListAdd                 

000485                  msTable.Add(0.625)                                                                                                                                                                                               1728: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1729: 0x0000                           
                                                                                                                                                                                                                                         1730: 0x3F20                           
                                                                                                                                                                                                                                         1731: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1732: 0x00A3   ListAdd                 

000486                  msTable.Add(1.25)                                                                                                                                                                                                1733: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1734: 0x0000                           
                                                                                                                                                                                                                                         1735: 0x3FA0                           
                                                                                                                                                                                                                                         1736: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1737: 0x00A3   ListAdd                 

000487                  msTable.Add(2.5)                                                                                                                                                                                                 1738: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1739: 0x0000                           
                                                                                                                                                                                                                                         1740: 0x4020                           
                                                                                                                                                                                                                                         1741: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1742: 0x00A3   ListAdd                 

000488                  msTable.Add(5.0)                                                                                                                                                                                                 1743: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1744: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1745: 0x00A3   ListAdd                 

000489                  msTable.Add(20.0)                                                                                                                                                                                                1746: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         1747: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1748: 0x00A3   ListAdd                 

000490                  msTable.Add(20.0)                                                                                                                                                                                                1749: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         1750: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1751: 0x00A3   ListAdd                 

000491                  msTable.Add(20.0)                                                                                                                                                                                                1752: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         1753: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1754: 0x00A3   ListAdd                 

000492                  
000493                  msTable.Add(0.625)                                                                                                                                                                                               1755: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1756: 0x0000                           
                                                                                                                                                                                                                                         1757: 0x3F20                           
                                                                                                                                                                                                                                         1758: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1759: 0x00A3   ListAdd                 

000494                  msTable.Add(0.625)                                                                                                                                                                                               1760: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1761: 0x0000                           
                                                                                                                                                                                                                                         1762: 0x3F20                           
                                                                                                                                                                                                                                         1763: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1764: 0x00A3   ListAdd                 

000495                  msTable.Add(0.625)                                                                                                                                                                                               1765: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1766: 0x0000                           
                                                                                                                                                                                                                                         1767: 0x3F20                           
                                                                                                                                                                                                                                         1768: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1769: 0x00A3   ListAdd                 

000496                  msTable.Add(0.625)                                                                                                                                                                                               1770: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1771: 0x0000                           
                                                                                                                                                                                                                                         1772: 0x3F20                           
                                                                                                                                                                                                                                         1773: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1774: 0x00A3   ListAdd                 

000497                  msTable.Add(0.625)                                                                                                                                                                                               1775: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1776: 0x0000                           
                                                                                                                                                                                                                                         1777: 0x3F20                           
                                                                                                                                                                                                                                         1778: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1779: 0x00A3   ListAdd                 

000498                  msTable.Add(0.625)                                                                                                                                                                                               1780: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1781: 0x0000                           
                                                                                                                                                                                                                                         1782: 0x3F20                           
                                                                                                                                                                                                                                         1783: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1784: 0x00A3   ListAdd                 

000499                  msTable.Add(0.625)                                                                                                                                                                                               1785: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1786: 0x0000                           
                                                                                                                                                                                                                                         1787: 0x3F20                           
                                                                                                                                                                                                                                         1788: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1789: 0x00A3   ListAdd                 

000500                  msTable.Add(0.625)                                                                                                                                                                                               1790: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1791: 0x0000                           
                                                                                                                                                                                                                                         1792: 0x3F20                           
                                                                                                                                                                                                                                         1793: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1794: 0x00A3   ListAdd                 

000501                  
000502                  msTable.Add(0.625)                                                                                                                                                                                               1795: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1796: 0x0000                           
                                                                                                                                                                                                                                         1797: 0x3F20                           
                                                                                                                                                                                                                                         1798: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1799: 0x00A3   ListAdd                 

000503                  msTable.Add(1.25)                                                                                                                                                                                                1800: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1801: 0x0000                           
                                                                                                                                                                                                                                         1802: 0x3FA0                           
                                                                                                                                                                                                                                         1803: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1804: 0x00A3   ListAdd                 

000504                  msTable.Add(2.5)                                                                                                                                                                                                 1805: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1806: 0x0000                           
                                                                                                                                                                                                                                         1807: 0x4020                           
                                                                                                                                                                                                                                         1808: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1809: 0x00A3   ListAdd                 

000505                  msTable.Add(5.0)                                                                                                                                                                                                 1810: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1811: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1812: 0x00A3   ListAdd                 

000506                  msTable.Add(10.0)                                                                                                                                                                                                1813: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1814: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1815: 0x00A3   ListAdd                 

000507                  msTable.Add(40.0)                                                                                                                                                                                                1816: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         1817: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1818: 0x00A3   ListAdd                 

000508                  msTable.Add(40.0)                                                                                                                                                                                                1819: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         1820: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1821: 0x00A3   ListAdd                 

000509                  msTable.Add(40.0)                                                                                                                                                                                                1822: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         1823: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1824: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         1825: 0x4176   Branch                  2200
000510              Case "medium"                                                                                                                                                                                                        

000511                  msTable.Add(1.25)                                                                                                                                                                                                1826: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1827: 0x0000                           
                                                                                                                                                                                                                                         1828: 0x3FA0                           
                                                                                                                                                                                                                                         1829: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1830: 0x00A3   ListAdd                 

000512                  msTable.Add(1.25)                                                                                                                                                                                                1831: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1832: 0x0000                           
                                                                                                                                                                                                                                         1833: 0x3FA0                           
                                                                                                                                                                                                                                         1834: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1835: 0x00A3   ListAdd                 

000513                  msTable.Add(2.5)                                                                                                                                                                                                 1836: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1837: 0x0000                           
                                                                                                                                                                                                                                         1838: 0x4020                           
                                                                                                                                                                                                                                         1839: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1840: 0x00A3   ListAdd                 

000514                  msTable.Add(5.0)                                                                                                                                                                                                 1841: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1842: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1843: 0x00A3   ListAdd                 

000515                  msTable.Add(10.0)                                                                                                                                                                                                1844: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1845: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1846: 0x00A3   ListAdd                 

000516                  msTable.Add(10.0)                                                                                                                                                                                                1847: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1848: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1849: 0x00A3   ListAdd                 

000517                  msTable.Add(10.0)                                                                                                                                                                                                1850: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1851: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1852: 0x00A3   ListAdd                 

000518                  msTable.Add(10.0)                                                                                                                                                                                                1853: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1854: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1855: 0x00A3   ListAdd                 

000519                  
000520                  msTable.Add(1.25)                                                                                                                                                                                                1856: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1857: 0x0000                           
                                                                                                                                                                                                                                         1858: 0x3FA0                           
                                                                                                                                                                                                                                         1859: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1860: 0x00A3   ListAdd                 

000521                  msTable.Add(1.25)                                                                                                                                                                                                1861: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1862: 0x0000                           
                                                                                                                                                                                                                                         1863: 0x3FA0                           
                                                                                                                                                                                                                                         1864: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1865: 0x00A3   ListAdd                 

000522                  msTable.Add(2.5)                                                                                                                                                                                                 1866: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1867: 0x0000                           
                                                                                                                                                                                                                                         1868: 0x4020                           
                                                                                                                                                                                                                                         1869: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1870: 0x00A3   ListAdd                 

000523                  msTable.Add(5.0)                                                                                                                                                                                                 1871: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1872: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1873: 0x00A3   ListAdd                 

000524                  msTable.Add(10.0)                                                                                                                                                                                                1874: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1875: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1876: 0x00A3   ListAdd                 

000525                  msTable.Add(40.0)                                                                                                                                                                                                1877: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         1878: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1879: 0x00A3   ListAdd                 

000526                  msTable.Add(40.0)                                                                                                                                                                                                1880: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         1881: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1882: 0x00A3   ListAdd                 

000527                  msTable.Add(40.0)                                                                                                                                                                                                1883: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         1884: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1885: 0x00A3   ListAdd                 

000528                  
000529                  msTable.Add(1.25)                                                                                                                                                                                                1886: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1887: 0x0000                           
                                                                                                                                                                                                                                         1888: 0x3FA0                           
                                                                                                                                                                                                                                         1889: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1890: 0x00A3   ListAdd                 

000530                  msTable.Add(1.25)                                                                                                                                                                                                1891: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1892: 0x0000                           
                                                                                                                                                                                                                                         1893: 0x3FA0                           
                                                                                                                                                                                                                                         1894: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1895: 0x00A3   ListAdd                 

000531                  msTable.Add(1.25)                                                                                                                                                                                                1896: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1897: 0x0000                           
                                                                                                                                                                                                                                         1898: 0x3FA0                           
                                                                                                                                                                                                                                         1899: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1900: 0x00A3   ListAdd                 

000532                  msTable.Add(1.25)                                                                                                                                                                                                1901: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1902: 0x0000                           
                                                                                                                                                                                                                                         1903: 0x3FA0                           
                                                                                                                                                                                                                                         1904: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1905: 0x00A3   ListAdd                 

000533                  msTable.Add(1.25)                                                                                                                                                                                                1906: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1907: 0x0000                           
                                                                                                                                                                                                                                         1908: 0x3FA0                           
                                                                                                                                                                                                                                         1909: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1910: 0x00A3   ListAdd                 

000534                  msTable.Add(1.25)                                                                                                                                                                                                1911: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1912: 0x0000                           
                                                                                                                                                                                                                                         1913: 0x3FA0                           
                                                                                                                                                                                                                                         1914: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1915: 0x00A3   ListAdd                 

000535                  msTable.Add(1.25)                                                                                                                                                                                                1916: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1917: 0x0000                           
                                                                                                                                                                                                                                         1918: 0x3FA0                           
                                                                                                                                                                                                                                         1919: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1920: 0x00A3   ListAdd                 

000536                  msTable.Add(1.25)                                                                                                                                                                                                1921: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1922: 0x0000                           
                                                                                                                                                                                                                                         1923: 0x3FA0                           
                                                                                                                                                                                                                                         1924: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1925: 0x00A3   ListAdd                 

000537                  
000538                  msTable.Add(1.25)                                                                                                                                                                                                1926: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1927: 0x0000                           
                                                                                                                                                                                                                                         1928: 0x3FA0                           
                                                                                                                                                                                                                                         1929: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1930: 0x00A3   ListAdd                 

000539                  msTable.Add(2.5)                                                                                                                                                                                                 1931: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1932: 0x0000                           
                                                                                                                                                                                                                                         1933: 0x4020                           
                                                                                                                                                                                                                                         1934: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1935: 0x00A3   ListAdd                 

000540                  msTable.Add(5.0)                                                                                                                                                                                                 1936: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1937: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1938: 0x00A3   ListAdd                 

000541                  msTable.Add(10.0)                                                                                                                                                                                                1939: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1940: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1941: 0x00A3   ListAdd                 

000542                  msTable.Add(20.0)                                                                                                                                                                                                1942: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         1943: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1944: 0x00A3   ListAdd                 

000543                  msTable.Add(80.0)                                                                                                                                                                                                1945: 0xEA50   PushConstFlt            80.0
                                                                                                                                                                                                                                         1946: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1947: 0x00A3   ListAdd                 

000544                  msTable.Add(80.0)                                                                                                                                                                                                1948: 0xEA50   PushConstFlt            80.0
                                                                                                                                                                                                                                         1949: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1950: 0x00A3   ListAdd                 

000545                  msTable.Add(80.0)                                                                                                                                                                                                1951: 0xEA50   PushConstFlt            80.0
                                                                                                                                                                                                                                         1952: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1953: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         1954: 0x40F5   Branch                  2200
000546              Case "long"                                                                                                                                                                                                          

000547                  msTable.Add(1.25)                                                                                                                                                                                                1955: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1956: 0x0000                           
                                                                                                                                                                                                                                         1957: 0x3FA0                           
                                                                                                                                                                                                                                         1958: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1959: 0x00A3   ListAdd                 

000548                  msTable.Add(2.5)                                                                                                                                                                                                 1960: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1961: 0x0000                           
                                                                                                                                                                                                                                         1962: 0x4020                           
                                                                                                                                                                                                                                         1963: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1964: 0x00A3   ListAdd                 

000549                  msTable.Add(5.0)                                                                                                                                                                                                 1965: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1966: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1967: 0x00A3   ListAdd                 

000550                  msTable.Add(10.0)                                                                                                                                                                                                1968: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1969: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1970: 0x00A3   ListAdd                 

000551                  msTable.Add(20.0)                                                                                                                                                                                                1971: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         1972: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1973: 0x00A3   ListAdd                 

000552                  msTable.Add(20.0)                                                                                                                                                                                                1974: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         1975: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1976: 0x00A3   ListAdd                 

000553                  msTable.Add(20.0)                                                                                                                                                                                                1977: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         1978: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1979: 0x00A3   ListAdd                 

000554                  msTable.Add(20.0)                                                                                                                                                                                                1980: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         1981: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1982: 0x00A3   ListAdd                 

000555                  
000556                  msTable.Add(1.25)                                                                                                                                                                                                1983: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1984: 0x0000                           
                                                                                                                                                                                                                                         1985: 0x3FA0                           
                                                                                                                                                                                                                                         1986: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1987: 0x00A3   ListAdd                 

000557                  msTable.Add(2.5)                                                                                                                                                                                                 1988: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1989: 0x0000                           
                                                                                                                                                                                                                                         1990: 0x4020                           
                                                                                                                                                                                                                                         1991: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1992: 0x00A3   ListAdd                 

000558                  msTable.Add(5.0)                                                                                                                                                                                                 1993: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1994: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1995: 0x00A3   ListAdd                 

000559                  msTable.Add(10.0)                                                                                                                                                                                                1996: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1997: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1998: 0x00A3   ListAdd                 

000560                  msTable.Add(20.0)                                                                                                                                                                                                1999: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         2000: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2001: 0x00A3   ListAdd                 

000561                  msTable.Add(80.0)                                                                                                                                                                                                2002: 0xEA50   PushConstFlt            80.0
                                                                                                                                                                                                                                         2003: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2004: 0x00A3   ListAdd                 

000562                  msTable.Add(80.0)                                                                                                                                                                                                2005: 0xEA50   PushConstFlt            80.0
                                                                                                                                                                                                                                         2006: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2007: 0x00A3   ListAdd                 

000563                  msTable.Add(80.0)                                                                                                                                                                                                2008: 0xEA50   PushConstFlt            80.0
                                                                                                                                                                                                                                         2009: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2010: 0x00A3   ListAdd                 

000564                  
000565                  msTable.Add(1.25)                                                                                                                                                                                                2011: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         2012: 0x0000                           
                                                                                                                                                                                                                                         2013: 0x3FA0                           
                                                                                                                                                                                                                                         2014: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2015: 0x00A3   ListAdd                 

000566                  msTable.Add(2.5)                                                                                                                                                                                                 2016: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         2017: 0x0000                           
                                                                                                                                                                                                                                         2018: 0x4020                           
                                                                                                                                                                                                                                         2019: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2020: 0x00A3   ListAdd                 

000567                  msTable.Add(2.5)                                                                                                                                                                                                 2021: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         2022: 0x0000                           
                                                                                                                                                                                                                                         2023: 0x4020                           
                                                                                                                                                                                                                                         2024: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2025: 0x00A3   ListAdd                 

000568                  msTable.Add(2.5)                                                                                                                                                                                                 2026: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         2027: 0x0000                           
                                                                                                                                                                                                                                         2028: 0x4020                           
                                                                                                                                                                                                                                         2029: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2030: 0x00A3   ListAdd                 

000569                  msTable.Add(2.5)                                                                                                                                                                                                 2031: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         2032: 0x0000                           
                                                                                                                                                                                                                                         2033: 0x4020                           
                                                                                                                                                                                                                                         2034: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2035: 0x00A3   ListAdd                 

000570                  msTable.Add(2.5)                                                                                                                                                                                                 2036: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         2037: 0x0000                           
                                                                                                                                                                                                                                         2038: 0x4020                           
                                                                                                                                                                                                                                         2039: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2040: 0x00A3   ListAdd                 

000571                  msTable.Add(2.5)                                                                                                                                                                                                 2041: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         2042: 0x0000                           
                                                                                                                                                                                                                                         2043: 0x4020                           
                                                                                                                                                                                                                                         2044: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2045: 0x00A3   ListAdd                 

000572                  msTable.Add(2.5)                                                                                                                                                                                                 2046: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         2047: 0x0000                           
                                                                                                                                                                                                                                         2048: 0x4020                           
                                                                                                                                                                                                                                         2049: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2050: 0x00A3   ListAdd                 

000573                  
000574                  msTable.Add(1.25)                                                                                                                                                                                                2051: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         2052: 0x0000                           
                                                                                                                                                                                                                                         2053: 0x3FA0                           
                                                                                                                                                                                                                                         2054: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2055: 0x00A3   ListAdd                 

000575                  msTable.Add(2.5)                                                                                                                                                                                                 2056: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         2057: 0x0000                           
                                                                                                                                                                                                                                         2058: 0x4020                           
                                                                                                                                                                                                                                         2059: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2060: 0x00A3   ListAdd                 

000576                  msTable.Add(5.0)                                                                                                                                                                                                 2061: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2062: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2063: 0x00A3   ListAdd                 

000577                  msTable.Add(10.0)                                                                                                                                                                                                2064: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         2065: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2066: 0x00A3   ListAdd                 

000578                  msTable.Add(20.0)                                                                                                                                                                                                2067: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         2068: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2069: 0x00A3   ListAdd                 

000579                  msTable.Add(80.0)                                                                                                                                                                                                2070: 0xEA50   PushConstFlt            80.0
                                                                                                                                                                                                                                         2071: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2072: 0x00A3   ListAdd                 

000580                  msTable.Add(160.0)                                                                                                                                                                                               2073: 0x0110   PushConstI32            1126170624 (0x43200000)
                                                                                                                                                                                                                                         2074: 0x0000                           
                                                                                                                                                                                                                                         2075: 0x4320                           
                                                                                                                                                                                                                                         2076: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2077: 0x00A3   ListAdd                 

000581                  msTable.Add(160.0)                                                                                                                                                                                               2078: 0x0110   PushConstI32            1126170624 (0x43200000)
                                                                                                                                                                                                                                         2079: 0x0000                           
                                                                                                                                                                                                                                         2080: 0x4320                           
                                                                                                                                                                                                                                         2081: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2082: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         2083: 0x4074   Branch                  2200
000582              Case Else 'xlong                                                                                                                                                                                                     

000583                  msTable.Add(2.5)                                                                                                                                                                                                 2084: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         2085: 0x0000                           
                                                                                                                                                                                                                                         2086: 0x4020                           
                                                                                                                                                                                                                                         2087: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2088: 0x00A3   ListAdd                 

000584                  msTable.Add(5.0)                                                                                                                                                                                                 2089: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2090: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2091: 0x00A3   ListAdd                 

000585                  msTable.Add(10.0)                                                                                                                                                                                                2092: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         2093: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2094: 0x00A3   ListAdd                 

000586                  msTable.Add(20.0)                                                                                                                                                                                                2095: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         2096: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2097: 0x00A3   ListAdd                 

000587                  msTable.Add(40.0)                                                                                                                                                                                                2098: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         2099: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2100: 0x00A3   ListAdd                 

000588                  msTable.Add(40.0)                                                                                                                                                                                                2101: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         2102: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2103: 0x00A3   ListAdd                 

000589                  msTable.Add(40.0)                                                                                                                                                                                                2104: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         2105: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2106: 0x00A3   ListAdd                 

000590                  msTable.Add(40.0)                                                                                                                                                                                                2107: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         2108: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2109: 0x00A3   ListAdd                 

000591                  
000592                  msTable.Add(2.5)                                                                                                                                                                                                 2110: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         2111: 0x0000                           
                                                                                                                                                                                                                                         2112: 0x4020                           
                                                                                                                                                                                                                                         2113: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2114: 0x00A3   ListAdd                 

000593                  msTable.Add(5.0)                                                                                                                                                                                                 2115: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2116: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2117: 0x00A3   ListAdd                 

000594                  msTable.Add(10.0)                                                                                                                                                                                                2118: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         2119: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2120: 0x00A3   ListAdd                 

000595                  msTable.Add(20.0)                                                                                                                                                                                                2121: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         2122: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2123: 0x00A3   ListAdd                 

000596                  msTable.Add(40.0)                                                                                                                                                                                                2124: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         2125: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2126: 0x00A3   ListAdd                 

000597                  msTable.Add(160.0)                                                                                                                                                                                               2127: 0x0110   PushConstI32            1126170624 (0x43200000)
                                                                                                                                                                                                                                         2128: 0x0000                           
                                                                                                                                                                                                                                         2129: 0x4320                           
                                                                                                                                                                                                                                         2130: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2131: 0x00A3   ListAdd                 

000598                  msTable.Add(160.0)                                                                                                                                                                                               2132: 0x0110   PushConstI32            1126170624 (0x43200000)
                                                                                                                                                                                                                                         2133: 0x0000                           
                                                                                                                                                                                                                                         2134: 0x4320                           
                                                                                                                                                                                                                                         2135: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2136: 0x00A3   ListAdd                 

000599                  msTable.Add(160.0)                                                                                                                                                                                               2137: 0x0110   PushConstI32            1126170624 (0x43200000)
                                                                                                                                                                                                                                         2138: 0x0000                           
                                                                                                                                                                                                                                         2139: 0x4320                           
                                                                                                                                                                                                                                         2140: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2141: 0x00A3   ListAdd                 

000600                  
000601                  msTable.Add(2.5)                                                                                                                                                                                                 2142: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         2143: 0x0000                           
                                                                                                                                                                                                                                         2144: 0x4020                           
                                                                                                                                                                                                                                         2145: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2146: 0x00A3   ListAdd                 

000602                  msTable.Add(5.0)                                                                                                                                                                                                 2147: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2148: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2149: 0x00A3   ListAdd                 

000603                  msTable.Add(5.0)                                                                                                                                                                                                 2150: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2151: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2152: 0x00A3   ListAdd                 

000604                  msTable.Add(5.0)                                                                                                                                                                                                 2153: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2154: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2155: 0x00A3   ListAdd                 

000605                  msTable.Add(5.0)                                                                                                                                                                                                 2156: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2157: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2158: 0x00A3   ListAdd                 

000606                  msTable.Add(5.0)                                                                                                                                                                                                 2159: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2160: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2161: 0x00A3   ListAdd                 

000607                  msTable.Add(5.0)                                                                                                                                                                                                 2162: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2163: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2164: 0x00A3   ListAdd                 

000608                  msTable.Add(5.0)                                                                                                                                                                                                 2165: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2166: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2167: 0x00A3   ListAdd                 

000609                  
000610                  msTable.Add(2.5)                                                                                                                                                                                                 2168: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         2169: 0x0000                           
                                                                                                                                                                                                                                         2170: 0x4020                           
                                                                                                                                                                                                                                         2171: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2172: 0x00A3   ListAdd                 

000611                  msTable.Add(5.0)                                                                                                                                                                                                 2173: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2174: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2175: 0x00A3   ListAdd                 

000612                  msTable.Add(10.0)                                                                                                                                                                                                2176: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         2177: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2178: 0x00A3   ListAdd                 

000613                  msTable.Add(20.0)                                                                                                                                                                                                2179: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         2180: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2181: 0x00A3   ListAdd                 

000614                  msTable.Add(40.0)                                                                                                                                                                                                2182: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         2183: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2184: 0x00A3   ListAdd                 

000615                  msTable.Add(160.0)                                                                                                                                                                                               2185: 0x0110   PushConstI32            1126170624 (0x43200000)
                                                                                                                                                                                                                                         2186: 0x0000                           
                                                                                                                                                                                                                                         2187: 0x4320                           
                                                                                                                                                                                                                                         2188: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2189: 0x00A3   ListAdd                 

000616                  msTable.Add(320.0)                                                                                                                                                                                               2190: 0x0110   PushConstI32            1134559232 (0x43A00000)
                                                                                                                                                                                                                                         2191: 0x0000                           
                                                                                                                                                                                                                                         2192: 0x43A0                           
                                                                                                                                                                                                                                         2193: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2194: 0x00A3   ListAdd                 

000617                  msTable.Add(320.0)                                                                                                                                                                                               2195: 0x0110   PushConstI32            1134559232 (0x43A00000)
                                                                                                                                                                                                                                         2196: 0x0000                           
                                                                                                                                                                                                                                         2197: 0x43A0                           
                                                                                                                                                                                                                                         2198: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2199: 0x00A3   ListAdd                 

000618          End Select
000619          
000620          Select mode                                                                                                                                                                                                              2200: 0x8801   PushLocalI32            mode
                                                                                                                                                                                                                                         2201: 0x0122   CaseComputed            
                                                                                                                                                                                                                                         2202: 0x0002                           CaseCommonClass=Byte
                                                                                                                                                                                                                                         2203: 0x0004                           NumberOfCaseEntries=4
                                                                                                                                                                                                                                         2204: 0x0012                           CaseElseBranch=2223
                                                                                                                                                                                                                                         2205: 0x0000                           CaseValue=0
                                                                                                                                                                                                                                         2206: 0x0008                           CaseBranch=2213
                                                                                                                                                                                                                                         2207: 0x0001                           CaseValue=1
                                                                                                                                                                                                                                         2208: 0x000A                           CaseBranch=2215
                                                                                                                                                                                                                                         2209: 0x0002                           CaseValue=2
                                                                                                                                                                                                                                         2210: 0x000D                           CaseBranch=2218
                                                                                                                                                                                                                                         2211: 0x0003                           CaseValue=3
                                                                                                                                                                                                                                         2212: 0x0010                           CaseBranch=2221

000621              Case MMA8652_MODS.NORMAL
000622                  offset = 0                                                                                                                                                                                                       2213: 0x6004   Const0toLocalI32        offset

                                                                                                                                                                                                                                         2214: 0x4008   Branch                  2223
000623              Case MMA8652_MODS.LOW_POWER_LOW_NOISE                                                                                                                                                                                

000624                  offset = 8                                                                                                                                                                                                       2215: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         2216: 0x9004   PopLocalI32             offset

                                                                                                                                                                                                                                         2217: 0x4005   Branch                  2223
000625              Case MMA8652_MODS.HIGH_RES                                                                                                                                                                                           

000626                  offset = 16                                                                                                                                                                                                      2218: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         2219: 0x9004   PopLocalI32             offset

                                                                                                                                                                                                                                         2220: 0x4002   Branch                  2223
000627              Case MMA8652_MODS.LOW_POWER                                                                                                                                                                                          

000628                  offset = 24                                                                                                                                                                                                      2221: 0x8018   PushConstU10            24 (0x0018)
                                                                                                                                                                                                                                         2222: 0x9004   PopLocalI32             offset

000629          End Select
000630          
000631          Select frequency                                                                                                                                                                                                         2223: 0x8800   PushLocalI32            frequency
                                                                                                                                                                                                                                         2224: 0x0122   CaseComputed            
                                                                                                                                                                                                                                         2225: 0x0002                           CaseCommonClass=Byte
                                                                                                                                                                                                                                         2226: 0x0008                           NumberOfCaseEntries=8
                                                                                                                                                                                                                                         2227: 0x0044                           CaseElseBranch=2296
                                                                                                                                                                                                                                         2228: 0x0000                           CaseValue=0
                                                                                                                                                                                                                                         2229: 0x0010                           CaseBranch=2244
                                                                                                                                                                                                                                         2230: 0x0008                           CaseValue=8
                                                                                                                                                                                                                                         2231: 0x0015                           CaseBranch=2249
                                                                                                                                                                                                                                         2232: 0x0010                           CaseValue=16
                                                                                                                                                                                                                                         2233: 0x001B                           CaseBranch=2255
                                                                                                                                                                                                                                         2234: 0x0018                           CaseValue=24
                                                                                                                                                                                                                                         2235: 0x0022                           CaseBranch=2262
                                                                                                                                                                                                                                         2236: 0x0020                           CaseValue=32
                                                                                                                                                                                                                                         2237: 0x0029                           CaseBranch=2269
                                                                                                                                                                                                                                         2238: 0x0028                           CaseValue=40
                                                                                                                                                                                                                                         2239: 0x0030                           CaseBranch=2276
                                                                                                                                                                                                                                         2240: 0x0030                           CaseValue=48
                                                                                                                                                                                                                                         2241: 0x0037                           CaseBranch=2283
                                                                                                                                                                                                                                         2242: 0x0038                           CaseValue=56
                                                                                                                                                                                                                                         2243: 0x003E                           CaseBranch=2290

000632              Case MMA8652_ACTIVE_ODR._800HZ
000633                  ms = msTable.Item(offset)                                                                                                                                                                                        2244: 0x8804   PushLocalI32            offset
                                                                                                                                                                                                                                         2245: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2246: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2247: 0x9002   PopLocalI32             ms

                                                                                                                                                                                                                                         2248: 0x402F   Branch                  2296
000634              Case MMA8652_ACTIVE_ODR._400HZ                                                                                                                                                                                       

000635                  ms = msTable.Item(offset + 1)                                                                                                                                                                                    2249: 0x8804   PushLocalI32            offset
                                                                                                                                                                                                                                         2250: 0x0028   IntInc                  
                                                                                                                                                                                                                                         2251: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2252: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2253: 0x9002   PopLocalI32             ms

                                                                                                                                                                                                                                         2254: 0x4029   Branch                  2296
000636              Case MMA8652_ACTIVE_ODR._200HZ                                                                                                                                                                                       

000637                  ms = msTable.Item(offset + 2)                                                                                                                                                                                    2255: 0x8804   PushLocalI32            offset
                                                                                                                                                                                                                                         2256: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         2257: 0x001E   IntAdd                  
                                                                                                                                                                                                                                         2258: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2259: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2260: 0x9002   PopLocalI32             ms

                                                                                                                                                                                                                                         2261: 0x4022   Branch                  2296
000638              Case MMA8652_ACTIVE_ODR._100HZ                                                                                                                                                                                       

000639                  ms = msTable.Item(offset + 3)                                                                                                                                                                                    2262: 0x8804   PushLocalI32            offset
                                                                                                                                                                                                                                         2263: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         2264: 0x001E   IntAdd                  
                                                                                                                                                                                                                                         2265: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2266: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2267: 0x9002   PopLocalI32             ms

                                                                                                                                                                                                                                         2268: 0x401B   Branch                  2296
000640              Case MMA8652_ACTIVE_ODR._50HZ                                                                                                                                                                                        

000641                  ms = msTable.Item(offset + 4)                                                                                                                                                                                    2269: 0x8804   PushLocalI32            offset
                                                                                                                                                                                                                                         2270: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         2271: 0x001E   IntAdd                  
                                                                                                                                                                                                                                         2272: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2273: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2274: 0x9002   PopLocalI32             ms

                                                                                                                                                                                                                                         2275: 0x4014   Branch                  2296
000642              Case MMA8652_ACTIVE_ODR._12_5HZ                                                                                                                                                                                      

000643                  ms = msTable.Item(offset + 5)                                                                                                                                                                                    2276: 0x8804   PushLocalI32            offset
                                                                                                                                                                                                                                         2277: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                                                                                         2278: 0x001E   IntAdd                  
                                                                                                                                                                                                                                         2279: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2280: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2281: 0x9002   PopLocalI32             ms

                                                                                                                                                                                                                                         2282: 0x400D   Branch                  2296
000644              Case MMA8652_ACTIVE_ODR._6_25HZ                                                                                                                                                                                      

000645                  ms = msTable.Item(offset + 6)                                                                                                                                                                                    2283: 0x8804   PushLocalI32            offset
                                                                                                                                                                                                                                         2284: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                         2285: 0x001E   IntAdd                  
                                                                                                                                                                                                                                         2286: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2287: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2288: 0x9002   PopLocalI32             ms

                                                                                                                                                                                                                                         2289: 0x4006   Branch                  2296
000646              Case MMA8652_ACTIVE_ODR._1_56HZ                                                                                                                                                                                      

000647                  ms = msTable.Item(offset + 7)                                                                                                                                                                                    2290: 0x8804   PushLocalI32            offset
                                                                                                                                                                                                                                         2291: 0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                                                                                         2292: 0x001E   IntAdd                  
                                                                                                                                                                                                                                         2293: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2294: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2295: 0x9002   PopLocalI32             ms

000648          End Select
000649          
000650          time = ms * 255                                                                                                                                                                                                          2296: 0x8802   PushLocalI32            ms
                                                                                                                                                                                                                                         2297: 0x80FF   PushConstU10            255 (0x00FF)
                                                                                                                                                                                                                                         2298: 0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                         2299: 0x003C   FltMul                  
                                                                                                                                                                                                                                         2300: 0x9003   PopLocalI32             time

000651          
000652          result.Add(time.Floor)                                                                                                                                                                                                   2301: 0x8803   PushLocalI32            time
                                                                                                                                                                                                                                         2302: 0x004B   FltFloor                
                                                                                                                                                                                                                                         2303: 0x8C02   PushLocalRef            result
                                                                                                                                                                                                                                         2304: 0x00A3   ListAdd                 

000653          result.Add(ms)                                                                                                                                                                                                           2305: 0x8802   PushLocalI32            ms
                                                                                                                                                                                                                                         2306: 0x8C02   PushLocalRef            result
                                                                                                                                                                                                                                         2307: 0x00A3   ListAdd                 

000654          Return result                                                                                                                                                                                                            2308: 0x8C02   PushLocalRef            result
                                                                                                                                                                                                                                         2309: 0x0095   ReturnRefType           

000655      End Function // GetMaxTimeAndTimeStep                                                                                                                                                                                        2310: 0x0096   ReturnNothing           

000656      
000657      
000658      Private Function FloatToByteRepresentation(number As Float, resolution As Float, lowThreshold As Float) As Byte                                                                                                              2311: 0x1830   EntryPoint              ValTypParams=3, RefTypParams=0

000659          Return ((number - lowThreshold) / resolution).ToByte                                                                                                                                                                     2312: 0x8800   PushLocalI32            number
                                                                                                                                                                                                                                         2313: 0x8802   PushLocalI32            lowThreshold
                                                                                                                                                                                                                                         2314: 0x003F   FltSub                  
                                                                                                                                                                                                                                         2315: 0x8801   PushLocalI32            resolution
                                                                                                                                                                                                                                         2316: 0x003B   FltDiv                  
                                                                                                                                                                                                                                         2317: 0x007B   CvtFltToInt             
                                                                                                                                                                                                                                         2318: 0x007D   CvtIntToByt             
                                                                                                                                                                                                                                         2319: 0x0092   ReturnValType           

000660      End Function // FloatToByteRepresentation                                                                                                                                                                                    2320: 0x0093   Return0                 

000661      
000662      
000663      'Private Function ByteToFloatRepresentation(number As Byte, resolution As Float, lowThreshold As Float) As Float
000664      '    Return number * resolution + lowThreshold
000665      'End Function // ByteToFloatRepresentation
000666      
000667      
000668      Public Function Standby() As Boolean                                                                                                                                                                                         2321: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000669          'set active bit to 0 put accel in standby mode
000670          Return Write(CTRL_REG1_REG, Read(CTRL_REG1_REG) & ~CTRL_REG1_ACTIVE)                                                                                                                                                     2322: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         2323: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         2324: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2325: 0x56F0   BranchSubrBack          1574
                                                                                                                                                                                                                                         2326: 0x80FE   PushConstU10            254 (0x00FE)
                                                                                                                                                                                                                                         2327: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2328: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2329: 0x56CF   BranchSubrBack          1611
                                                                                                                                                                                                                                         2330: 0x0092   ReturnValType           

000671      End Function // Standby                                                                                                                                                                                                      2331: 0x0093   Return0                 

000672      
000673      
000674      Public Function Activate() As Boolean                                                                                                                                                                                        2332: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000675          'set active bit to put accel in active mode
000676          Return Write(CTRL_REG1_REG, Read(CTRL_REG1_REG) | CTRL_REG1_ACTIVE)                                                                                                                                                      2333: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         2334: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         2335: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2336: 0x56FB   BranchSubrBack          1574
                                                                                                                                                                                                                                         2337: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         2338: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2339: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2340: 0x56DA   BranchSubrBack          1611
                                                                                                                                                                                                                                         2341: 0x0092   ReturnValType           

000677      End Function // Activate                                                                                                                                                                                                     2342: 0x0093   Return0                 

000678      
000679      
000680      Private Function GetActiveModeFrequency() As Byte                                                                                                                                                                            2343: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000681          Return Read(CTRL_REG1_REG) & CTRL_REG1_DR                                                                                                                                                                                2344: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         2345: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2346: 0x5705   BranchSubrBack          1574
                                                                                                                                                                                                                                         2347: 0x8038   PushConstU10            56 (0x0038)
                                                                                                                                                                                                                                         2348: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2349: 0x0092   ReturnValType           

000682      End Function // GetActiveModeFrequency                                                                                                                                                                                       2350: 0x0093   Return0                 

000683      
000684      
000685      Public Function DisableSleepMode() As Boolean                                                                                                                                                                                2351: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000686          Return EnableSleepMode(False, False)                                                                                                                                                                                     2352: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2353: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2354: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2355: 0x1C02   BranchSubr              2358
                                                                                                                                                                                                                                         2356: 0x0092   ReturnValType           

000687      End Function // DisableSleepMode                                                                                                                                                                                             2357: 0x0093   Return0                 

000688      
000689      
000690      Private Function EnableSleepMode(canSleep As Boolean, setPin2 As Boolean) As Boolean                                                                                                                                         2358: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0
                                                                                                                                                                                                                                         2359: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000691          Dim result As Boolean = True                                                                                                                                                                                             2360: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         2361: 0x9002   PopLocalI32             result

000692          
000693          result = result And Standby()                                                                                                                                                                                            2362: 0x8802   PushLocalI32            result
                                                                                                                                                                                                                                         2363: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2364: 0x542C   BranchSubrBack          2321
                                                                                                                                                                                                                                         2365: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2366: 0x9002   PopLocalI32             result

000694          
000695          If canSleep Then                                                                                                                                                                                                         2367: 0x8800   PushLocalI32            canSleep
                                                                                                                                                                                                                                         2368: 0x3C30   BranchFalse             2417

000696              result = result And Write(CTRL_REG2_REG, Read(CTRL_REG2_REG) | CTRL_REG2_SLPE)                                                                                                                                       2369: 0x8802   PushLocalI32            result
                                                                                                                                                                                                                                         2370: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         2371: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         2372: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2373: 0x5720   BranchSubrBack          1574
                                                                                                                                                                                                                                         2374: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         2375: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2376: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2377: 0x56FF   BranchSubrBack          1611
                                                                                                                                                                                                                                         2378: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2379: 0x9002   PopLocalI32             result

000697              result = result And Write(CTRL_REG4_REG, Read(CTRL_REG4_REG) | CTRL_REG4_INT_EN_ASLP)                                                                                                                                2380: 0x8802   PushLocalI32            result
                                                                                                                                                                                                                                         2381: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         2382: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         2383: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2384: 0x572B   BranchSubrBack          1574
                                                                                                                                                                                                                                         2385: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                         2386: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2387: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2388: 0x570A   BranchSubrBack          1611
                                                                                                                                                                                                                                         2389: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2390: 0x9002   PopLocalI32             result

000698              If setPin2 Then                                                                                                                                                                                                      2391: 0x8801   PushLocalI32            setPin2
                                                                                                                                                                                                                                         2392: 0x3C0C   BranchFalse             2405

000699                  result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) & ~CTRL_REG5_INT_CFG_ASLP)                                                                                                                          2393: 0x8802   PushLocalI32            result
                                                                                                                                                                                                                                         2394: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2395: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2396: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2397: 0x5738   BranchSubrBack          1574
                                                                                                                                                                                                                                         2398: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                         2399: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2400: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2401: 0x5717   BranchSubrBack          1611
                                                                                                                                                                                                                                         2402: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2403: 0x9002   PopLocalI32             result

                                                                                                                                                                                                                                         2404: 0x400B   Branch                  2416
000700              Else                                                                                                                                                                                                                 

000701                  result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) | CTRL_REG5_INT_CFG_ASLP)                                                                                                                           2405: 0x8802   PushLocalI32            result
                                                                                                                                                                                                                                         2406: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2407: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2408: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2409: 0x5744   BranchSubrBack          1574
                                                                                                                                                                                                                                         2410: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                         2411: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2412: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2413: 0x5723   BranchSubrBack          1611
                                                                                                                                                                                                                                         2414: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2415: 0x9002   PopLocalI32             result

000702              End If
                                                                                                                                                                                                                                         2416: 0x400B   Branch                  2428
000703          Else                                                                                                                                                                                                                     

000704              result = result And Write(CTRL_REG2_REG, Read(CTRL_REG2_REG) & ~CTRL_REG2_SLPE)                                                                                                                                      2417: 0x8802   PushLocalI32            result
                                                                                                                                                                                                                                         2418: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         2419: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         2420: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2421: 0x5750   BranchSubrBack          1574
                                                                                                                                                                                                                                         2422: 0x80FB   PushConstU10            251 (0x00FB)
                                                                                                                                                                                                                                         2423: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2424: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2425: 0x572F   BranchSubrBack          1611
                                                                                                                                                                                                                                         2426: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2427: 0x9002   PopLocalI32             result

000705          End If
000706          
000707          result = result And Activate()                                                                                                                                                                                           2428: 0x8802   PushLocalI32            result
                                                                                                                                                                                                                                         2429: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2430: 0x5463   BranchSubrBack          2332
                                                                                                                                                                                                                                         2431: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2432: 0x9002   PopLocalI32             result

000708          
000709          Return result                                                                                                                                                                                                            2433: 0x8802   PushLocalI32            result
                                                                                                                                                                                                                                         2434: 0x0092   ReturnValType           

000710      End Function // EnableSleepMode                                                                                                                                                                                              2435: 0x0093   Return0                 

000711      
000712      
000713      Public Function EnableSleepMode(duration As Float) As Boolean                                                                                                                                                                2436: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000714          Return EnableSleepMode(duration, False)                                                                                                                                                                                  2437: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2438: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2439: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2440: 0x1C02   BranchSubr              2443
                                                                                                                                                                                                                                         2441: 0x0092   ReturnValType           

000715      End Function // EnableSleepMode                                                                                                                                                                                              2442: 0x0093   Return0                 

000716      
000717      
000718      'duration - period of inactivity before device enters sleep mode, in ms
000719      Public Function EnableSleepMode(duration As Float, setPin2 As Boolean) As Boolean                                                                                                                                            2443: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0
                                                                                                                                                                                                                                         2444: 0xE040   AllocateStackSpace      ValTypeSize=2, RefTypeSize=0

000720          Dim durationByte As Byte = 0
000721          Dim result As Boolean = EnableSleepMode(True, setPin2)                                                                                                                                                                   2445: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         2446: 0x8801   PushLocalI32            setPin2
                                                                                                                                                                                                                                         2447: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2448: 0x545B   BranchSubrBack          2358
                                                                                                                                                                                                                                         2449: 0x9003   PopLocalI32             result

000722          
000723          result = result And Standby()                                                                                                                                                                                            2450: 0x8803   PushLocalI32            result
                                                                                                                                                                                                                                         2451: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2452: 0x5484   BranchSubrBack          2321
                                                                                                                                                                                                                                         2453: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2454: 0x9003   PopLocalI32             result

000724          
000725          If GetActiveModeFrequency() = MMA8652_ACTIVE_ODR._1_56HZ Then                                                                                                                                                            2455: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2456: 0x5472   BranchSubrBack          2343
                                                                                                                                                                                                                                         2457: 0x8038   PushConstU10            56 (0x0038)
                                                                                                                                                                                                                                         2458: 0x2416   BranchNE                2481

000726              If (duration < LOW_ASLP_DURATION Or duration > HIGH_ASLP_DURATION) Then                                                                                                                                              2459: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2460: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2461: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2462: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         2463: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2464: 0x0110   PushConstI32            1209938944 (0x481E3400)
                                                                                                                                                                                                                                         2465: 0x3400                           
                                                                                                                                                                                                                                         2466: 0x481E                           
                                                                                                                                                                                                                                         2467: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2468: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         2469: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2470: 0x3C01   BranchFalse             2472

000727                  Return False                                                                                                                                                                                                     2471: 0x0093   Return0                 

000728              End If
000729              
000730              durationByte = FloatToByteRepresentation(duration, HIGH_ASLP_COUNT_RESOLUTION, LOW_ASLP_DURATION)                                                                                                                    2472: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2473: 0x0110   PushConstI32            1142947840 (0x44200000)
                                                                                                                                                                                                                                         2474: 0x0000                           
                                                                                                                                                                                                                                         2475: 0x4420                           
                                                                                                                                                                                                                                         2476: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2477: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2478: 0x54A8   BranchSubrBack          2311
                                                                                                                                                                                                                                         2479: 0x9002   PopLocalI32             durationByte

                                                                                                                                                                                                                                         2480: 0x4015   Branch                  2502
000731          Else                                                                                                                                                                                                                     

000732              If (duration < LOW_ASLP_DURATION Or duration > NORMAL_ASLP_DURATION) Then                                                                                                                                            2481: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2482: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2483: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2484: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         2485: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2486: 0x0110   PushConstI32            1201550336 (0x479E3400)
                                                                                                                                                                                                                                         2487: 0x3400                           
                                                                                                                                                                                                                                         2488: 0x479E                           
                                                                                                                                                                                                                                         2489: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2490: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         2491: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2492: 0x3C01   BranchFalse             2494

000733                  Return False                                                                                                                                                                                                     2493: 0x0093   Return0                 

000734              End If
000735              
000736              durationByte = FloatToByteRepresentation(duration, NORMAL_ASLP_COUNT_RESOLUTION, LOW_ASLP_DURATION)                                                                                                                  2494: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2495: 0x0110   PushConstI32            1134559232 (0x43A00000)
                                                                                                                                                                                                                                         2496: 0x0000                           
                                                                                                                                                                                                                                         2497: 0x43A0                           
                                                                                                                                                                                                                                         2498: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2499: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2500: 0x54BE   BranchSubrBack          2311
                                                                                                                                                                                                                                         2501: 0x9002   PopLocalI32             durationByte

000737          End If
000738          
000739          result = result And Write(ASLP_COUNT_REG, durationByte)                                                                                                                                                                  2502: 0x8803   PushLocalI32            result
                                                                                                                                                                                                                                         2503: 0x8029   PushConstU10            41 (0x0029)
                                                                                                                                                                                                                                         2504: 0x8802   PushLocalI32            durationByte
                                                                                                                                                                                                                                         2505: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2506: 0x5780   BranchSubrBack          1611
                                                                                                                                                                                                                                         2507: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2508: 0x9003   PopLocalI32             result

000740          
000741          result = result And Activate()                                                                                                                                                                                           2509: 0x8803   PushLocalI32            result
                                                                                                                                                                                                                                         2510: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2511: 0x54B4   BranchSubrBack          2332
                                                                                                                                                                                                                                         2512: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2513: 0x9003   PopLocalI32             result

000742          
000743          Return result                                                                                                                                                                                                            2514: 0x8803   PushLocalI32            result
                                                                                                                                                                                                                                         2515: 0x0092   ReturnValType           

000744      End Function // EnableSleepMode                                                                                                                                                                                              2516: 0x0093   Return0                 

000745      
000746      
000747      'Configures the active output data rate, setting the sleep output data rate to the default
000748      Public Function Setup(activeHz As MMA8652_ACTIVE_ODR, activePowerScheme As MMA8652_MODS) As Boolean                                                                                                                          2517: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0

000749          Return Setup(activeHz, activePowerScheme, MMA8652_SLEEP_ODR._50HZ, MMA8652_SMODS.NORMAL)                                                                                                                                 2518: 0x8800   PushLocalI32            activeHz
                                                                                                                                                                                                                                         2519: 0x8801   PushLocalI32            activePowerScheme
                                                                                                                                                                                                                                         2520: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2521: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2522: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2523: 0x1C02   BranchSubr              2526
                                                                                                                                                                                                                                         2524: 0x0092   ReturnValType           

000750      End Function // Setup                                                                                                                                                                                                        2525: 0x0093   Return0                 

000751      
000752      
000753      'Configures the active and sleep output data rates
000754      Public Function Setup(activeHz As MMA8652_ACTIVE_ODR, activePowerScheme As MMA8652_MODS, sleepHz As MMA8652_SLEEP_ODR, sleepPowerScheme As MMA8652_SMODS) As Boolean                                                         2526: 0x1840   EntryPoint              ValTypParams=4, RefTypParams=0
                                                                                                                                                                                                                                         2527: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000755          Dim result As Boolean = True                                                                                                                                                                                             2528: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         2529: 0x9004   PopLocalI32             result

000756          
000757          result = result And Standby()                                                                                                                                                                                            2530: 0x8804   PushLocalI32            result
                                                                                                                                                                                                                                         2531: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2532: 0x54D4   BranchSubrBack          2321
                                                                                                                                                                                                                                         2533: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2534: 0x9004   PopLocalI32             result

000758          result = result And Write(CTRL_REG1_REG, (Read(CTRL_REG1_REG) & ~CTRL_REG1_DR) | activeHz)                                                                                                                               2535: 0x8804   PushLocalI32            result
                                                                                                                                                                                                                                         2536: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         2537: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         2538: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2539: 0x57C6   BranchSubrBack          1574
                                                                                                                                                                                                                                         2540: 0x80C7   PushConstU10            199 (0x00C7)
                                                                                                                                                                                                                                         2541: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2542: 0x8800   PushLocalI32            activeHz
                                                                                                                                                                                                                                         2543: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2544: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2545: 0x57A7   BranchSubrBack          1611
                                                                                                                                                                                                                                         2546: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2547: 0x9004   PopLocalI32             result

000759          result = result And Write(CTRL_REG2_REG, (Read(CTRL_REG2_REG) & ~CTRL_REG2_MODS) | activePowerScheme)                                                                                                                    2548: 0x8804   PushLocalI32            result
                                                                                                                                                                                                                                         2549: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         2550: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         2551: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2552: 0x57D3   BranchSubrBack          1574
                                                                                                                                                                                                                                         2553: 0x80FC   PushConstU10            252 (0x00FC)
                                                                                                                                                                                                                                         2554: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2555: 0x8801   PushLocalI32            activePowerScheme
                                                                                                                                                                                                                                         2556: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2557: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2558: 0x57B4   BranchSubrBack          1611
                                                                                                                                                                                                                                         2559: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2560: 0x9004   PopLocalI32             result

000760          result = result And Write(CTRL_REG1_REG, (Read(CTRL_REG1_REG) & ~CTRL_REG1_ASLP_RATE) | sleepHz)                                                                                                                         2561: 0x8804   PushLocalI32            result
                                                                                                                                                                                                                                         2562: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         2563: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         2564: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2565: 0x57E0   BranchSubrBack          1574
                                                                                                                                                                                                                                         2566: 0x803F   PushConstU10            63 (0x003F)
                                                                                                                                                                                                                                         2567: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2568: 0x8802   PushLocalI32            sleepHz
                                                                                                                                                                                                                                         2569: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2570: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2571: 0x57C1   BranchSubrBack          1611
                                                                                                                                                                                                                                         2572: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2573: 0x9004   PopLocalI32             result

000761          result = result And Write(CTRL_REG2_REG, (Read(CTRL_REG2_REG) & ~CTRL_REG2_SMODS) | sleepPowerScheme)                                                                                                                    2574: 0x8804   PushLocalI32            result
                                                                                                                                                                                                                                         2575: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         2576: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         2577: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2578: 0x57ED   BranchSubrBack          1574
                                                                                                                                                                                                                                         2579: 0x80E7   PushConstU10            231 (0x00E7)
                                                                                                                                                                                                                                         2580: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2581: 0x8803   PushLocalI32            sleepPowerScheme
                                                                                                                                                                                                                                         2582: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2583: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2584: 0x57CE   BranchSubrBack          1611
                                                                                                                                                                                                                                         2585: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2586: 0x9004   PopLocalI32             result

000762          result = result And Activate()                                                                                                                                                                                           2587: 0x8804   PushLocalI32            result
                                                                                                                                                                                                                                         2588: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2589: 0x5502   BranchSubrBack          2332
                                                                                                                                                                                                                                         2590: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2591: 0x9004   PopLocalI32             result

000763          
000764          Return result                                                                                                                                                                                                            2592: 0x8804   PushLocalI32            result
                                                                                                                                                                                                                                         2593: 0x0092   ReturnValType           

000765      End Function // Setup                                                                                                                                                                                                        2594: 0x0093   Return0                 

000766      
000767      
000768      Public Function ConfigureOrientationInterrupt(duration As Float, bfAngle As MMA8652_BF_ANGLE, zlockAngle As Float, thsAngle As MMA8652_THS_ANGLE, hysAngle As MMA8652_HYS_ANGLE) As Boolean                                  2595: 0x1850   EntryPoint              ValTypParams=5, RefTypParams=0

000769          Return ConfigureOrientationInterrupt(duration, bfAngle, zlockAngle, thsAngle, hysAngle, False)                                                                                                                           2596: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2597: 0x8801   PushLocalI32            bfAngle
                                                                                                                                                                                                                                         2598: 0x8802   PushLocalI32            zlockAngle
                                                                                                                                                                                                                                         2599: 0x8803   PushLocalI32            thsAngle
                                                                                                                                                                                                                                         2600: 0x8804   PushLocalI32            hysAngle
                                                                                                                                                                                                                                         2601: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2602: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2603: 0x1C02   BranchSubr              2606
                                                                                                                                                                                                                                         2604: 0x0092   ReturnValType           

000770      End Function // ConfigureOrientationInterrupt                                                                                                                                                                                2605: 0x0093   Return0                 

000771      
000772      
000773      'ConfigureOrientationInterrupt - configures device to interrupt on orientation change
000774      '
000775      'duration - Time for angle to be present before interrupt in ms
000776      'bfAngle - Angle for transitioning between back/front orientation
000777      'zlockAngle - Angle which determines z-axis dead zone
000778      'thsAngle - Angle which determins portrait to landscape transition
000779      'hysAngle - Angle for widening the thsAngle
000780      'setPin2 - True to route orientation interrupt to pin2
000781      Public Function ConfigureOrientationInterrupt(duration As Float, bfAngle As MMA8652_BF_ANGLE, zlockAngle As Float, thsAngle As MMA8652_THS_ANGLE, hysAngle As MMA8652_HYS_ANGLE, setPin2 As Boolean) As Boolean              2606: 0x1860   EntryPoint              ValTypParams=6, RefTypParams=0
                                                                                                                                                                                                                                         2607: 0xE061   AllocateStackSpace      ValTypeSize=3, RefTypeSize=1

000782          Dim durationByte As Byte
000783          Dim zlockAngleByte As Byte
000784          Dim result As Boolean = True                                                                                                                                                                                             2608: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         2609: 0x9008   PopLocalI32             result

000785          Dim maxTimeAndTimeStep As ListOfFloat = GetMaxTimeAndTimeStep("long")                                                                                                                                                    2610: 0x8484   PushLiteral             132
                                                                                                                                                                                                                                         2611: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2612: 0x57BC   BranchSubrBack          1657
                                                                                                                                                                                                                                         2613: 0x9400   PopLocalRef             maxTimeAndTimeStep

000786          
000787          If (duration < 0.0 Or duration > maxTimeAndTimeStep(0)) Then                                                                                                                                                             2614: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2615: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2616: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2617: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         2618: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2619: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2620: 0x8C00   PushLocalRef            maxTimeAndTimeStep
                                                                                                                                                                                                                                         2621: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2622: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2623: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         2624: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2625: 0x3C01   BranchFalse             2627

000788              Return False                                                                                                                                                                                                         2626: 0x0093   Return0                 

000789          End If
000790          
000791          If (zlockAngle < LOW_ZLOCK_THRESHOLD Or zlockAngle > HIGH_ZLOCK_THRESHOLD) Then                                                                                                                                          2627: 0x8802   PushLocalI32            zlockAngle
                                                                                                                                                                                                                                         2628: 0xEA0E   PushConstFlt            14.0
                                                                                                                                                                                                                                         2629: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2630: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         2631: 0x8802   PushLocalI32            zlockAngle
                                                                                                                                                                                                                                         2632: 0xEA2A   PushConstFlt            42.0
                                                                                                                                                                                                                                         2633: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2634: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         2635: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2636: 0x3C01   BranchFalse             2638

000792              Return False                                                                                                                                                                                                         2637: 0x0093   Return0                 

000793          End If
000794          
000795          durationByte = FloatToByteRepresentation(duration, maxTimeAndTimeStep(1), 0.0)                                                                                                                                           2638: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2639: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         2640: 0x8C00   PushLocalRef            maxTimeAndTimeStep
                                                                                                                                                                                                                                         2641: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2642: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2643: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2644: 0x554E   BranchSubrBack          2311
                                                                                                                                                                                                                                         2645: 0x9006   PopLocalI32             durationByte

000796          zlockAngleByte = FloatToByteRepresentation(zlockAngle, ZLOCK_THRESHOLD_RESOLUTION, LOW_ZLOCK_THRESHOLD)                                                                                                                  2646: 0x8802   PushLocalI32            zlockAngle
                                                                                                                                                                                                                                         2647: 0xEA04   PushConstFlt            4.0
                                                                                                                                                                                                                                         2648: 0xEA0E   PushConstFlt            14.0
                                                                                                                                                                                                                                         2649: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2650: 0x5554   BranchSubrBack          2311
                                                                                                                                                                                                                                         2651: 0x9007   PopLocalI32             zlockAngleByte

000797          
000798          result = result And Standby()                                                                                                                                                                                            2652: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2653: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2654: 0x554E   BranchSubrBack          2321
                                                                                                                                                                                                                                         2655: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2656: 0x9008   PopLocalI32             result

000799          
000800          'Wakeup from orientation interrupt
000801          result = result And Write(CTRL_REG3_REG, Read(CTRL_REG3_REG) | CTRL_REG3_WAKE_LNDPRT)                                                                                                                                    2657: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2658: 0x802C   PushConstU10            44 (0x002C)
                                                                                                                                                                                                                                         2659: 0x802C   PushConstU10            44 (0x002C)
                                                                                                                                                                                                                                         2660: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2661: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         2662: 0x0626                           
                                                                                                                                                                                                                                         2663: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         2664: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2665: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2666: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2667: 0x064B                           
                                                                                                                                                                                                                                         2668: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2669: 0x9008   PopLocalI32             result

000802          'Enable orientation interrupts
000803          result = result And Write(CTRL_REG4_REG, Read(CTRL_REG4_REG) | CTRL_REG4_INT_EN_LNDPRT)                                                                                                                                  2670: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2671: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         2672: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         2673: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2674: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         2675: 0x0626                           
                                                                                                                                                                                                                                         2676: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         2677: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2678: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2679: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2680: 0x064B                           
                                                                                                                                                                                                                                         2681: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2682: 0x9008   PopLocalI32             result

000804          
000805          If setPin2 Then                                                                                                                                                                                                          2683: 0x8805   PushLocalI32            setPin2
                                                                                                                                                                                                                                         2684: 0x3C0E   BranchFalse             2699

000806              result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) & ~CTRL_REG5_INT_CFG_LNDPRT)                                                                                                                            2685: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2686: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2687: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2688: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2689: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         2690: 0x0626                           
                                                                                                                                                                                                                                         2691: 0x80EF   PushConstU10            239 (0x00EF)
                                                                                                                                                                                                                                         2692: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2693: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2694: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2695: 0x064B                           
                                                                                                                                                                                                                                         2696: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2697: 0x9008   PopLocalI32             result

                                                                                                                                                                                                                                         2698: 0x400D   Branch                  2712
000807          Else                                                                                                                                                                                                                     

000808              result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) | CTRL_REG5_INT_CFG_LNDPRT)                                                                                                                             2699: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2700: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2701: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2702: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2703: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         2704: 0x0626                           
                                                                                                                                                                                                                                         2705: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         2706: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2707: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2708: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2709: 0x064B                           
                                                                                                                                                                                                                                         2710: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2711: 0x9008   PopLocalI32             result

000809          End If
000810          
000811          'Clears counter (default) and enables PL detection
000812          result = result And Write(PL_CFG_REG, PL_CFG_DBCNTM | PL_CFG_PL_EN)                                                                                                                                                      2712: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2713: 0x8011   PushConstU10            17 (0x0011)
                                                                                                                                                                                                                                         2714: 0x80C0   PushConstU10            192 (0x00C0)
                                                                                                                                                                                                                                         2715: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2716: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2717: 0x064B                           
                                                                                                                                                                                                                                         2718: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2719: 0x9008   PopLocalI32             result

000813          
000814          'Set the debounce count
000815          result = result And Write(PL_COUNT_REG, durationByte)                                                                                                                                                                    2720: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2721: 0x8012   PushConstU10            18 (0x0012)
                                                                                                                                                                                                                                         2722: 0x8806   PushLocalI32            durationByte
                                                                                                                                                                                                                                         2723: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2724: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2725: 0x064B                           
                                                                                                                                                                                                                                         2726: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2727: 0x9008   PopLocalI32             result

000816          'Set the back/front trip angle threshold
000817          result = result And Write(PL_BF_ZCOMP_REG, (Read(PL_BF_ZCOMP_REG) & ~PL_BF_ZCOMP_BKFR) | bfAngle)                                                                                                                        2728: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2729: 0x8013   PushConstU10            19 (0x0013)
                                                                                                                                                                                                                                         2730: 0x8013   PushConstU10            19 (0x0013)
                                                                                                                                                                                                                                         2731: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2732: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         2733: 0x0626                           
                                                                                                                                                                                                                                         2734: 0x803F   PushConstU10            63 (0x003F)
                                                                                                                                                                                                                                         2735: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2736: 0x8801   PushLocalI32            bfAngle
                                                                                                                                                                                                                                         2737: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2738: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2739: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2740: 0x064B                           
                                                                                                                                                                                                                                         2741: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2742: 0x9008   PopLocalI32             result

000818          'Set the z-lock threshold angle
000819          result = result And Write(PL_BF_ZCOMP_REG, (Read(PL_BF_ZCOMP_REG) & ~PL_BF_ZCOMP_ZLOCK) | zlockAngleByte)                                                                                                                2743: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2744: 0x8013   PushConstU10            19 (0x0013)
                                                                                                                                                                                                                                         2745: 0x8013   PushConstU10            19 (0x0013)
                                                                                                                                                                                                                                         2746: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2747: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         2748: 0x0626                           
                                                                                                                                                                                                                                         2749: 0x80F8   PushConstU10            248 (0x00F8)
                                                                                                                                                                                                                                         2750: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2751: 0x8807   PushLocalI32            zlockAngleByte
                                                                                                                                                                                                                                         2752: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2753: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2754: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2755: 0x064B                           
                                                                                                                                                                                                                                         2756: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2757: 0x9008   PopLocalI32             result

000820          'Set the Threshold value
000821          result = result And Write(PL_THS_REG, (Read(PL_THS_REG) & ~PL_THS_THS) | thsAngle)                                                                                                                                       2758: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2759: 0x8014   PushConstU10            20 (0x0014)
                                                                                                                                                                                                                                         2760: 0x8014   PushConstU10            20 (0x0014)
                                                                                                                                                                                                                                         2761: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2762: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         2763: 0x0626                           
                                                                                                                                                                                                                                         2764: 0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                                                                                         2765: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2766: 0x8803   PushLocalI32            thsAngle
                                                                                                                                                                                                                                         2767: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2768: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2769: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2770: 0x064B                           
                                                                                                                                                                                                                                         2771: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2772: 0x9008   PopLocalI32             result

000822          'Set the Hysteresis value
000823          result = result And Write(PL_THS_REG, (Read(PL_THS_REG) & ~PL_THS_HYS) | hysAngle)                                                                                                                                       2773: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2774: 0x8014   PushConstU10            20 (0x0014)
                                                                                                                                                                                                                                         2775: 0x8014   PushConstU10            20 (0x0014)
                                                                                                                                                                                                                                         2776: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2777: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         2778: 0x0626                           
                                                                                                                                                                                                                                         2779: 0x80F8   PushConstU10            248 (0x00F8)
                                                                                                                                                                                                                                         2780: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2781: 0x8804   PushLocalI32            hysAngle
                                                                                                                                                                                                                                         2782: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2783: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2784: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2785: 0x064B                           
                                                                                                                                                                                                                                         2786: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2787: 0x9008   PopLocalI32             result

000824          
000825          result = result And Activate()                                                                                                                                                                                           2788: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2789: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2790: 0x55CB   BranchSubrBack          2332
                                                                                                                                                                                                                                         2791: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2792: 0x9008   PopLocalI32             result

000826          
000827          Return result                                                                                                                                                                                                            2793: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2794: 0x0092   ReturnValType           

000828      End Function // ConfigureOrientationInterrupt                                                                                                                                                                                2795: 0x0093   Return0                 

000829      
000830      
000831      Public Function ConfigureFreefallInterrupt(threshold As Float, duration As Byte) As Boolean                                                                                                                                  2796: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0

000832          Return ConfigureFreefallInterrupt(threshold, duration, 0x38, False)                                                                                                                                                      2797: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         2798: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         2799: 0x8038   PushConstU10            56 (0x0038)
                                                                                                                                                                                                                                         2800: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2801: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2802: 0x1C02   BranchSubr              2805
                                                                                                                                                                                                                                         2803: 0x0092   ReturnValType           

000833      End Function // ConfigureFreefallInterrupt                                                                                                                                                                                   2804: 0x0093   Return0                 

000834      
000835      
000836      'ConfigureFreefallInterrupt - configures device to interrupt on freefall
000837      '
000838      'threshold - Trigger threshold (0.0 Gs - 8.0 Gs), 0.063mG steps
000839      'duration - Count for threshold to be present before interrupt
000840      'axis - Which axis to enable freefall. See datasheet to know which bits to set
000841      'setPin2 - True to route orientation interrupt to pin2
000842      Public Function ConfigureFreefallInterrupt(threshold As Float, duration As Byte, axis As Byte, setPin2 As Boolean) As Boolean                                                                                                2805: 0x1840   EntryPoint              ValTypParams=4, RefTypParams=0
                                                                                                                                                                                                                                         2806: 0xE040   AllocateStackSpace      ValTypeSize=2, RefTypeSize=0

000843          Dim thresholdByte As Byte
000844          Dim result As Boolean = True                                                                                                                                                                                             2807: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         2808: 0x9005   PopLocalI32             result

000845          
000846          If (threshold < LOW_GRAVITY_THRESHOLD Or threshold > HIGH_GRAVITY_THRESHOLD) Then                                                                                                                                        2809: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         2810: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2811: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2812: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         2813: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         2814: 0xEA08   PushConstFlt            8.0
                                                                                                                                                                                                                                         2815: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2816: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         2817: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2818: 0x3C01   BranchFalse             2820

000847              Return False                                                                                                                                                                                                         2819: 0x0093   Return0                 

000848          End If
000849          
000850          'Ensure that axis byte affects axis bits only in the Freefall Config Register
000851          axis = axis & FF_MT_CFG_EFE                                                                                                                                                                                              2820: 0x8802   PushLocalI32            axis
                                                                                                                                                                                                                                         2821: 0x8038   PushConstU10            56 (0x0038)
                                                                                                                                                                                                                                         2822: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2823: 0x9002   PopLocalI32             axis

000852          
000853          thresholdByte = FloatToByteRepresentation(threshold, GRAVITY_THRESHOLD_RESOLUTION, 0.0)                                                                                                                                  2824: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         2825: 0x0110   PushConstI32            1031865893 (0x3D810625)
                                                                                                                                                                                                                                         2826: 0x0625                           
                                                                                                                                                                                                                                         2827: 0x3D81                           
                                                                                                                                                                                                                                         2828: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2829: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2830: 0x5608   BranchSubrBack          2311
                                                                                                                                                                                                                                         2831: 0x9004   PopLocalI32             thresholdByte

000854          
000855          result = result And Standby()                                                                                                                                                                                            2832: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2833: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2834: 0x5602   BranchSubrBack          2321
                                                                                                                                                                                                                                         2835: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2836: 0x9005   PopLocalI32             result

000856          
000857          'Wake from freefall interrupt
000858          result = result And Write(CTRL_REG3_REG, Read(CTRL_REG3_REG) | CTRL_REG3_WAKE_FF_MT)                                                                                                                                     2837: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2838: 0x802C   PushConstU10            44 (0x002C)
                                                                                                                                                                                                                                         2839: 0x802C   PushConstU10            44 (0x002C)
                                                                                                                                                                                                                                         2840: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2841: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         2842: 0x0626                           
                                                                                                                                                                                                                                         2843: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         2844: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2845: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2846: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2847: 0x064B                           
                                                                                                                                                                                                                                         2848: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2849: 0x9005   PopLocalI32             result

000859          'Enable freefall interrupts
000860          result = result And Write(CTRL_REG4_REG, Read(CTRL_REG4_REG) | CTRL_REG4_INT_EN_FF_MT)                                                                                                                                   2850: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2851: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         2852: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         2853: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2854: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         2855: 0x0626                           
                                                                                                                                                                                                                                         2856: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         2857: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2858: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2859: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2860: 0x064B                           
                                                                                                                                                                                                                                         2861: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2862: 0x9005   PopLocalI32             result

000861          
000862          If setPin2 Then                                                                                                                                                                                                          2863: 0x8803   PushLocalI32            setPin2
                                                                                                                                                                                                                                         2864: 0x3C0E   BranchFalse             2879

000863              result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) & ~CTRL_REG5_INT_CFG_FF_MT)                                                                                                                             2865: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2866: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2867: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2868: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2869: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         2870: 0x0626                           
                                                                                                                                                                                                                                         2871: 0x80FB   PushConstU10            251 (0x00FB)
                                                                                                                                                                                                                                         2872: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2873: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2874: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2875: 0x064B                           
                                                                                                                                                                                                                                         2876: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2877: 0x9005   PopLocalI32             result

                                                                                                                                                                                                                                         2878: 0x400D   Branch                  2892
000864          Else                                                                                                                                                                                                                     

000865              result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) | CTRL_REG5_INT_CFG_FF_MT)                                                                                                                              2879: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2880: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2881: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2882: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2883: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         2884: 0x0626                           
                                                                                                                                                                                                                                         2885: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         2886: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2887: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2888: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2889: 0x064B                           
                                                                                                                                                                                                                                         2890: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2891: 0x9005   PopLocalI32             result

000866          End If
000867          
000868          'Latch events
000869          result = result And Write(FF_MT_CFG_REG, Read(FF_MT_CFG_REG) | FF_MT_CFG_ELE)                                                                                                                                            2892: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2893: 0x8015   PushConstU10            21 (0x0015)
                                                                                                                                                                                                                                         2894: 0x8015   PushConstU10            21 (0x0015)
                                                                                                                                                                                                                                         2895: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2896: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         2897: 0x0626                           
                                                                                                                                                                                                                                         2898: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                         2899: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2900: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2901: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2902: 0x064B                           
                                                                                                                                                                                                                                         2903: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2904: 0x9005   PopLocalI32             result

000870          'Enable motion flag
000871          result = result And Write(FF_MT_CFG_REG, Read(FF_MT_CFG_REG) | FF_MT_CFG_OAE)                                                                                                                                            2905: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2906: 0x8015   PushConstU10            21 (0x0015)
                                                                                                                                                                                                                                         2907: 0x8015   PushConstU10            21 (0x0015)
                                                                                                                                                                                                                                         2908: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2909: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         2910: 0x0626                           
                                                                                                                                                                                                                                         2911: 0x8040   PushConstU10            64 (0x0040)
                                                                                                                                                                                                                                         2912: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2913: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2914: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2915: 0x064B                           
                                                                                                                                                                                                                                         2916: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2917: 0x9005   PopLocalI32             result

000872          'Enable on axis
000873          result = result And Write(FF_MT_CFG_REG, (Read(FF_MT_CFG_REG) & ~FF_MT_CFG_EFE) | axis)                                                                                                                                  2918: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2919: 0x8015   PushConstU10            21 (0x0015)
                                                                                                                                                                                                                                         2920: 0x8015   PushConstU10            21 (0x0015)
                                                                                                                                                                                                                                         2921: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2922: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         2923: 0x0626                           
                                                                                                                                                                                                                                         2924: 0x80C7   PushConstU10            199 (0x00C7)
                                                                                                                                                                                                                                         2925: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2926: 0x8802   PushLocalI32            axis
                                                                                                                                                                                                                                         2927: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2928: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2929: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2930: 0x064B                           
                                                                                                                                                                                                                                         2931: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2932: 0x9005   PopLocalI32             result

000874          
000875          'Set Threshold
000876          result = result And Write(FF_MT_THS_REG, thresholdByte)                                                                                                                                                                  2933: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2934: 0x8017   PushConstU10            23 (0x0017)
                                                                                                                                                                                                                                         2935: 0x8804   PushLocalI32            thresholdByte
                                                                                                                                                                                                                                         2936: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2937: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2938: 0x064B                           
                                                                                                                                                                                                                                         2939: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2940: 0x9005   PopLocalI32             result

000877          'Set Duration
000878          result = result And Write(FF_MT_COUNT_REG, duration)                                                                                                                                                                     2941: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2942: 0x8018   PushConstU10            24 (0x0018)
                                                                                                                                                                                                                                         2943: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         2944: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2945: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         2946: 0x064B                           
                                                                                                                                                                                                                                         2947: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2948: 0x9005   PopLocalI32             result

000879          
000880          result = result And Activate()                                                                                                                                                                                           2949: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2950: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2951: 0x566C   BranchSubrBack          2332
                                                                                                                                                                                                                                         2952: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2953: 0x9005   PopLocalI32             result

000881          
000882          Return result                                                                                                                                                                                                            2954: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2955: 0x0092   ReturnValType           

000883      End Function // ConfigureFreefallInterrupt                                                                                                                                                                                   2956: 0x0093   Return0                 

000884      
000885      
000886      Public Function ConfigureShockInterrupt(threshold As Float, duration As Float) As Boolean                                                                                                                                    2957: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0

000887          Return ConfigureShockInterrupt(threshold, duration, 0x0e, False)                                                                                                                                                         2958: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         2959: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         2960: 0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                                                                                         2961: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2962: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2963: 0x1C02   BranchSubr              2966
                                                                                                                                                                                                                                         2964: 0x0092   ReturnValType           

000888      End Function // ConfigureShockInterrupt                                                                                                                                                                                      2965: 0x0093   Return0                 

000889      
000890      
000891      'ConfigureShockInterrupt - configures device to interrupt on shock (currently will interupt on any axis, x,y,z axis configuration can be added later)
000892      '
000893      'threshold As Float - trigger threshold (0.0 Gs - 8.0 Gs), 0.063mG steps
000894      'duration As Float - Duration for threshold to be present to active interrupt in ms
000895      'axis - Which axis to enable shock detection. See datasheet to know which bits to set
000896      'setPin2 - True to route orientation interrupt to pin2
000897      Public Function ConfigureShockInterrupt(threshold As Float, duration As Float, axis As Byte, setPin2 As Boolean) As Boolean                                                                                                  2966: 0x1840   EntryPoint              ValTypParams=4, RefTypParams=0
                                                                                                                                                                                                                                         2967: 0xE061   AllocateStackSpace      ValTypeSize=3, RefTypeSize=1

000898          Dim thresholdByte As Byte
000899          Dim durationByte As Byte
000900          Dim result As Boolean = True                                                                                                                                                                                             2968: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         2969: 0x9006   PopLocalI32             result

000901          Dim maxTimeAndTimeStep As ListOfFloat = GetMaxTimeAndTimeStep("long")                                                                                                                                                    2970: 0x8484   PushLiteral             132
                                                                                                                                                                                                                                         2971: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2972: 0x5800   JumpSubr                1657
                                                                                                                                                                                                                                         2973: 0x0679                           
                                                                                                                                                                                                                                         2974: 0x9400   PopLocalRef             maxTimeAndTimeStep

000902          
000903          If (threshold < LOW_GRAVITY_THRESHOLD Or threshold > HIGH_GRAVITY_THRESHOLD) Then                                                                                                                                        2975: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         2976: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2977: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2978: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         2979: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         2980: 0xEA08   PushConstFlt            8.0
                                                                                                                                                                                                                                         2981: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2982: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         2983: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2984: 0x3C01   BranchFalse             2986

000904              Return False                                                                                                                                                                                                         2985: 0x0093   Return0                 

000905          End If
000906          
000907          If (duration < 0.0 Or duration > maxTimeAndTimeStep(0)) Then                                                                                                                                                             2986: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         2987: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2988: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2989: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         2990: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         2991: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2992: 0x8C00   PushLocalRef            maxTimeAndTimeStep
                                                                                                                                                                                                                                         2993: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2994: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2995: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         2996: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2997: 0x3C01   BranchFalse             2999

000908              Return False                                                                                                                                                                                                         2998: 0x0093   Return0                 

000909          End If
000910          
000911          'Ensure that axis byte affects axis bits only in the Transient Config Register
000912          axis = axis & TRANSIENT_CFG_TEFE                                                                                                                                                                                         2999: 0x8802   PushLocalI32            axis
                                                                                                                                                                                                                                         3000: 0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                                                                                         3001: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3002: 0x9002   PopLocalI32             axis

000913          
000914          'Convert threshold
000915          thresholdByte = FloatToByteRepresentation(threshold, GRAVITY_THRESHOLD_RESOLUTION, 0.0)                                                                                                                                  3003: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         3004: 0x0110   PushConstI32            1031865893 (0x3D810625)
                                                                                                                                                                                                                                         3005: 0x0625                           
                                                                                                                                                                                                                                         3006: 0x3D81                           
                                                                                                                                                                                                                                         3007: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3008: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3009: 0x56BB   BranchSubrBack          2311
                                                                                                                                                                                                                                         3010: 0x9004   PopLocalI32             thresholdByte

000916          durationByte = FloatToByteRepresentation(duration, maxTimeAndTimeStep(1), 0.0)                                                                                                                                           3011: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         3012: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3013: 0x8C00   PushLocalRef            maxTimeAndTimeStep
                                                                                                                                                                                                                                         3014: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         3015: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3016: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3017: 0x56C3   BranchSubrBack          2311
                                                                                                                                                                                                                                         3018: 0x9005   PopLocalI32             durationByte

000917          
000918          result = result And Standby()                                                                                                                                                                                            3019: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         3020: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3021: 0x56BD   BranchSubrBack          2321
                                                                                                                                                                                                                                         3022: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3023: 0x9006   PopLocalI32             result

000919          
000920          'Wake from transient interrupt
000921          result = result And Write(CTRL_REG3_REG, Read(CTRL_REG3_REG) | CTRL_REG3_WAKE_TRANS)                                                                                                                                     3024: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         3025: 0x802C   PushConstU10            44 (0x002C)
                                                                                                                                                                                                                                         3026: 0x802C   PushConstU10            44 (0x002C)
                                                                                                                                                                                                                                         3027: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3028: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3029: 0x0626                           
                                                                                                                                                                                                                                         3030: 0x8040   PushConstU10            64 (0x0040)
                                                                                                                                                                                                                                         3031: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3032: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3033: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3034: 0x064B                           
                                                                                                                                                                                                                                         3035: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3036: 0x9006   PopLocalI32             result

000922          'Enable transient interrupts
000923          result = result And Write(CTRL_REG4_REG, Read(CTRL_REG4_REG) | CTRL_REG4_INT_EN_TRANS)                                                                                                                                   3037: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         3038: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         3039: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         3040: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3041: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3042: 0x0626                           
                                                                                                                                                                                                                                         3043: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         3044: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3045: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3046: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3047: 0x064B                           
                                                                                                                                                                                                                                         3048: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3049: 0x9006   PopLocalI32             result

000924          
000925          If setPin2 Then                                                                                                                                                                                                          3050: 0x8803   PushLocalI32            setPin2
                                                                                                                                                                                                                                         3051: 0x3C0E   BranchFalse             3066

000926              result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) & ~CTRL_REG5_INT_CFG_TRANS)                                                                                                                             3052: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         3053: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         3054: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         3055: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3056: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3057: 0x0626                           
                                                                                                                                                                                                                                         3058: 0x80DF   PushConstU10            223 (0x00DF)
                                                                                                                                                                                                                                         3059: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3060: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3061: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3062: 0x064B                           
                                                                                                                                                                                                                                         3063: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3064: 0x9006   PopLocalI32             result

                                                                                                                                                                                                                                         3065: 0x400D   Branch                  3079
000927          Else                                                                                                                                                                                                                     

000928              result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) | CTRL_REG5_INT_CFG_TRANS)                                                                                                                              3066: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         3067: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         3068: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         3069: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3070: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3071: 0x0626                           
                                                                                                                                                                                                                                         3072: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         3073: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3074: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3075: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3076: 0x064B                           
                                                                                                                                                                                                                                         3077: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3078: 0x9006   PopLocalI32             result

000929          End If
000930          
000931          'Latch events
000932          result = result And Write(TRANSIENT_CFG_REG, Read(TRANSIENT_CFG_REG) | TRANSIENT_CFG_ELE)                                                                                                                                3079: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         3080: 0x801D   PushConstU10            29 (0x001D)
                                                                                                                                                                                                                                         3081: 0x801D   PushConstU10            29 (0x001D)
                                                                                                                                                                                                                                         3082: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3083: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3084: 0x0626                           
                                                                                                                                                                                                                                         3085: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3086: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3087: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3088: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3089: 0x064B                           
                                                                                                                                                                                                                                         3090: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3091: 0x9006   PopLocalI32             result

000933          'Enable on axis
000934          result = result And Write(TRANSIENT_CFG_REG, (Read(TRANSIENT_CFG_REG) & ~TRANSIENT_CFG_TEFE) | axis)                                                                                                                     3092: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         3093: 0x801D   PushConstU10            29 (0x001D)
                                                                                                                                                                                                                                         3094: 0x801D   PushConstU10            29 (0x001D)
                                                                                                                                                                                                                                         3095: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3096: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3097: 0x0626                           
                                                                                                                                                                                                                                         3098: 0x80F1   PushConstU10            241 (0x00F1)
                                                                                                                                                                                                                                         3099: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3100: 0x8802   PushLocalI32            axis
                                                                                                                                                                                                                                         3101: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3102: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3103: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3104: 0x064B                           
                                                                                                                                                                                                                                         3105: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3106: 0x9006   PopLocalI32             result

000935          
000936          'Set Threshold
000937          result = result And Write(TRANSIENT_THS_REG, thresholdByte)                                                                                                                                                              3107: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         3108: 0x801F   PushConstU10            31 (0x001F)
                                                                                                                                                                                                                                         3109: 0x8804   PushLocalI32            thresholdByte
                                                                                                                                                                                                                                         3110: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3111: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3112: 0x064B                           
                                                                                                                                                                                                                                         3113: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3114: 0x9006   PopLocalI32             result

000938          'Set Duration
000939          result = result And Write(TRANSIENT_COUNT_REG, durationByte)                                                                                                                                                             3115: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         3116: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         3117: 0x8805   PushLocalI32            durationByte
                                                                                                                                                                                                                                         3118: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3119: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3120: 0x064B                           
                                                                                                                                                                                                                                         3121: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3122: 0x9006   PopLocalI32             result

000940          
000941          result = result And Activate()                                                                                                                                                                                           3123: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         3124: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3125: 0x571A   BranchSubrBack          2332
                                                                                                                                                                                                                                         3126: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3127: 0x9006   PopLocalI32             result

000942          
000943          Return result                                                                                                                                                                                                            3128: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         3129: 0x0092   ReturnValType           

000944          
000945      End Function // ConfigureShockInterrupt                                                                                                                                                                                      3130: 0x0093   Return0                 

000946      
000947      
000948      Public Function ConfigurePulseInterrupt(threshold As Float, duration As Float, latency As Float, window As Float) As Boolean                                                                                                 3131: 0x1840   EntryPoint              ValTypParams=4, RefTypParams=0

000949          Return ConfigurePulseInterrupt(threshold, duration, latency, window, False, False, 0x3f, False)                                                                                                                          3132: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         3133: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         3134: 0x8802   PushLocalI32            latency
                                                                                                                                                                                                                                         3135: 0x8803   PushLocalI32            window
                                                                                                                                                                                                                                         3136: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3137: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3138: 0x803F   PushConstU10            63 (0x003F)
                                                                                                                                                                                                                                         3139: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3140: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3141: 0x1C0F   BranchSubr              3157
                                                                                                                                                                                                                                         3142: 0x0092   ReturnValType           

000950      End Function // ConfigurePulseInterrupt                                                                                                                                                                                      3143: 0x0093   Return0                 

000951      
000952      
000953      Public Function ConfigurePulseInterrupt(threshold As Float, duration As Float, latency As Float, window As Float, abortDoublePulse As Boolean, enableLowPassFilter As Boolean) As Boolean                                    3144: 0x1860   EntryPoint              ValTypParams=6, RefTypParams=0

000954          Return ConfigurePulseInterrupt(threshold, duration, latency, window, abortDoublePulse, enableLowPassFilter, 0x3f, False)                                                                                                 3145: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         3146: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         3147: 0x8802   PushLocalI32            latency
                                                                                                                                                                                                                                         3148: 0x8803   PushLocalI32            window
                                                                                                                                                                                                                                         3149: 0x8804   PushLocalI32            abortDoublePulse
                                                                                                                                                                                                                                         3150: 0x8805   PushLocalI32            enableLowPassFilter
                                                                                                                                                                                                                                         3151: 0x803F   PushConstU10            63 (0x003F)
                                                                                                                                                                                                                                         3152: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3153: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3154: 0x1C02   BranchSubr              3157
                                                                                                                                                                                                                                         3155: 0x0092   ReturnValType           

000955      End Function // ConfigurePulseInterrupt                                                                                                                                                                                      3156: 0x0093   Return0                 

000956      
000957      
000958      'ConfigurePulseInterrupt - configures device to interrupt on pulse
000959      '
000960      'threshold As Float - trigger threshold (0.0 Gs - 8.0 Gs), 0.063mG steps
000961      'duration As Float - Duration for threshold to be present to active interrupt in ms
000962      'latency - Time to wait after pulse before interpreting further pulses as a new pulse
000963      'window - Time after latency period to interpret another pulse as a double pulse
000964      'axis - Which axis to enable pulse detection. See datasheet to know which bits to set
000965      'setPin2 - True to route orientation interrupt to pin2
000966      Public Function ConfigurePulseInterrupt(threshold As Float, duration As Float, latency As Float, window As Float, abortDoublePulse As Boolean, enableLowPassFilter As Boolean, axis As Byte, setPin2 As Boolean) As Boolean  3157: 0x1880   EntryPoint              ValTypParams=8, RefTypParams=0
                                                                                                                                                                                                                                         3158: 0xE0A2   AllocateStackSpace      ValTypeSize=5, RefTypeSize=2

000967          Dim thresholdByte As Byte
000968          Dim durationByte As Byte
000969          Dim latencyByte As Byte
000970          Dim windowByte As Byte
000971          Dim result As Boolean = True                                                                                                                                                                                             3159: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3160: 0x900C   PopLocalI32             result

000972          Dim durationMaxTimeAndTimeStep As ListOfFloat
000973          Dim maxTimeAndTimeStep As ListOfFloat
000974          
000975          If enableLowPassFilter Then                                                                                                                                                                                              3161: 0x8805   PushLocalI32            enableLowPassFilter
                                                                                                                                                                                                                                         3162: 0x3C0B   BranchFalse             3174

000976              durationMaxTimeAndTimeStep = GetMaxTimeAndTimeStep("long")                                                                                                                                                           3163: 0x8484   PushLiteral             132
                                                                                                                                                                                                                                         3164: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3165: 0x5800   JumpSubr                1657
                                                                                                                                                                                                                                         3166: 0x0679                           
                                                                                                                                                                                                                                         3167: 0x9400   PopLocalRef             durationMaxTimeAndTimeStep

000977              maxTimeAndTimeStep = GetMaxTimeAndTimeStep("xlong")                                                                                                                                                                  3168: 0x8487   PushLiteral             135
                                                                                                                                                                                                                                         3169: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3170: 0x5800   JumpSubr                1657
                                                                                                                                                                                                                                         3171: 0x0679                           
                                                                                                                                                                                                                                         3172: 0x9401   PopLocalRef             maxTimeAndTimeStep

                                                                                                                                                                                                                                         3173: 0x400A   Branch                  3184
000978          Else                                                                                                                                                                                                                     

000979              durationMaxTimeAndTimeStep = GetMaxTimeAndTimeStep("short")                                                                                                                                                          3174: 0x847E   PushLiteral             126
                                                                                                                                                                                                                                         3175: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3176: 0x5800   JumpSubr                1657
                                                                                                                                                                                                                                         3177: 0x0679                           
                                                                                                                                                                                                                                         3178: 0x9400   PopLocalRef             durationMaxTimeAndTimeStep

000980              maxTimeAndTimeStep = GetMaxTimeAndTimeStep("medium")                                                                                                                                                                 3179: 0x8481   PushLiteral             129
                                                                                                                                                                                                                                         3180: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3181: 0x5800   JumpSubr                1657
                                                                                                                                                                                                                                         3182: 0x0679                           
                                                                                                                                                                                                                                         3183: 0x9401   PopLocalRef             maxTimeAndTimeStep

000981          End If
000982          
000983          If (threshold < LOW_GRAVITY_THRESHOLD Or threshold > HIGH_GRAVITY_THRESHOLD) Then                                                                                                                                        3184: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         3185: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3186: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         3187: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         3188: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         3189: 0xEA08   PushConstFlt            8.0
                                                                                                                                                                                                                                         3190: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         3191: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         3192: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3193: 0x3C01   BranchFalse             3195

000984              Return False                                                                                                                                                                                                         3194: 0x0093   Return0                 

000985          End If
000986          
000987          If (duration < 0.0 Or duration > durationMaxTimeAndTimeStep(0)) Then                                                                                                                                                     3195: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         3196: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3197: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         3198: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         3199: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         3200: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3201: 0x8C00   PushLocalRef            durationMaxTimeAndTimeStep
                                                                                                                                                                                                                                         3202: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         3203: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         3204: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         3205: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3206: 0x3C01   BranchFalse             3208

000988              Return False                                                                                                                                                                                                         3207: 0x0093   Return0                 

000989          End If
000990          
000991          If (latency < 0.0 Or latency > maxTimeAndTimeStep(0)) Then                                                                                                                                                               3208: 0x8802   PushLocalI32            latency
                                                                                                                                                                                                                                         3209: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3210: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         3211: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         3212: 0x8802   PushLocalI32            latency
                                                                                                                                                                                                                                         3213: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3214: 0x8C01   PushLocalRef            maxTimeAndTimeStep
                                                                                                                                                                                                                                         3215: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         3216: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         3217: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         3218: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3219: 0x3C01   BranchFalse             3221

000992              Return False                                                                                                                                                                                                         3220: 0x0093   Return0                 

000993          End If
000994          
000995          If (windowByte < 0.0 Or windowByte > maxTimeAndTimeStep(0)) Then                                                                                                                                                         3221: 0x880B   PushLocalI32            windowByte
                                                                                                                                                                                                                                         3222: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3223: 0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                         3224: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         3225: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         3226: 0x880B   PushLocalI32            windowByte
                                                                                                                                                                                                                                         3227: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3228: 0x8C01   PushLocalRef            maxTimeAndTimeStep
                                                                                                                                                                                                                                         3229: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         3230: 0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                         3231: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         3232: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         3233: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3234: 0x3C01   BranchFalse             3236

000996              Return False                                                                                                                                                                                                         3235: 0x0093   Return0                 

000997          End If
000998          
000999          'Ensure that axis byte affects axis bits only in the Transient Config Register
001000          axis = axis & PULSE_CFG_PEFE                                                                                                                                                                                             3236: 0x8806   PushLocalI32            axis
                                                                                                                                                                                                                                         3237: 0x803F   PushConstU10            63 (0x003F)
                                                                                                                                                                                                                                         3238: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3239: 0x9006   PopLocalI32             axis

001001          
001002          thresholdByte = FloatToByteRepresentation(threshold, GRAVITY_THRESHOLD_RESOLUTION, 0.0)                                                                                                                                  3240: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         3241: 0x0110   PushConstI32            1031865893 (0x3D810625)
                                                                                                                                                                                                                                         3242: 0x0625                           
                                                                                                                                                                                                                                         3243: 0x3D81                           
                                                                                                                                                                                                                                         3244: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3245: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3246: 0x57A8   BranchSubrBack          2311
                                                                                                                                                                                                                                         3247: 0x9008   PopLocalI32             thresholdByte

001003          durationByte = FloatToByteRepresentation(duration, durationMaxTimeAndTimeStep(1), 0.0)                                                                                                                                   3248: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         3249: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3250: 0x8C00   PushLocalRef            durationMaxTimeAndTimeStep
                                                                                                                                                                                                                                         3251: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         3252: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3253: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3254: 0x57B0   BranchSubrBack          2311
                                                                                                                                                                                                                                         3255: 0x9009   PopLocalI32             durationByte

001004          latencyByte = FloatToByteRepresentation(latency, maxTimeAndTimeStep(1), 0.0)                                                                                                                                             3256: 0x8802   PushLocalI32            latency
                                                                                                                                                                                                                                         3257: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3258: 0x8C01   PushLocalRef            maxTimeAndTimeStep
                                                                                                                                                                                                                                         3259: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         3260: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3261: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3262: 0x57B8   BranchSubrBack          2311
                                                                                                                                                                                                                                         3263: 0x900A   PopLocalI32             latencyByte

001005          windowByte = FloatToByteRepresentation(window, maxTimeAndTimeStep(1), 0.0)                                                                                                                                               3264: 0x8803   PushLocalI32            window
                                                                                                                                                                                                                                         3265: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3266: 0x8C01   PushLocalRef            maxTimeAndTimeStep
                                                                                                                                                                                                                                         3267: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         3268: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3269: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3270: 0x57C0   BranchSubrBack          2311
                                                                                                                                                                                                                                         3271: 0x900B   PopLocalI32             windowByte

001006          
001007          result = result And Standby()                                                                                                                                                                                            3272: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3273: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3274: 0x57BA   BranchSubrBack          2321
                                                                                                                                                                                                                                         3275: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3276: 0x900C   PopLocalI32             result

001008          
001009          'Wake from pulse interrupt
001010          result = result And Write(CTRL_REG3_REG, Read(CTRL_REG3_REG) | CTRL_REG3_WAKE_PULSE)                                                                                                                                     3277: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3278: 0x802C   PushConstU10            44 (0x002C)
                                                                                                                                                                                                                                         3279: 0x802C   PushConstU10            44 (0x002C)
                                                                                                                                                                                                                                         3280: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3281: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3282: 0x0626                           
                                                                                                                                                                                                                                         3283: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3284: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3285: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3286: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3287: 0x064B                           
                                                                                                                                                                                                                                         3288: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3289: 0x900C   PopLocalI32             result

001011          'Enable pulse interrupts
001012          result = result And Write(CTRL_REG4_REG, Read(CTRL_REG4_REG) | CTRL_REG4_INT_EN_PULSE)                                                                                                                                   3290: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3291: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         3292: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         3293: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3294: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3295: 0x0626                           
                                                                                                                                                                                                                                         3296: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3297: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3298: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3299: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3300: 0x064B                           
                                                                                                                                                                                                                                         3301: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3302: 0x900C   PopLocalI32             result

001013          
001014          If setPin2 Then                                                                                                                                                                                                          3303: 0x8807   PushLocalI32            setPin2
                                                                                                                                                                                                                                         3304: 0x3C0E   BranchFalse             3319

001015              result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) & ~CTRL_REG5_INT_CFG_PULSE)                                                                                                                             3305: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3306: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         3307: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         3308: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3309: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3310: 0x0626                           
                                                                                                                                                                                                                                         3311: 0x80F7   PushConstU10            247 (0x00F7)
                                                                                                                                                                                                                                         3312: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3313: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3314: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3315: 0x064B                           
                                                                                                                                                                                                                                         3316: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3317: 0x900C   PopLocalI32             result

                                                                                                                                                                                                                                         3318: 0x400D   Branch                  3332
001016          Else                                                                                                                                                                                                                     

001017              result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) | CTRL_REG5_INT_CFG_PULSE)                                                                                                                              3319: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3320: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         3321: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         3322: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3323: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3324: 0x0626                           
                                                                                                                                                                                                                                         3325: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3326: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3327: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3328: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3329: 0x064B                           
                                                                                                                                                                                                                                         3330: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3331: 0x900C   PopLocalI32             result

001018          End If
001019          
001020          If abortDoublePulse Then                                                                                                                                                                                                 3332: 0x8804   PushLocalI32            abortDoublePulse
                                                                                                                                                                                                                                         3333: 0x3C0D   BranchFalse             3347

001021              result = result And Write(PULSE_CFG_REG, Read(PULSE_CFG_REG) | PULSE_CFG_DPA)                                                                                                                                        3334: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3335: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                         3336: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                         3337: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3338: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3339: 0x0626                           
                                                                                                                                                                                                                                         3340: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                         3341: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3342: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3343: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3344: 0x064B                           
                                                                                                                                                                                                                                         3345: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3346: 0x900C   PopLocalI32             result

001022          End If
001023          
001024          'Latch events
001025          result = result And Write(PULSE_CFG_REG, Read(PULSE_CFG_REG) | PULSE_CFG_ELE)                                                                                                                                            3347: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3348: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                         3349: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                         3350: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3351: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3352: 0x0626                           
                                                                                                                                                                                                                                         3353: 0x8040   PushConstU10            64 (0x0040)
                                                                                                                                                                                                                                         3354: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3355: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3356: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3357: 0x064B                           
                                                                                                                                                                                                                                         3358: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3359: 0x900C   PopLocalI32             result

001026          'Enable on axis
001027          result = result And Write(PULSE_CFG_REG, (Read(PULSE_CFG_REG) & ~PULSE_CFG_PEFE) | axis)                                                                                                                                 3360: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3361: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                         3362: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                         3363: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3364: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3365: 0x0626                           
                                                                                                                                                                                                                                         3366: 0x80C0   PushConstU10            192 (0x00C0)
                                                                                                                                                                                                                                         3367: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3368: 0x8806   PushLocalI32            axis
                                                                                                                                                                                                                                         3369: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3370: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3371: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3372: 0x064B                           
                                                                                                                                                                                                                                         3373: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3374: 0x900C   PopLocalI32             result

001028          
001029          'Set Threshold on all axis
001030          result = result And Write(PULSE_THSX_REG, thresholdByte)                                                                                                                                                                 3375: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3376: 0x8023   PushConstU10            35 (0x0023)
                                                                                                                                                                                                                                         3377: 0x8808   PushLocalI32            thresholdByte
                                                                                                                                                                                                                                         3378: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3379: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3380: 0x064B                           
                                                                                                                                                                                                                                         3381: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3382: 0x900C   PopLocalI32             result

001031          result = result And Write(PULSE_THSY_REG, thresholdByte)                                                                                                                                                                 3383: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3384: 0x8024   PushConstU10            36 (0x0024)
                                                                                                                                                                                                                                         3385: 0x8808   PushLocalI32            thresholdByte
                                                                                                                                                                                                                                         3386: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3387: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3388: 0x064B                           
                                                                                                                                                                                                                                         3389: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3390: 0x900C   PopLocalI32             result

001032          result = result And Write(PULSE_THSZ_REG, thresholdByte)                                                                                                                                                                 3391: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3392: 0x8025   PushConstU10            37 (0x0025)
                                                                                                                                                                                                                                         3393: 0x8808   PushLocalI32            thresholdByte
                                                                                                                                                                                                                                         3394: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3395: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3396: 0x064B                           
                                                                                                                                                                                                                                         3397: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3398: 0x900C   PopLocalI32             result

001033          
001034          If enableLowPassFilter Then                                                                                                                                                                                              3399: 0x8805   PushLocalI32            enableLowPassFilter
                                                                                                                                                                                                                                         3400: 0x3C0D   BranchFalse             3414

001035              'Enable Low-Pass Filter for pulse processing
001036              'Changes the time range/time step tables
001037              result = result And Write(HP_FILTER_CUTOFF_REG, Read(HP_FILTER_CUTOFF_REG) | HP_FILTER_CUTOFF_Pulse_LPF_EN)                                                                                                          3401: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3402: 0x800F   PushConstU10            15 (0x000F)
                                                                                                                                                                                                                                         3403: 0x800F   PushConstU10            15 (0x000F)
                                                                                                                                                                                                                                         3404: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3405: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3406: 0x0626                           
                                                                                                                                                                                                                                         3407: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3408: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3409: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3410: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3411: 0x064B                           
                                                                                                                                                                                                                                         3412: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3413: 0x900C   PopLocalI32             result

001038          End If
001039          
001040          'Set Duration
001041          result = result And Write(PULSE_TMLT_REG, durationByte)                                                                                                                                                                  3414: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3415: 0x8026   PushConstU10            38 (0x0026)
                                                                                                                                                                                                                                         3416: 0x8809   PushLocalI32            durationByte
                                                                                                                                                                                                                                         3417: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3418: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3419: 0x064B                           
                                                                                                                                                                                                                                         3420: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3421: 0x900C   PopLocalI32             result

001042          'Set Latency
001043          result = result And Write(PULSE_LTCY_REG, latencyByte)                                                                                                                                                                   3422: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3423: 0x8027   PushConstU10            39 (0x0027)
                                                                                                                                                                                                                                         3424: 0x880A   PushLocalI32            latencyByte
                                                                                                                                                                                                                                         3425: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3426: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3427: 0x064B                           
                                                                                                                                                                                                                                         3428: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3429: 0x900C   PopLocalI32             result

001044          'Set Window
001045          result = result And Write(PULSE_WIND_REG, windowByte)                                                                                                                                                                    3430: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3431: 0x8028   PushConstU10            40 (0x0028)
                                                                                                                                                                                                                                         3432: 0x880B   PushLocalI32            windowByte
                                                                                                                                                                                                                                         3433: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3434: 0x5800   JumpSubr                1611
                                                                                                                                                                                                                                         3435: 0x064B                           
                                                                                                                                                                                                                                         3436: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3437: 0x900C   PopLocalI32             result

001046          
001047          result = result And Activate()                                                                                                                                                                                           3438: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3439: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3440: 0x5800   JumpSubr                2332
                                                                                                                                                                                                                                         3441: 0x091C                           
                                                                                                                                                                                                                                         3442: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3443: 0x900C   PopLocalI32             result

001048          
001049          Return result                                                                                                                                                                                                            3444: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3445: 0x0092   ReturnValType           

001050          
001051      End Function // ConfigurePulseInterrupt                                                                                                                                                                                      3446: 0x0093   Return0                 

001052      
001053      
001054      Public Function GetIntSource() As ListOfString                                                                                                                                                                               3447: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         3448: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

001055          Dim intSource As Byte = Read(INT_SOURCE_REG)                                                                                                                                                                             3449: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                         3450: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3451: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3452: 0x0626                           
                                                                                                                                                                                                                                         3453: 0x9000   PopLocalI32             intSource

001056          Dim result As ListOfString = New ListOfString                                                                                                                                                                            3454: 0x8013   PushConstU10            19 (0x0013)
                                                                                                                                                                                                                                         3455: 0x0010   ClassNew                
                                                                                                                                                                                                                                         3456: 0x9400   PopLocalRef             result

001057          
001058          If (intSource & INT_SOURCE_SRC_ASLP) = INT_SOURCE_SRC_ASLP Then                                                                                                                                                          3457: 0x8800   PushLocalI32            intSource
                                                                                                                                                                                                                                         3458: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                         3459: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3460: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                         3461: 0x2404   BranchNE                3466

001059              result.Add("autosleep")                                                                                                                                                                                              3462: 0x8443   PushLiteral             67
                                                                                                                                                                                                                                         3463: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3464: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3465: 0x4023   Branch                  3501
001060          ElseIf (intSource & INT_SOURCE_SRC_FF_MT) = INT_SOURCE_SRC_FF_MT Then                                                                                                                                                    3466: 0x8800   PushLocalI32            intSource
                                                                                                                                                                                                                                         3467: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         3468: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3469: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         3470: 0x2404   BranchNE                3475

001061              result.Add("freefall")                                                                                                                                                                                               3471: 0x848A   PushLiteral             138
                                                                                                                                                                                                                                         3472: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3473: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3474: 0x401A   Branch                  3501
001062          ElseIf (intSource & INT_SOURCE_SRC_LNDPRT) = INT_SOURCE_SRC_LNDPRT Then                                                                                                                                                  3475: 0x8800   PushLocalI32            intSource
                                                                                                                                                                                                                                         3476: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3477: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3478: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3479: 0x2404   BranchNE                3484

001063              result.Add("orientation")                                                                                                                                                                                            3480: 0x848E   PushLiteral             142
                                                                                                                                                                                                                                         3481: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3482: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3483: 0x4011   Branch                  3501
001064          ElseIf (intSource & INT_SOURCE_SRC_PULSE) = INT_SOURCE_SRC_PULSE Then                                                                                                                                                    3484: 0x8800   PushLocalI32            intSource
                                                                                                                                                                                                                                         3485: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3486: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3487: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3488: 0x2404   BranchNE                3493

001065              result.Add("pulse")                                                                                                                                                                                                  3489: 0x843D   PushLiteral             61
                                                                                                                                                                                                                                         3490: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3491: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3492: 0x4008   Branch                  3501
001066          ElseIf (intSource & INT_SOURCE_SRC_TRANS) = INT_SOURCE_SRC_TRANS Then                                                                                                                                                    3493: 0x8800   PushLocalI32            intSource
                                                                                                                                                                                                                                         3494: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         3495: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3496: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         3497: 0x2403   BranchNE                3501

001067              result.Add("shock")                                                                                                                                                                                                  3498: 0x843A   PushLiteral             58
                                                                                                                                                                                                                                         3499: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3500: 0x00A3   ListAdd                 

001068          End If
001069          
001070          Return result                                                                                                                                                                                                            3501: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3502: 0x0095   ReturnRefType           

001071      End Function // GetIntSource                                                                                                                                                                                                 3503: 0x0096   ReturnNothing           

001072      
001073      
001074      Public Function Autosleep() As String                                                                                                                                                                                        3504: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         3505: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

001075          Dim sysmod As Byte = Read(SYSMOD_REG)                                                                                                                                                                                    3506: 0x800B   PushConstU10            11 (0x000B)
                                                                                                                                                                                                                                         3507: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3508: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3509: 0x0626                           
                                                                                                                                                                                                                                         3510: 0x9000   PopLocalI32             sysmod

001076          
001077          If (sysmod & SYSMOD_SYSMOD) = SYSMOD_STANDBY Then                                                                                                                                                                        3511: 0x8800   PushLocalI32            sysmod
                                                                                                                                                                                                                                         3512: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         3513: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3514: 0x3803   BranchTrue              3518

001078              Return "standby"                                                                                                                                                                                                     3515: 0x8492   PushLiteral             146
                                                                                                                                                                                                                                         3516: 0x0095   ReturnRefType           

                                                                                                                                                                                                                                         3517: 0x400F   Branch                  3533
001079          ElseIf (sysmod & SYSMOD_SYSMOD) = SYSMOD_WAKE Then                                                                                                                                                                       3518: 0x8800   PushLocalI32            sysmod
                                                                                                                                                                                                                                         3519: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         3520: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3521: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3522: 0x2403   BranchNE                3526

001080              Return "active"                                                                                                                                                                                                      3523: 0x8495   PushLiteral             149
                                                                                                                                                                                                                                         3524: 0x0095   ReturnRefType           

                                                                                                                                                                                                                                         3525: 0x4007   Branch                  3533
001081          ElseIf (sysmod & SYSMOD_SYSMOD) = SYSMOD_SLEEP Then                                                                                                                                                                      3526: 0x8800   PushLocalI32            sysmod
                                                                                                                                                                                                                                         3527: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         3528: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3529: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         3530: 0x2402   BranchNE                3533

001082              Return "sleep"                                                                                                                                                                                                       3531: 0x8498   PushLiteral             152
                                                                                                                                                                                                                                         3532: 0x0095   ReturnRefType           

001083          End If
001084      End Function // Autosleep                                                                                                                                                                                                    3533: 0x0096   ReturnNothing           

001085      
001086      
001087      Public Function Freefall() As ListOfString                                                                                                                                                                                   3534: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         3535: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

001088          Dim freefallStatus As Byte = Read(FF_MT_SRC_REG)                                                                                                                                                                         3536: 0x8016   PushConstU10            22 (0x0016)
                                                                                                                                                                                                                                         3537: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3538: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3539: 0x0626                           
                                                                                                                                                                                                                                         3540: 0x9000   PopLocalI32             freefallStatus

001089          Dim result As ListOfString = New ListOfString                                                                                                                                                                            3541: 0x8013   PushConstU10            19 (0x0013)
                                                                                                                                                                                                                                         3542: 0x0010   ClassNew                
                                                                                                                                                                                                                                         3543: 0x9400   PopLocalRef             result

001090          
001091          If (freefallStatus & FF_MT_SRC_XHE) = FF_MT_SRC_XHE Then                                                                                                                                                                 3544: 0x8800   PushLocalI32            freefallStatus
                                                                                                                                                                                                                                         3545: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         3546: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3547: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         3548: 0x2410   BranchNE                3565

001092              result.Add("x")                                                                                                                                                                                                      3549: 0x849B   PushLiteral             155
                                                                                                                                                                                                                                         3550: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3551: 0x00A3   ListAdd                 

001093              If (freefallStatus & FF_MT_SRC_XHP) = FF_MT_SRC_XHP Then                                                                                                                                                             3552: 0x8800   PushLocalI32            freefallStatus
                                                                                                                                                                                                                                         3553: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3554: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3555: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3556: 0x2404   BranchNE                3561

001094                  result.Add("neg")                                                                                                                                                                                                3557: 0x849D   PushLiteral             157
                                                                                                                                                                                                                                         3558: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3559: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3560: 0x4003   Branch                  3564
001095              Else                                                                                                                                                                                                                 

001096                  result.Add("pos")                                                                                                                                                                                                3561: 0x849F   PushLiteral             159
                                                                                                                                                                                                                                         3562: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3563: 0x00A3   ListAdd                 

001097              End If
                                                                                                                                                                                                                                         3564: 0x4029   Branch                  3606
001098          ElseIf (freefallStatus & FF_MT_SRC_YHE) = FF_MT_SRC_YHE Then                                                                                                                                                             3565: 0x8800   PushLocalI32            freefallStatus
                                                                                                                                                                                                                                         3566: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3567: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3568: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3569: 0x2410   BranchNE                3586

001099              result.Add("y")                                                                                                                                                                                                      3570: 0x84A1   PushLiteral             161
                                                                                                                                                                                                                                         3571: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3572: 0x00A3   ListAdd                 

001100              If (freefallStatus & FF_MT_SRC_YHP) = FF_MT_SRC_YHP Then                                                                                                                                                             3573: 0x8800   PushLocalI32            freefallStatus
                                                                                                                                                                                                                                         3574: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         3575: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3576: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         3577: 0x2404   BranchNE                3582

001101                  result.Add("neg")                                                                                                                                                                                                3578: 0x849D   PushLiteral             157
                                                                                                                                                                                                                                         3579: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3580: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3581: 0x4003   Branch                  3585
001102              Else                                                                                                                                                                                                                 

001103                  result.Add("pos")                                                                                                                                                                                                3582: 0x849F   PushLiteral             159
                                                                                                                                                                                                                                         3583: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3584: 0x00A3   ListAdd                 

001104              End If
                                                                                                                                                                                                                                         3585: 0x4014   Branch                  3606
001105          ElseIf (freefallStatus & FF_MT_SRC_ZHE) = FF_MT_SRC_ZHE Then                                                                                                                                                             3586: 0x8800   PushLocalI32            freefallStatus
                                                                                                                                                                                                                                         3587: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         3588: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3589: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         3590: 0x240F   BranchNE                3606

001106              result.Add("z")                                                                                                                                                                                                      3591: 0x84A3   PushLiteral             163
                                                                                                                                                                                                                                         3592: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3593: 0x00A3   ListAdd                 

001107              If (freefallStatus & FF_MT_SRC_ZHP) = FF_MT_SRC_ZHP Then                                                                                                                                                             3594: 0x8800   PushLocalI32            freefallStatus
                                                                                                                                                                                                                                         3595: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3596: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3597: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3598: 0x2404   BranchNE                3603

001108                  result.Add("neg")                                                                                                                                                                                                3599: 0x849D   PushLiteral             157
                                                                                                                                                                                                                                         3600: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3601: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3602: 0x4003   Branch                  3606
001109              Else                                                                                                                                                                                                                 

001110                  result.Add("pos")                                                                                                                                                                                                3603: 0x849F   PushLiteral             159
                                                                                                                                                                                                                                         3604: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3605: 0x00A3   ListAdd                 

001111              End If
001112          End If
001113          
001114          Return result                                                                                                                                                                                                            3606: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3607: 0x0095   ReturnRefType           

001115      End Function // Freefall                                                                                                                                                                                                     3608: 0x0096   ReturnNothing           

001116      
001117      
001118      Public Function Orientation() As ListOfString                                                                                                                                                                                3609: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         3610: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

001119          Dim plStatus As Byte = Read(PL_STATUS_REG)                                                                                                                                                                               3611: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3612: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3613: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3614: 0x0626                           
                                                                                                                                                                                                                                         3615: 0x9000   PopLocalI32             plStatus

001120          Dim result As ListOfString = New ListOfString                                                                                                                                                                            3616: 0x8013   PushConstU10            19 (0x0013)
                                                                                                                                                                                                                                         3617: 0x0010   ClassNew                
                                                                                                                                                                                                                                         3618: 0x9400   PopLocalRef             result

001121          
001122          Select plStatus & PL_STATUS_LAPO                                                                                                                                                                                         3619: 0x8800   PushLocalI32            plStatus
                                                                                                                                                                                                                                         3620: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                         3621: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3622: 0x0122   CaseComputed            
                                                                                                                                                                                                                                         3623: 0x0002                           CaseCommonClass=Byte
                                                                                                                                                                                                                                         3624: 0x0004                           NumberOfCaseEntries=4
                                                                                                                                                                                                                                         3625: 0x0017                           CaseElseBranch=3649
                                                                                                                                                                                                                                         3626: 0x0000                           CaseValue=0
                                                                                                                                                                                                                                         3627: 0x0008                           CaseBranch=3634
                                                                                                                                                                                                                                         3628: 0x0002                           CaseValue=2
                                                                                                                                                                                                                                         3629: 0x000C                           CaseBranch=3638
                                                                                                                                                                                                                                         3630: 0x0004                           CaseValue=4
                                                                                                                                                                                                                                         3631: 0x0010                           CaseBranch=3642
                                                                                                                                                                                                                                         3632: 0x0006                           CaseValue=6
                                                                                                                                                                                                                                         3633: 0x0014                           CaseBranch=3646

001123              Case 0x00
001124                  result.Add("portrait up")                                                                                                                                                                                        3634: 0x84A5   PushLiteral             165
                                                                                                                                                                                                                                         3635: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3636: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3637: 0x400B   Branch                  3649
001125              Case 0x02                                                                                                                                                                                                            

001126                  result.Add("portrait down")                                                                                                                                                                                      3638: 0x84A9   PushLiteral             169
                                                                                                                                                                                                                                         3639: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3640: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3641: 0x4007   Branch                  3649
001127              Case 0x04                                                                                                                                                                                                            

001128                  result.Add("landscape right")                                                                                                                                                                                    3642: 0x84AE   PushLiteral             174
                                                                                                                                                                                                                                         3643: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3644: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3645: 0x4003   Branch                  3649
001129              Case 0x06                                                                                                                                                                                                            

001130                  result.Add("landscape left")                                                                                                                                                                                     3646: 0x84B3   PushLiteral             179
                                                                                                                                                                                                                                         3647: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3648: 0x00A3   ListAdd                 

001131          End Select
001132          
001133          If (plStatus & PL_STATUS_BAFRO) = 1 Then                                                                                                                                                                                 3649: 0x8800   PushLocalI32            plStatus
                                                                                                                                                                                                                                         3650: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3651: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3652: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3653: 0x2404   BranchNE                3658

001134              result.Add("back")                                                                                                                                                                                                   3654: 0x84B8   PushLiteral             184
                                                                                                                                                                                                                                         3655: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3656: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3657: 0x4003   Branch                  3661
001135          Else                                                                                                                                                                                                                     

001136              result.Add("front")                                                                                                                                                                                                  3658: 0x84BB   PushLiteral             187
                                                                                                                                                                                                                                         3659: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3660: 0x00A3   ListAdd                 

001137          End If
001138          
001139          Return result                                                                                                                                                                                                            3661: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3662: 0x0095   ReturnRefType           

001140      End Function // Orientation                                                                                                                                                                                                  3663: 0x0096   ReturnNothing           

001141      
001142      
001143      Public Function Pulse() As String                                                                                                                                                                                            3664: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         3665: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

001144          Dim pulseStatus As Byte = Read(PULSE_SRC_REG) & PULSE_SRC_DPE                                                                                                                                                            3666: 0x8022   PushConstU10            34 (0x0022)
                                                                                                                                                                                                                                         3667: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3668: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3669: 0x0626                           
                                                                                                                                                                                                                                         3670: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3671: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3672: 0x9000   PopLocalI32             pulseStatus

001145          Dim result As ListOfString = New ListOfString                                                                                                                                                                            3673: 0x8013   PushConstU10            19 (0x0013)
                                                                                                                                                                                                                                         3674: 0x0010   ClassNew                
                                                                                                                                                                                                                                         3675: 0x9400   PopLocalRef             result

001146          
001147          If pulseStatus = PULSE_SRC_DPE Then                                                                                                                                                                                      3676: 0x8800   PushLocalI32            pulseStatus
                                                                                                                                                                                                                                         3677: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3678: 0x2403   BranchNE                3682

001148              Return "double"                                                                                                                                                                                                      3679: 0x8440   PushLiteral             64
                                                                                                                                                                                                                                         3680: 0x0095   ReturnRefType           

                                                                                                                                                                                                                                         3681: 0x4002   Branch                  3684
001149          Else                                                                                                                                                                                                                     

001150              Return "single"                                                                                                                                                                                                      3682: 0x84BE   PushLiteral             190
                                                                                                                                                                                                                                         3683: 0x0095   ReturnRefType           

001151          End If
001152          
001153      End Function // Pulse                                                                                                                                                                                                        3684: 0x0096   ReturnNothing           

001154      
001155      
001156      Public Function Shock() As ListOfString                                                                                                                                                                                      3685: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         3686: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

001157          Dim shockStatus As Byte = Read(TRANSIENT_SRC_REG)                                                                                                                                                                        3687: 0x801E   PushConstU10            30 (0x001E)
                                                                                                                                                                                                                                         3688: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3689: 0x5800   JumpSubr                1574
                                                                                                                                                                                                                                         3690: 0x0626                           
                                                                                                                                                                                                                                         3691: 0x9000   PopLocalI32             shockStatus

001158          Dim result As ListOfString = New ListOfString                                                                                                                                                                            3692: 0x8013   PushConstU10            19 (0x0013)
                                                                                                                                                                                                                                         3693: 0x0010   ClassNew                
                                                                                                                                                                                                                                         3694: 0x9400   PopLocalRef             result

001159          
001160          If (shockStatus & TRANSIENT_SRC_XTRANSE) = TRANSIENT_SRC_XTRANSE Then                                                                                                                                                    3695: 0x8800   PushLocalI32            shockStatus
                                                                                                                                                                                                                                         3696: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         3697: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3698: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         3699: 0x2410   BranchNE                3716

001161              result.Add("x")                                                                                                                                                                                                      3700: 0x849B   PushLiteral             155
                                                                                                                                                                                                                                         3701: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3702: 0x00A3   ListAdd                 

001162              If (shockStatus & TRANSIENT_SRC_X_TRANS_POL) = TRANSIENT_SRC_X_TRANS_POL Then                                                                                                                                        3703: 0x8800   PushLocalI32            shockStatus
                                                                                                                                                                                                                                         3704: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3705: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3706: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3707: 0x2404   BranchNE                3712

001163                  result.Add("neg")                                                                                                                                                                                                3708: 0x849D   PushLiteral             157
                                                                                                                                                                                                                                         3709: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3710: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3711: 0x4003   Branch                  3715
001164              Else                                                                                                                                                                                                                 

001165                  result.Add("pos")                                                                                                                                                                                                3712: 0x849F   PushLiteral             159
                                                                                                                                                                                                                                         3713: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3714: 0x00A3   ListAdd                 

001166              End If
                                                                                                                                                                                                                                         3715: 0x4029   Branch                  3757
001167          ElseIf (shockStatus & TRANSIENT_SRC_YTRANSE) = TRANSIENT_SRC_YTRANSE Then                                                                                                                                                3716: 0x8800   PushLocalI32            shockStatus
                                                                                                                                                                                                                                         3717: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3718: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3719: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3720: 0x2410   BranchNE                3737

001168              result.Add("y")                                                                                                                                                                                                      3721: 0x84A1   PushLiteral             161
                                                                                                                                                                                                                                         3722: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3723: 0x00A3   ListAdd                 

001169              If (shockStatus & TRANSIENT_SRC_Y_TRANS_POL) = TRANSIENT_SRC_Y_TRANS_POL Then                                                                                                                                        3724: 0x8800   PushLocalI32            shockStatus
                                                                                                                                                                                                                                         3725: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         3726: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3727: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         3728: 0x2404   BranchNE                3733

001170                  result.Add("neg")                                                                                                                                                                                                3729: 0x849D   PushLiteral             157
                                                                                                                                                                                                                                         3730: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3731: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3732: 0x4003   Branch                  3736
001171              Else                                                                                                                                                                                                                 

001172                  result.Add("pos")                                                                                                                                                                                                3733: 0x849F   PushLiteral             159
                                                                                                                                                                                                                                         3734: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3735: 0x00A3   ListAdd                 

001173              End If
                                                                                                                                                                                                                                         3736: 0x4014   Branch                  3757
001174          ElseIf (shockStatus & TRANSIENT_SRC_ZTRANSE) = TRANSIENT_SRC_ZTRANSE Then                                                                                                                                                3737: 0x8800   PushLocalI32            shockStatus
                                                                                                                                                                                                                                         3738: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         3739: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3740: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         3741: 0x240F   BranchNE                3757

001175              result.Add("z")                                                                                                                                                                                                      3742: 0x84A3   PushLiteral             163
                                                                                                                                                                                                                                         3743: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3744: 0x00A3   ListAdd                 

001176              If (shockStatus & TRANSIENT_SRC_Z_TRANS_POL) = TRANSIENT_SRC_Z_TRANS_POL Then                                                                                                                                        3745: 0x8800   PushLocalI32            shockStatus
                                                                                                                                                                                                                                         3746: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3747: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3748: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3749: 0x2404   BranchNE                3754

001177                  result.Add("neg")                                                                                                                                                                                                3750: 0x849D   PushLiteral             157
                                                                                                                                                                                                                                         3751: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3752: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3753: 0x4003   Branch                  3757
001178              Else                                                                                                                                                                                                                 

001179                  result.Add("pos")                                                                                                                                                                                                3754: 0x849F   PushLiteral             159
                                                                                                                                                                                                                                         3755: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3756: 0x00A3   ListAdd                 

001180              End If
001181          End If
001182          
001183          Return result                                                                                                                                                                                                            3757: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3758: 0x0095   ReturnRefType           

001184      End Function // Shock                                                                                                                                                                                                        3759: 0x0096   ReturnNothing           

001185      
001186      
001187      Public Function GetVersion() As String                                                                                                                                                                                       3760: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

001188          Return VERSION                                                                                                                                                                                                           3761: 0x840C   PushLiteral             12
                                                                                                                                                                                                                                         3762: 0x0095   ReturnRefType           

001189      End Function // GetVersion                                                                                                                                                                                                   3763: 0x0096   ReturnNothing           

001190      
001191      
001192  End Class                                                                                                                                                                                                                        1419: 0x0097   ReturnMe                


****** BLOCKS and VARIABLES for MMA8652
    Block Class (Line 72:1192)
        MMA8652         Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        String          VERSION         (Literal="0.1.0")
        Byte            MMA8652_I2C_ADDR(Literal=29)
        Integer         I2C_SPEED       (Literal=400000)
        Byte            OUT_X_MSB_REG   (Literal=1)
        Byte            OUT_X_LSB_REG   (Literal=2)
        Byte            OUT_Y_MSB_REG   (Literal=3)
        Byte            OUT_Y_LSB_REG   (Literal=4)
        Byte            OUT_Z_MSB_REG   (Literal=5)
        Byte            OUT_Z_LSB_REG   (Literal=6)
        Byte            SYSMOD_REG      (Literal=11)
        Byte            INT_SOURCE_REG  (Literal=12)
        Byte            WHO_AM_I_REG    (Literal=13)
        Byte            XYZ_DATA_CFG_REG(Literal=14)
        Byte            HP_FILTER_CUTOFF(Literal=15)
        Byte            PL_STATUS_REG   (Literal=16)
        Byte            PL_CFG_REG      (Literal=17)
        Byte            PL_COUNT_REG    (Literal=18)
        Byte            PL_BF_ZCOMP_REG (Literal=19)
        Byte            PL_THS_REG      (Literal=20)
        Byte            FF_MT_CFG_REG   (Literal=21)
        Byte            FF_MT_SRC_REG   (Literal=22)
        Byte            FF_MT_THS_REG   (Literal=23)
        Byte            FF_MT_COUNT_REG (Literal=24)
        Byte            TRANSIENT_CFG_RE(Literal=29)
        Byte            TRANSIENT_SRC_RE(Literal=30)
        Byte            TRANSIENT_THS_RE(Literal=31)
        Byte            TRANSIENT_COUNT_(Literal=32)
        Byte            PULSE_CFG_REG   (Literal=33)
        Byte            PULSE_SRC_REG   (Literal=34)
        Byte            PULSE_THSX_REG  (Literal=35)
        Byte            PULSE_THSY_REG  (Literal=36)
        Byte            PULSE_THSZ_REG  (Literal=37)
        Byte            PULSE_TMLT_REG  (Literal=38)
        Byte            PULSE_LTCY_REG  (Literal=39)
        Byte            PULSE_WIND_REG  (Literal=40)
        Byte            ASLP_COUNT_REG  (Literal=41)
        Byte            CTRL_REG1_REG   (Literal=42)
        Byte            CTRL_REG2_REG   (Literal=43)
        Byte            CTRL_REG3_REG   (Literal=44)
        Byte            CTRL_REG4_REG   (Literal=45)
        Byte            CTRL_REG5_REG   (Literal=46)
        Byte            SYSMOD_STANDBY  (Literal=0)
        Byte            SYSMOD_WAKE     (Literal=1)
        Byte            SYSMOD_SLEEP    (Literal=2)
        Byte            SYSMOD_SYSMOD   (Literal=3)
        Byte            INT_SOURCE_SRC_A(Literal=128)
        Byte            INT_SOURCE_SRC_T(Literal=32)
        Byte            INT_SOURCE_SRC_L(Literal=16)
        Byte            INT_SOURCE_SRC_P(Literal=8)
        Byte            INT_SOURCE_SRC_F(Literal=4)
        Byte            WHO_AM_I_       (Literal=74)
        Byte            XYZ_DATA_CFG_HPF(Literal=16)
        Byte            XYZ_DATA_CFG_FS (Literal=3)
        Byte            HP_FILTER_CUTOFF(Literal=16)
        Byte            PL_STATUS_LAPO  (Literal=6)
        Byte            PL_STATUS_BAFRO (Literal=1)
        Byte            PL_CFG_DBCNTM   (Literal=128)
        Byte            PL_CFG_PL_EN    (Literal=64)
        Byte            PL_BF_ZCOMP_BKFR(Literal=192)
        Byte            PL_BF_ZCOMP_ZLOC(Literal=7)
        Byte            PL_THS_THS      (Literal=248)
        Byte            PL_THS_HYS      (Literal=7)
        Byte            FF_MT_CFG_ELE   (Literal=128)
        Byte            FF_MT_CFG_OAE   (Literal=64)
        Byte            FF_MT_CFG_ZEFE  (Literal=32)
        Byte            FF_MT_CFG_YEFE  (Literal=16)
        Byte            FF_MT_CFG_XEFE  (Literal=8)
        Byte            FF_MT_CFG_EFE   (Literal=56)
        Byte            FF_MT_SRC_ZHE   (Literal=32)
        Byte            FF_MT_SRC_ZHP   (Literal=16)
        Byte            FF_MT_SRC_YHE   (Literal=8)
        Byte            FF_MT_SRC_YHP   (Literal=4)
        Byte            FF_MT_SRC_XHE   (Literal=2)
        Byte            FF_MT_SRC_XHP   (Literal=1)
        Byte            TRANSIENT_CFG_EL(Literal=16)
        Byte            TRANSIENT_CFG_TE(Literal=14)
        Byte            TRANSIENT_SRC_ZT(Literal=32)
        Byte            TRANSIENT_SRC_Z_(Literal=16)
        Byte            TRANSIENT_SRC_YT(Literal=8)
        Byte            TRANSIENT_SRC_Y_(Literal=4)
        Byte            TRANSIENT_SRC_XT(Literal=2)
        Byte            TRANSIENT_SRC_X_(Literal=1)
        Byte            PULSE_CFG_DPA   (Literal=128)
        Byte            PULSE_CFG_ELE   (Literal=64)
        Byte            PULSE_CFG_PEFE  (Literal=63)
        Byte            PULSE_SRC_DPE   (Literal=8)
        Byte            CTRL_REG1_ASLP_R(Literal=192)
        Byte            CTRL_REG1_DR    (Literal=56)
        Byte            CTRL_REG1_ACTIVE(Literal=1)
        Byte            CTRL_REG2_RST   (Literal=64)
        Byte            CTRL_REG2_SMODS (Literal=24)
        Byte            CTRL_REG2_SLPE  (Literal=4)
        Byte            CTRL_REG2_MODS  (Literal=3)
        Byte            CTRL_REG3_WAKE_T(Literal=64)
        Byte            CTRL_REG3_WAKE_L(Literal=32)
        Byte            CTRL_REG3_WAKE_P(Literal=16)
        Byte            CTRL_REG3_WAKE_F(Literal=8)
        Byte            CTRL_REG4_INT_EN(Literal=128)
        Byte            CTRL_REG4_INT_EN(Literal=32)
        Byte            CTRL_REG4_INT_EN(Literal=16)
        Byte            CTRL_REG4_INT_EN(Literal=8)
        Byte            CTRL_REG4_INT_EN(Literal=4)
        Byte            CTRL_REG5_INT_CF(Literal=128)
        Byte            CTRL_REG5_INT_CF(Literal=32)
        Byte            CTRL_REG5_INT_CF(Literal=16)
        Byte            CTRL_REG5_INT_CF(Literal=8)
        Byte            CTRL_REG5_INT_CF(Literal=4)
        Float           LOW_ZLOCK_THRESH(Literal=14)
        Float           HIGH_ZLOCK_THRES(Literal=42)
        Float           ZLOCK_THRESHOLD_(Literal=4)
        Float           LOW_GRAVITY_THRE(Literal=0)
        Float           HIGH_GRAVITY_THR(Literal=8)
        Float           GRAVITY_THRESHOL(Literal=0.063)
        Float           LOW_ASLP_DURATIO(Literal=0)
        Float           NORMAL_ASLP_DURA(Literal=81000)
        Float           HIGH_ASLP_DURATI(Literal=162000)
        Float           NORMAL_ASLP_COUN(Literal=320)
        Float           HIGH_ASLP_COUNT_(Literal=640)
        I2c             gAccelerometer  (MemberRefTypVariableOffset=0)
        Boolean         online          (MemberValTypVariableOffset=4)
        Block Function Init (Line 354:370)
            Boolean         enableHighPassFi(LocalValTypVariableOffset=0)
            MMA8652_SCALES  outputDataFormat(LocalValTypVariableOffset=1)
            Block If Then  (Line 356:369)
                Block If Then  (Line 362:364)
                End Block
            End Block
        End Block
        Block Sub New (Line 373:375)
        End Block
        Block Sub New (Line 378:380)
            Boolean         enableHighPassFi(LocalValTypVariableOffset=0)
            MMA8652_SCALES  outputDataFormat(LocalValTypVariableOffset=1)
        End Block
        Block Function Accel (Line 383:413)
            ListOfByte      data            (LocalRefTypVariableOffset=0)
            ListOfFloat     output          (LocalRefTypVariableOffset=1)
            Byte            outputDataFormat(LocalValTypVariableOffset=0)
            Short           accelerationRead(LocalValTypVariableOffset=1)
            Float           convertedReading(LocalValTypVariableOffset=2)
            Float           scaleFactor     (LocalValTypVariableOffset=3)
            Block For  (Line 400:410)
                Integer         axisCount       (LocalValTypVariableOffset=4)
                Block If Then  (Line 404:406)
                End Block
            End Block
        End Block
        Block Function Read (Line 416:424)
            Byte            result          (LocalValTypVariableOffset=1)
            ListOfByte      value           (LocalRefTypVariableOffset=0)
            Byte            address         (LocalValTypVariableOffset=0)
            Block If Then  (Line 420:422)
            End Block
        End Block
        Block Function Read (Line 427:434)
            ListOfByte      data            (LocalRefTypVariableOffset=0)
            Byte            address         (LocalValTypVariableOffset=0)
            Byte            length          (LocalValTypVariableOffset=1)
        End Block
        Block Function Write (Line 437:443)
            ListOfByte      data            (LocalRefTypVariableOffset=0)
            Byte            address         (LocalValTypVariableOffset=0)
            Byte            value           (LocalValTypVariableOffset=1)
        End Block
        Block Function Write (Line 446:450)
            Byte            address         (LocalValTypVariableOffset=0)
            ListOfByte      values          (LocalRefTypVariableOffset=0)
        End Block
        Block Function Reset (Line 454:460)
            Boolean         result          (LocalValTypVariableOffset=0)
            Block While  (Line 456:458)
            End Block
        End Block
        Block Function GetMaxTimeAndTimeStep (Line 464:655)
            Byte            frequency       (LocalValTypVariableOffset=0)
            Byte            mode            (LocalValTypVariableOffset=1)
            Float           ms              (LocalValTypVariableOffset=2)
            Float           time            (LocalValTypVariableOffset=3)
            Integer         offset          (LocalValTypVariableOffset=4)
            ListOfFloat     msTable         (LocalRefTypVariableOffset=1)
            ListOfFloat     result          (LocalRefTypVariableOffset=2)
            String          stepSize        (LocalRefTypVariableOffset=0)
        End Block
        Block Function FloatToByteRepresentation (Line 658:660)
            Float           number          (LocalValTypVariableOffset=0)
            Float           resolution      (LocalValTypVariableOffset=1)
            Float           lowThreshold    (LocalValTypVariableOffset=2)
        End Block
        Block Function Standby (Line 668:671)
        End Block
        Block Function Activate (Line 674:677)
        End Block
        Block Function GetActiveModeFrequency (Line 680:682)
        End Block
        Block Function DisableSleepMode (Line 685:687)
        End Block
        Block Function EnableSleepMode (Line 690:710)
            Boolean         result          (LocalValTypVariableOffset=2)
            Boolean         canSleep        (LocalValTypVariableOffset=0)
            Boolean         setPin2         (LocalValTypVariableOffset=1)
            Block If Then  (Line 695:703)
                Block If Then  (Line 698:700)
                End Block
                Block Else (Line 700:702)
                End Block
            End Block
            Block Else (Line 703:705)
            End Block
        End Block
        Block Function EnableSleepMode (Line 713:715)
            Float           duration        (LocalValTypVariableOffset=0)
        End Block
        Block Function EnableSleepMode (Line 719:744)
            Byte            durationByte    (LocalValTypVariableOffset=2)
            Boolean         result          (LocalValTypVariableOffset=3)
            Float           duration        (LocalValTypVariableOffset=0)
            Boolean         setPin2         (LocalValTypVariableOffset=1)
            Block If Then  (Line 725:731)
                Block If Then  (Line 726:728)
                End Block
            End Block
            Block Else (Line 731:737)
                Block If Then  (Line 732:734)
                End Block
            End Block
        End Block
        Block Function Setup (Line 748:750)
            MMA8652_ACTIVE_OactiveHz        (LocalValTypVariableOffset=0)
            MMA8652_MODS    activePowerSchem(LocalValTypVariableOffset=1)
        End Block
        Block Function Setup (Line 754:765)
            Boolean         result          (LocalValTypVariableOffset=4)
            MMA8652_ACTIVE_OactiveHz        (LocalValTypVariableOffset=0)
            MMA8652_MODS    activePowerSchem(LocalValTypVariableOffset=1)
            MMA8652_SLEEP_ODsleepHz         (LocalValTypVariableOffset=2)
            MMA8652_SMODS   sleepPowerScheme(LocalValTypVariableOffset=3)
        End Block
        Block Function ConfigureOrientationInterrupt (Line 768:770)
            Float           duration        (LocalValTypVariableOffset=0)
            MMA8652_BF_ANGLEbfAngle         (LocalValTypVariableOffset=1)
            Float           zlockAngle      (LocalValTypVariableOffset=2)
            MMA8652_THS_ANGLthsAngle        (LocalValTypVariableOffset=3)
            MMA8652_HYS_ANGLhysAngle        (LocalValTypVariableOffset=4)
        End Block
        Block Function ConfigureOrientationInterrupt (Line 781:828)
            Byte            durationByte    (LocalValTypVariableOffset=6)
            Byte            zlockAngleByte  (LocalValTypVariableOffset=7)
            Boolean         result          (LocalValTypVariableOffset=8)
            ListOfFloat     maxTimeAndTimeSt(LocalRefTypVariableOffset=0)
            Float           duration        (LocalValTypVariableOffset=0)
            MMA8652_BF_ANGLEbfAngle         (LocalValTypVariableOffset=1)
            Float           zlockAngle      (LocalValTypVariableOffset=2)
            MMA8652_THS_ANGLthsAngle        (LocalValTypVariableOffset=3)
            MMA8652_HYS_ANGLhysAngle        (LocalValTypVariableOffset=4)
            Boolean         setPin2         (LocalValTypVariableOffset=5)
            Block If Then  (Line 787:789)
            End Block
            Block If Then  (Line 791:793)
            End Block
            Block If Then  (Line 805:807)
            End Block
            Block Else (Line 807:809)
            End Block
        End Block
        Block Function ConfigureFreefallInterrupt (Line 831:833)
            Float           threshold       (LocalValTypVariableOffset=0)
            Byte            duration        (LocalValTypVariableOffset=1)
        End Block
        Block Function ConfigureFreefallInterrupt (Line 842:883)
            Byte            thresholdByte   (LocalValTypVariableOffset=4)
            Boolean         result          (LocalValTypVariableOffset=5)
            Float           threshold       (LocalValTypVariableOffset=0)
            Byte            duration        (LocalValTypVariableOffset=1)
            Byte            axis            (LocalValTypVariableOffset=2)
            Boolean         setPin2         (LocalValTypVariableOffset=3)
            Block If Then  (Line 846:848)
            End Block
            Block If Then  (Line 862:864)
            End Block
            Block Else (Line 864:866)
            End Block
        End Block
        Block Function ConfigureShockInterrupt (Line 886:888)
            Float           threshold       (LocalValTypVariableOffset=0)
            Float           duration        (LocalValTypVariableOffset=1)
        End Block
        Block Function ConfigureShockInterrupt (Line 897:945)
            Byte            thresholdByte   (LocalValTypVariableOffset=4)
            Byte            durationByte    (LocalValTypVariableOffset=5)
            Boolean         result          (LocalValTypVariableOffset=6)
            ListOfFloat     maxTimeAndTimeSt(LocalRefTypVariableOffset=0)
            Float           threshold       (LocalValTypVariableOffset=0)
            Float           duration        (LocalValTypVariableOffset=1)
            Byte            axis            (LocalValTypVariableOffset=2)
            Boolean         setPin2         (LocalValTypVariableOffset=3)
            Block If Then  (Line 903:905)
            End Block
            Block If Then  (Line 907:909)
            End Block
            Block If Then  (Line 925:927)
            End Block
            Block Else (Line 927:929)
            End Block
        End Block
        Block Function ConfigurePulseInterrupt (Line 948:950)
            Float           threshold       (LocalValTypVariableOffset=0)
            Float           duration        (LocalValTypVariableOffset=1)
            Float           latency         (LocalValTypVariableOffset=2)
            Float           window          (LocalValTypVariableOffset=3)
        End Block
        Block Function ConfigurePulseInterrupt (Line 953:955)
            Float           threshold       (LocalValTypVariableOffset=0)
            Float           duration        (LocalValTypVariableOffset=1)
            Float           latency         (LocalValTypVariableOffset=2)
            Float           window          (LocalValTypVariableOffset=3)
            Boolean         abortDoublePulse(LocalValTypVariableOffset=4)
            Boolean         enableLowPassFil(LocalValTypVariableOffset=5)
        End Block
        Block Function ConfigurePulseInterrupt (Line 966:1051)
            Byte            thresholdByte   (LocalValTypVariableOffset=8)
            Byte            durationByte    (LocalValTypVariableOffset=9)
            Byte            latencyByte     (LocalValTypVariableOffset=10)
            Byte            windowByte      (LocalValTypVariableOffset=11)
            Boolean         result          (LocalValTypVariableOffset=12)
            ListOfFloat     durationMaxTimeA(LocalRefTypVariableOffset=0)
            ListOfFloat     maxTimeAndTimeSt(LocalRefTypVariableOffset=1)
            Float           threshold       (LocalValTypVariableOffset=0)
            Float           duration        (LocalValTypVariableOffset=1)
            Float           latency         (LocalValTypVariableOffset=2)
            Float           window          (LocalValTypVariableOffset=3)
            Boolean         abortDoublePulse(LocalValTypVariableOffset=4)
            Boolean         enableLowPassFil(LocalValTypVariableOffset=5)
            Byte            axis            (LocalValTypVariableOffset=6)
            Boolean         setPin2         (LocalValTypVariableOffset=7)
            Block If Then  (Line 975:978)
            End Block
            Block Else (Line 978:981)
            End Block
            Block If Then  (Line 983:985)
            End Block
            Block If Then  (Line 987:989)
            End Block
            Block If Then  (Line 991:993)
            End Block
            Block If Then  (Line 995:997)
            End Block
            Block If Then  (Line 1014:1016)
            End Block
            Block Else (Line 1016:1018)
            End Block
            Block If Then  (Line 1020:1022)
            End Block
            Block If Then  (Line 1034:1038)
            End Block
        End Block
        Block Function GetIntSource (Line 1054:1071)
            Byte            intSource       (LocalValTypVariableOffset=0)
            ListOfString    result          (LocalRefTypVariableOffset=0)
            Block If Then  (Line 1058:1060)
            End Block
            Block ElseIf (Line 1060:1062)
            End Block
            Block ElseIf (Line 1062:1064)
            End Block
            Block ElseIf (Line 1064:1066)
            End Block
            Block ElseIf (Line 1066:1068)
            End Block
        End Block
        Block Function Autosleep (Line 1074:1084)
            Byte            sysmod          (LocalValTypVariableOffset=0)
            Block If Then  (Line 1077:1079)
            End Block
            Block ElseIf (Line 1079:1081)
            End Block
            Block ElseIf (Line 1081:1083)
            End Block
        End Block
        Block Function Freefall (Line 1087:1115)
            Byte            freefallStatus  (LocalValTypVariableOffset=0)
            ListOfString    result          (LocalRefTypVariableOffset=0)
            Block If Then  (Line 1091:1098)
                Block If Then  (Line 1093:1095)
                End Block
                Block Else (Line 1095:1097)
                End Block
            End Block
            Block ElseIf (Line 1098:1105)
                Block If Then  (Line 1100:1102)
                End Block
                Block Else (Line 1102:1104)
                End Block
            End Block
            Block ElseIf (Line 1105:1112)
                Block If Then  (Line 1107:1109)
                End Block
                Block Else (Line 1109:1111)
                End Block
            End Block
        End Block
        Block Function Orientation (Line 1118:1140)
            Byte            plStatus        (LocalValTypVariableOffset=0)
            ListOfString    result          (LocalRefTypVariableOffset=0)
            Block If Then  (Line 1133:1135)
            End Block
            Block Else (Line 1135:1137)
            End Block
        End Block
        Block Function Pulse (Line 1143:1153)
            Byte            pulseStatus     (LocalValTypVariableOffset=0)
            ListOfString    result          (LocalRefTypVariableOffset=0)
            Block If Then  (Line 1147:1149)
            End Block
            Block Else (Line 1149:1151)
            End Block
        End Block
        Block Function Shock (Line 1156:1184)
            Byte            shockStatus     (LocalValTypVariableOffset=0)
            ListOfString    result          (LocalRefTypVariableOffset=0)
            Block If Then  (Line 1160:1167)
                Block If Then  (Line 1162:1164)
                End Block
                Block Else (Line 1164:1166)
                End Block
            End Block
            Block ElseIf (Line 1167:1174)
                Block If Then  (Line 1169:1171)
                End Block
                Block Else (Line 1171:1173)
                End Block
            End Block
            Block ElseIf (Line 1174:1181)
                Block If Then  (Line 1176:1178)
                End Block
                Block Else (Line 1178:1180)
                End Block
            End Block
        End Block
        Block Function GetVersion (Line 1187:1189)
        End Block
        Total Size of Member data including base classes = 8.
    End Block




****** GLOBAL_VARIABLES **********************************************
Sub_Topic_Publish_Enable, Class=String, Offset=0, SourceClass=Main
Sub_Topic_Knock_Enable, Class=String, Offset=4, SourceClass=Main
accel, Class=MMA8652, Offset=8, SourceClass=Main
queue, Class=ListOfObject, Offset=12, SourceClass=MQTT
Number, Class=Integer, Offset=16, IsReadoly, SourceClass=Intrinsic
Data, Class=Integer, Offset=20, IsReadoly, SourceClass=Intrinsic
ProgramCounter, Class=Integer, Offset=24, IsReadoly, SourceClass=Intrinsic
data, Class=dataType, Offset=32, SourceClass=Main
Knock_Enable, Class=Boolean, Offset=28, SourceClass=Main
Publish_data, Class=Boolean, Offset=29, SourceClass=Main
TimeSinceKnockTriggered, Class=Integer, Offset=36, SourceClass=Main
TimeSinceDoorClosed, Class=Integer, Offset=40, SourceClass=Main
Door_Status, Class=Boolean, Offset=30, SourceClass=Main
use_queue, Class=Boolean, Offset=44, SourceClass=MQTT
MQTT_priority, Class=Boolean, Offset=45, SourceClass=MQTT
timeSincePublish, Class=Integer, Offset=48, SourceClass=MQTT
running, Class=Boolean, Offset=46, SourceClass=MQTT


****** LITERALS ***********************************************
     1 String "True"
     4 String "False"
     7 String "\r\n"
     9 String "V2.1"
    12 String "0.1.0"
    15 String "MCThings/"
    19 String "X8"
    21 String "/EnablePublish"
    26 String "/EnableDoorKnock"
    32 String "Status"
    35 String "Booted: V2.1"
    40 String "Accel Sensor Online"
    46 String "Accel Sensor Offline"
    53 String "Door"
    56 String ":"
    58 String "shock"
    61 String "pulse"
    64 String "double"
    67 String "autosleep"
    71 String "Unhandled Interrupt"
    77 String "Doorknock"
    81 String "Publish"
    84 String " :Boolean Conversion failed"
    92 String "KnockEnable"
    96 String "Unknown"
    99 String "PublishEnable"
   104 String "Uptime"
   107 String "UptimeString"
   112 String "BatteryVoltage"
   117 String "Temperature"
   121 String "OnLine"
   124 String "/"
   126 String "short"
   129 String "medium"
   132 String "long"
   135 String "xlong"
   138 String "freefall"
   142 String "orientation"
   146 String "standby"
   149 String "active"
   152 String "sleep"
   155 String "x"
   157 String "neg"
   159 String "pos"
   161 String "y"
   163 String "z"
   165 String "portrait up"
   169 String "portrait down"
   174 String "landscape right"
   179 String "landscape left"
   184 String "back"
   187 String "front"
   190 String "single"
