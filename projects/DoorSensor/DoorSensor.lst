****** BUILD Of 'DoorSensor' (2016-10-31 4:37:33 PM)


****** EVENT HANDLERS
                                                                                                                                                                                                                                         0:    0x007E   Address Priority 0 Event.   Code for 'Boot' starts at 126.
                                                                                                                                                                                                                                         1:    0x00E9   Address Priority 1 Event.   Code for 'NewGateway' starts at 233.
                                                                                                                                                                                                                                         2:    0x00F7   Address Priority 2 Event.   Code for 'AccelerometerInt1' starts at 247.
                                                                                                                                                                                                                                         3:    0x01AE   Address Priority 3 Event.   Code for 'ReedSwitchChanged' starts at 430.
                                                                                                                                                                                                                                         4:    0x01EA   Address Priority 4 Event.   Code for 'SubscriptionDelivery' starts at 490.
                                                                                                                                                                                                                                         5:    0x0255   Address Priority 5 Event.   Code for 'KnockStatus' starts at 597.
                                                                                                                                                                                                                                         6:    0x025F   Address Priority 6 Event.   Code for 'Publish' starts at 607.
                                                                                                                                                                                                                                         7:    0x048D   Address Priority 7 Event.   Code for 'Publish_Queue' starts at 1165.
                                                                                                                                                                                                                                         8:    0x04C1   Address Priority 8 Event.   Code for 'Recheck_Event' starts at 1217.
                                                                                                                                                                                                                                         9:    0x0000   Address Priority 9 Event.   No Event defined.
                                                                                                                                                                                                                                         10:   0x0000   Address Priority 10 Event.  No Event defined.
                                                                                                                                                                                                                                         11:   0x0000   Address Priority 11 Event.  No Event defined.
                                                                                                                                                                                                                                         12:   0x0000   Address Priority 12 Event.  No Event defined.
                                                                                                                                                                                                                                         13:   0x0000   Address Priority 13 Event.  No Event defined.
                                                                                                                                                                                                                                         14:   0x0000   Address Priority 14 Event.  No Event defined.
                                                                                                                                                                                                                                         15:   0x0000   Address Priority 15 Event.  No Event defined.
                                                                                                                                                                                                                                         16:   0x0000   Address Priority 16 Event.  No Event defined.
                                                                                                                                                                                                                                         17:   0x0000   Address Priority 17 Event.  No Event defined.
                                                                                                                                                                                                                                         18:   0x0000   Address Priority 18 Event.  No Event defined.
                                                                                                                                                                                                                                         19:   0x0000   Address Priority 19 Event.  No Event defined.
                                                                                                                                                                                                                                         20:   0x0000   Address Priority 20 Event.  No Event defined.
                                                                                                                                                                                                                                         21:   0x0000   Address Priority 21 Event.  No Event defined.
                                                                                                                                                                                                                                         22:   0x0000   Address Priority 22 Event.  No Event defined.
                                                                                                                                                                                                                                         23:   0x0000   Address Priority 23 Event.  No Event defined.
                                                                                                                                                                                                                                         24:   0x0000   Address Priority 24 Event.  No Event defined.
                                                                                                                                                                                                                                         25:   0x0000   Address Priority 25 Event.  No Event defined.
                                                                                                                                                                                                                                         26:   0x0000   Address Priority 26 Event.  No Event defined.
                                                                                                                                                                                                                                         27:   0x0000   Address Priority 27 Event.  No Event defined.
                                                                                                                                                                                                                                         28:   0x0000   Address Priority 28 Event.  No Event defined.
                                                                                                                                                                                                                                         29:   0x0000   Address Priority 29 Event.  No Event defined.
                                                                                                                                                                                                                                         30:   0x0000   Address Priority 30 Event.  No Event defined.
                                                                                                                                                                                                                                         31:   0x0000   Address Priority 31 Event.  No Event defined.

****** RUNTIME INFORMATION
                                                                                                                                                                                                                                         32:   0x0E5E   ScriptSizeLS (Size of the code in 2-byte instructions = 3678)
                                                                                                                                                                                                                                         33:   0x0000   CodeSizeMS (Size of the code in 2-byte instructions = 3678)
                                                                                                                                                                                                                                         34:   0x003A   CodeSizeInBlocks = 58
                                                                                                                                                                                                                                         35:   0x0006   StringSizeInBlocks = 6
                                                                                                                                                                                                                                         36:   0x0000   Reserved
                                                                                                                                                                                                                                         37:   0x0000   Reserved
                                                                                                                                                                                                                                         38:   0x2FCD   Compile Date and Time 2016-10-31 16:37:33
                                                                                                                                                                                                                                         39:   0x1FAA   Compile Date and Time 2016-10-31 16:37:33
                                                                                                                                                                                                                                         40:   0x0000   Reserved
                                                                                                                                                                                                                                         41:   0x0000   Reserved
                                                                                                                                                                                                                                         42:   0x0000   Reserved
                                                                                                                                                                                                                                         43:   0x0000   Reserved
                                                                                                                                                                                                                                         44:   0x0000   Reserved
                                                                                                                                                                                                                                         45:   0x0000   PinMode Pin0=NotUsed  Pin1=NotUsed
                                                                                                                                                                                                                                         46:   0x0000   PinMode Pin2=NotUsed  Pin3=NotUsed
                                                                                                                                                                                                                                         47:   0x0000   PinMode Pin4=NotUsed  Pin5=NotUsed
                                                                                                                                                                                                                                         48:   0x0000   PinMode Pin6=NotUsed  Pin7=NotUsed
                                                                                                                                                                                                                                         49:   0x0000   PinMode Pin8=NotUsed   Pin9=NotUsed
                                                                                                                                                                                                                                         50:   0x0000   PinMode Pin10=NotUsed   Pin11=NotUsed
                                                                                                                                                                                                                                         51:   0x0000   PinMode Pin12=NotUsed   Pin13=NotUsed
                                                                                                                                                                                                                                         52:   0x0000   PinMode Pin14=NotUsed   Pin15=NotUsed
                                                                                                                                                                                                                                         53:   0x0000   PinMode Pin16=NotUsed   Pin17=NotUsed
                                                                                                                                                                                                                                         54:   0x0000   PinMode Pin18=NotUsed   Pin19=NotUsed
                                                                                                                                                                                                                                         55:   0x0000   PinMode Pin20=NotUsed   Pin21=NotUsed
                                                                                                                                                                                                                                         56:   0x0000   PinMode Pin22=NotUsed   Pin23=NotUsed
                                                                                                                                                                                                                                         57:   0x0000   Reserved
                                                                                                                                                                                                                                         58:   0x0000   Reserved
                                                                                                                                                                                                                                         59:   0x0000   Reserved
                                                                                                                                                                                                                                         60:   0x0000   Reserved
                                                                                                                                                                                                                                         61:   0x1800   IdleThread EntryPoint ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         62:   0x0015   SystemIdle
                                                                                                                                                                                                                                         63:   0x5002   BranchBack 62

****** CLASS INFORMATION
                                                                                                                                                                                                                                         64:   0x0049   Class Descriptor for class 'Global'. Next Descriptor at 73.
                                                                                                                                                                                                                                         65:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                                                                                         66:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                                                                                         67:   0x0010   Size of RefObject data.(16).
                                                                                                                                                                                                                                         68:   0x003C   Size of all data.(60).
                                                                                                                                                                                                                                         69:   0x6C47   Part of the class name 'Global'.
                                                                                                                                                                                                                                         70:   0x626F   Part of the class name 'Global'.
                                                                                                                                                                                                                                         71:   0x6C61   Part of the class name 'Global'.
                                                                                                                                                                                                                                         72:   0x0000   Part of the class name 'Global'.
                                                                                                                                                                                                                                         73:   0x0051   Class Descriptor for class 'Main'. Next Descriptor at 81.
                                                                                                                                                                                                                                         74:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                                                                                         75:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                                                                                         76:   0x0000   Size of RefObject data.(0).
                                                                                                                                                                                                                                         77:   0x0000   Size of all data.(0).
                                                                                                                                                                                                                                         78:   0x614D   Part of the class name 'Main'.
                                                                                                                                                                                                                                         79:   0x6E69   Part of the class name 'Main'.
                                                                                                                                                                                                                                         80:   0x0000   Part of the class name 'Main'.
                                                                                                                                                                                                                                         81:   0x005C   Class Descriptor for class 'TempSensor'. Next Descriptor at 92.
                                                                                                                                                                                                                                         82:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                                                                                         83:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                                                                                         84:   0x0000   Size of RefObject data.(0).
                                                                                                                                                                                                                                         85:   0x0000   Size of all data.(0).
                                                                                                                                                                                                                                         86:   0x6554   Part of the class name 'TempSensor'.
                                                                                                                                                                                                                                         87:   0x706D   Part of the class name 'TempSensor'.
                                                                                                                                                                                                                                         88:   0x6553   Part of the class name 'TempSensor'.
                                                                                                                                                                                                                                         89:   0x736E   Part of the class name 'TempSensor'.
                                                                                                                                                                                                                                         90:   0x726F   Part of the class name 'TempSensor'.
                                                                                                                                                                                                                                         91:   0x0000   Part of the class name 'TempSensor'.
                                                                                                                                                                                                                                         92:   0x0068   Class Descriptor for class 'MQTT_Message'. Next Descriptor at 104.
                                                                                                                                                                                                                                         93:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                                                                                         94:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                                                                                         95:   0x000C   Size of RefObject data.(12).
                                                                                                                                                                                                                                         96:   0x0014   Size of all data.(20).
                                                                                                                                                                                                                                         97:   0x514D   Part of the class name 'MQTT_Message'.
                                                                                                                                                                                                                                         98:   0x5454   Part of the class name 'MQTT_Message'.
                                                                                                                                                                                                                                         99:   0x4D5F   Part of the class name 'MQTT_Message'.
                                                                                                                                                                                                                                         100:  0x7365   Part of the class name 'MQTT_Message'.
                                                                                                                                                                                                                                         101:  0x6173   Part of the class name 'MQTT_Message'.
                                                                                                                                                                                                                                         102:  0x6567   Part of the class name 'MQTT_Message'.
                                                                                                                                                                                                                                         103:  0x0000   Part of the class name 'MQTT_Message'.
                                                                                                                                                                                                                                         104:  0x0070   Class Descriptor for class 'MQTT'. Next Descriptor at 112.
                                                                                                                                                                                                                                         105:  0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                                                                                         106:  0x0000   Offset of RefObject data.(0).
                                                                                                                                                                                                                                         107:  0x0000   Size of RefObject data.(0).
                                                                                                                                                                                                                                         108:  0x0000   Size of all data.(0).
                                                                                                                                                                                                                                         109:  0x514D   Part of the class name 'MQTT'.
                                                                                                                                                                                                                                         110:  0x5454   Part of the class name 'MQTT'.
                                                                                                                                                                                                                                         111:  0x0000   Part of the class name 'MQTT'.
                                                                                                                                                                                                                                         112:  0x0079   Class Descriptor for class 'MMA8652'. Next Descriptor at 121.
                                                                                                                                                                                                                                         113:  0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                                                                                         114:  0x0000   Offset of RefObject data.(0).
                                                                                                                                                                                                                                         115:  0x0004   Size of RefObject data.(4).
                                                                                                                                                                                                                                         116:  0x0008   Size of all data.(8).
                                                                                                                                                                                                                                         117:  0x4D4D   Part of the class name 'MMA8652'.
                                                                                                                                                                                                                                         118:  0x3841   Part of the class name 'MMA8652'.
                                                                                                                                                                                                                                         119:  0x3536   Part of the class name 'MMA8652'.
                                                                                                                                                                                                                                         120:  0x0032   Part of the class name 'MMA8652'.
                                                                                                                                                                                                                                         121:  0x0000   End Of Class Data.

****** APPLIACTION STATEMENTS
*************************************************************************************************************

000011  Class Main                                                                                                                                                                                                                       122:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000012      
000013      Const Version As String = "V2.0"
000014      Shared data As dataType
000015      Const Sub_Topic As String = "MCThings/Publish"
000016      Shared Sub_Topic_Knock_Enable As String
000017      Shared Knock_Enable As Boolean
000018      Shared Publish_data As Boolean
000019      Shared Count As Integer
000020      Shared accel As MMA8652
000021      Shared TimeSinceKnockTriggered As Integer
000022      Shared TimeSinceDoorClosed As Integer
000023      
                                                                                                                                                                                                                                         124:  0x0001                           EventType=Boot
                                                                                                                                                                                                                                         125:  0x0700                           EventCategory=Interrupt
000024      Shared Event Boot()                                                                                                                                                                                                          126:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         127:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000025          //Lplan.SetLowPowerMode(10) //communicate every 10 seconds regardless  
000026          //Lplan.SetMidPowerMode(2000) //communicate every 2 seconds regardless
000027          Publish_data = True                                                                                                                                                                                                      128:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         129:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         130:  0xC81D   PopFieldU8              Publish_data

000028          Sub_Topic_Knock_Enable = "MCThings/" + Device.mcUID().ToString("X8") + "/EnableDoorKnock"                                                                                                                                131:  0x8415   PushLiteral             21
                                                                                                                                                                                                                                         132:  0x8419   PushLiteral             25
                                                                                                                                                                                                                                         133:  0x00F8   DeviceUID               
                                                                                                                                                                                                                                         134:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         135:  0x0069   StrFormat               
                                                                                                                                                                                                                                         136:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         137:  0x841B   PushLiteral             27
                                                                                                                                                                                                                                         138:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         139:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         140:  0xD400   PopFieldRef             Sub_Topic_Knock_Enable

000029          TimeSinceKnockTriggered = -60                                                                                                                                                                                            141:  0xE83B   PushConstNeg8           -60 (0xFFFFFFC4)
                                                                                                                                                                                                                                         142:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         143:  0xD028   PopFieldI32             TimeSinceKnockTriggered

000030          TimeSinceDoorClosed = 0                                                                                                                                                                                                  144:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         145:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         146:  0xD02C   PopFieldI32             TimeSinceDoorClosed

000031          MQTT.Subscribe(Sub_Topic)                                                                                                                                                                                                147:  0x840C   PushLiteral             12
                                                                                                                                                                                                                                         148:  0x000E   PushNothing             
                                                                                                                                                                                                                                         149:  0x5800   JumpSubr                1323
                                                                                                                                                                                                                                         150:  0x052B                           

000032          MQTT.Subscribe(Sub_Topic_Knock_Enable, QoS.ExactlyOnce)                                                                                                                                                                  151:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         152:  0xC400   PushFieldRef            Sub_Topic_Knock_Enable
                                                                                                                                                                                                                                         153:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         154:  0x000E   PushNothing             
                                                                                                                                                                                                                                         155:  0x5800   JumpSubr                1327
                                                                                                                                                                                                                                         156:  0x052F                           

000033          MQTT.use_queue = True //enable MQTT queueing                                                                                                                                                                             157:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         158:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         159:  0xC830   PopFieldU8              use_queue

000034          MQTT.Publish("Status", "Booted: " + Version)                                                                                                                                                                             160:  0x8421   PushLiteral             33
                                                                                                                                                                                                                                         161:  0x8424   PushLiteral             36
                                                                                                                                                                                                                                         162:  0x000E   PushNothing             
                                                                                                                                                                                                                                         163:  0x1EC7   BranchSubr              875

000035          accel = New MMA8652()                                                                                                                                                                                                    164:  0x8070   PushConstU10            112 (0x0070)
                                                                                                                                                                                                                                         165:  0x0010   ClassNew                
                                                                                                                                                                                                                                         166:  0x5800   JumpSubr                1332
                                                                                                                                                                                                                                         167:  0x0534                           
                                                                                                                                                                                                                                         168:  0x5800   JumpSubr                1387
                                                                                                                                                                                                                                         169:  0x056B                           
                                                                                                                                                                                                                                         170:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         171:  0xD404   PopFieldRef             accel

000036          If accel.online Then                                                                                                                                                                                                     172:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         173:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                         174:  0xB804   PushFieldU8             online
                                                                                                                                                                                                                                         175:  0x3C28   BranchFalse             216

000037              MQTT.Publish("Status", "Accel Sensor Online")                                                                                                                                                                        176:  0x8421   PushLiteral             33
                                                                                                                                                                                                                                         177:  0x8429   PushLiteral             41
                                                                                                                                                                                                                                         178:  0x000E   PushNothing             
                                                                                                                                                                                                                                         179:  0x1EB7   BranchSubr              875

000038              accel.Setup(MMA8652_ACTIVE_ODR._400HZ, MMA8652_MODS.LOW_POWER, MMA8652_SLEEP_ODR._12_5HZ, MMA8652_SMODS.MOD_LOW_POWER)                                                                                               180:  0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         181:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         182:  0x8040   PushConstU10            64 (0x0040)
                                                                                                                                                                                                                                         183:  0x8018   PushConstU10            24 (0x0018)
                                                                                                                                                                                                                                         184:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         185:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                         186:  0x5800   JumpSubr                2440
                                                                                                                                                                                                                                         187:  0x0988                           
                                                                                                                                                                                                                                         188:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000039              //accel.Setup(MMA8652_ACTIVE_ODR._50HZ, MMA8652_MODS.NORMAL)
000040              'accel.ConfigureShockInterrupt(0.1, 10) //default 0.1, 20 (magnitude in g, duraton in ms)
000041              //pulse (click) detection works better for knock detection...
000042              accel.ConfigurePulseInterrupt(0.15, 50, 50, 2000) //default 0.1, 20 (magnitude in g, duraton in ms, minnimum time between pulses, window for second pulse detection)                                                 189:  0x0110   PushConstI32            1041865114 (0x3E19999A)
                                                                                                                                                                                                                                         190:  0x999A                           
                                                                                                                                                                                                                                         191:  0x3E19                           
                                                                                                                                                                                                                                         192:  0xEA32   PushConstFlt            50.0
                                                                                                                                                                                                                                         193:  0xEA32   PushConstFlt            50.0
                                                                                                                                                                                                                                         194:  0x0110   PushConstI32            2000 (0x000007D0)
                                                                                                                                                                                                                                         195:  0x07D0                           
                                                                                                                                                                                                                                         196:  0x0000                           
                                                                                                                                                                                                                                         197:  0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                         198:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         199:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                         200:  0x5800   JumpSubr                3045
                                                                                                                                                                                                                                         201:  0x0BE5                           
                                                                                                                                                                                                                                         202:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000043              accel.EnableSleepMode(2000) //enable sleep mode, 2s wake time                                                                                                                                                        203:  0x0110   PushConstI32            2000 (0x000007D0)
                                                                                                                                                                                                                                         204:  0x07D0                           
                                                                                                                                                                                                                                         205:  0x0000                           
                                                                                                                                                                                                                                         206:  0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                         207:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         208:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                         209:  0x5800   JumpSubr                2350
                                                                                                                                                                                                                                         210:  0x092E                           
                                                                                                                                                                                                                                         211:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000044              Knock_Enable = True                                                                                                                                                                                                  212:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         213:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         214:  0xC81C   PopFieldU8              Knock_Enable

000045              
                                                                                                                                                                                                                                         215:  0x4007   Branch                  223
000046          Else                                                                                                                                                                                                                     

000047              MQTT.Publish("Status", "Accel Sensor Offline")                                                                                                                                                                       216:  0x8421   PushLiteral             33
                                                                                                                                                                                                                                         217:  0x842F   PushLiteral             47
                                                                                                                                                                                                                                         218:  0x000E   PushNothing             
                                                                                                                                                                                                                                         219:  0x1E8F   BranchSubr              875

000048              Knock_Enable = False                                                                                                                                                                                                 220:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         221:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         222:  0xC81C   PopFieldU8              Knock_Enable

000049          End If
000050          Dim Door_Status As Boolean = ReedSwitch                                                                                                                                                                                  223:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                         224:  0x9000   PopLocalI32             Door_Status

000051          MQTT.Publish("Door", Door_Status)                                                                                                                                                                                        225:  0x8436   PushLiteral             54
                                                                                                                                                                                                                                         226:  0x8800   PushLocalI32            Door_Status
                                                                                                                                                                                                                                         227:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         228:  0x000E   PushNothing             
                                                                                                                                                                                                                                         229:  0x1E8D   BranchSubr              883

000052          //MQTT.BeaconPublish(dataType.DOOR, Door_Status)  //DO NOT put beacon data in boot! really doesn't like it
000053      End Event                                                                                                                                                                                                                    230:  0x0091   Return                  

000054      
                                                                                                                                                                                                                                         231:  0x0005                           EventType=NewGateway
                                                                                                                                                                                                                                         232:  0x0700                           EventCategory=Interrupt
000055      Shared Event NewGateway()                                                                                                                                                                                                    233:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000056          MQTT.Subscribe(Sub_Topic)                                                                                                                                                                                                234:  0x840C   PushLiteral             12
                                                                                                                                                                                                                                         235:  0x000E   PushNothing             
                                                                                                                                                                                                                                         236:  0x5800   JumpSubr                1323
                                                                                                                                                                                                                                         237:  0x052B                           

000057          MQTT.Subscribe(Sub_Topic_Knock_Enable, QoS.ExactlyOnce)                                                                                                                                                                  238:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         239:  0xC400   PushFieldRef            Sub_Topic_Knock_Enable
                                                                                                                                                                                                                                         240:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         241:  0x000E   PushNothing             
                                                                                                                                                                                                                                         242:  0x5800   JumpSubr                1327
                                                                                                                                                                                                                                         243:  0x052F                           

000058      End Event                                                                                                                                                                                                                    244:  0x0091   Return                  

000059      
                                                                                                                                                                                                                                         245:  0x0212                           EventType=AccelerometerInt1
                                                                                                                                                                                                                                         246:  0x0700                           EventCategory=Interrupt
000060      Shared Event AccelerometerInt1()                                                                                                                                                                                             247:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000061          If Knock_Enable Then                                                                                                                                                                                                     248:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         249:  0xB81C   PushFieldU8             Knock_Enable
                                                                                                                                                                                                                                         250:  0x3C65   BranchFalse             352
                                                                                                                                                                                                                                         251:  0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000062              Dim intType As ListOfString = accel.GetIntSource()                                                                                                                                                                   252:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         253:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                         254:  0x5800   JumpSubr                3361
                                                                                                                                                                                                                                         255:  0x0D21                           
                                                                                                                                                                                                                                         256:  0x9400   PopLocalRef             intType

000063              While intType.Count> 0 And Not ReedSwitch //door is closed                                                                                                                                                           257:  0x8C00   PushLocalRef            intType
                                                                                                                                                                                                                                         258:  0xC000   PushFieldI32            Offset=0
                                                                                                                                                                                                                                         259:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         260:  0x0022   IntCmpGT                
                                                                                                                                                                                                                                         261:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                         262:  0x001D   BooNot                  
                                                                                                                                                                                                                                         263:  0x001F   IntAnd                  
                                                                                                                                                                                                                                         264:  0x3C56   BranchFalse             351

                                                                                                                                                                                                                                         265:  0x8C00   PushLocalRef            intType
                                                                                                                                                                                                                                         266:  0x000E   PushNothing             
                                                                                                                                                                                                                                         267:  0x0003   ExchangeRef             
                                                                                                                                                                                                                                         268:  0x0018   DupRef1                 
                                                                                                                                                                                                                                         269:  0xC000   PushFieldI32            Offset=0
                                                                                                                                                                                                                                         270:  0x0016   PushConstMinus1         
000064                  For Each interrupt In intType                                                                                                                                                                                    271:  0x4C48   BranchForEach           344

000065                      //MQTT.Publish("Interrupt", interrupt)  //debug
000066                      Select interrupt                                                                                                                                                                                             272:  0x8C01   PushLocalRef            interrupt
                                                                                                                                                                                                                                         273:  0x0122   CaseComputed            
                                                                                                                                                                                                                                         274:  0x0009                           CaseCommonClass=String
                                                                                                                                                                                                                                         275:  0x0003                           NumberOfCaseEntries=3
                                                                                                                                                                                                                                         276:  0x003A                           CaseElseBranch=335
                                                                                                                                                                                                                                         277:  0x0039                           LSH CaseValue=57
                                                                                                                                                                                                                                         278:  0x0000                           MSH CaseValue=57
                                                                                                                                                                                                                                         279:  0x0009                           CaseBranch=286
                                                                                                                                                                                                                                         280:  0x003C                           LSH CaseValue=60
                                                                                                                                                                                                                                         281:  0x0000                           MSH CaseValue=60
                                                                                                                                                                                                                                         282:  0x0015                           CaseBranch=298
                                                                                                                                                                                                                                         283:  0x0042                           LSH CaseValue=66
                                                                                                                                                                                                                                         284:  0x0000                           MSH CaseValue=66
                                                                                                                                                                                                                                         285:  0x002D                           CaseBranch=322

000067                          Case "shock"
000068                              'Transient interrupt occured
000069                              LedGreen = True                                                                                                                                                                                      286:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         287:  0x080A   PopAndSetDigitalPin     Pin10

000070                              DetectDoorKnock()                                                                                                                                                                                    288:  0x000D   PushMe                  
                                                                                                                                                                                                                                         289:  0x1C3F   BranchSubr              353

000071                              LedGreen = False                                                                                                                                                                                     290:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         291:  0x080A   PopAndSetDigitalPin     Pin10

000072                              accel.Shock() // Must read shock data to clear interrupt                                                                                                                                             292:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         293:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                         294:  0x5800   JumpSubr                3599
                                                                                                                                                                                                                                         295:  0x0E0F                           
                                                                                                                                                                                                                                         296:  0xE401   FreeStackSpace          ValTypeSize=0, RefTypeSize=1

                                                                                                                                                                                                                                         297:  0x402D   Branch                  343
000073                          Case "pulse"                                                                                                                                                                                             

000074                              'click interrupt occured
000075                              LedGreen = True                                                                                                                                                                                      298:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         299:  0x080A   PopAndSetDigitalPin     Pin10

000076                              Count += 1                                                                                                                                                                                           300:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         301:  0xC024   PushFieldI32            Count
                                                                                                                                                                                                                                         302:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         303:  0x001E   IntAdd                  
                                                                                                                                                                                                                                         304:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         305:  0xD024   PopFieldI32             Count

000077                              If (accel.Pulse() = "double") Then // Must read pulse data to clear interrupt                                                                                                                        306:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         307:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                         308:  0x5800   JumpSubr                3578
                                                                                                                                                                                                                                         309:  0x0DFA                           
                                                                                                                                                                                                                                         310:  0x843F   PushLiteral             63
                                                                                                                                                                                                                                         311:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         312:  0x0058   StrCmpEQ                
                                                                                                                                                                                                                                         313:  0x3C03   BranchFalse             317

000078                                  DetectDoorKnock_DoubleClick() //if it's a double click (pulse)                                                                                                                                   314:  0x000D   PushMe                  
                                                                                                                                                                                                                                         315:  0x1C46   BranchSubr              386

                                                                                                                                                                                                                                         316:  0x4002   Branch                  319
000079                              Else                                                                                                                                                                                                 

000080                                  DetectDoorKnock() //single click (pulse)                                                                                                                                                         317:  0x000D   PushMe                  
                                                                                                                                                                                                                                         318:  0x1C22   BranchSubr              353

000081                              End If
000082                              LedGreen = False                                                                                                                                                                                     319:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         320:  0x080A   PopAndSetDigitalPin     Pin10

                                                                                                                                                                                                                                         321:  0x4015   Branch                  343
000083                          Case "autosleep"                                                                                                                                                                                         

000084                              LedRed = True                                                                                                                                                                                        322:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         323:  0x0809   PopAndSetDigitalPin     Pin9

000085                              accel.Autosleep() // Must read Autosleep to clear interrupt                                                                                                                                          324:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         325:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                         326:  0x5800   JumpSubr                3418
                                                                                                                                                                                                                                         327:  0x0D5A                           
                                                                                                                                                                                                                                         328:  0xE401   FreeStackSpace          ValTypeSize=0, RefTypeSize=1

000086                              'MQTT.Publish("Count", Count) //debugging
000087                              Count = 0                                                                                                                                                                                            329:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         330:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         331:  0xD024   PopFieldI32             Count

000088                              //MQTT.Publish("Mode", accel.Autosleep) // Must read Autosleep to clear interrupt
000089                              LedRed = False                                                                                                                                                                                       332:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         333:  0x0809   PopAndSetDigitalPin     Pin9

                                                                                                                                                                                                                                         334:  0x4008   Branch                  343
000090                          Case Else                                                                                                                                                                                                

000091                              LedRed = True                                                                                                                                                                                        335:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         336:  0x0809   PopAndSetDigitalPin     Pin9

000092                              MQTT.Publish("Unhandled Interrupt", interrupt)                                                                                                                                                       337:  0x8446   PushLiteral             70
                                                                                                                                                                                                                                         338:  0x8C01   PushLocalRef            interrupt
                                                                                                                                                                                                                                         339:  0x000E   PushNothing             
                                                                                                                                                                                                                                         340:  0x1E16   BranchSubr              875

000093                              //clear unhandled interupt here
000094                              LedRed = False                                                                                                                                                                                       341:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         342:  0x0809   PopAndSetDigitalPin     Pin9

000095                      End Select 
                                                                                                                                                                                                                                         343:  0x5049   BranchBack              271
000096                  Next                                                                                                                                                                                                             344:  0xE442   FreeStackSpace          ValTypeSize=2, RefTypeSize=2

000097                  
000098                  intType = accel.GetIntSource()                                                                                                                                                                                   345:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         346:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                         347:  0x5800   JumpSubr                3361
                                                                                                                                                                                                                                         348:  0x0D21                           
                                                                                                                                                                                                                                         349:  0x9400   PopLocalRef             intType

000099                  
000100              End While                                                                                                                                                                                                            350:  0x505E   BranchBack              257

                                                                                                                                                                                                                                         351:  0xE401   FreeStackSpace          ValTypeSize=0, RefTypeSize=1
000101          End If                                                                                                                                                                                                                   

000102      End Event                                                                                                                                                                                                                    352:  0x0091   Return                  

000103      
000104      Public Sub DetectDoorKnock()                                                                                                                                                                                                 353:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000105          //if more than 60 seconds since Knock last triggered, and more than 5 seconds since door closed
000106          If (Device.Uptime() - TimeSinceKnockTriggered > 60) And (Device.Uptime() - TimeSinceDoorClosed > 5) Then                                                                                                                 354:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         355:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         356:  0xC028   PushFieldI32            TimeSinceKnockTriggered
                                                                                                                                                                                                                                         357:  0x0031   IntSub                  
                                                                                                                                                                                                                                         358:  0x803C   PushConstU10            60 (0x003C)
                                                                                                                                                                                                                                         359:  0x0022   IntCmpGT                
                                                                                                                                                                                                                                         360:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         361:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         362:  0xC02C   PushFieldI32            TimeSinceDoorClosed
                                                                                                                                                                                                                                         363:  0x0031   IntSub                  
                                                                                                                                                                                                                                         364:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                                                                                         365:  0x0022   IntCmpGT                
                                                                                                                                                                                                                                         366:  0x001F   IntAnd                  
                                                                                                                                                                                                                                         367:  0x3C11   BranchFalse             385
                                                                                                                                                                                                                                         368:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000107              Dim timeSinceLastTransient As Integer = Device.GetTimeSpan()                                                                                                                                                         369:  0x00FB   DeviceGetTimeSpan       
                                                                                                                                                                                                                                         370:  0x9000   PopLocalI32             timeSinceLastTransient

000108              'If at least two transients within 1.5 seconds (note sleep time is 2 seconds)
000109              If timeSinceLastTransient < 1500000 And timeSinceLastTransient > 0 Then //debounce door                                                                                                                              371:  0x8800   PushLocalI32            timeSinceLastTransient
                                                                                                                                                                                                                                         372:  0x0110   PushConstI32            1500000 (0x0016E360)
                                                                                                                                                                                                                                         373:  0xE360                           
                                                                                                                                                                                                                                         374:  0x0016                           
                                                                                                                                                                                                                                         375:  0x0024   IntCmpLT                
                                                                                                                                                                                                                                         376:  0x8800   PushLocalI32            timeSinceLastTransient
                                                                                                                                                                                                                                         377:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         378:  0x0022   IntCmpGT                
                                                                                                                                                                                                                                         379:  0x001F   IntAnd                  
                                                                                                                                                                                                                                         380:  0x3C03   BranchFalse             384

000110                  Trigger_DoorKnock(1000)                                                                                                                                                                                          381:  0x83E8   PushConstU10            1000 (0x03E8)
                                                                                                                                                                                                                                         382:  0x000D   PushMe                  
                                                                                                                                                                                                                                         383:  0x1C1A   BranchSubr              410

000111              End If
                                                                                                                                                                                                                                         384:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
000112          End If                                                                                                                                                                                                                   

000113      End Sub                                                                                                                                                                                                                      385:  0x0091   Return                  

000114      
000115      Public Sub DetectDoorKnock_DoubleClick()                                                                                                                                                                                     386:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000116          //if more than 60 seconds since Knock last triggered, and more than 5 seconds since door closed
000117          If (Device.Uptime() - TimeSinceKnockTriggered > 60) And (Device.Uptime() - TimeSinceDoorClosed > 5) Then                                                                                                                 387:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         388:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         389:  0xC028   PushFieldI32            TimeSinceKnockTriggered
                                                                                                                                                                                                                                         390:  0x0031   IntSub                  
                                                                                                                                                                                                                                         391:  0x803C   PushConstU10            60 (0x003C)
                                                                                                                                                                                                                                         392:  0x0022   IntCmpGT                
                                                                                                                                                                                                                                         393:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         394:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         395:  0xC02C   PushFieldI32            TimeSinceDoorClosed
                                                                                                                                                                                                                                         396:  0x0031   IntSub                  
                                                                                                                                                                                                                                         397:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                                                                                         398:  0x0022   IntCmpGT                
                                                                                                                                                                                                                                         399:  0x001F   IntAnd                  
                                                                                                                                                                                                                                         400:  0x3C08   BranchFalse             409

000118              MQTT.Publish_Priority("Doorknock", "Double", QoS.AtLeastOnce)                                                                                                                                                        401:  0x844C   PushLiteral             76
                                                                                                                                                                                                                                         402:  0x8450   PushLiteral             80
                                                                                                                                                                                                                                         403:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         404:  0x000E   PushNothing             
                                                                                                                                                                                                                                         405:  0x1E2A   BranchSubr              960

000119              Trigger_DoorKnock(1000)                                                                                                                                                                                              406:  0x83E8   PushConstU10            1000 (0x03E8)
                                                                                                                                                                                                                                         407:  0x000D   PushMe                  
                                                                                                                                                                                                                                         408:  0x1C01   BranchSubr              410

000120          End If
000121      End Sub                                                                                                                                                                                                                      409:  0x0091   Return                  

000122      
000123      Public Sub Trigger_DoorKnock(duration As Integer)                                                                                                                                                                            410:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000124          Thread.Sleep(duration * 1000) //sleep duration in ms (1 s seems about right)                                                                                                                                             411:  0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         412:  0x83E8   PushConstU10            1000 (0x03E8)
                                                                                                                                                                                                                                         413:  0x002A   IntMul                  
                                                                                                                                                                                                                                         414:  0x00D5   ThreadSleep             
                                                                                                                                                                                                                                         415:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000125          If ReedSwitch = False Then //If door is still closed (prevent door opening transients from triggering)                                                                                                                   416:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                         417:  0x3809   BranchTrue              427

000126              TimeSinceKnockTriggered = Device.Uptime()                                                                                                                                                                            418:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         419:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         420:  0xD028   PopFieldI32             TimeSinceKnockTriggered

000127              MQTT.Publish_Priority("Doorknock", True, QoS.AtLeastOnce)                                                                                                                                                            421:  0x844C   PushLiteral             76
                                                                                                                                                                                                                                         422:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         423:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         424:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         425:  0x000E   PushNothing             
                                                                                                                                                                                                                                         426:  0x1E03   BranchSubr              942

000128          End If
000129      End Sub                                                                                                                                                                                                                      427:  0x0091   Return                  

000130      
                                                                                                                                                                                                                                         428:  0x030C                           EventType=ReedSwitchChanged
                                                                                                                                                                                                                                         429:  0x0700                           EventCategory=Interrupt
000131      Shared Event ReedSwitchChanged()                                                                                                                                                                                             430:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         431:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000132          Thread.Sleep(100000) //debounce                                                                                                                                                                                          432:  0x0110   PushConstI32            100000 (0x000186A0)
                                                                                                                                                                                                                                         433:  0x86A0                           
                                                                                                                                                                                                                                         434:  0x0001                           
                                                                                                                                                                                                                                         435:  0x00D5   ThreadSleep             
                                                                                                                                                                                                                                         436:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000133          Thread.ClearHardwareEvent()                                                                                                                                                                                              437:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         438:  0x00FA   SetCleartHardwareEvent  

000134          LedGreen = True                                                                                                                                                                                                          439:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         440:  0x080A   PopAndSetDigitalPin     Pin10

000135          TimeSinceDoorClosed = Device.Uptime()                                                                                                                                                                                    441:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         442:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         443:  0xD02C   PopFieldI32             TimeSinceDoorClosed

000136          TimeSinceKnockTriggered = 0                                                                                                                                                                                              444:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         445:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         446:  0xD028   PopFieldI32             TimeSinceKnockTriggered

000137          Dim Door_Status As Boolean = ReedSwitch                                                                                                                                                                                  447:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                         448:  0x9000   PopLocalI32             Door_Status

000138          MQTT.Publish("Door", Door_Status, QoS.AtLeastOnce)                                                                                                                                                                       449:  0x8436   PushLiteral             54
                                                                                                                                                                                                                                         450:  0x8800   PushLocalI32            Door_Status
                                                                                                                                                                                                                                         451:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         452:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         453:  0x000E   PushNothing             
                                                                                                                                                                                                                                         454:  0x1DC0   BranchSubr              903

000139          MQTT.BeaconPublish(dataType.DOOR, Door_Status)                                                                                                                                                                           455:  0x800B   PushConstU10            11 (0x000B)
                                                                                                                                                                                                                                         456:  0x8800   PushLocalI32            Door_Status
                                                                                                                                                                                                                                         457:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         458:  0x000E   PushNothing             
                                                                                                                                                                                                                                         459:  0x1F0D   BranchSubr              1241

000140          If Not Door_Status And Knock_Enable Then //false is closed, true = open                                                                                                                                                  460:  0x8800   PushLocalI32            Door_Status
                                                                                                                                                                                                                                         461:  0x001D   BooNot                  
                                                                                                                                                                                                                                         462:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         463:  0xB81C   PushFieldU8             Knock_Enable
                                                                                                                                                                                                                                         464:  0x001F   IntAnd                  
                                                                                                                                                                                                                                         465:  0x3C0F   BranchFalse             481

000141              accel.Autosleep() // Must read Autosleep to clear interrupt                                                                                                                                                          466:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         467:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                         468:  0x5800   JumpSubr                3418
                                                                                                                                                                                                                                         469:  0x0D5A                           
                                                                                                                                                                                                                                         470:  0xE401   FreeStackSpace          ValTypeSize=0, RefTypeSize=1

000142              accel.Shock() // Must read shock data to clear interrupt                                                                                                                                                             471:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         472:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                         473:  0x5800   JumpSubr                3599
                                                                                                                                                                                                                                         474:  0x0E0F                           
                                                                                                                                                                                                                                         475:  0xE401   FreeStackSpace          ValTypeSize=0, RefTypeSize=1

000143              accel.Pulse() // Must read pulse data to clear interrupt                                                                                                                                                             476:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         477:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                         478:  0x5800   JumpSubr                3578
                                                                                                                                                                                                                                         479:  0x0DFA                           
                                                                                                                                                                                                                                         480:  0xE401   FreeStackSpace          ValTypeSize=0, RefTypeSize=1

000144          End If
000145          LedGreen = False                                                                                                                                                                                                         481:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         482:  0x080A   PopAndSetDigitalPin     Pin10

000146          MQTT.Recheck_Event("Door", ReedSwitch) //recheck door status in 5 (as door open/close events in less than 1/10 sec will be lost)                                                                                         483:  0x8436   PushLiteral             54
                                                                                                                                                                                                                                         484:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                         485:  0x000E   PushNothing             
                                                                                                                                                                                                                                         486:  0x1DE4   BranchSubr              971

000147      End Event                                                                                                                                                                                                                    487:  0x0091   Return                  

000148      
                                                                                                                                                                                                                                         488:  0x0003                           EventType=SubscriptionDelivery
                                                                                                                                                                                                                                         489:  0x0700                           EventCategory=Interrupt
000149      Shared Event SubscriptionDelivery()                                                                                                                                                                                          490:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         491:  0xE023   AllocateStackSpace      ValTypeSize=1, RefTypeSize=3

000150          Dim msg As Message = Lplan.GetDelivery()                                                                                                                                                                                 492:  0x00FE   LplanGetDelivery        
                                                                                                                                                                                                                                         493:  0x9400   PopLocalRef             msg

000151          'Dim payload As ListOfByte = msg.PayLoad
000152          Dim tmp As Boolean = True 'payload.ExtractFloat(0)                                                                                                                                                                       494:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         495:  0x9000   PopLocalI32             tmp

000153          Dim tmp_str As String = msg.PayLoad.ToString()                                                                                                                                                                           496:  0x8C00   PushLocalRef            msg
                                                                                                                                                                                                                                         497:  0xC404   PushFieldRef            Offset=4
                                                                                                                                                                                                                                         498:  0x006B   StrFromListOfByte       
                                                                                                                                                                                                                                         499:  0x9401   PopLocalRef             tmp_str

000154          Dim topic As String = msg.Topic.ToString()                                                                                                                                                                               500:  0x8C00   PushLocalRef            msg
                                                                                                                                                                                                                                         501:  0xC400   PushFieldRef            Offset=0
                                                                                                                                                                                                                                         502:  0x9402   PopLocalRef             topic

000155          'MQTT.Publish("Status", "Received Message: " + topic + " : " + tmp_str)
000156          If topic = Sub_Topic Then                                                                                                                                                                                                503:  0x8C02   PushLocalRef            topic
                                                                                                                                                                                                                                         504:  0x840C   PushLiteral             12
                                                                                                                                                                                                                                         505:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         506:  0x0058   StrCmpEQ                
                                                                                                                                                                                                                                         507:  0x3C16   BranchFalse             530

000157              If Boolean.TryConvert(tmp_str, tmp) Then                                                                                                                                                                             508:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                                                                                         509:  0x8800   PushLocalI32            tmp
                                                                                                                                                                                                                                         510:  0x008A   TryCvtStrToBoo          
                                                                                                                                                                                                                                         511:  0x9000   PopLocalI32             tmp
                                                                                                                                                                                                                                         512:  0x3C0A   BranchFalse             523

000158                  Publish_data = tmp                                                                                                                                                                                               513:  0x8800   PushLocalI32            tmp
                                                                                                                                                                                                                                         514:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         515:  0xC81D   PopFieldU8              Publish_data

000159                  MQTT.Publish("Publish", Publish_data)                                                                                                                                                                            516:  0x8453   PushLiteral             83
                                                                                                                                                                                                                                         517:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         518:  0xB81D   PushFieldU8             Publish_data
                                                                                                                                                                                                                                         519:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         520:  0x000E   PushNothing             
                                                                                                                                                                                                                                         521:  0x1D69   BranchSubr              883

                                                                                                                                                                                                                                         522:  0x4006   Branch                  529
000160              Else                                                                                                                                                                                                                 

000161                  MQTT.Publish("Publish", tmp_str + " :Boolean Conversion failed")                                                                                                                                                 523:  0x8453   PushLiteral             83
                                                                                                                                                                                                                                         524:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                                                                                         525:  0x8456   PushLiteral             86
                                                                                                                                                                                                                                         526:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         527:  0x000E   PushNothing             
                                                                                                                                                                                                                                         528:  0x1D5A   BranchSubr              875

000162              End If
                                                                                                                                                                                                                                         529:  0x4040   Branch                  594
000163          ElseIf topic = Sub_Topic_Knock_Enable Then                                                                                                                                                                               530:  0x8C02   PushLocalRef            topic
                                                                                                                                                                                                                                         531:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         532:  0xC400   PushFieldRef            Sub_Topic_Knock_Enable
                                                                                                                                                                                                                                         533:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         534:  0x0058   StrCmpEQ                
                                                                                                                                                                                                                                         535:  0x3C36   BranchFalse             590

000164              If Boolean.TryConvert(tmp_str, tmp) Then                                                                                                                                                                             536:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                                                                                         537:  0x8800   PushLocalI32            tmp
                                                                                                                                                                                                                                         538:  0x008A   TryCvtStrToBoo          
                                                                                                                                                                                                                                         539:  0x9000   PopLocalI32             tmp
                                                                                                                                                                                                                                         540:  0x3C2A   BranchFalse             583

000165                  Knock_Enable = tmp                                                                                                                                                                                               541:  0x8800   PushLocalI32            tmp
                                                                                                                                                                                                                                         542:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         543:  0xC81C   PopFieldU8              Knock_Enable

000166                  If accel.online Then                                                                                                                                                                                             544:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         545:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                         546:  0xB804   PushFieldU8             online
                                                                                                                                                                                                                                         547:  0x3C1A   BranchFalse             574

000167                      MQTT.Publish("KnockEnable", Knock_Enable)                                                                                                                                                                    548:  0x845E   PushLiteral             94
                                                                                                                                                                                                                                         549:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         550:  0xB81C   PushFieldU8             Knock_Enable
                                                                                                                                                                                                                                         551:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         552:  0x000E   PushNothing             
                                                                                                                                                                                                                                         553:  0x1D49   BranchSubr              883

000168                      If Knock_Enable Then                                                                                                                                                                                         554:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         555:  0xB81C   PushFieldU8             Knock_Enable
                                                                                                                                                                                                                                         556:  0x3C10   BranchFalse             573

000169                          'accel.Activate()
000170                          accel.Autosleep() // Must read Autosleep to clear interrupt                                                                                                                                              557:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         558:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                         559:  0x5800   JumpSubr                3418
                                                                                                                                                                                                                                         560:  0x0D5A                           
                                                                                                                                                                                                                                         561:  0xE401   FreeStackSpace          ValTypeSize=0, RefTypeSize=1

000171                          accel.Shock() // Must read shock data to clear interrupt                                                                                                                                                 562:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         563:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                         564:  0x5800   JumpSubr                3599
                                                                                                                                                                                                                                         565:  0x0E0F                           
                                                                                                                                                                                                                                         566:  0xE401   FreeStackSpace          ValTypeSize=0, RefTypeSize=1

000172                          accel.Pulse() // Must read pulse data to clear interrupt                                                                                                                                                 567:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         568:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                         569:  0x5800   JumpSubr                3578
                                                                                                                                                                                                                                         570:  0x0DFA                           
                                                                                                                                                                                                                                         571:  0xE401   FreeStackSpace          ValTypeSize=0, RefTypeSize=1

                                                                                                                                                                                                                                         572:  0x4000   Branch                  573
000173                      Else                                                                                                                                                                                                         

000174                          'accel.Standby()
000175                      End If
                                                                                                                                                                                                                                         573:  0x4008   Branch                  582
000176                  Else                                                                                                                                                                                                             

000177                      MQTT.Publish("Status", "Accel Sensor Offline")                                                                                                                                                               574:  0x8421   PushLiteral             33
                                                                                                                                                                                                                                         575:  0x842F   PushLiteral             47
                                                                                                                                                                                                                                         576:  0x000E   PushNothing             
                                                                                                                                                                                                                                         577:  0x1D29   BranchSubr              875

000178                      MQTT.Publish("KnockEnable", "False")                                                                                                                                                                         578:  0x845E   PushLiteral             94
                                                                                                                                                                                                                                         579:  0x8404   PushLiteral             4
                                                                                                                                                                                                                                         580:  0x000E   PushNothing             
                                                                                                                                                                                                                                         581:  0x1D25   BranchSubr              875

000179                  End If
                                                                                                                                                                                                                                         582:  0x4006   Branch                  589
000180              Else                                                                                                                                                                                                                 

000181                  MQTT.Publish("KnockEnable", tmp_str + " :Boolean Conversion failed")                                                                                                                                             583:  0x845E   PushLiteral             94
                                                                                                                                                                                                                                         584:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                                                                                         585:  0x8456   PushLiteral             86
                                                                                                                                                                                                                                         586:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         587:  0x000E   PushNothing             
                                                                                                                                                                                                                                         588:  0x1D1E   BranchSubr              875

000182              End If  
                                                                                                                                                                                                                                         589:  0x4004   Branch                  594
000183          Else                                                                                                                                                                                                                     

000184              MQTT.Publish("Unknown", tmp_str)                                                                                                                                                                                     590:  0x8462   PushLiteral             98
                                                                                                                                                                                                                                         591:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                                                                                         592:  0x000E   PushNothing             
                                                                                                                                                                                                                                         593:  0x1D19   BranchSubr              875

000185          End If
000186      End Event                                                                                                                                                                                                                    594:  0x0091   Return                  

000187      
                                                                                                                                                                                                                                         595:  0x0005                           TimeValue=5
                                                                                                                                                                                                                                         596:  0x0400                           EventCategory=TimeInMinutes
000188      Shared Event KnockStatus() RaiseEvent Every 5 Minutes //publish status of Knock Detection                                                                                                                                    597:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000189          MQTT.Publish("KnockEnable", Knock_Enable)                                                                                                                                                                                598:  0x845E   PushLiteral             94
                                                                                                                                                                                                                                         599:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         600:  0xB81C   PushFieldU8             Knock_Enable
                                                                                                                                                                                                                                         601:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         602:  0x000E   PushNothing             
                                                                                                                                                                                                                                         603:  0x1D17   BranchSubr              883

000190      End Event                                                                                                                                                                                                                    604:  0x0091   Return                  

000191      
                                                                                                                                                                                                                                         605:  0x0001                           TimeValue=1
                                                                                                                                                                                                                                         606:  0x0400                           EventCategory=TimeInMinutes
000192      Shared Event Publish() RaiseEvent Every 1 Minutes                                                                                                                                                                            607:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000193          LedGreen = True                                                                                                                                                                                                          608:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         609:  0x080A   PopAndSetDigitalPin     Pin10

000194          If Device.Uptime() < 70 Then //check for rollover                                                                                                                                                                        610:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         611:  0x8046   PushConstU10            70 (0x0046)
                                                                                                                                                                                                                                         612:  0x3403   BranchGE                616

000195              TimeSinceKnockTriggered = 0                                                                                                                                                                                          613:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         614:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         615:  0xD028   PopFieldI32             TimeSinceKnockTriggered

000196          End If
000197          Select data                                                                                                                                                                                                              616:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         617:  0xC020   PushFieldI32            data
                                                                                                                                                                                                                                         618:  0x0122   CaseComputed            
                                                                                                                                                                                                                                         619:  0x0002                           CaseCommonClass=Byte
                                                                                                                                                                                                                                         620:  0x0004                           NumberOfCaseEntries=4
                                                                                                                                                                                                                                         621:  0x0062                           CaseElseBranch=720
                                                                                                                                                                                                                                         622:  0x0002                           CaseValue=2
                                                                                                                                                                                                                                         623:  0x0008                           CaseBranch=630
                                                                                                                                                                                                                                         624:  0x0003                           CaseValue=3
                                                                                                                                                                                                                                         625:  0x0022                           CaseBranch=656
                                                                                                                                                                                                                                         626:  0x0004                           CaseValue=4
                                                                                                                                                                                                                                         627:  0x0037                           CaseBranch=677
                                                                                                                                                                                                                                         628:  0x000B                           CaseValue=11
                                                                                                                                                                                                                                         629:  0x004D                           CaseBranch=699

000198              Case dataType.UPTIME                                                                                                                                                                                                 630:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000199                  Dim Uptime As Integer = Device.Uptime()                                                                                                                                                                          631:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         632:  0x9000   PopLocalI32             Uptime

000200                  If Publish_data Then                                                                                                                                                                                             633:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         634:  0xB81D   PushFieldU8             Publish_data
                                                                                                                                                                                                                                         635:  0x3C05   BranchFalse             641

000201                      MQTT.Publish("Uptime", Uptime)                                                                                                                                                                               636:  0x8465   PushLiteral             101
                                                                                                                                                                                                                                         637:  0x8800   PushLocalI32            Uptime
                                                                                                                                                                                                                                         638:  0x1404   Box                     BoxInteger
                                                                                                                                                                                                                                         639:  0x000E   PushNothing             
                                                                                                                                                                                                                                         640:  0x1CF2   BranchSubr              883

000202                  End If
000203                  If Uptime < Short.MaxValue Then                                                                                                                                                                                  641:  0x8800   PushLocalI32            Uptime
                                                                                                                                                                                                                                         642:  0x0110   PushConstI32            32767 (0x00007FFF)
                                                                                                                                                                                                                                         643:  0x7FFF                           
                                                                                                                                                                                                                                         644:  0x0000                           
                                                                                                                                                                                                                                         645:  0x3405   BranchGE                651

000204                      MQTT.BeaconPublish(dataType.UPTIME, Uptime)                                                                                                                                                                  646:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         647:  0x8800   PushLocalI32            Uptime
                                                                                                                                                                                                                                         648:  0x1404   Box                     BoxInteger
                                                                                                                                                                                                                                         649:  0x000E   PushNothing             
                                                                                                                                                                                                                                         650:  0x1E4E   BranchSubr              1241

000205                  End If
000206                  data = dataType.BATTVOLTAGE                                                                                                                                                                                      651:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         652:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         653:  0xD020   PopFieldI32             data

                                                                                                                                                                                                                                         654:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                                                                                         655:  0x4047   Branch                  727
000207              Case dataType.BATTVOLTAGE                                                                                                                                                                                            656:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000208                  Dim BattVolt As Integer = Device.BatteryVoltage()                                                                                                                                                                657:  0x00ED   DeviceBatteryVoltage    
                                                                                                                                                                                                                                         658:  0x9000   PopLocalI32             BattVolt

000209                  If Publish_data Then                                                                                                                                                                                             659:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         660:  0xB81D   PushFieldU8             Publish_data
                                                                                                                                                                                                                                         661:  0x3C05   BranchFalse             667

000210                      MQTT.Publish("BatteryVoltage", BattVolt)                                                                                                                                                                     662:  0x8468   PushLiteral             104
                                                                                                                                                                                                                                         663:  0x8800   PushLocalI32            BattVolt
                                                                                                                                                                                                                                         664:  0x1404   Box                     BoxInteger
                                                                                                                                                                                                                                         665:  0x000E   PushNothing             
                                                                                                                                                                                                                                         666:  0x1CD8   BranchSubr              883

000211                  End If
000212                  MQTT.BeaconPublish(dataType.BATTVOLTAGE, BattVolt)                                                                                                                                                               667:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         668:  0x8800   PushLocalI32            BattVolt
                                                                                                                                                                                                                                         669:  0x1404   Box                     BoxInteger
                                                                                                                                                                                                                                         670:  0x000E   PushNothing             
                                                                                                                                                                                                                                         671:  0x1E39   BranchSubr              1241

000213                  data = dataType.TEMPERATURE                                                                                                                                                                                      672:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         673:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         674:  0xD020   PopFieldI32             data

                                                                                                                                                                                                                                         675:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                                                                                         676:  0x4032   Branch                  727
000214              Case dataType.TEMPERATURE                                                                                                                                                                                            677:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000215                  Dim TempC As Float = TempSensor.GetTemp                                                                                                                                                                          678:  0x000E   PushNothing             
                                                                                                                                                                                                                                         679:  0x1C34   BranchSubr              732
                                                                                                                                                                                                                                         680:  0x9000   PopLocalI32             TempC

000216                  If Publish_data Then                                                                                                                                                                                             681:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         682:  0xB81D   PushFieldU8             Publish_data
                                                                                                                                                                                                                                         683:  0x3C05   BranchFalse             689

000217                      MQTT.Publish("Temperature", TempC)                                                                                                                                                                           684:  0x846D   PushLiteral             109
                                                                                                                                                                                                                                         685:  0x8800   PushLocalI32            TempC
                                                                                                                                                                                                                                         686:  0x1406   Box                     BoxFloat
                                                                                                                                                                                                                                         687:  0x000E   PushNothing             
                                                                                                                                                                                                                                         688:  0x1CC2   BranchSubr              883

000218                  End If
000219                  MQTT.BeaconPublish(dataType.TEMPERATURE, TempC)                                                                                                                                                                  689:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         690:  0x8800   PushLocalI32            TempC
                                                                                                                                                                                                                                         691:  0x1406   Box                     BoxFloat
                                                                                                                                                                                                                                         692:  0x000E   PushNothing             
                                                                                                                                                                                                                                         693:  0x1E23   BranchSubr              1241

000220                  data = dataType.DOOR                                                                                                                                                                                             694:  0x800B   PushConstU10            11 (0x000B)
                                                                                                                                                                                                                                         695:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         696:  0xD020   PopFieldI32             data

                                                                                                                                                                                                                                         697:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                                                                                         698:  0x401C   Branch                  727
000221              Case dataType.DOOR                                                                                                                                                                                                   699:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000222                  Dim Door_Status As Boolean = ReedSwitch                                                                                                                                                                          700:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                         701:  0x9000   PopLocalI32             Door_Status

000223                  If Publish_data Then                                                                                                                                                                                             702:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         703:  0xB81D   PushFieldU8             Publish_data
                                                                                                                                                                                                                                         704:  0x3C05   BranchFalse             710

000224                      MQTT.Publish("Door", Door_Status) //True = OPEN False = CLOSED                                                                                                                                               705:  0x8436   PushLiteral             54
                                                                                                                                                                                                                                         706:  0x8800   PushLocalI32            Door_Status
                                                                                                                                                                                                                                         707:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         708:  0x000E   PushNothing             
                                                                                                                                                                                                                                         709:  0x1CAD   BranchSubr              883

000225                  End If
000226                  MQTT.BeaconPublish(dataType.DOOR, Door_Status)                                                                                                                                                                   710:  0x800B   PushConstU10            11 (0x000B)
                                                                                                                                                                                                                                         711:  0x8800   PushLocalI32            Door_Status
                                                                                                                                                                                                                                         712:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         713:  0x000E   PushNothing             
                                                                                                                                                                                                                                         714:  0x1E0E   BranchSubr              1241

000227                  data = dataType.UPTIME                                                                                                                                                                                           715:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         716:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         717:  0xD020   PopFieldI32             data

                                                                                                                                                                                                                                         718:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                                                                                         719:  0x4007   Branch                  727
000228              Case Else                                                                                                                                                                                                            

000229                  MQTT.Publish("Status", "OnLine")                                                                                                                                                                                 720:  0x8421   PushLiteral             33
                                                                                                                                                                                                                                         721:  0x8471   PushLiteral             113
                                                                                                                                                                                                                                         722:  0x000E   PushNothing             
                                                                                                                                                                                                                                         723:  0x1C97   BranchSubr              875

000230                  data = dataType.UPTIME                                                                                                                                                                                           724:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         725:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         726:  0xD020   PopFieldI32             data

000231          End Select
000232          LedGreen = False                                                                                                                                                                                                         727:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         728:  0x080A   PopAndSetDigitalPin     Pin10

000233      End Event                                                                                                                                                                                                                    729:  0x0091   Return                  

000234  End Class                                                                                                                                                                                                                        123:  0x0097   ReturnMe                


****** BLOCKS and VARIABLES for Main
    Block Class (Line 11:234)
        Main            Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        String          Version         (Literal="V2.0")
        dataType        data            (SharedValTypVariableOffset=32)
        String          Sub_Topic       (Literal="MCThings/Publish")
        String          Sub_Topic_Knock_(SharedRefTypVariableOffset=0)
        Boolean         Knock_Enable    (SharedValTypVariableOffset=28)
        Boolean         Publish_data    (SharedValTypVariableOffset=29)
        Integer         Count           (SharedValTypVariableOffset=36)
        MMA8652         accel           (SharedRefTypVariableOffset=4)
        Integer         TimeSinceKnockTr(SharedValTypVariableOffset=40)
        Integer         TimeSinceDoorClo(SharedValTypVariableOffset=44)
        Block Event Boot (Line 24:53)
            Boolean         Door_Status     (LocalValTypVariableOffset=0)
            Block If Then  (Line 36:46)
            End Block
            Block Else (Line 46:49)
            End Block
        End Block
        Block Event NewGateway (Line 55:58)
        End Block
        Block Event AccelerometerInt1 (Line 60:102)
            Block If Then  (Line 61:101)
                ListOfString    intType         (LocalRefTypVariableOffset=0)
                Block While  (Line 63:100)
                    Block For Each  (Line 64:96)
                        String          interrupt       (LocalRefTypVariableOffset=1)
                    End Block
                End Block
            End Block
        End Block
        Block Sub DetectDoorKnock (Line 104:113)
            Block If Then  (Line 106:112)
                Integer         timeSinceLastTra(LocalValTypVariableOffset=0)
                Block If Then  (Line 109:111)
                End Block
            End Block
        End Block
        Block Sub DetectDoorKnock_DoubleClick (Line 115:121)
            Block If Then  (Line 117:120)
            End Block
        End Block
        Block Sub Trigger_DoorKnock (Line 123:129)
            Integer         duration        (LocalValTypVariableOffset=0)
            Block If Then  (Line 125:128)
            End Block
        End Block
        Block Event ReedSwitchChanged (Line 131:147)
            Boolean         Door_Status     (LocalValTypVariableOffset=0)
            Block If Then  (Line 140:144)
            End Block
        End Block
        Block Event SubscriptionDelivery (Line 149:186)
            Message         msg             (LocalRefTypVariableOffset=0)
            Boolean         tmp             (LocalValTypVariableOffset=0)
            String          tmp_str         (LocalRefTypVariableOffset=1)
            String          topic           (LocalRefTypVariableOffset=2)
            Block If Then  (Line 156:163)
                Block If Then  (Line 157:160)
                End Block
                Block Else (Line 160:162)
                End Block
            End Block
            Block ElseIf (Line 163:183)
                Block If Then  (Line 164:180)
                    Block If Then  (Line 166:176)
                        Block If Then  (Line 168:173)
                        End Block
                        Block Else (Line 173:175)
                        End Block
                    End Block
                    Block Else (Line 176:179)
                    End Block
                End Block
                Block Else (Line 180:182)
                End Block
            End Block
            Block Else (Line 183:185)
            End Block
        End Block
        Block Event KnockStatus (Line 188:190)
        End Block
        Block Event Publish (Line 192:233)
            Block If Then  (Line 194:196)
            End Block
        End Block
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000001  Class TempSensor                                                                                                                                                                                                                 730:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000002      // Function returns the temperature in degree celcius or 
000003      // Float.NaN if something is wrong
000004      Shared Function GetTemp() As Float                                                                                                                                                                                           732:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         733:  0xE022   AllocateStackSpace      ValTypeSize=1, RefTypeSize=2

000005          // Define the properties of the I2C peripheral and device address
000006          Dim sensor As I2c
000007          sensor = I2c.Create(250000, Pin.SCL, Pin.SDA, 0x48)                                                                                                                                                                      734:  0x0110   PushConstI32            250000 (0x0003D090)
                                                                                                                                                                                                                                         735:  0xD090                           
                                                                                                                                                                                                                                         736:  0x0003                           
                                                                                                                                                                                                                                         737:  0x800D   PushConstU10            13 (0x000D)
                                                                                                                                                                                                                                         738:  0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                                                                                         739:  0x8048   PushConstU10            72 (0x0048)
                                                                                                                                                                                                                                         740:  0x803B   PushConstU10            59 (0x003B)
                                                                                                                                                                                                                                         741:  0x0010   ClassNew                
                                                                                                                                                                                                                                         742:  0x9400   PopLocalRef             sensor

000008          
000009          // Power up the sensor and give it some time to settle
000010          Device.EnableTempSensor()                                                                                                                                                                                                743:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         744:  0x00F0   DeviceEnableTemp        

000011          Thread.Sleep(40000) // See page 13 of the datasheet                                                                                                                                                                      745:  0x0110   PushConstI32            40000 (0x00009C40)
                                                                                                                                                                                                                                         746:  0x9C40                           
                                                                                                                                                                                                                                         747:  0x0000                           
                                                                                                                                                                                                                                         748:  0x00D5   ThreadSleep             
                                                                                                                                                                                                                                         749:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000012          
000013          // Read the sensor (only 2 bytes to read
000014          Dim res As ListOfByte = sensor.Read(2)                                                                                                                                                                                   750:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         751:  0x8C00   PushLocalRef            sensor
                                                                                                                                                                                                                                         752:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         753:  0x00E0   I2cDeviceRead           
                                                                                                                                                                                                                                         754:  0x9401   PopLocalRef             res

000015          
000016          // See Tmp102 documentation how to interpret the data (page 8)
000017          Dim temp As Float = Float.NaN                                                                                                                                                                                            755:  0x0110   PushConstI32            -4194304 (0xFFC00000)
                                                                                                                                                                                                                                         756:  0x0000                           
                                                                                                                                                                                                                                         757:  0xFFC0                           
                                                                                                                                                                                                                                         758:  0x9000   PopLocalI32             temp

000018          If res <> Nothing Then                                                                                                                                                                                                   759:  0x8C01   PushLocalRef            res
                                                                                                                                                                                                                                         760:  0x000E   PushNothing             
                                                                                                                                                                                                                                         761:  0x000B   RefCmpNE                
                                                                                                                                                                                                                                         762:  0x3C16   BranchFalse             785
                                                                                                                                                                                                                                         763:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000019              // Shift the partial part to the right nibble
000020              Dim part As Float = res(1) >> 4                                                                                                                                                                                      764:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         765:  0x8C01   PushLocalRef            res
                                                                                                                                                                                                                                         766:  0x00B4   ListItemGet             
                                                                                                                                                                                                                                         767:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         768:  0x002F   IntShr                  
                                                                                                                                                                                                                                         769:  0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                         770:  0x9001   PopLocalI32             part

000021              // Temperature partial is 1/16*n where n is between 0 and 15            
000022              part = part / 16                                                                                                                                                                                                     771:  0x8801   PushLocalI32            part
                                                                                                                                                                                                                                         772:  0xEA10   PushConstFlt            16.0
                                                                                                                                                                                                                                         773:  0x003B   FltDiv                  
                                                                                                                                                                                                                                         774:  0x9001   PopLocalI32             part

000023              // Sign extend the byte to an integer
000024              temp = res(0).SignExtend() + part                                                                                                                                                                                    775:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         776:  0x8C01   PushLocalRef            res
                                                                                                                                                                                                                                         777:  0x00B4   ListItemGet             
                                                                                                                                                                                                                                         778:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         779:  0x0005   SignExtend              
                                                                                                                                                                                                                                         780:  0x8801   PushLocalI32            part
                                                                                                                                                                                                                                         781:  0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                         782:  0x0039   FltAdd                  
                                                                                                                                                                                                                                         783:  0x9000   PopLocalI32             temp

                                                                                                                                                                                                                                         784:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
000025          End If                                                                                                                                                                                                                   

000026          
000027          // power off
000028          Device.DisableTempSensor()                                                                                                                                                                                               785:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         786:  0x00F0   DeviceEnableTemp        

000029          Return temp                                                                                                                                                                                                              787:  0x8800   PushLocalI32            temp
                                                                                                                                                                                                                                         788:  0x0092   ReturnValType           

000030      End Function                                                                                                                                                                                                                 789:  0x0093   Return0                 

000031      
000032      Shared Function GetDieTemp() As Float                                                                                                                                                                                        790:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000033          // Just get the temperature and return
000034          Return Device.TempDie                                                                                                                                                                                                    791:  0x00F7   DeviceTempDie           
                                                                                                                                                                                                                                         792:  0x0092   ReturnValType           

000035      End Function                                                                                                                                                                                                                 793:  0x0093   Return0                 

000036      
000037      Shared Function ToFarenheit(celcius As Float) As Float                                                                                                                                                                       794:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000038          Return (celcius * 9) / 5 + 32                                                                                                                                                                                            795:  0x8800   PushLocalI32            celcius
                                                                                                                                                                                                                                         796:  0xEA09   PushConstFlt            9.0
                                                                                                                                                                                                                                         797:  0x003C   FltMul                  
                                                                                                                                                                                                                                         798:  0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         799:  0x003B   FltDiv                  
                                                                                                                                                                                                                                         800:  0xEA20   PushConstFlt            32.0
                                                                                                                                                                                                                                         801:  0x0039   FltAdd                  
                                                                                                                                                                                                                                         802:  0x0092   ReturnValType           

000039      End Function                                                                                                                                                                                                                 803:  0x0093   Return0                 

000040      
000041      Shared Function ToCelcius(farenheit As Float) As Float                                                                                                                                                                       804:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000042          Return (farenheit - 32) * 5 / 9                                                                                                                                                                                          805:  0x8800   PushLocalI32            farenheit
                                                                                                                                                                                                                                         806:  0xEA20   PushConstFlt            32.0
                                                                                                                                                                                                                                         807:  0x003F   FltSub                  
                                                                                                                                                                                                                                         808:  0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         809:  0x003C   FltMul                  
                                                                                                                                                                                                                                         810:  0xEA09   PushConstFlt            9.0
                                                                                                                                                                                                                                         811:  0x003B   FltDiv                  
                                                                                                                                                                                                                                         812:  0x0092   ReturnValType           

000043      End Function                                                                                                                                                                                                                 813:  0x0093   Return0                 

000044      
000045  End Class                                                                                                                                                                                                                        731:  0x0097   ReturnMe                


****** BLOCKS and VARIABLES for TempSensor
    Block Class (Line 1:45)
        TempSensor      Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        Block Function GetTemp (Line 4:30)
            I2c             sensor          (LocalRefTypVariableOffset=0)
            ListOfByte      res             (LocalRefTypVariableOffset=1)
            Float           temp            (LocalValTypVariableOffset=0)
            Block If Then  (Line 18:25)
                Float           part            (LocalValTypVariableOffset=1)
            End Block
        End Block
        Block Function GetDieTemp (Line 32:35)
        End Block
        Block Function ToFarenheit (Line 37:39)
            Float           celcius         (LocalValTypVariableOffset=0)
        End Block
        Block Function ToCelcius (Line 41:43)
            Float           farenheit       (LocalValTypVariableOffset=0)
        End Block
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000003  Enum dataType As Byte
000004      NONE = 0
000005      VERSION = 1 //default beacon data for MQTT
000006      UPTIME = 2
000007      BATTVOLTAGE = 3
000008      TEMPERATURE = 4
000009      TEMPERATURE2 = 5
000010      HUMIDITY = 6
000011      DEWPOINT = 7
000012      PRESSURE = 8
000013      ALTITUDE = 9
000014      MOTION = 10
000015      DOOR = 11
000016      KNOCK = 12
000017  End Enum

****** BLOCKS and VARIABLES for dataType
    Block Struct (Line 3:17)
        dataType        NONE            (Literal=0)
        dataType        VERSION         (Literal=1)
        dataType        UPTIME          (Literal=2)
        dataType        BATTVOLTAGE     (Literal=3)
        dataType        TEMPERATURE     (Literal=4)
        dataType        TEMPERATURE2    (Literal=5)
        dataType        HUMIDITY        (Literal=6)
        dataType        DEWPOINT        (Literal=7)
        dataType        PRESSURE        (Literal=8)
        dataType        ALTITUDE        (Literal=9)
        dataType        MOTION          (Literal=10)
        dataType        DOOR            (Literal=11)
        dataType        KNOCK           (Literal=12)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000019  Class MQTT_Message                                                                                                                                                                                                               814:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000020      //class to act as MQTT message structure
000021      Public __topic As String
000022      Public __payload As ListOfByte
000023      Public __quality As QoS
000024      Public __exact As Boolean
000025      Public device_specific As String = "MCThings/" + Device.mcUID().ToString("X8") + "/"                                                                                                                                         815:  0x8415   PushLiteral             21
                                                                                                                                                                                                                                         816:  0x8419   PushLiteral             25
                                                                                                                                                                                                                                         817:  0x00F8   DeviceUID               
                                                                                                                                                                                                                                         818:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         819:  0x0069   StrFormat               
                                                                                                                                                                                                                                         820:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         821:  0x8474   PushLiteral             116
                                                                                                                                                                                                                                         822:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         823:  0xB408   PopMemberRef            device_specific

000026      
000027      Public Sub New()                                                                                                                                                                                                             825:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000028      End Sub                                                                                                                                                                                                                      826:  0x0097   ReturnMe                

000029      
000030      Public Sub New(_topic As String, _text As String, _quality As QoS, _exact As Boolean)                                                                                                                                        827:  0x1822   EntryPoint              ValTypParams=2, RefTypParams=2

000031          __topic = _topic                                                                                                                                                                                                         828:  0x8C00   PushLocalRef            _topic
                                                                                                                                                                                                                                         829:  0xB400   PopMemberRef            __topic

000032          __payload = New ListOfByte()                                                                                                                                                                                             830:  0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                         831:  0x0010   ClassNew                
                                                                                                                                                                                                                                         832:  0xB404   PopMemberRef            __payload

000033          __payload.Add(_text)                                                                                                                                                                                                     833:  0x8C01   PushLocalRef            _text
                                                                                                                                                                                                                                         834:  0xA404   PushMemberRef           __payload
                                                                                                                                                                                                                                         835:  0x00A6   ListAddString           

000034          __quality = _quality                                                                                                                                                                                                     836:  0x8800   PushLocalI32            _quality
                                                                                                                                                                                                                                         837:  0xB010   PopMemberI32            __quality

000035          __exact = _exact                                                                                                                                                                                                         838:  0x8801   PushLocalI32            _exact
                                                                                                                                                                                                                                         839:  0xA80C   PopMemberU8             __exact

000036      End Sub                                                                                                                                                                                                                      840:  0x0097   ReturnMe                

000037      
000038      Public Function topic() As String                                                                                                                                                                                            841:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000039          If exact() Then                                                                                                                                                                                                          842:  0x000D   PushMe                  
                                                                                                                                                                                                                                         843:  0x1C11   BranchSubr              861
                                                                                                                                                                                                                                         844:  0x3C03   BranchFalse             848

000040              Return __topic                                                                                                                                                                                                       845:  0xA400   PushMemberRef           __topic
                                                                                                                                                                                                                                         846:  0x0095   ReturnRefType           

                                                                                                                                                                                                                                         847:  0x4004   Branch                  852
000041          Else                                                                                                                                                                                                                     

000042              Return (device_specific + __topic)                                                                                                                                                                                   848:  0xA408   PushMemberRef           device_specific
                                                                                                                                                                                                                                         849:  0xA400   PushMemberRef           __topic
                                                                                                                                                                                                                                         850:  0x0056   StrAdd                  
                                                                                                                                                                                                                                         851:  0x0095   ReturnRefType           

000043          End If
000044      End Function                                                                                                                                                                                                                 852:  0x0096   ReturnNothing           

000045      
000046      Public Function payload() As ListOfByte                                                                                                                                                                                      853:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000047          Return __payload                                                                                                                                                                                                         854:  0xA404   PushMemberRef           __payload
                                                                                                                                                                                                                                         855:  0x0095   ReturnRefType           

000048      End Function                                                                                                                                                                                                                 856:  0x0096   ReturnNothing           

000049      
000050      Public Function quality() As QoS                                                                                                                                                                                             857:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000051          Return __quality                                                                                                                                                                                                         858:  0xA010   PushMemberI32           __quality
                                                                                                                                                                                                                                         859:  0x0092   ReturnValType           

000052      End Function                                                                                                                                                                                                                 860:  0x0093   Return0                 

000053      
000054      Public Function exact() As Boolean                                                                                                                                                                                           861:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000055          Return __exact                                                                                                                                                                                                           862:  0x980C   PushMemberU8            __exact
                                                                                                                                                                                                                                         863:  0x0092   ReturnValType           

000056      End Function                                                                                                                                                                                                                 864:  0x0093   Return0                 

000057      
000058      Public Sub Publish()                                                                                                                                                                                                         865:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000059          Lplan.Publish(topic(), __payload, __quality)                                                                                                                                                                             866:  0x000D   PushMe                  
                                                                                                                                                                                                                                         867:  0x541B   BranchSubrBack          841
                                                                                                                                                                                                                                         868:  0xA404   PushMemberRef           __payload
                                                                                                                                                                                                                                         869:  0xA010   PushMemberI32           __quality
                                                                                                                                                                                                                                         870:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         871:  0x0101   LplanPublish            

000060      End Sub                                                                                                                                                                                                                      872:  0x0091   Return                  

000061      
000062  End Class                                                                                                                                                                                                                        824:  0x0097   ReturnMe                


****** BLOCKS and VARIABLES for MQTT_Message
    Block Class (Line 19:62)
        MQTT_Message    Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        String          __topic         (MemberRefTypVariableOffset=0)
        ListOfByte      __payload       (MemberRefTypVariableOffset=4)
        QoS             __quality       (MemberValTypVariableOffset=16)
        Boolean         __exact         (MemberValTypVariableOffset=12)
        String          device_specific (MemberRefTypVariableOffset=8)
        Block Sub New (Line 27:28)
        End Block
        Block Sub New (Line 30:36)
            String          _topic          (LocalRefTypVariableOffset=0)
            String          _text           (LocalRefTypVariableOffset=1)
            QoS             _quality        (LocalValTypVariableOffset=0)
            Boolean         _exact          (LocalValTypVariableOffset=1)
        End Block
        Block Function topic (Line 38:44)
            Block If Then  (Line 39:41)
            End Block
            Block Else (Line 41:43)
            End Block
        End Block
        Block Function payload (Line 46:48)
        End Block
        Block Function quality (Line 50:52)
        End Block
        Block Function exact (Line 54:56)
        End Block
        Block Sub Publish (Line 58:60)
        End Block
        Total Size of Member data including base classes = 20.
    End Block


*************************************************************************************************************

000064  Class MQTT                                                                                                                                                                                                                       873:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000065      //MQTT Publishing class
000066      Shared use_queue As Boolean //Use publish queueing to prevent module becoming unresponsive (bug)
000067      Shared MQTT_priority As Boolean //Publish immediately (bypass queue)
000068      Shared queue As ListOfObject //FIFO
000069      Shared timeSincePublish As Integer //publishing timer
000070      Shared running As Boolean //crude mutex
000071      Shared recheck As Boolean //allows rechecking of real-time event (checks every 5 seconds when set)
000072      Shared item As Boolean //item to recheck
000073      Shared publish_as As ListOfByte //what to publish as
000074      
000075      Shared Sub Publish(topic As String, text As String)                                                                                                                                                                          875:  0x1802   EntryPoint              ValTypParams=0, RefTypParams=2

000076          MQTT.Publish_String(topic, text, QoS.AtMostOnce, False)                                                                                                                                                                  876:  0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         877:  0x8C01   PushLocalRef            text
                                                                                                                                                                                                                                         878:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         879:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         880:  0x000E   PushNothing             
                                                                                                                                                                                                                                         881:  0x1CCA   BranchSubr              1084

000077      End Sub                                                                                                                                                                                                                      882:  0x0091   Return                  

000078      
000079      Shared Sub Publish(topic As String, value As Object)                                                                                                                                                                         883:  0x1802   EntryPoint              ValTypParams=0, RefTypParams=2
                                                                                                                                                                                                                                         884:  0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000080          Dim text As String = value.ToString()                                                                                                                                                                                    885:  0x8C01   PushLocalRef            value
                                                                                                                                                                                                                                         886:  0x0081   CvtObjToStr             
                                                                                                                                                                                                                                         887:  0x9402   PopLocalRef             text

000081          MQTT.Publish_String(topic, text, QoS.AtMostOnce, False)                                                                                                                                                                  888:  0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         889:  0x8C02   PushLocalRef            text
                                                                                                                                                                                                                                         890:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         891:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         892:  0x000E   PushNothing             
                                                                                                                                                                                                                                         893:  0x1CBE   BranchSubr              1084

000082      End Sub                                                                                                                                                                                                                      894:  0x0091   Return                  

000083      
000084      Shared Sub Publish(topic As String, text As String, quality As QoS)                                                                                                                                                          895:  0x1812   EntryPoint              ValTypParams=1, RefTypParams=2

000085          MQTT.Publish_String(topic, text, quality, False)                                                                                                                                                                         896:  0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         897:  0x8C01   PushLocalRef            text
                                                                                                                                                                                                                                         898:  0x8800   PushLocalI32            quality
                                                                                                                                                                                                                                         899:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         900:  0x000E   PushNothing             
                                                                                                                                                                                                                                         901:  0x1CB6   BranchSubr              1084

000086      End Sub                                                                                                                                                                                                                      902:  0x0091   Return                  

000087      
000088      Shared Sub Publish(topic As String, value As Object, quality As QoS)                                                                                                                                                         903:  0x1812   EntryPoint              ValTypParams=1, RefTypParams=2
                                                                                                                                                                                                                                         904:  0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000089          Dim text As String = value.ToString()                                                                                                                                                                                    905:  0x8C01   PushLocalRef            value
                                                                                                                                                                                                                                         906:  0x0081   CvtObjToStr             
                                                                                                                                                                                                                                         907:  0x9402   PopLocalRef             text

000090          MQTT.Publish_String(topic, text, quality, False)                                                                                                                                                                         908:  0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         909:  0x8C02   PushLocalRef            text
                                                                                                                                                                                                                                         910:  0x8800   PushLocalI32            quality
                                                                                                                                                                                                                                         911:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         912:  0x000E   PushNothing             
                                                                                                                                                                                                                                         913:  0x1CAA   BranchSubr              1084

000091      End Sub                                                                                                                                                                                                                      914:  0x0091   Return                  

000092      
000093      Shared Sub Publish_exact(topic As String, text As String)                                                                                                                                                                    915:  0x1802   EntryPoint              ValTypParams=0, RefTypParams=2

000094          MQTT.Publish_String(topic, text, QoS.AtMostOnce, True)                                                                                                                                                                   916:  0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         917:  0x8C01   PushLocalRef            text
                                                                                                                                                                                                                                         918:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         919:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         920:  0x000E   PushNothing             
                                                                                                                                                                                                                                         921:  0x1CA2   BranchSubr              1084

000095      End Sub                                                                                                                                                                                                                      922:  0x0091   Return                  

000096      
000097      Shared Sub Publish_exact(topic As String, text As String, quality As QoS)                                                                                                                                                    923:  0x1812   EntryPoint              ValTypParams=1, RefTypParams=2

000098          MQTT.Publish_String(topic, text, quality, True)                                                                                                                                                                          924:  0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         925:  0x8C01   PushLocalRef            text
                                                                                                                                                                                                                                         926:  0x8800   PushLocalI32            quality
                                                                                                                                                                                                                                         927:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         928:  0x000E   PushNothing             
                                                                                                                                                                                                                                         929:  0x1C9A   BranchSubr              1084

000099      End Sub                                                                                                                                                                                                                      930:  0x0091   Return                  

000100      
000101      Shared Sub Publish_Priority(topic As String, value As Object)                                                                                                                                                                931:  0x1802   EntryPoint              ValTypParams=0, RefTypParams=2
                                                                                                                                                                                                                                         932:  0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000102          Dim text As String = value.ToString()                                                                                                                                                                                    933:  0x8C01   PushLocalRef            value
                                                                                                                                                                                                                                         934:  0x0081   CvtObjToStr             
                                                                                                                                                                                                                                         935:  0x9402   PopLocalRef             text

000103          MQTT.Publish_Priority(topic, text, QoS.AtMostOnce)                                                                                                                                                                       936:  0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         937:  0x8C02   PushLocalRef            text
                                                                                                                                                                                                                                         938:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         939:  0x000E   PushNothing             
                                                                                                                                                                                                                                         940:  0x1C13   BranchSubr              960

000104      End Sub                                                                                                                                                                                                                      941:  0x0091   Return                  

000105      
000106      Shared Sub Publish_Priority(topic As String, value As Object, quality As QoS)                                                                                                                                                942:  0x1812   EntryPoint              ValTypParams=1, RefTypParams=2
                                                                                                                                                                                                                                         943:  0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000107          Dim text As String = value.ToString()                                                                                                                                                                                    944:  0x8C01   PushLocalRef            value
                                                                                                                                                                                                                                         945:  0x0081   CvtObjToStr             
                                                                                                                                                                                                                                         946:  0x9402   PopLocalRef             text

000108          MQTT.Publish_Priority(topic, text, quality)                                                                                                                                                                              947:  0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         948:  0x8C02   PushLocalRef            text
                                                                                                                                                                                                                                         949:  0x8800   PushLocalI32            quality
                                                                                                                                                                                                                                         950:  0x000E   PushNothing             
                                                                                                                                                                                                                                         951:  0x1C08   BranchSubr              960

000109      End Sub                                                                                                                                                                                                                      952:  0x0091   Return                  

000110      
000111      Shared Sub Publish_Priority(topic As String, text As String)                                                                                                                                                                 953:  0x1802   EntryPoint              ValTypParams=0, RefTypParams=2

000112          MQTT.Publish_Priority(topic, text, QoS.AtMostOnce)                                                                                                                                                                       954:  0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         955:  0x8C01   PushLocalRef            text
                                                                                                                                                                                                                                         956:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         957:  0x000E   PushNothing             
                                                                                                                                                                                                                                         958:  0x1C01   BranchSubr              960

000113      End Sub                                                                                                                                                                                                                      959:  0x0091   Return                  

000114      
000115      Shared Sub Publish_Priority(topic As String, text As String, quality As QoS)                                                                                                                                                 960:  0x1812   EntryPoint              ValTypParams=1, RefTypParams=2

000116          MQTT_priority = True                                                                                                                                                                                                     961:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         962:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         963:  0xC831   PopFieldU8              MQTT_priority

000117          MQTT.Publish_String(topic, text, quality, False)                                                                                                                                                                         964:  0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         965:  0x8C01   PushLocalRef            text
                                                                                                                                                                                                                                         966:  0x8800   PushLocalI32            quality
                                                                                                                                                                                                                                         967:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         968:  0x000E   PushNothing             
                                                                                                                                                                                                                                         969:  0x1C72   BranchSubr              1084

000118      End Sub                                                                                                                                                                                                                      970:  0x0091   Return                  

000119      
000120      Shared Sub Recheck_Event(_publish_as As String, _item As Boolean)                                                                                                                                                            971:  0x1811   EntryPoint              ValTypParams=1, RefTypParams=1

000121          //set event to recheck, and what to publish as
000122          item = _item                                                                                                                                                                                                             972:  0x8800   PushLocalI32            _item
                                                                                                                                                                                                                                         973:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         974:  0xC834   PopFieldU8              item

000123          publish_as = New ListOfByte()                                                                                                                                                                                            975:  0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                         976:  0x0010   ClassNew                
                                                                                                                                                                                                                                         977:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         978:  0xD40C   PopFieldRef             publish_as

000124          publish_as.Add(_publish_as)                                                                                                                                                                                              979:  0x8C00   PushLocalRef            _publish_as
                                                                                                                                                                                                                                         980:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         981:  0xC40C   PushFieldRef            publish_as
                                                                                                                                                                                                                                         982:  0x00A6   ListAddString           

000125          recheck = True                                                                                                                                                                                                           983:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         984:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         985:  0xC833   PopFieldU8              recheck

000126      End Sub                                                                                                                                                                                                                      986:  0x0091   Return                  

000127      
000128      Shared Sub remove(index As Integer) //workaround until list remove is fixed                                                                                                                                                  987:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                                                                                         988:  0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000129          If queue = Nothing Or queue.Count() = 0 Then                                                                                                                                                                             989:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         990:  0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         991:  0x000E   PushNothing             
                                                                                                                                                                                                                                         992:  0x000A   RefCmpEQ                
                                                                                                                                                                                                                                         993:  0x000C   PushGlobal              
                                                                                                                                                                                                                                         994:  0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         995:  0xC000   PushFieldI32            Offset=0
                                                                                                                                                                                                                                         996:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         997:  0x0020   IntCmpEQ                
                                                                                                                                                                                                                                         998:  0x002D   IntOr                   
                                                                                                                                                                                                                                         999:  0x3C01   BranchFalse             1001

000130              Return                                                                                                                                                                                                               1000: 0x0091   Return                  

000131          End If
000132          Dim list As ListOfObject = New ListOfObject()                                                                                                                                                                            1001: 0x800A   PushConstU10            10 (0x000A)
                                                                                                                                                                                                                                         1002: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1003: 0x9400   PopLocalRef             list

                                                                                                                                                                                                                                         1004: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1005: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1006: 0x0004   DupVal2                 
                                                                                                                                                                                                                                         1007: 0x0031   IntSub                  
                                                                                                                                                                                                                                         1008: 0x0002   ExchangeVal             
                                                                                                                                                                                                                                         1009: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1010: 0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         1011: 0xC000   PushFieldI32            Offset=0
                                                                                                                                                                                                                                         1012: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1013: 0x0031   IntSub                  
000133          For i As Integer = 0 To queue.Count- 1                                                                                                                                                                                   1014: 0x480A   BranchForNextInt        1025

000134              If i <> index Then                                                                                                                                                                                                   1015: 0x8801   PushLocalI32            i
                                                                                                                                                                                                                                         1016: 0x8800   PushLocalI32            index
                                                                                                                                                                                                                                         1017: 0x2006   BranchEQ                1024

000135                  list.Add(queue(i))                                                                                                                                                                                               1018: 0x8801   PushLocalI32            i
                                                                                                                                                                                                                                         1019: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1020: 0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         1021: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         1022: 0x8C00   PushLocalRef            list
                                                                                                                                                                                                                                         1023: 0x00A3   ListAdd                 

000136              End If
                                                                                                                                                                                                                                         1024: 0x500B   BranchBack              1014
000137          Next                                                                                                                                                                                                                     1025: 0xE460   FreeStackSpace          ValTypeSize=3, RefTypeSize=0

000138          queue.Clear()                                                                                                                                                                                                            1026: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1027: 0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         1028: 0x00AC   ListClear               

000139          If list.Count> 0 Then                                                                                                                                                                                                    1029: 0x8C00   PushLocalRef            list
                                                                                                                                                                                                                                         1030: 0xC000   PushFieldI32            Offset=0
                                                                                                                                                                                                                                         1031: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1032: 0x2C06   BranchLE                1039

000140              queue.AddRange(list)                                                                                                                                                                                                 1033: 0x8C00   PushLocalRef            list
                                                                                                                                                                                                                                         1034: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1035: 0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         1036: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1037: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                         1038: 0x00A5   ListAddRange            

000141          End If
000142      End Sub                                                                                                                                                                                                                      1039: 0x0091   Return                  

000143      
000144      Shared Sub Insert(value As Object) //workaround until list InsertAt is fixed (add to top of list)                                                                                                                            1040: 0x1801   EntryPoint              ValTypParams=0, RefTypParams=1
                                                                                                                                                                                                                                         1041: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000145          If queue = Nothing Or queue.Count() = 0 Then                                                                                                                                                                             1042: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1043: 0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         1044: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1045: 0x000A   RefCmpEQ                
                                                                                                                                                                                                                                         1046: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1047: 0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         1048: 0xC000   PushFieldI32            Offset=0
                                                                                                                                                                                                                                         1049: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1050: 0x0020   IntCmpEQ                
                                                                                                                                                                                                                                         1051: 0x002D   IntOr                   
                                                                                                                                                                                                                                         1052: 0x3C09   BranchFalse             1062

000146              queue = New ListOfObject()                                                                                                                                                                                           1053: 0x800A   PushConstU10            10 (0x000A)
                                                                                                                                                                                                                                         1054: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1055: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1056: 0xD408   PopFieldRef             queue

000147              queue.Add(value)                                                                                                                                                                                                     1057: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1058: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1059: 0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         1060: 0x00A3   ListAdd                 

000148              Return                                                                                                                                                                                                               1061: 0x0091   Return                  

000149          End If
000150          Dim list As ListOfObject = New ListOfObject()                                                                                                                                                                            1062: 0x800A   PushConstU10            10 (0x000A)
                                                                                                                                                                                                                                         1063: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1064: 0x9401   PopLocalRef             list

000151          list.Add(value)                                                                                                                                                                                                          1065: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1066: 0x8C01   PushLocalRef            list
                                                                                                                                                                                                                                         1067: 0x00A3   ListAdd                 

000152          list.AddRange(queue)                                                                                                                                                                                                     1068: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1069: 0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         1070: 0x8C01   PushLocalRef            list
                                                                                                                                                                                                                                         1071: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1072: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                         1073: 0x00A5   ListAddRange            

000153          queue.Clear()                                                                                                                                                                                                            1074: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1075: 0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         1076: 0x00AC   ListClear               

000154          queue.AddRange(list)                                                                                                                                                                                                     1077: 0x8C01   PushLocalRef            list
                                                                                                                                                                                                                                         1078: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1079: 0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         1080: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1081: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                         1082: 0x00A5   ListAddRange            

000155      End Sub                                                                                                                                                                                                                      1083: 0x0091   Return                  

000156      
000157      Shared Sub Publish_String(topic As String, text As String, quality As QoS, exact As Boolean)                                                                                                                                 1084: 0x1822   EntryPoint              ValTypParams=2, RefTypParams=2
                                                                                                                                                                                                                                         1085: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000158          If queue = Nothing Then //initialize on first run                                                                                                                                                                        1086: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1087: 0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         1088: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1089: 0x000A   RefCmpEQ                
                                                                                                                                                                                                                                         1090: 0x3C07   BranchFalse             1098

000159              queue = New ListOfObject()                                                                                                                                                                                           1091: 0x800A   PushConstU10            10 (0x000A)
                                                                                                                                                                                                                                         1092: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1093: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1094: 0xD408   PopFieldRef             queue

000160              timeSincePublish = 0                                                                                                                                                                                                 1095: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1096: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1097: 0xD038   PopFieldI32             timeSincePublish

000161          End If
000162          
000163          Dim _Message As MQTT_Message = New MQTT_Message(topic, text, quality, exact)                                                                                                                                             1098: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         1099: 0x8C01   PushLocalRef            text
                                                                                                                                                                                                                                         1100: 0x8800   PushLocalI32            quality
                                                                                                                                                                                                                                         1101: 0x8801   PushLocalI32            exact
                                                                                                                                                                                                                                         1102: 0x805C   PushConstU10            92 (0x005C)
                                                                                                                                                                                                                                         1103: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1104: 0x5523   BranchSubrBack          814
                                                                                                                                                                                                                                         1105: 0x5517   BranchSubrBack          827
                                                                                                                                                                                                                                         1106: 0x9402   PopLocalRef             _Message

000164          
000165          If Not use_queue Then                                                                                                                                                                                                    1107: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1108: 0xB830   PushFieldU8             use_queue
                                                                                                                                                                                                                                         1109: 0x001D   BooNot                  
                                                                                                                                                                                                                                         1110: 0x3C04   BranchFalse             1115

000166              MQTT.Publish(_Message) //publish direct and return if queuing is not selected or Priority is set                                                                                                                     1111: 0x8C02   PushLocalRef            _Message
                                                                                                                                                                                                                                         1112: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1113: 0x1C2A   BranchSubr              1156

000167              Return                                                                                                                                                                                                               1114: 0x0091   Return                  

000168          End If
000169          
000170          While running                                                                                                                                                                                                            1115: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1116: 0xB832   PushFieldU8             running
                                                                                                                                                                                                                                         1117: 0x3C06   BranchFalse             1124

000171              Thread.Sleep(10000) //10ms delay loop while waiting for queue/publish thread to end                                                                                                                                  1118: 0x0110   PushConstI32            10000 (0x00002710)
                                                                                                                                                                                                                                         1119: 0x2710                           
                                                                                                                                                                                                                                         1120: 0x0000                           
                                                                                                                                                                                                                                         1121: 0x00D5   ThreadSleep             
                                                                                                                                                                                                                                         1122: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000172          End While                                                                                                                                                                                                                1123: 0x5009   BranchBack              1115

000173          
000174          If (Device.Uptime() - timeSincePublish > 2) And queue.Count= 0 Then //direct publish                                                                                                                                     1124: 0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         1125: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1126: 0xC038   PushFieldI32            timeSincePublish
                                                                                                                                                                                                                                         1127: 0x0031   IntSub                  
                                                                                                                                                                                                                                         1128: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         1129: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         1130: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1131: 0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         1132: 0xC000   PushFieldI32            Offset=0
                                                                                                                                                                                                                                         1133: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1134: 0x0020   IntCmpEQ                
                                                                                                                                                                                                                                         1135: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1136: 0x3C04   BranchFalse             1141

000175              MQTT.Publish(_Message)                                                                                                                                                                                               1137: 0x8C02   PushLocalRef            _Message
                                                                                                                                                                                                                                         1138: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1139: 0x1C10   BranchSubr              1156

                                                                                                                                                                                                                                         1140: 0x400B   Branch                  1152
000176          Else                                                                                                                                                                                                                     

000177              If MQTT_priority Then                                                                                                                                                                                                1141: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1142: 0xB831   PushFieldU8             MQTT_priority
                                                                                                                                                                                                                                         1143: 0x3C04   BranchFalse             1148

000178                  'queue.InsertAt(0, _Message) //or add to top of queue FIFO - not working (bug)
000179                  MQTT.Insert(_Message) //or add to top of queue FIFO                                                                                                                                                              1144: 0x8C02   PushLocalRef            _Message
                                                                                                                                                                                                                                         1145: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1146: 0x546B   BranchSubrBack          1040

                                                                                                                                                                                                                                         1147: 0x4004   Branch                  1152
000180              Else                                                                                                                                                                                                                 

000181                  queue.Add(_Message) //or add to end of queue FIFO                                                                                                                                                                1148: 0x8C02   PushLocalRef            _Message
                                                                                                                                                                                                                                         1149: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1150: 0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         1151: 0x00A3   ListAdd                 

000182              End If 
000183          End If
000184          MQTT_priority = False                                                                                                                                                                                                    1152: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1153: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1154: 0xC831   PopFieldU8              MQTT_priority

000185      End Sub                                                                                                                                                                                                                      1155: 0x0091   Return                  

000186      
000187      Shared Sub Publish(msg As MQTT_Message)                                                                                                                                                                                      1156: 0x1801   EntryPoint              ValTypParams=0, RefTypParams=1

000188          //Actual publishing method
000189          msg.Publish()                                                                                                                                                                                                            1157: 0x8C00   PushLocalRef            msg
                                                                                                                                                                                                                                         1158: 0x5526   BranchSubrBack          865

000190          timeSincePublish = Device.Uptime()                                                                                                                                                                                       1159: 0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         1160: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1161: 0xD038   PopFieldI32             timeSincePublish

000191      End Sub                                                                                                                                                                                                                      1162: 0x0091   Return                  

000192      
                                                                                                                                                                                                                                         1163: 0x0003                           TimeValue=3
                                                                                                                                                                                                                                         1164: 0x0300                           EventCategory=TimeInSeconds
000193      Shared Event Publish_Queue() RaiseEvent Every 3 Seconds //limit publishing to once per 3 seconds                                                                                                                             1165: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000194          If queue = Nothing Or (Device.Uptime() - timeSincePublish < 3) Then                                                                                                                                                      1166: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1167: 0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         1168: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1169: 0x000A   RefCmpEQ                
                                                                                                                                                                                                                                         1170: 0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         1171: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1172: 0xC038   PushFieldI32            timeSincePublish
                                                                                                                                                                                                                                         1173: 0x0031   IntSub                  
                                                                                                                                                                                                                                         1174: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         1175: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         1176: 0x002D   IntOr                   
                                                                                                                                                                                                                                         1177: 0x3C01   BranchFalse             1179

000195              Return                                                                                                                                                                                                               1178: 0x0091   Return                  

000196          End If
000197          If queue.Count> 0 Then                                                                                                                                                                                                   1179: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1180: 0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         1181: 0xC000   PushFieldI32            Offset=0
                                                                                                                                                                                                                                         1182: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1183: 0x2C1E   BranchLE                1214
                                                                                                                                                                                                                                         1184: 0xE002   AllocateStackSpace      ValTypeSize=0, RefTypeSize=2

000198              running = True //crude mutex                                                                                                                                                                                         1185: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1186: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1187: 0xC832   PopFieldU8              running

000199              Dim msg As MQTT_Message = New MQTT_Message()                                                                                                                                                                         1188: 0x805C   PushConstU10            92 (0x005C)
                                                                                                                                                                                                                                         1189: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1190: 0x5579   BranchSubrBack          814
                                                                                                                                                                                                                                         1191: 0x556F   BranchSubrBack          825
                                                                                                                                                                                                                                         1192: 0x9400   PopLocalRef             msg

000200              Dim msg_queue As Object = queue(0).Clone() //make shallow copy of top FIFO message object                                                                                                                            1193: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1194: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1195: 0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         1196: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         1197: 0x000F   ClassClone              
                                                                                                                                                                                                                                         1198: 0x9401   PopLocalRef             msg_queue

000201              msg = msg_queue.Cast(MQTT_Message) //cast as MQTT_Message                                                                                                                                                            1199: 0x805C   PushConstU10            92 (0x005C)
                                                                                                                                                                                                                                         1200: 0x8C01   PushLocalRef            msg_queue
                                                                                                                                                                                                                                         1201: 0x0007   Cast                    
                                                                                                                                                                                                                                         1202: 0x9400   PopLocalRef             msg

000202              msg.Publish() //publish message                                                                                                                                                                                      1203: 0x8C00   PushLocalRef            msg
                                                                                                                                                                                                                                         1204: 0x5554   BranchSubrBack          865

000203              
000204              'running = True //crude mutex
000205              //queue.Remove(msg_queue)
000206              //MQTT.remove(0) //remove from top of queue (workaround for bug - now fixed)
000207              queue.RemoveAt(0) //remove from top of queue                                                                                                                                                                         1205: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1206: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1207: 0xC408   PushFieldRef            queue
                                                                                                                                                                                                                                         1208: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1209: 0x00BA   ListRemoveRange         

000208              running = False                                                                                                                                                                                                      1210: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1211: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1212: 0xC832   PopFieldU8              running

                                                                                                                                                                                                                                         1213: 0xE402   FreeStackSpace          ValTypeSize=0, RefTypeSize=2
000209          End If                                                                                                                                                                                                                   

000210      End Event                                                                                                                                                                                                                    1214: 0x0091   Return                  

000211      
                                                                                                                                                                                                                                         1215: 0x0005                           TimeValue=5
                                                                                                                                                                                                                                         1216: 0x0300                           EventCategory=TimeInSeconds
000212      Shared Event Recheck_Event() RaiseEvent Every 5 Seconds //Recheck Event every 5 seconds if set                                                                                                                               1217: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000213          If recheck And (Device.Uptime() - timeSincePublish > 5) Then //if it's been more than 5 seconds since publishing                                                                                                         1218: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1219: 0xB833   PushFieldU8             recheck
                                                                                                                                                                                                                                         1220: 0x00F9   DeviceUptime            
                                                                                                                                                                                                                                         1221: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1222: 0xC038   PushFieldI32            timeSincePublish
                                                                                                                                                                                                                                         1223: 0x0031   IntSub                  
                                                                                                                                                                                                                                         1224: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                                                                                         1225: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         1226: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1227: 0x3C0C   BranchFalse             1240

000214              //MQTT.Publish(publish_as, item)
000215              MQTT.Publish(publish_as.ToString, item, QoS.ExactlyOnce)                                                                                                                                                             1228: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1229: 0xC40C   PushFieldRef            publish_as
                                                                                                                                                                                                                                         1230: 0x006B   StrFromListOfByte       
                                                                                                                                                                                                                                         1231: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1232: 0xB834   PushFieldU8             item
                                                                                                                                                                                                                                         1233: 0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                         1234: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         1235: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1236: 0x554E   BranchSubrBack          903

000216              recheck = False //just recheck once                                                                                                                                                                                  1237: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1238: 0x000C   PushGlobal              
                                                                                                                                                                                                                                         1239: 0xC833   PopFieldU8              recheck

000217          End If
000218      End Event                                                                                                                                                                                                                    1240: 0x0091   Return                  

000219      
000220      //**************************************************************************/
000221      //*!
000222      //    Encodes Float or Integer into 4 bytes of beacon data
000223      //    encoding is - byte 0 is data type (numeric value)
000224      //    Integer as Short (2 bytes) 
000225      //    Fraction as byte (1 byte)
000226      //*/
000227      //**************************************************************************/
000228      Shared Sub BeaconPublish(data_Type As Byte, value As Object)                                                                                                                                                                 1241: 0x1811   EntryPoint              ValTypParams=1, RefTypParams=1
                                                                                                                                                                                                                                         1242: 0xE041   AllocateStackSpace      ValTypeSize=2, RefTypeSize=1

000229          Dim fraction As Byte = 0
000230          Dim data As Short = 0
000231          If value Is Float Then                                                                                                                                                                                                   1243: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1244: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                         1245: 0x0006   ClassIs                 
                                                                                                                                                                                                                                         1246: 0x3C12   BranchFalse             1265

000232              data = value.Cast(Float).ToShort() //get integer part (16 bit only)                                                                                                                                                  1247: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                         1248: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1249: 0x0007   Cast                    
                                                                                                                                                                                                                                         1250: 0x007B   CvtFltToInt             
                                                                                                                                                                                                                                         1251: 0x007F   CvtIntToSho             
                                                                                                                                                                                                                                         1252: 0x9002   PopLocalI32             data

000233              fraction = ((value.Cast(Float) - data) * 100.0).ToByte()                                                                                                                                                             1253: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                         1254: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1255: 0x0007   Cast                    
                                                                                                                                                                                                                                         1256: 0x8802   PushLocalI32            data
                                                                                                                                                                                                                                         1257: 0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                         1258: 0x003F   FltSub                  
                                                                                                                                                                                                                                         1259: 0xEA64   PushConstFlt            100.0
                                                                                                                                                                                                                                         1260: 0x003C   FltMul                  
                                                                                                                                                                                                                                         1261: 0x007B   CvtFltToInt             
                                                                                                                                                                                                                                         1262: 0x007D   CvtIntToByt             
                                                                                                                                                                                                                                         1263: 0x9001   PopLocalI32             fraction

                                                                                                                                                                                                                                         1264: 0x4029   Branch                  1306
000234          ElseIf value Is Integer Then                                                                                                                                                                                             1265: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1266: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         1267: 0x0006   ClassIs                 
                                                                                                                                                                                                                                         1268: 0x3C06   BranchFalse             1275

000235              data = value.Cast(Integer).ToShort() //get integer part (16 bit only)                                                                                                                                                1269: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         1270: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1271: 0x0007   Cast                    
                                                                                                                                                                                                                                         1272: 0x007F   CvtIntToSho             
                                                                                                                                                                                                                                         1273: 0x9002   PopLocalI32             data

                                                                                                                                                                                                                                         1274: 0x401F   Branch                  1306
000236          ElseIf value Is Short Then                                                                                                                                                                                               1275: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1276: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         1277: 0x0006   ClassIs                 
                                                                                                                                                                                                                                         1278: 0x3C05   BranchFalse             1284

000237              data = value.Cast(Short)                                                                                                                                                                                             1279: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         1280: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1281: 0x0007   Cast                    
                                                                                                                                                                                                                                         1282: 0x9002   PopLocalI32             data

                                                                                                                                                                                                                                         1283: 0x4016   Branch                  1306
000238          ElseIf value Is Byte Then                                                                                                                                                                                                1284: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1285: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         1286: 0x0006   ClassIs                 
                                                                                                                                                                                                                                         1287: 0x3C05   BranchFalse             1293

000239              data = value.Cast(Byte).ToShort() //get integer part (16 bit only)                                                                                                                                                   1288: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         1289: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1290: 0x0007   Cast                    
                                                                                                                                                                                                                                         1291: 0x9002   PopLocalI32             data

                                                                                                                                                                                                                                         1292: 0x400D   Branch                  1306
000240          ElseIf value Is Boolean Then                                                                                                                                                                                             1293: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1294: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1295: 0x0006   ClassIs                 
                                                                                                                                                                                                                                         1296: 0x3C09   BranchFalse             1306
                                                                                                                                                                                                                                         1297: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000241              Dim on As Boolean = value.Cast(Boolean)                                                                                                                                                                              1298: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1299: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1300: 0x0007   Cast                    
                                                                                                                                                                                                                                         1301: 0x9003   PopLocalI32             on

000242              If on Then                                                                                                                                                                                                           1302: 0x8803   PushLocalI32            on
                                                                                                                                                                                                                                         1303: 0x3C01   BranchFalse             1305

000243                  data = 1                                                                                                                                                                                                         1304: 0x6402   Const1toLocalI32        data

000244              End If
                                                                                                                                                                                                                                         1305: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
000245          End If                                                                                                                                                                                                                   

000246          Dim beaconData As ListOfByte = New ListOfByte()                                                                                                                                                                          1306: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                         1307: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1308: 0x9401   PopLocalRef             beaconData

000247          beaconData.Add(data_Type)                                                                                                                                                                                                1309: 0x8800   PushLocalI32            data_Type
                                                                                                                                                                                                                                         1310: 0x8C01   PushLocalRef            beaconData
                                                                                                                                                                                                                                         1311: 0x00A3   ListAdd                 

000248          beaconData.AddShort(data)                                                                                                                                                                                                1312: 0x8802   PushLocalI32            data
                                                                                                                                                                                                                                         1313: 0x8C01   PushLocalRef            beaconData
                                                                                                                                                                                                                                         1314: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1315: 0x00A7   ListAdd2Byte            

000249          beaconData.Add(fraction)                                                                                                                                                                                                 1316: 0x8801   PushLocalI32            fraction
                                                                                                                                                                                                                                         1317: 0x8C01   PushLocalRef            beaconData
                                                                                                                                                                                                                                         1318: 0x00A3   ListAdd                 

000250          Lplan.SetBeaconData(beaconData)                                                                                                                                                                                          1319: 0x8C01   PushLocalRef            beaconData
                                                                                                                                                                                                                                         1320: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                         1321: 0x0105   LplanSetBeacon          

000251          //Lplan.SendBeacon()
000252          //Lplan.BeaconNow () //does not seem to work
000253      End Sub                                                                                                                                                                                                                      1322: 0x0091   Return                  

000254      
000255      Shared Sub Subscribe(topic As String)                                                                                                                                                                                        1323: 0x1801   EntryPoint              ValTypParams=0, RefTypParams=1

000256          Lplan.Subscribe(topic)                                                                                                                                                                                                   1324: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         1325: 0x0102   LplanSubscribe          

000257      End Sub                                                                                                                                                                                                                      1326: 0x0091   Return                  

000258      
000259      Shared Sub Subscribe(topic As String, quality As QoS)                                                                                                                                                                        1327: 0x1811   EntryPoint              ValTypParams=1, RefTypParams=1

000260          Lplan.Subscribe(topic, quality)                                                                                                                                                                                          1328: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                         1329: 0x8800   PushLocalI32            quality
                                                                                                                                                                                                                                         1330: 0x0102   LplanSubscribe          

000261      End Sub                                                                                                                                                                                                                      1331: 0x0091   Return                  

000262      
000263  End Class                                                                                                                                                                                                                        874:  0x0097   ReturnMe                


****** BLOCKS and VARIABLES for MQTT
    Block Class (Line 64:263)
        MQTT            Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        Boolean         use_queue       (SharedValTypVariableOffset=48)
        Boolean         MQTT_priority   (SharedValTypVariableOffset=49)
        ListOfObject    queue           (SharedRefTypVariableOffset=8)
        Integer         timeSincePublish(SharedValTypVariableOffset=56)
        Boolean         running         (SharedValTypVariableOffset=50)
        Boolean         recheck         (SharedValTypVariableOffset=51)
        Boolean         item            (SharedValTypVariableOffset=52)
        ListOfByte      publish_as      (SharedRefTypVariableOffset=12)
        Block Sub Publish (Line 75:77)
            String          topic           (LocalRefTypVariableOffset=0)
            String          text            (LocalRefTypVariableOffset=1)
        End Block
        Block Sub Publish (Line 79:82)
            String          text            (LocalRefTypVariableOffset=2)
            String          topic           (LocalRefTypVariableOffset=0)
            Object          value           (LocalRefTypVariableOffset=1)
        End Block
        Block Sub Publish (Line 84:86)
            String          topic           (LocalRefTypVariableOffset=0)
            String          text            (LocalRefTypVariableOffset=1)
            QoS             quality         (LocalValTypVariableOffset=0)
        End Block
        Block Sub Publish (Line 88:91)
            String          text            (LocalRefTypVariableOffset=2)
            String          topic           (LocalRefTypVariableOffset=0)
            Object          value           (LocalRefTypVariableOffset=1)
            QoS             quality         (LocalValTypVariableOffset=0)
        End Block
        Block Sub Publish_exact (Line 93:95)
            String          topic           (LocalRefTypVariableOffset=0)
            String          text            (LocalRefTypVariableOffset=1)
        End Block
        Block Sub Publish_exact (Line 97:99)
            String          topic           (LocalRefTypVariableOffset=0)
            String          text            (LocalRefTypVariableOffset=1)
            QoS             quality         (LocalValTypVariableOffset=0)
        End Block
        Block Sub Publish_Priority (Line 101:104)
            String          text            (LocalRefTypVariableOffset=2)
            String          topic           (LocalRefTypVariableOffset=0)
            Object          value           (LocalRefTypVariableOffset=1)
        End Block
        Block Sub Publish_Priority (Line 106:109)
            String          text            (LocalRefTypVariableOffset=2)
            String          topic           (LocalRefTypVariableOffset=0)
            Object          value           (LocalRefTypVariableOffset=1)
            QoS             quality         (LocalValTypVariableOffset=0)
        End Block
        Block Sub Publish_Priority (Line 111:113)
            String          topic           (LocalRefTypVariableOffset=0)
            String          text            (LocalRefTypVariableOffset=1)
        End Block
        Block Sub Publish_Priority (Line 115:118)
            String          topic           (LocalRefTypVariableOffset=0)
            String          text            (LocalRefTypVariableOffset=1)
            QoS             quality         (LocalValTypVariableOffset=0)
        End Block
        Block Sub Recheck_Event (Line 120:126)
            String          _publish_as     (LocalRefTypVariableOffset=0)
            Boolean         _item           (LocalValTypVariableOffset=0)
        End Block
        Block Sub remove (Line 128:142)
            ListOfObject    list            (LocalRefTypVariableOffset=0)
            Integer         index           (LocalValTypVariableOffset=0)
            Block If Then  (Line 129:131)
            End Block
            Block For  (Line 133:137)
                Integer         i               (LocalValTypVariableOffset=1)
                Block If Then  (Line 134:136)
                End Block
            End Block
            Block If Then  (Line 139:141)
            End Block
        End Block
        Block Sub Insert (Line 144:155)
            ListOfObject    list            (LocalRefTypVariableOffset=1)
            Object          value           (LocalRefTypVariableOffset=0)
            Block If Then  (Line 145:149)
            End Block
        End Block
        Block Sub Publish_String (Line 157:185)
            MQTT_Message    _Message        (LocalRefTypVariableOffset=2)
            String          topic           (LocalRefTypVariableOffset=0)
            String          text            (LocalRefTypVariableOffset=1)
            QoS             quality         (LocalValTypVariableOffset=0)
            Boolean         exact           (LocalValTypVariableOffset=1)
            Block If Then  (Line 158:161)
            End Block
            Block If Then  (Line 165:168)
            End Block
            Block While  (Line 170:172)
            End Block
            Block If Then  (Line 174:176)
            End Block
            Block Else (Line 176:183)
                Block If Then  (Line 177:180)
                End Block
                Block Else (Line 180:182)
                End Block
            End Block
        End Block
        Block Sub Publish (Line 187:191)
            MQTT_Message    msg             (LocalRefTypVariableOffset=0)
        End Block
        Block Event Publish_Queue (Line 193:210)
            Block If Then  (Line 194:196)
            End Block
            Block If Then  (Line 197:209)
                MQTT_Message    msg             (LocalRefTypVariableOffset=0)
                Object          msg_queue       (LocalRefTypVariableOffset=1)
            End Block
        End Block
        Block Event Recheck_Event (Line 212:218)
            Block If Then  (Line 213:217)
            End Block
        End Block
        Block Sub BeaconPublish (Line 228:253)
            Byte            fraction        (LocalValTypVariableOffset=1)
            Short           data            (LocalValTypVariableOffset=2)
            ListOfByte      beaconData      (LocalRefTypVariableOffset=1)
            Byte            data_Type       (LocalValTypVariableOffset=0)
            Object          value           (LocalRefTypVariableOffset=0)
            Block If Then  (Line 231:234)
            End Block
            Block ElseIf (Line 234:236)
            End Block
            Block ElseIf (Line 236:238)
            End Block
            Block ElseIf (Line 238:240)
            End Block
            Block ElseIf (Line 240:245)
                Boolean         on              (LocalValTypVariableOffset=3)
                Block If Then  (Line 242:244)
                End Block
            End Block
        End Block
        Block Sub Subscribe (Line 255:257)
            String          topic           (LocalRefTypVariableOffset=0)
        End Block
        Block Sub Subscribe (Line 259:261)
            String          topic           (LocalRefTypVariableOffset=0)
            QoS             quality         (LocalValTypVariableOffset=0)
        End Block
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000001  Enum MMA8652_ACTIVE_ODR As Byte
000002      _800HZ = 0x00
000003      _400HZ = 0x08
000004      _200HZ = 0x10
000005      _100HZ = 0x18
000006      _50HZ = 0x20
000007      _12_5HZ = 0x28 // 12.5 Hz, etc.
000008      _6_25HZ = 0x30
000009      _1_56HZ = 0x38
000010  End Enum

****** BLOCKS and VARIABLES for MMA8652_ACTIVE_ODR
    Block Struct (Line 1:10)
        MMA8652_ACTIVE_O_800HZ          (Literal=0)
        MMA8652_ACTIVE_O_400HZ          (Literal=8)
        MMA8652_ACTIVE_O_200HZ          (Literal=16)
        MMA8652_ACTIVE_O_100HZ          (Literal=24)
        MMA8652_ACTIVE_O_50HZ           (Literal=32)
        MMA8652_ACTIVE_O_12_5HZ         (Literal=40)
        MMA8652_ACTIVE_O_6_25HZ         (Literal=48)
        MMA8652_ACTIVE_O_1_56HZ         (Literal=56)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000012  Enum MMA8652_MODS As Byte
000013      NORMAL = 0x00
000014      LOW_POWER_LOW_NOISE = 0x01
000015      HIGH_RES = 0x02
000016      LOW_POWER = 0x03
000017  End Enum

****** BLOCKS and VARIABLES for MMA8652_MODS
    Block Struct (Line 12:17)
        MMA8652_MODS    NORMAL          (Literal=0)
        MMA8652_MODS    LOW_POWER_LOW_NO(Literal=1)
        MMA8652_MODS    HIGH_RES        (Literal=2)
        MMA8652_MODS    LOW_POWER       (Literal=3)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000019  Enum MMA8652_SLEEP_ODR As Byte
000020      _50HZ = 0x00
000021      _12_5HZ = 0x40 // 12.5 Hz, etc.
000022      _6_25HZ = 0x80
000023      _1_56HZ = 0xc0
000024  End Enum

****** BLOCKS and VARIABLES for MMA8652_SLEEP_ODR
    Block Struct (Line 19:24)
        MMA8652_SLEEP_OD_50HZ           (Literal=0)
        MMA8652_SLEEP_OD_12_5HZ         (Literal=64)
        MMA8652_SLEEP_OD_6_25HZ         (Literal=128)
        MMA8652_SLEEP_OD_1_56HZ         (Literal=192)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000026  Enum MMA8652_SMODS As Byte
000027      NORMAL = 0x00
000028      LOW_POWER_LOW_NOISE = 0x08
000029      MOD_HIGH_RES = 0x10
000030      MOD_LOW_POWER = 0x18
000031  End Enum

****** BLOCKS and VARIABLES for MMA8652_SMODS
    Block Struct (Line 26:31)
        MMA8652_SMODS   NORMAL          (Literal=0)
        MMA8652_SMODS   LOW_POWER_LOW_NO(Literal=8)
        MMA8652_SMODS   MOD_HIGH_RES    (Literal=16)
        MMA8652_SMODS   MOD_LOW_POWER   (Literal=24)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000033  Enum MMA8652_BF_ANGLE As Byte
000034      _80 = 0x00
000035      _75 = 0x40
000036      _70 = 0x80
000037      _65 = 0xc0
000038  End Enum

****** BLOCKS and VARIABLES for MMA8652_BF_ANGLE
    Block Struct (Line 33:38)
        MMA8652_BF_ANGLE_80             (Literal=0)
        MMA8652_BF_ANGLE_75             (Literal=64)
        MMA8652_BF_ANGLE_70             (Literal=128)
        MMA8652_BF_ANGLE_65             (Literal=192)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000040  Enum MMA8652_THS_ANGLE As Byte
000041      _15 = 0x38
000042      _20 = 0x48
000043      _30 = 0x60
000044      _35 = 0x68
000045      _40 = 0x78
000046      _45 = 0x80
000047      _55 = 0x98
000048      _60 = 0xa0
000049      _70 = 0xb8
000050      _75 = 0xc8
000051  End Enum

****** BLOCKS and VARIABLES for MMA8652_THS_ANGLE
    Block Struct (Line 40:51)
        MMA8652_THS_ANGL_15             (Literal=56)
        MMA8652_THS_ANGL_20             (Literal=72)
        MMA8652_THS_ANGL_30             (Literal=96)
        MMA8652_THS_ANGL_35             (Literal=104)
        MMA8652_THS_ANGL_40             (Literal=120)
        MMA8652_THS_ANGL_45             (Literal=128)
        MMA8652_THS_ANGL_55             (Literal=152)
        MMA8652_THS_ANGL_60             (Literal=160)
        MMA8652_THS_ANGL_70             (Literal=184)
        MMA8652_THS_ANGL_75             (Literal=200)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000053  Enum MMA8652_HYS_ANGLE As Byte
000054      _0 = 0x00
000055      _4 = 0x01
000056      _7 = 0x02
000057      _11 = 0x03
000058      _14 = 0x04
000059      _17 = 0x05
000060      _21 = 0x06
000061      '_24 = 0x07 // Using this with 75 THS does not work properly on the device
000062  End Enum

****** BLOCKS and VARIABLES for MMA8652_HYS_ANGLE
    Block Struct (Line 53:62)
        MMA8652_HYS_ANGL_0              (Literal=0)
        MMA8652_HYS_ANGL_4              (Literal=1)
        MMA8652_HYS_ANGL_7              (Literal=2)
        MMA8652_HYS_ANGL_11             (Literal=3)
        MMA8652_HYS_ANGL_14             (Literal=4)
        MMA8652_HYS_ANGL_17             (Literal=5)
        MMA8652_HYS_ANGL_21             (Literal=6)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000064  Enum MMA8652_SCALES As Byte
000065      _2G = 0x00
000066      _4G = 0x01
000067      _8G = 0x02
000068  End Enum

****** BLOCKS and VARIABLES for MMA8652_SCALES
    Block Struct (Line 64:68)
        MMA8652_SCALES  _2G             (Literal=0)
        MMA8652_SCALES  _4G             (Literal=1)
        MMA8652_SCALES  _8G             (Literal=2)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000072  Class MMA8652                                                                                                                                                                                                                    1332: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000073      Const VERSION As String = "0.1.0" // Adheres to semantic versioning
000074      
000075      Const MMA8652_I2C_ADDR As Byte = 0x1d
000076      Const I2C_SPEED As Integer = 400000
000077      
000078      'Registers
000079      'Assume all are read only. If commented with a "W", they are R/W
000080      'Assume all have values initialized to 0x00 by the hardware unless otherwise commented
000081      'Const STATUS_REG As Byte = 0x00
000082      Const OUT_X_MSB_REG As Byte = 0x01 // 8 Most Significant Bits (MSB)
000083      Const OUT_X_LSB_REG As Byte = 0x02 // 4 Least Significant Bits (MSB)
000084      Const OUT_Y_MSB_REG As Byte = 0x03
000085      Const OUT_Y_LSB_REG As Byte = 0x04
000086      Const OUT_Z_MSB_REG As Byte = 0x05
000087      Const OUT_Z_LSB_REG As Byte = 0x06
000088      'Const F_SETUP_REG As Byte = 0x09 // "W" First in first out (FIFO) setup
000089      'Const TRIG_CFG_REG As Byte = 0x0a // "W" Trigger config mode
000090      Const SYSMOD_REG As Byte = 0x0b // System mode
000091      Const INT_SOURCE_REG As Byte = 0x0c // Interrupt soruce/status
000092      Const WHO_AM_I_REG As Byte = 0x0d // Value should be 0x4A
000093      Const XYZ_DATA_CFG_REG As Byte = 0x0e // "W" Dynamic range settings
000094      Const HP_FILTER_CUTOFF_REG As Byte = 0x0f // "W" High pass filter selection
000095      Const PL_STATUS_REG As Byte = 0x10 // Portrait/Landscape (PL)
000096      Const PL_CFG_REG As Byte = 0x11 // "W" Config as 0x80 by default
000097      Const PL_COUNT_REG As Byte = 0x12 // "W" Debounce counter
000098      Const PL_BF_ZCOMP_REG As Byte = 0x13 // "W" Back/Front (BF) Z-Lock Trip Threshold as 0x44 by default
000099      Const PL_THS_REG As Byte = 0x14 // "W" Threshold (THS) and Hysteresis as 0x84 by default
000100      Const FF_MT_CFG_REG As Byte = 0x15 // "W" Freefall/Motion (FF_MT) functional block configuration
000101      Const FF_MT_SRC_REG As Byte = 0x16 // Event source
000102      Const FF_MT_THS_REG As Byte = 0x17 // "W"
000103      Const FF_MT_COUNT_REG As Byte = 0x18 // "W" Debounce counter
000104      Const TRANSIENT_CFG_REG As Byte = 0x1d // "W"
000105      Const TRANSIENT_SRC_REG As Byte = 0x1e // Event status
000106      Const TRANSIENT_THS_REG As Byte = 0x1f // "W"
000107      Const TRANSIENT_COUNT_REG As Byte = 0x20 // Debounce counter
000108      Const PULSE_CFG_REG As Byte = 0x21 // "W" Enable configuration
000109      Const PULSE_SRC_REG As Byte = 0x22 // Detection source
000110      Const PULSE_THSX_REG As Byte = 0x23 // "W" Threshold (THS) X
000111      Const PULSE_THSY_REG As Byte = 0x24 // "W"
000112      Const PULSE_THSZ_REG As Byte = 0x25 // "W"
000113      Const PULSE_TMLT_REG As Byte = 0x26 // "W" Time limit for pulse
000114      Const PULSE_LTCY_REG As Byte = 0x27 // "W" Latency time for 2nd pulse
000115      Const PULSE_WIND_REG As Byte = 0x28 // "W" Window time for 2nd pulse
000116      Const ASLP_COUNT_REG As Byte = 0x29 // "W" Counter setting for auto-sleep (ASLP)
000117      Const CTRL_REG1_REG As Byte = 0x2a // "W" Data rates and modes setting
000118      Const CTRL_REG2_REG As Byte = 0x2b // "W" Sleep Enable, OS modes, Software Reset (RST), Self-Test (ST)
000119      Const CTRL_REG3_REG As Byte = 0x2c // "W" Wake from sleep, Interrupt polarity (IPOL), Push-Pull/Open-Drain (PP_OD)
000120      Const CTRL_REG4_REG As Byte = 0x2d // "W" Interrupt enable register
000121      Const CTRL_REG5_REG As Byte = 0x2e // "W" Interrupt pin (INT1/INT2) map
000122      'Const OFF_X_REG As Byte = 0x2f // "W" X-axis offset adjust
000123      'Const OFF_Y_REG As Byte = 0x30 // "W" Y-axis offset adjust
000124      'Const OOF_Z_REG As Byte = 0x31 // "W" Z-axis offset adjust
000125      
000126      
000127      // Below are register bits, named
000128      
000129      // Readonly
000130      'Const STATUS_ZYXOW As Byte = 0x80 // Overwrite (OW)
000131      'Const STATUS_ZOW As Byte = 0x40 // Overwrite (OW)
000132      'Const STATUS_YOW As Byte = 0x20 // Overwrite (OW)
000133      'Const STATUS_XOW As Byte = 0x10 // Overwrite (OW)
000134      'Const STATUS_ZYXDR As Byte = 0x08 // Data ready (DR)
000135      'Const STATUS_ZDR As Byte = 0x04 // Data ready (DR)
000136      'Const STATUS_YDR As Byte = 0x02 // Data ready (DR)
000137      'Const STATUS_XDR As Byte = 0x01 // Data ready (DR)
000138      
000139      'Const F_SETUP_F_MODE As Byte = 0xc0 // All FIFO Mode bits
000140      'Const F_SETUP_F_WMRK As Byte = 0x3f // All FIFO WMRK bits
000141      
000142      // Trigger configuration bits are reset by reading the appropriate source register
000143      // 0xc0 bits are empty
000144      'Const TRIG_CFG_Trig_TRANS As Byte = 0x20
000145      'Const TRIG_CFG_Trig_LNDPRT As Byte = 0x10
000146      'Const TRIG_CFG_Trig_PULSE As Byte = 0x08
000147      'Const TRIG_CFG_Trig_FF_MT As Byte = 0x04
000148      // 0x03 bits are empty
000149      
000150      // Readonly
000151      'Const SYSMOD_FGERR As Byte = 0x80 // FIFO Gate error
000152      'Const SYSMOD_FGT As Byte = 0x7c // All FGT bits. Number of ODR time units since FGERR was asserted
000153      Const SYSMOD_STANDBY As Byte = 0x00
000154      Const SYSMOD_WAKE As Byte = 0x01
000155      Const SYSMOD_SLEEP As Byte = 0x02
000156      Const SYSMOD_SYSMOD As Byte = 0x03 // All system mode SYSMOD bits
000157      
000158      // Readonly
000159      Const INT_SOURCE_SRC_ASLP As Byte = 0x80 // Auto-SLEEP/WAKE (ASLP)
000160      'Const INT_SOURCE_SRC_FIFO As Byte = 0x40 // MMA8652 only
000161      Const INT_SOURCE_SRC_TRANS As Byte = 0x20 // Transient
000162      Const INT_SOURCE_SRC_LNDPRT As Byte = 0x10 // Landscape/Portrait Orientation
000163      Const INT_SOURCE_SRC_PULSE As Byte = 0x08
000164      Const INT_SOURCE_SRC_FF_MT As Byte = 0x04 // Freefall/Motion
000165      // 0x02 is empty
000166      'Const INT_SOURCE_SRC_DRDY As Byte = 0x01 // Data Ready
000167      
000168      // Readonly
000169      Const WHO_AM_I_ As Byte = 0x4a
000170      
000171      // Bits 0xe0 are empty
000172      Const XYZ_DATA_CFG_HPF_OUT As Byte = 0x10 // Enable high-pass output data
000173      // Bits 0x0c are empty
000174      Const XYZ_DATA_CFG_FS As Byte = 0x03 // Both full-scale bits, 0x00 2g, 0x01 4g, 0x10 8g
000175      
000176      // Bits 0xc0 are empty
000177      'Const HP_FILTER_CUTOFF_Pulse_HPF_BYP As Byte = 0x20
000178      Const HP_FILTER_CUTOFF_Pulse_LPF_EN As Byte = 0x10
000179      // Bits 0x0c are empty
000180      'Const HP_FILTER_CUTOFF_Pulse_SEL As Byte = 0x03 // Both SEL bits
000181      
000182      // Readonly
000183      'Const PL_STATUS_NEWLP As Byte = 0x80 // Landscape/Portrait status change flag
000184      'Const PL_STATUS_LO As Byte = 0x40 // Z-Tilt angle lockout
000185      // 0x38 bits are empty
000186      Const PL_STATUS_LAPO As Byte = 0x06 // Both Landscape/Portrait orientation bits
000187      Const PL_STATUS_BAFRO As Byte = 0x01 // Back or front orientation
000188      
000189      Const PL_CFG_DBCNTM As Byte = 0x80 // Debounce counter mode selection
000190      Const PL_CFG_PL_EN As Byte = 0x40 // Portrait/Landscape detection enable
000191      // Bits 0x3f are empty
000192      
000193      'Const PL_COUNT_DBNCE As Byte = 0xff // All PL debounce bits
000194      
000195      Const PL_BF_ZCOMP_BKFR As Byte = 0xc0 // All Back/Front trip angle threshold bits
000196      // bits 0x38 are empty
000197      Const PL_BF_ZCOMP_ZLOCK As Byte = 0x07 // All z-lock angle threshold bits
000198      
000199      Const PL_THS_THS As Byte = 0xf8 // All Portrait/Landscape trip threshold angle bits
000200      Const PL_THS_HYS As Byte = 0x07 // All Hysteresis value bits
000201      
000202      Const FF_MT_CFG_ELE As Byte = 0x80 // Event latch enable (ELE)
000203      Const FF_MT_CFG_OAE As Byte = 0x40 // Motion/Freefall detect
000204      Const FF_MT_CFG_ZEFE As Byte = 0x20 // Event flag enable on Z
000205      Const FF_MT_CFG_YEFE As Byte = 0x10 // Y
000206      Const FF_MT_CFG_XEFE As Byte = 0x08 // X
000207      // 0x07 bits are empty
000208      Const FF_MT_CFG_EFE As Byte = 0x38 // All direction event flag
000209      
000210      // Readonly
000211      'Const FF_MT_SRC_EA As Byte = 0x80 // Event active flag
000212      // 0x40 bit is empty
000213      Const FF_MT_SRC_ZHE As Byte = 0x20 // Z Motion
000214      Const FF_MT_SRC_ZHP As Byte = 0x10 // Z-Motion polarity
000215      Const FF_MT_SRC_YHE As Byte = 0x08
000216      Const FF_MT_SRC_YHP As Byte = 0x04
000217      Const FF_MT_SRC_XHE As Byte = 0x02
000218      Const FF_MT_SRC_XHP As Byte = 0x01
000219      
000220      'Const FF_MT_THS_DBCNTM As Byte = 0x80 // Debounce counter mode selection
000221      'Const FF_MT_THS_THS As Byte = 0x6f // All THS bits
000222      
000223      'Const FF_MT_COUNT_D As Byte = 0xff // All Motion counter data bits
000224      
000225      // 0xe0 bits are empty
000226      Const TRANSIENT_CFG_ELE As Byte = 0x10 // Event flag latch
000227      'Const TRANSIENT_CFG_ZTEFE As Byte = 0x08 // Event flag enable for z-Transient acceleration
000228      'Const TRANSIENT_CFG_YTEFE As Byte = 0x04
000229      'Const TRANSIENT_CFG_XTEFE As Byte = 0x02
000230      Const TRANSIENT_CFG_TEFE As Byte = 0x0e // For all directions
000231      'Const TRANSIENT_CFG_HPF_BYP As Byte = 0x01 // High-pass filter bypass
000232      
000233      // Readonly
000234      // 0x80 is empty
000235      'Const TRANSIENT_SRC_EA As Byte = 0x40 // Event Active flag
000236      Const TRANSIENT_SRC_ZTRANSE As Byte = 0x20 // Z-transient event
000237      Const TRANSIENT_SRC_Z_TRANS_POL As Byte = 0x10 // Polarity of Z-Transient event that triggered the interrupt
000238      Const TRANSIENT_SRC_YTRANSE As Byte = 0x08
000239      Const TRANSIENT_SRC_Y_TRANS_POL As Byte = 0x04
000240      Const TRANSIENT_SRC_XTRANSE As Byte = 0x02
000241      Const TRANSIENT_SRC_X_TRANS_POL As Byte = 0x01
000242      
000243      'Const TRANSIENT_THS_DBCNTM As Byte = 0x80
000244      'Const TRANSIENT_THS_THS As Byte = 0x6f // All THS bits
000245      
000246      'Const TRANSIENT_COUNT_D As Byte = 0xff // All Transient counter data bits
000247      
000248      Const PULSE_CFG_DPA As Byte = 0x80 // Double pulse abort
000249      Const PULSE_CFG_ELE As Byte = 0x40 // Event Flag Latch
000250      'Const PULSE_CFG_ZDPEFE As Byte = 0x20 // Z Double Pulse
000251      'Const PULSE_CFG_ZSPEFE As Byte = 0x10 // Z Single Pulse
000252      'Const PULSE_CFG_YDPEFE As Byte = 0x08
000253      'Const PULSE_CFG_YSPEFE As Byte = 0x04
000254      'Const PULSE_CFG_XDPEFE As Byte = 0x02
000255      'Const PULSE_CFG_XSPEFE As Byte = 0x01
000256      Const PULSE_CFG_PEFE As Byte = 0x3f // For all directions
000257      
000258      // Readonly
000259      'Const PULSE_SRC_EA As Byte = 0x80 // Event Active
000260      'Const PULSE_SRC_AxZ As Byte = 0x40 // Z axis event
000261      'Const PULSE_SRC_AxY As Byte = 0x20
000262      'Const PULSE_SRC_AxX As Byte = 0x10
000263      Const PULSE_SRC_DPE As Byte = 0x08 // Double pulse?
000264      'Const PULSE_SRC_Pol_Z As Byte = 0x04 // Pulse polarity
000265      'Const PULSE_SRC_Pol_Y As Byte = 0x02
000266      'Const PULSE_SRC_Pol_X As Byte = 0x01
000267      
000268      // 0x80 bit is empty
000269      'Const PULSE_THSX_THSX As Byte = 0x6f // All Pulse threshold in X bits
000270      
000271      // 0x80 bit is empty
000272      'Const PULSE_THSY_THSY As Byte = 0x6f // All Pulse threshold in Y bits
000273      
000274      // 0x80 bit is empty
000275      'Const PULSE_THSZ_THSZ As Byte = 0x6f // All Pulse threshold in Z bits
000276      
000277      'Const PULSE_TMLT_TMLT As Byte = 0xff // All Pulse Time limit bits
000278      
000279      'Const PULSE_LTCY_LTCY As Byte = 0xff // All Pulse latency (ignore window) bits
000280      
000281      'Const PULSE_WIND_WIND As Byte = 0xff // All Window after latency for 2nd pulse bits
000282      
000283      'Const ASLP_COUNT_D As Byte = 0xff // All Autosleep counter data bits
000284      
000285      Const CTRL_REG1_ASLP_RATE As Byte = 0xc0 // Both Auto-WAKE sample frequency when in SLEEP mode bits
000286      Const CTRL_REG1_DR As Byte = 0x38 // All 3 Data rate selection bits
000287      // Bit 0x04 is empty
000288      'Const CTRL_REG1_FREAD As Byte = 0x02 // Fast-read mode
000289      Const CTRL_REG1_ACTIVE As Byte = 0x01 // Full-scale selection
000290      
000291      'Const CTRL_REG2_ST As Byte = 0x80 // Self-Test Enable
000292      Const CTRL_REG2_RST As Byte = 0x40 // Software Reset
000293      /// 0x20 is empty
000294      Const CTRL_REG2_SMODS As Byte = 0x18 // Both SLEEP mode oower scheme selection bits
000295      Const CTRL_REG2_SLPE As Byte = 0x04 // Auto-SLEEP enable
000296      Const CTRL_REG2_MODS As Byte = 0x03 // Both ACTIVE mode power scheme selection bits
000297      
000298      'Const CTRL_REG3_FIFO_GATE As Byte = 0x80 // MMA8652 only
000299      Const CTRL_REG3_WAKE_TRANS As Byte = 0x40 // MMA8652 only. Wake from transient interrupt
000300      Const CTRL_REG3_WAKE_LNDPRT As Byte = 0x20 // Wake from orientation interrupt
000301      Const CTRL_REG3_WAKE_PULSE As Byte = 0x10 // MMA8652 only. Wake from pulse interrupt
000302      Const CTRL_REG3_WAKE_FF_MT As Byte = 0x08 // Wake from freefall/motion interrupt
000303      // 0x04 is 0
000304      'Const CTRL_REG3_IPOL As Byte = 0x02 // Interrupt polarity
000305      'Const CTRL_REG3_PP_OD As Byte = 0x01 // Push-Pull/Open-Drain selection on interrupt pad
000306      'Const CTRL_REG3_WAKE_CLEAR As Byte = 0x78 // Clear all wake interrupts
000307      
000308      Const CTRL_REG4_INT_EN_ASLP As Byte = 0x80 // Auto-SLEEP/WAKE interrupt enable
000309      'Const CTRL_REG4_INT_EN_FIFO As Byte = 0x40 // MMA8652 only. FIFO interrupt enable
000310      Const CTRL_REG4_INT_EN_TRANS As Byte = 0x20 // MMA8652 only. Transient interrupt enable
000311      Const CTRL_REG4_INT_EN_LNDPRT As Byte = 0x10 // Orientation interrupt enable
000312      Const CTRL_REG4_INT_EN_PULSE As Byte = 0x08 // MMA8652 only. Pulse detection interrupt enable
000313      Const CTRL_REG4_INT_EN_FF_MT As Byte = 0x04 // Freefall/Motion interrupt enable
000314      // 0x02 is empty
000315      'Const CTRL_REG4_INT_EN_DRDY As Byte = 0x01 // Data Ready interrupt enable
000316      'Const CTRL_REG4_INT_CLEAR As Byte = 0xfd // Disable all interrupts
000317      
000318      'Set INT2/INT1 pins (0/1 as value)
000319      Const CTRL_REG5_INT_CFG_ASLP As Byte = 0x80
000320      'Const CTRL_REG5_INT_CFG_FIFO As Byte = 0x40 // MMA8652 only
000321      Const CTRL_REG5_INT_CFG_TRANS As Byte = 0x20 // MMA8652 only
000322      Const CTRL_REG5_INT_CFG_LNDPRT As Byte = 0x10
000323      Const CTRL_REG5_INT_CFG_PULSE As Byte = 0x08 // MMA8652 only
000324      Const CTRL_REG5_INT_CFG_FF_MT As Byte = 0x04
000325      // 0x02 is empty
000326      'Const CTRL_REG5_INT_CFG_DRDY As Byte = 0x01
000327      'Const CTRL_REG5_INT_CFG_CLEAR As Byte = 0xfd // Map all interrupts to the same pin
000328      
000329      'Const OFF_X_D As Byte = 0xff // All offset x bits
000330      
000331      'Const OFF_Y_D As Byte = 0xff // All offset y bits
000332      
000333      'Const OFF_Z_D As Byte = 0xff // All offset z bits
000334      
000335      
000336      Const LOW_ZLOCK_THRESHOLD As Float = 14.0
000337      Const HIGH_ZLOCK_THRESHOLD As Float = 42.0
000338      Const ZLOCK_THRESHOLD_RESOLUTION As Float = 4.0
000339      
000340      Const LOW_GRAVITY_THRESHOLD As Float = 0.0
000341      Const HIGH_GRAVITY_THRESHOLD As Float = 8.0
000342      Const GRAVITY_THRESHOLD_RESOLUTION As Float = 0.063
000343      
000344      Const LOW_ASLP_DURATION As Float = 0.0
000345      Const NORMAL_ASLP_DURATION As Float = 81000.0
000346      Const HIGH_ASLP_DURATION As Float = 162000.0
000347      Const NORMAL_ASLP_COUNT_RESOLUTION As Float = 320.0
000348      Const HIGH_ASLP_COUNT_RESOLUTION As Float = 640.0
000349      
000350      Private gAccelerometer As I2c
000351      Public online As Boolean = False
000352      
000353      
000354      Private Function Init(enableHighPassFilter As Boolean, outputDataFormat As MMA8652_SCALES) As Nothing                                                                                                                        1334: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0

000355          gAccelerometer = I2c.Create(I2C_SPEED, Pin.SCL, Pin.SDA, MMA8652_I2C_ADDR)                                                                                                                                               1335: 0x0110   PushConstI32            400000 (0x00061A80)
                                                                                                                                                                                                                                         1336: 0x1A80                           
                                                                                                                                                                                                                                         1337: 0x0006                           
                                                                                                                                                                                                                                         1338: 0x800D   PushConstU10            13 (0x000D)
                                                                                                                                                                                                                                         1339: 0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                                                                                         1340: 0x801D   PushConstU10            29 (0x001D)
                                                                                                                                                                                                                                         1341: 0x803B   PushConstU10            59 (0x003B)
                                                                                                                                                                                                                                         1342: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1343: 0xB400   PopMemberRef            gAccelerometer

000356          If Read(WHO_AM_I_REG) = WHO_AM_I_ Then                                                                                                                                                                                   1344: 0x800D   PushConstU10            13 (0x000D)
                                                                                                                                                                                                                                         1345: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1346: 0x1C8D   BranchSubr              1488
                                                                                                                                                                                                                                         1347: 0x804A   PushConstU10            74 (0x004A)
                                                                                                                                                                                                                                         1348: 0x2425   BranchNE                1386

000357              online = True                                                                                                                                                                                                        1349: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1350: 0xA804   PopMemberU8             online

000358              online = online And Reset()                                                                                                                                                                                          1351: 0x9804   PushMemberU8            online
                                                                                                                                                                                                                                         1352: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1353: 0x1CC4   BranchSubr              1550
                                                                                                                                                                                                                                         1354: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1355: 0xA804   PopMemberU8             online

000359              
000360              online = online And Standby()                                                                                                                                                                                        1356: 0x9804   PushMemberU8            online
                                                                                                                                                                                                                                         1357: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1358: 0x1F6C   BranchSubr              2235
                                                                                                                                                                                                                                         1359: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1360: 0xA804   PopMemberU8             online

000361              
000362              If enableHighPassFilter Then                                                                                                                                                                                         1361: 0x8800   PushLocalI32            enableHighPassFilter
                                                                                                                                                                                                                                         1362: 0x3C07   BranchFalse             1370

000363                  online = online And Write(XYZ_DATA_CFG_REG, XYZ_DATA_CFG_HPF_OUT)                                                                                                                                                1363: 0x9804   PushMemberU8            online
                                                                                                                                                                                                                                         1364: 0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                                                                                         1365: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         1366: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1367: 0x1C9D   BranchSubr              1525
                                                                                                                                                                                                                                         1368: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1369: 0xA804   PopMemberU8             online

000364              End If
000365              
000366              online = online And Write(XYZ_DATA_CFG_REG, Read(XYZ_DATA_CFG_REG) & outputDataFormat)                                                                                                                               1370: 0x9804   PushMemberU8            online
                                                                                                                                                                                                                                         1371: 0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                                                                                         1372: 0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                                                                                         1373: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1374: 0x1C71   BranchSubr              1488
                                                                                                                                                                                                                                         1375: 0x8801   PushLocalI32            outputDataFormat
                                                                                                                                                                                                                                         1376: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1377: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1378: 0x1C92   BranchSubr              1525
                                                                                                                                                                                                                                         1379: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1380: 0xA804   PopMemberU8             online

000367              
000368              online = online And Activate()                                                                                                                                                                                       1381: 0x9804   PushMemberU8            online
                                                                                                                                                                                                                                         1382: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1383: 0x1F5E   BranchSubr              2246
                                                                                                                                                                                                                                         1384: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1385: 0xA804   PopMemberU8             online

000369          End If
000370      End Function // Init                                                                                                                                                                                                         1386: 0x0096   ReturnNothing           

000371      
000372      
000373      Public Sub New()                                                                                                                                                                                                             1387: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000374          Init(False, MMA8652_SCALES._2G)                                                                                                                                                                                          1388: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1389: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1390: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1391: 0x543A   BranchSubrBack          1334
                                                                                                                                                                                                                                         1392: 0xE401   FreeStackSpace          ValTypeSize=0, RefTypeSize=1

000375      End Sub // New                                                                                                                                                                                                               1393: 0x0097   ReturnMe                

000376      
000377      
000378      Public Sub New(enableHighPassFilter As Boolean, outputDataFormat As MMA8652_SCALES)                                                                                                                                          1394: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0

000379          Init(enableHighPassFilter, outputDataFormat)                                                                                                                                                                             1395: 0x8800   PushLocalI32            enableHighPassFilter
                                                                                                                                                                                                                                         1396: 0x8801   PushLocalI32            outputDataFormat
                                                                                                                                                                                                                                         1397: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1398: 0x5441   BranchSubrBack          1334
                                                                                                                                                                                                                                         1399: 0xE401   FreeStackSpace          ValTypeSize=0, RefTypeSize=1

000380      End Sub // New                                                                                                                                                                                                               1400: 0x0097   ReturnMe                

000381      
000382      
000383      Public Function Accel() As ListOfFloat                                                                                                                                                                                       1401: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         1402: 0xE082   AllocateStackSpace      ValTypeSize=4, RefTypeSize=2

000384          Dim data As ListOfByte = Read(OUT_X_MSB_REG, 6)                                                                                                                                                                          1403: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1404: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                         1405: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1406: 0x1C63   BranchSubr              1506
                                                                                                                                                                                                                                         1407: 0x9400   PopLocalRef             data

000385          Dim output As ListOfFloat = New ListOfFloat                                                                                                                                                                              1408: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         1409: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1410: 0x9401   PopLocalRef             output

000386          Dim outputDataFormat As Byte = Read(XYZ_DATA_CFG_REG) & XYZ_DATA_CFG_FS                                                                                                                                                  1411: 0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                                                                                         1412: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1413: 0x1C4A   BranchSubr              1488
                                                                                                                                                                                                                                         1414: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         1415: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1416: 0x9000   PopLocalI32             outputDataFormat

000387          Dim accelerationReading As Short
000388          Dim convertedReading As Float
000389          Dim scaleFactor As Float
000390          
000391          Select outputDataFormat                                                                                                                                                                                                  1417: 0x8800   PushLocalI32            outputDataFormat
                                                                                                                                                                                                                                         1418: 0x0122   CaseComputed            
                                                                                                                                                                                                                                         1419: 0x0002                           CaseCommonClass=Byte
                                                                                                                                                                                                                                         1420: 0x0003                           NumberOfCaseEntries=3
                                                                                                                                                                                                                                         1421: 0x0014                           CaseElseBranch=1442
                                                                                                                                                                                                                                         1422: 0x0000                           CaseValue=0
                                                                                                                                                                                                                                         1423: 0x0006                           CaseBranch=1428
                                                                                                                                                                                                                                         1424: 0x0001                           CaseValue=1
                                                                                                                                                                                                                                         1425: 0x000B                           CaseBranch=1433
                                                                                                                                                                                                                                         1426: 0x0002                           CaseValue=2
                                                                                                                                                                                                                                         1427: 0x0010                           CaseBranch=1438

000392              Case MMA8652_SCALES._2G
000393                  scaleFactor = 0.00098                                                                                                                                                                                            1428: 0x0110   PushConstI32            981496664 (0x3A807358)
                                                                                                                                                                                                                                         1429: 0x7358                           
                                                                                                                                                                                                                                         1430: 0x3A80                           
                                                                                                                                                                                                                                         1431: 0x9003   PopLocalI32             scaleFactor

                                                                                                                                                                                                                                         1432: 0x4009   Branch                  1442
000394              Case MMA8652_SCALES._4G                                                                                                                                                                                              

000395                  scaleFactor = 0.00196                                                                                                                                                                                            1433: 0x0110   PushConstI32            989885272 (0x3B007358)
                                                                                                                                                                                                                                         1434: 0x7358                           
                                                                                                                                                                                                                                         1435: 0x3B00                           
                                                                                                                                                                                                                                         1436: 0x9003   PopLocalI32             scaleFactor

                                                                                                                                                                                                                                         1437: 0x4004   Branch                  1442
000396              Case MMA8652_SCALES._8G                                                                                                                                                                                              

000397                  scaleFactor = 0.0039                                                                                                                                                                                             1438: 0x0110   PushConstI32            998217508 (0x3B7F9724)
                                                                                                                                                                                                                                         1439: 0x9724                           
                                                                                                                                                                                                                                         1440: 0x3B7F                           
                                                                                                                                                                                                                                         1441: 0x9003   PopLocalI32             scaleFactor

000398          End Select
000399          
                                                                                                                                                                                                                                         1442: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         1443: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1444: 0x0004   DupVal2                 
                                                                                                                                                                                                                                         1445: 0x0031   IntSub                  
                                                                                                                                                                                                                                         1446: 0x0002   ExchangeVal             
                                                                                                                                                                                                                                         1447: 0x8005   PushConstU10            5 (0x0005)
000400          For axisCount As Integer = 0 To 5 Step 2                                                                                                                                                                                 1448: 0x4823   BranchForNextInt        1484

000401              accelerationReading = ((data(axisCount) << 8) | data(axisCount + 1)) >> 4                                                                                                                                            1449: 0x8804   PushLocalI32            axisCount
                                                                                                                                                                                                                                         1450: 0x8C00   PushLocalRef            data
                                                                                                                                                                                                                                         1451: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         1452: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         1453: 0x002E   IntShl                  
                                                                                                                                                                                                                                         1454: 0x8804   PushLocalI32            axisCount
                                                                                                                                                                                                                                         1455: 0x0028   IntInc                  
                                                                                                                                                                                                                                         1456: 0x8C00   PushLocalRef            data
                                                                                                                                                                                                                                         1457: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         1458: 0x002D   IntOr                   
                                                                                                                                                                                                                                         1459: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         1460: 0x002F   IntShr                  
                                                                                                                                                                                                                                         1461: 0x9001   PopLocalI32             accelerationReading

000402              
000403              'We need to 2s compliment negative numbers
000404              If ((accelerationReading & 0x0800) = 0x0800) Then                                                                                                                                                                    1462: 0x8801   PushLocalI32            accelerationReading
                                                                                                                                                                                                                                         1463: 0xE90B   PushConstBit            1<<11  (0x00000800 Or 2048)
                                                                                                                                                                                                                                         1464: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1465: 0xE90B   PushConstBit            1<<11  (0x00000800 Or 2048)
                                                                                                                                                                                                                                         1466: 0x2408   BranchNE                1475

000405                  accelerationReading = (accelerationReading ^ 0x0fff) * -1                                                                                                                                                        1467: 0x8801   PushLocalI32            accelerationReading
                                                                                                                                                                                                                                         1468: 0x0110   PushConstI32            4095 (0x00000FFF)
                                                                                                                                                                                                                                         1469: 0x0FFF                           
                                                                                                                                                                                                                                         1470: 0x0000                           
                                                                                                                                                                                                                                         1471: 0x0032   IntXor                  
                                                                                                                                                                                                                                         1472: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                         1473: 0x002A   IntMul                  
                                                                                                                                                                                                                                         1474: 0x9001   PopLocalI32             accelerationReading

000406              End If
000407              
000408              convertedReading = scaleFactor * accelerationReading                                                                                                                                                                 1475: 0x8803   PushLocalI32            scaleFactor
                                                                                                                                                                                                                                         1476: 0x8801   PushLocalI32            accelerationReading
                                                                                                                                                                                                                                         1477: 0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                         1478: 0x003C   FltMul                  
                                                                                                                                                                                                                                         1479: 0x9002   PopLocalI32             convertedReading

000409              output.Add(convertedReading)                                                                                                                                                                                         1480: 0x8802   PushLocalI32            convertedReading
                                                                                                                                                                                                                                         1481: 0x8C01   PushLocalRef            output
                                                                                                                                                                                                                                         1482: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         1483: 0x5024   BranchBack              1448
000410          Next                                                                                                                                                                                                                     1484: 0xE460   FreeStackSpace          ValTypeSize=3, RefTypeSize=0

000411          
000412          Return output                                                                                                                                                                                                            1485: 0x8C01   PushLocalRef            output
                                                                                                                                                                                                                                         1486: 0x0095   ReturnRefType           

000413      End Function // Accel                                                                                                                                                                                                        1487: 0x0096   ReturnNothing           

000414      
000415      
000416      Private Function Read(address As Byte) As Byte                                                                                                                                                                               1488: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                                                                                         1489: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

000417          Dim result As Byte = 0
000418          Dim value As ListOfByte = Read(address, 1) // Read single byte                                                                                                                                                           1490: 0x8800   PushLocalI32            address
                                                                                                                                                                                                                                         1491: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1492: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1493: 0x1C0C   BranchSubr              1506
                                                                                                                                                                                                                                         1494: 0x9400   PopLocalRef             value

000419          
000420          If value <> Nothing Then                                                                                                                                                                                                 1495: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1496: 0x000E   PushNothing             
                                                                                                                                                                                                                                         1497: 0x000B   RefCmpNE                
                                                                                                                                                                                                                                         1498: 0x3C04   BranchFalse             1503

000421              result = value(0)                                                                                                                                                                                                    1499: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1500: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                         1501: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         1502: 0x9001   PopLocalI32             result

000422          End If
000423          Return result                                                                                                                                                                                                            1503: 0x8801   PushLocalI32            result
                                                                                                                                                                                                                                         1504: 0x0092   ReturnValType           

000424      End Function // Read                                                                                                                                                                                                         1505: 0x0093   Return0                 

000425      
000426      
000427      Private Function Read(address As Byte, length As Byte) As ListOfByte                                                                                                                                                         1506: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0
                                                                                                                                                                                                                                         1507: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000428          Dim data As ListOfByte = New ListOfByte                                                                                                                                                                                  1508: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                         1509: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1510: 0x9400   PopLocalRef             data

000429          
000430          data.Add(address)                                                                                                                                                                                                        1511: 0x8800   PushLocalI32            address
                                                                                                                                                                                                                                         1512: 0x8C00   PushLocalRef            data
                                                                                                                                                                                                                                         1513: 0x00A3   ListAdd                 

000431          gAccelerometer.Write(data, False)                                                                                                                                                                                        1514: 0x8C00   PushLocalRef            data
                                                                                                                                                                                                                                         1515: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1516: 0xA400   PushMemberRef           gAccelerometer
                                                                                                                                                                                                                                         1517: 0x00E1   I2cDeviceWrite          
                                                                                                                                                                                                                                         1518: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000432          
000433          Return gAccelerometer.Read(length, True)                                                                                                                                                                                 1519: 0x8801   PushLocalI32            length
                                                                                                                                                                                                                                         1520: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1521: 0xA400   PushMemberRef           gAccelerometer
                                                                                                                                                                                                                                         1522: 0x00E0   I2cDeviceRead           
                                                                                                                                                                                                                                         1523: 0x0095   ReturnRefType           

000434      End Function // Read                                                                                                                                                                                                         1524: 0x0096   ReturnNothing           

000435      
000436      
000437      Private Function Write(address As Byte, value As Byte) As Boolean                                                                                                                                                            1525: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0
                                                                                                                                                                                                                                         1526: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000438          Dim data As ListOfByte = New ListOfByte                                                                                                                                                                                  1527: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                         1528: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1529: 0x9400   PopLocalRef             data

000439          
000440          data.Add(value)                                                                                                                                                                                                          1530: 0x8801   PushLocalI32            value
                                                                                                                                                                                                                                         1531: 0x8C00   PushLocalRef            data
                                                                                                                                                                                                                                         1532: 0x00A3   ListAdd                 

000441          
000442          Return Write(address, data) // Write single byte                                                                                                                                                                         1533: 0x8800   PushLocalI32            address
                                                                                                                                                                                                                                         1534: 0x8C00   PushLocalRef            data
                                                                                                                                                                                                                                         1535: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1536: 0x1C02   BranchSubr              1539
                                                                                                                                                                                                                                         1537: 0x0092   ReturnValType           

000443      End Function // Write                                                                                                                                                                                                        1538: 0x0093   Return0                 

000444      
000445      
000446      Private Function Write(address As Byte, values As ListOfByte) As Boolean                                                                                                                                                     1539: 0x1811   EntryPoint              ValTypParams=1, RefTypParams=1

000447          values.InsertAt(0, address)                                                                                                                                                                                              1540: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         1541: 0x8800   PushLocalI32            address
                                                                                                                                                                                                                                         1542: 0x8C00   PushLocalRef            values
                                                                                                                                                                                                                                         1543: 0x00B2   ListInsertAt            

000448          
000449          Return gAccelerometer.Write(values, True)                                                                                                                                                                                1544: 0x8C00   PushLocalRef            values
                                                                                                                                                                                                                                         1545: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         1546: 0xA400   PushMemberRef           gAccelerometer
                                                                                                                                                                                                                                         1547: 0x00E1   I2cDeviceWrite          
                                                                                                                                                                                                                                         1548: 0x0092   ReturnValType           

000450      End Function // Write                                                                                                                                                                                                        1549: 0x0093   Return0                 

000451      
000452      
000453      'Reset the accelerometer. This may take some time.
000454      Public Function Reset() As Boolean                                                                                                                                                                                           1550: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         1551: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000455          Dim result As Boolean = Write(CTRL_REG2_REG, CTRL_REG2_RST)                                                                                                                                                              1552: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         1553: 0x8040   PushConstU10            64 (0x0040)
                                                                                                                                                                                                                                         1554: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1555: 0x541F   BranchSubrBack          1525
                                                                                                                                                                                                                                         1556: 0x9000   PopLocalI32             result

000456          While (Read(CTRL_REG2_REG) & CTRL_REG2_RST) = CTRL_REG2_RST                                                                                                                                                              1557: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         1558: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1559: 0x5448   BranchSubrBack          1488
                                                                                                                                                                                                                                         1560: 0x8040   PushConstU10            64 (0x0040)
                                                                                                                                                                                                                                         1561: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1562: 0x8040   PushConstU10            64 (0x0040)
                                                                                                                                                                                                                                         1563: 0x2404   BranchNE                1568

000457              Thread.Sleep(1000) // Wait for reset to end, if necessary                                                                                                                                                            1564: 0x83E8   PushConstU10            1000 (0x03E8)
                                                                                                                                                                                                                                         1565: 0x00D5   ThreadSleep             
                                                                                                                                                                                                                                         1566: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000458          End While                                                                                                                                                                                                                1567: 0x500B   BranchBack              1557

000459          Return result                                                                                                                                                                                                            1568: 0x8800   PushLocalI32            result
                                                                                                                                                                                                                                         1569: 0x0092   ReturnValType           

000460      End Function // Reset                                                                                                                                                                                                        1570: 0x0093   Return0                 

000461      
000462      
000463      'Returns list of length 2: maxTime, timeStep (both in ms)
000464      Private Function GetMaxTimeAndTimeStep(stepSize As String) As ListOfFloat                                                                                                                                                    1571: 0x1801   EntryPoint              ValTypParams=0, RefTypParams=1
                                                                                                                                                                                                                                         1572: 0xE0A2   AllocateStackSpace      ValTypeSize=5, RefTypeSize=2

000465          Dim frequency As Byte = Read(CTRL_REG1_REG) & CTRL_REG1_DR                                                                                                                                                               1573: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         1574: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1575: 0x5458   BranchSubrBack          1488
                                                                                                                                                                                                                                         1576: 0x8038   PushConstU10            56 (0x0038)
                                                                                                                                                                                                                                         1577: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1578: 0x9000   PopLocalI32             frequency

000466          Dim mode As Byte = Read(CTRL_REG2_REG) & CTRL_REG2_MODS                                                                                                                                                                  1579: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         1580: 0x000D   PushMe                  
                                                                                                                                                                                                                                         1581: 0x545E   BranchSubrBack          1488
                                                                                                                                                                                                                                         1582: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         1583: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         1584: 0x9001   PopLocalI32             mode

000467          Dim ms As Float
000468          Dim time As Float
000469          Dim offset As Integer
000470          Dim msTable As ListOfFloat = New ListOfFloat                                                                                                                                                                             1585: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         1586: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1587: 0x9401   PopLocalRef             msTable

000471          Dim result As ListOfFloat = New ListOfFloat                                                                                                                                                                              1588: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         1589: 0x0010   ClassNew                
                                                                                                                                                                                                                                         1590: 0x9402   PopLocalRef             result

000472          
000473          Select stepSize                                                                                                                                                                                                          1591: 0x8C00   PushLocalRef            stepSize
                                                                                                                                                                                                                                         1592: 0x0122   CaseComputed            
                                                                                                                                                                                                                                         1593: 0x0009                           CaseCommonClass=String
                                                                                                                                                                                                                                         1594: 0x0003                           NumberOfCaseEntries=3
                                                                                                                                                                                                                                         1595: 0x0192                           CaseElseBranch=1998
                                                                                                                                                                                                                                         1596: 0x0076                           LSH CaseValue=118
                                                                                                                                                                                                                                         1597: 0x0000                           MSH CaseValue=118
                                                                                                                                                                                                                                         1598: 0x0009                           CaseBranch=1605
                                                                                                                                                                                                                                         1599: 0x0079                           LSH CaseValue=121
                                                                                                                                                                                                                                         1600: 0x0000                           MSH CaseValue=121
                                                                                                                                                                                                                                         1601: 0x0090                           CaseBranch=1740
                                                                                                                                                                                                                                         1602: 0x007C                           LSH CaseValue=124
                                                                                                                                                                                                                                         1603: 0x0000                           MSH CaseValue=124
                                                                                                                                                                                                                                         1604: 0x0111                           CaseBranch=1869

000474              Case "short"
000475                  msTable.Add(0.625)                                                                                                                                                                                               1605: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1606: 0x0000                           
                                                                                                                                                                                                                                         1607: 0x3F20                           
                                                                                                                                                                                                                                         1608: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1609: 0x00A3   ListAdd                 

000476                  msTable.Add(0.625)                                                                                                                                                                                               1610: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1611: 0x0000                           
                                                                                                                                                                                                                                         1612: 0x3F20                           
                                                                                                                                                                                                                                         1613: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1614: 0x00A3   ListAdd                 

000477                  msTable.Add(1.25)                                                                                                                                                                                                1615: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1616: 0x0000                           
                                                                                                                                                                                                                                         1617: 0x3FA0                           
                                                                                                                                                                                                                                         1618: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1619: 0x00A3   ListAdd                 

000478                  msTable.Add(2.5)                                                                                                                                                                                                 1620: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1621: 0x0000                           
                                                                                                                                                                                                                                         1622: 0x4020                           
                                                                                                                                                                                                                                         1623: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1624: 0x00A3   ListAdd                 

000479                  msTable.Add(5.0)                                                                                                                                                                                                 1625: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1626: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1627: 0x00A3   ListAdd                 

000480                  msTable.Add(5.0)                                                                                                                                                                                                 1628: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1629: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1630: 0x00A3   ListAdd                 

000481                  msTable.Add(5.0)                                                                                                                                                                                                 1631: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1632: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1633: 0x00A3   ListAdd                 

000482                  msTable.Add(5.0)                                                                                                                                                                                                 1634: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1635: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1636: 0x00A3   ListAdd                 

000483                  
000484                  msTable.Add(0.625)                                                                                                                                                                                               1637: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1638: 0x0000                           
                                                                                                                                                                                                                                         1639: 0x3F20                           
                                                                                                                                                                                                                                         1640: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1641: 0x00A3   ListAdd                 

000485                  msTable.Add(0.625)                                                                                                                                                                                               1642: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1643: 0x0000                           
                                                                                                                                                                                                                                         1644: 0x3F20                           
                                                                                                                                                                                                                                         1645: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1646: 0x00A3   ListAdd                 

000486                  msTable.Add(1.25)                                                                                                                                                                                                1647: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1648: 0x0000                           
                                                                                                                                                                                                                                         1649: 0x3FA0                           
                                                                                                                                                                                                                                         1650: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1651: 0x00A3   ListAdd                 

000487                  msTable.Add(2.5)                                                                                                                                                                                                 1652: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1653: 0x0000                           
                                                                                                                                                                                                                                         1654: 0x4020                           
                                                                                                                                                                                                                                         1655: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1656: 0x00A3   ListAdd                 

000488                  msTable.Add(5.0)                                                                                                                                                                                                 1657: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1658: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1659: 0x00A3   ListAdd                 

000489                  msTable.Add(20.0)                                                                                                                                                                                                1660: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         1661: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1662: 0x00A3   ListAdd                 

000490                  msTable.Add(20.0)                                                                                                                                                                                                1663: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         1664: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1665: 0x00A3   ListAdd                 

000491                  msTable.Add(20.0)                                                                                                                                                                                                1666: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         1667: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1668: 0x00A3   ListAdd                 

000492                  
000493                  msTable.Add(0.625)                                                                                                                                                                                               1669: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1670: 0x0000                           
                                                                                                                                                                                                                                         1671: 0x3F20                           
                                                                                                                                                                                                                                         1672: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1673: 0x00A3   ListAdd                 

000494                  msTable.Add(0.625)                                                                                                                                                                                               1674: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1675: 0x0000                           
                                                                                                                                                                                                                                         1676: 0x3F20                           
                                                                                                                                                                                                                                         1677: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1678: 0x00A3   ListAdd                 

000495                  msTable.Add(0.625)                                                                                                                                                                                               1679: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1680: 0x0000                           
                                                                                                                                                                                                                                         1681: 0x3F20                           
                                                                                                                                                                                                                                         1682: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1683: 0x00A3   ListAdd                 

000496                  msTable.Add(0.625)                                                                                                                                                                                               1684: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1685: 0x0000                           
                                                                                                                                                                                                                                         1686: 0x3F20                           
                                                                                                                                                                                                                                         1687: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1688: 0x00A3   ListAdd                 

000497                  msTable.Add(0.625)                                                                                                                                                                                               1689: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1690: 0x0000                           
                                                                                                                                                                                                                                         1691: 0x3F20                           
                                                                                                                                                                                                                                         1692: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1693: 0x00A3   ListAdd                 

000498                  msTable.Add(0.625)                                                                                                                                                                                               1694: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1695: 0x0000                           
                                                                                                                                                                                                                                         1696: 0x3F20                           
                                                                                                                                                                                                                                         1697: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1698: 0x00A3   ListAdd                 

000499                  msTable.Add(0.625)                                                                                                                                                                                               1699: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1700: 0x0000                           
                                                                                                                                                                                                                                         1701: 0x3F20                           
                                                                                                                                                                                                                                         1702: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1703: 0x00A3   ListAdd                 

000500                  msTable.Add(0.625)                                                                                                                                                                                               1704: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1705: 0x0000                           
                                                                                                                                                                                                                                         1706: 0x3F20                           
                                                                                                                                                                                                                                         1707: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1708: 0x00A3   ListAdd                 

000501                  
000502                  msTable.Add(0.625)                                                                                                                                                                                               1709: 0x0110   PushConstI32            1059061760 (0x3F200000)
                                                                                                                                                                                                                                         1710: 0x0000                           
                                                                                                                                                                                                                                         1711: 0x3F20                           
                                                                                                                                                                                                                                         1712: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1713: 0x00A3   ListAdd                 

000503                  msTable.Add(1.25)                                                                                                                                                                                                1714: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1715: 0x0000                           
                                                                                                                                                                                                                                         1716: 0x3FA0                           
                                                                                                                                                                                                                                         1717: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1718: 0x00A3   ListAdd                 

000504                  msTable.Add(2.5)                                                                                                                                                                                                 1719: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1720: 0x0000                           
                                                                                                                                                                                                                                         1721: 0x4020                           
                                                                                                                                                                                                                                         1722: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1723: 0x00A3   ListAdd                 

000505                  msTable.Add(5.0)                                                                                                                                                                                                 1724: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1725: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1726: 0x00A3   ListAdd                 

000506                  msTable.Add(10.0)                                                                                                                                                                                                1727: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1728: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1729: 0x00A3   ListAdd                 

000507                  msTable.Add(40.0)                                                                                                                                                                                                1730: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         1731: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1732: 0x00A3   ListAdd                 

000508                  msTable.Add(40.0)                                                                                                                                                                                                1733: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         1734: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1735: 0x00A3   ListAdd                 

000509                  msTable.Add(40.0)                                                                                                                                                                                                1736: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         1737: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1738: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         1739: 0x4176   Branch                  2114
000510              Case "medium"                                                                                                                                                                                                        

000511                  msTable.Add(1.25)                                                                                                                                                                                                1740: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1741: 0x0000                           
                                                                                                                                                                                                                                         1742: 0x3FA0                           
                                                                                                                                                                                                                                         1743: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1744: 0x00A3   ListAdd                 

000512                  msTable.Add(1.25)                                                                                                                                                                                                1745: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1746: 0x0000                           
                                                                                                                                                                                                                                         1747: 0x3FA0                           
                                                                                                                                                                                                                                         1748: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1749: 0x00A3   ListAdd                 

000513                  msTable.Add(2.5)                                                                                                                                                                                                 1750: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1751: 0x0000                           
                                                                                                                                                                                                                                         1752: 0x4020                           
                                                                                                                                                                                                                                         1753: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1754: 0x00A3   ListAdd                 

000514                  msTable.Add(5.0)                                                                                                                                                                                                 1755: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1756: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1757: 0x00A3   ListAdd                 

000515                  msTable.Add(10.0)                                                                                                                                                                                                1758: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1759: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1760: 0x00A3   ListAdd                 

000516                  msTable.Add(10.0)                                                                                                                                                                                                1761: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1762: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1763: 0x00A3   ListAdd                 

000517                  msTable.Add(10.0)                                                                                                                                                                                                1764: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1765: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1766: 0x00A3   ListAdd                 

000518                  msTable.Add(10.0)                                                                                                                                                                                                1767: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1768: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1769: 0x00A3   ListAdd                 

000519                  
000520                  msTable.Add(1.25)                                                                                                                                                                                                1770: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1771: 0x0000                           
                                                                                                                                                                                                                                         1772: 0x3FA0                           
                                                                                                                                                                                                                                         1773: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1774: 0x00A3   ListAdd                 

000521                  msTable.Add(1.25)                                                                                                                                                                                                1775: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1776: 0x0000                           
                                                                                                                                                                                                                                         1777: 0x3FA0                           
                                                                                                                                                                                                                                         1778: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1779: 0x00A3   ListAdd                 

000522                  msTable.Add(2.5)                                                                                                                                                                                                 1780: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1781: 0x0000                           
                                                                                                                                                                                                                                         1782: 0x4020                           
                                                                                                                                                                                                                                         1783: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1784: 0x00A3   ListAdd                 

000523                  msTable.Add(5.0)                                                                                                                                                                                                 1785: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1786: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1787: 0x00A3   ListAdd                 

000524                  msTable.Add(10.0)                                                                                                                                                                                                1788: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1789: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1790: 0x00A3   ListAdd                 

000525                  msTable.Add(40.0)                                                                                                                                                                                                1791: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         1792: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1793: 0x00A3   ListAdd                 

000526                  msTable.Add(40.0)                                                                                                                                                                                                1794: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         1795: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1796: 0x00A3   ListAdd                 

000527                  msTable.Add(40.0)                                                                                                                                                                                                1797: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         1798: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1799: 0x00A3   ListAdd                 

000528                  
000529                  msTable.Add(1.25)                                                                                                                                                                                                1800: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1801: 0x0000                           
                                                                                                                                                                                                                                         1802: 0x3FA0                           
                                                                                                                                                                                                                                         1803: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1804: 0x00A3   ListAdd                 

000530                  msTable.Add(1.25)                                                                                                                                                                                                1805: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1806: 0x0000                           
                                                                                                                                                                                                                                         1807: 0x3FA0                           
                                                                                                                                                                                                                                         1808: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1809: 0x00A3   ListAdd                 

000531                  msTable.Add(1.25)                                                                                                                                                                                                1810: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1811: 0x0000                           
                                                                                                                                                                                                                                         1812: 0x3FA0                           
                                                                                                                                                                                                                                         1813: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1814: 0x00A3   ListAdd                 

000532                  msTable.Add(1.25)                                                                                                                                                                                                1815: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1816: 0x0000                           
                                                                                                                                                                                                                                         1817: 0x3FA0                           
                                                                                                                                                                                                                                         1818: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1819: 0x00A3   ListAdd                 

000533                  msTable.Add(1.25)                                                                                                                                                                                                1820: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1821: 0x0000                           
                                                                                                                                                                                                                                         1822: 0x3FA0                           
                                                                                                                                                                                                                                         1823: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1824: 0x00A3   ListAdd                 

000534                  msTable.Add(1.25)                                                                                                                                                                                                1825: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1826: 0x0000                           
                                                                                                                                                                                                                                         1827: 0x3FA0                           
                                                                                                                                                                                                                                         1828: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1829: 0x00A3   ListAdd                 

000535                  msTable.Add(1.25)                                                                                                                                                                                                1830: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1831: 0x0000                           
                                                                                                                                                                                                                                         1832: 0x3FA0                           
                                                                                                                                                                                                                                         1833: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1834: 0x00A3   ListAdd                 

000536                  msTable.Add(1.25)                                                                                                                                                                                                1835: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1836: 0x0000                           
                                                                                                                                                                                                                                         1837: 0x3FA0                           
                                                                                                                                                                                                                                         1838: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1839: 0x00A3   ListAdd                 

000537                  
000538                  msTable.Add(1.25)                                                                                                                                                                                                1840: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1841: 0x0000                           
                                                                                                                                                                                                                                         1842: 0x3FA0                           
                                                                                                                                                                                                                                         1843: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1844: 0x00A3   ListAdd                 

000539                  msTable.Add(2.5)                                                                                                                                                                                                 1845: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1846: 0x0000                           
                                                                                                                                                                                                                                         1847: 0x4020                           
                                                                                                                                                                                                                                         1848: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1849: 0x00A3   ListAdd                 

000540                  msTable.Add(5.0)                                                                                                                                                                                                 1850: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1851: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1852: 0x00A3   ListAdd                 

000541                  msTable.Add(10.0)                                                                                                                                                                                                1853: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1854: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1855: 0x00A3   ListAdd                 

000542                  msTable.Add(20.0)                                                                                                                                                                                                1856: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         1857: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1858: 0x00A3   ListAdd                 

000543                  msTable.Add(80.0)                                                                                                                                                                                                1859: 0xEA50   PushConstFlt            80.0
                                                                                                                                                                                                                                         1860: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1861: 0x00A3   ListAdd                 

000544                  msTable.Add(80.0)                                                                                                                                                                                                1862: 0xEA50   PushConstFlt            80.0
                                                                                                                                                                                                                                         1863: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1864: 0x00A3   ListAdd                 

000545                  msTable.Add(80.0)                                                                                                                                                                                                1865: 0xEA50   PushConstFlt            80.0
                                                                                                                                                                                                                                         1866: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1867: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         1868: 0x40F5   Branch                  2114
000546              Case "long"                                                                                                                                                                                                          

000547                  msTable.Add(1.25)                                                                                                                                                                                                1869: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1870: 0x0000                           
                                                                                                                                                                                                                                         1871: 0x3FA0                           
                                                                                                                                                                                                                                         1872: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1873: 0x00A3   ListAdd                 

000548                  msTable.Add(2.5)                                                                                                                                                                                                 1874: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1875: 0x0000                           
                                                                                                                                                                                                                                         1876: 0x4020                           
                                                                                                                                                                                                                                         1877: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1878: 0x00A3   ListAdd                 

000549                  msTable.Add(5.0)                                                                                                                                                                                                 1879: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1880: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1881: 0x00A3   ListAdd                 

000550                  msTable.Add(10.0)                                                                                                                                                                                                1882: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1883: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1884: 0x00A3   ListAdd                 

000551                  msTable.Add(20.0)                                                                                                                                                                                                1885: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         1886: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1887: 0x00A3   ListAdd                 

000552                  msTable.Add(20.0)                                                                                                                                                                                                1888: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         1889: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1890: 0x00A3   ListAdd                 

000553                  msTable.Add(20.0)                                                                                                                                                                                                1891: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         1892: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1893: 0x00A3   ListAdd                 

000554                  msTable.Add(20.0)                                                                                                                                                                                                1894: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         1895: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1896: 0x00A3   ListAdd                 

000555                  
000556                  msTable.Add(1.25)                                                                                                                                                                                                1897: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1898: 0x0000                           
                                                                                                                                                                                                                                         1899: 0x3FA0                           
                                                                                                                                                                                                                                         1900: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1901: 0x00A3   ListAdd                 

000557                  msTable.Add(2.5)                                                                                                                                                                                                 1902: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1903: 0x0000                           
                                                                                                                                                                                                                                         1904: 0x4020                           
                                                                                                                                                                                                                                         1905: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1906: 0x00A3   ListAdd                 

000558                  msTable.Add(5.0)                                                                                                                                                                                                 1907: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1908: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1909: 0x00A3   ListAdd                 

000559                  msTable.Add(10.0)                                                                                                                                                                                                1910: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1911: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1912: 0x00A3   ListAdd                 

000560                  msTable.Add(20.0)                                                                                                                                                                                                1913: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         1914: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1915: 0x00A3   ListAdd                 

000561                  msTable.Add(80.0)                                                                                                                                                                                                1916: 0xEA50   PushConstFlt            80.0
                                                                                                                                                                                                                                         1917: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1918: 0x00A3   ListAdd                 

000562                  msTable.Add(80.0)                                                                                                                                                                                                1919: 0xEA50   PushConstFlt            80.0
                                                                                                                                                                                                                                         1920: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1921: 0x00A3   ListAdd                 

000563                  msTable.Add(80.0)                                                                                                                                                                                                1922: 0xEA50   PushConstFlt            80.0
                                                                                                                                                                                                                                         1923: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1924: 0x00A3   ListAdd                 

000564                  
000565                  msTable.Add(1.25)                                                                                                                                                                                                1925: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1926: 0x0000                           
                                                                                                                                                                                                                                         1927: 0x3FA0                           
                                                                                                                                                                                                                                         1928: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1929: 0x00A3   ListAdd                 

000566                  msTable.Add(2.5)                                                                                                                                                                                                 1930: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1931: 0x0000                           
                                                                                                                                                                                                                                         1932: 0x4020                           
                                                                                                                                                                                                                                         1933: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1934: 0x00A3   ListAdd                 

000567                  msTable.Add(2.5)                                                                                                                                                                                                 1935: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1936: 0x0000                           
                                                                                                                                                                                                                                         1937: 0x4020                           
                                                                                                                                                                                                                                         1938: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1939: 0x00A3   ListAdd                 

000568                  msTable.Add(2.5)                                                                                                                                                                                                 1940: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1941: 0x0000                           
                                                                                                                                                                                                                                         1942: 0x4020                           
                                                                                                                                                                                                                                         1943: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1944: 0x00A3   ListAdd                 

000569                  msTable.Add(2.5)                                                                                                                                                                                                 1945: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1946: 0x0000                           
                                                                                                                                                                                                                                         1947: 0x4020                           
                                                                                                                                                                                                                                         1948: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1949: 0x00A3   ListAdd                 

000570                  msTable.Add(2.5)                                                                                                                                                                                                 1950: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1951: 0x0000                           
                                                                                                                                                                                                                                         1952: 0x4020                           
                                                                                                                                                                                                                                         1953: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1954: 0x00A3   ListAdd                 

000571                  msTable.Add(2.5)                                                                                                                                                                                                 1955: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1956: 0x0000                           
                                                                                                                                                                                                                                         1957: 0x4020                           
                                                                                                                                                                                                                                         1958: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1959: 0x00A3   ListAdd                 

000572                  msTable.Add(2.5)                                                                                                                                                                                                 1960: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1961: 0x0000                           
                                                                                                                                                                                                                                         1962: 0x4020                           
                                                                                                                                                                                                                                         1963: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1964: 0x00A3   ListAdd                 

000573                  
000574                  msTable.Add(1.25)                                                                                                                                                                                                1965: 0x0110   PushConstI32            1067450368 (0x3FA00000)
                                                                                                                                                                                                                                         1966: 0x0000                           
                                                                                                                                                                                                                                         1967: 0x3FA0                           
                                                                                                                                                                                                                                         1968: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1969: 0x00A3   ListAdd                 

000575                  msTable.Add(2.5)                                                                                                                                                                                                 1970: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1971: 0x0000                           
                                                                                                                                                                                                                                         1972: 0x4020                           
                                                                                                                                                                                                                                         1973: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1974: 0x00A3   ListAdd                 

000576                  msTable.Add(5.0)                                                                                                                                                                                                 1975: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         1976: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1977: 0x00A3   ListAdd                 

000577                  msTable.Add(10.0)                                                                                                                                                                                                1978: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         1979: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1980: 0x00A3   ListAdd                 

000578                  msTable.Add(20.0)                                                                                                                                                                                                1981: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         1982: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1983: 0x00A3   ListAdd                 

000579                  msTable.Add(80.0)                                                                                                                                                                                                1984: 0xEA50   PushConstFlt            80.0
                                                                                                                                                                                                                                         1985: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1986: 0x00A3   ListAdd                 

000580                  msTable.Add(160.0)                                                                                                                                                                                               1987: 0x0110   PushConstI32            1126170624 (0x43200000)
                                                                                                                                                                                                                                         1988: 0x0000                           
                                                                                                                                                                                                                                         1989: 0x4320                           
                                                                                                                                                                                                                                         1990: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1991: 0x00A3   ListAdd                 

000581                  msTable.Add(160.0)                                                                                                                                                                                               1992: 0x0110   PushConstI32            1126170624 (0x43200000)
                                                                                                                                                                                                                                         1993: 0x0000                           
                                                                                                                                                                                                                                         1994: 0x4320                           
                                                                                                                                                                                                                                         1995: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         1996: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         1997: 0x4074   Branch                  2114
000582              Case Else 'xlong                                                                                                                                                                                                     

000583                  msTable.Add(2.5)                                                                                                                                                                                                 1998: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         1999: 0x0000                           
                                                                                                                                                                                                                                         2000: 0x4020                           
                                                                                                                                                                                                                                         2001: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2002: 0x00A3   ListAdd                 

000584                  msTable.Add(5.0)                                                                                                                                                                                                 2003: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2004: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2005: 0x00A3   ListAdd                 

000585                  msTable.Add(10.0)                                                                                                                                                                                                2006: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         2007: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2008: 0x00A3   ListAdd                 

000586                  msTable.Add(20.0)                                                                                                                                                                                                2009: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         2010: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2011: 0x00A3   ListAdd                 

000587                  msTable.Add(40.0)                                                                                                                                                                                                2012: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         2013: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2014: 0x00A3   ListAdd                 

000588                  msTable.Add(40.0)                                                                                                                                                                                                2015: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         2016: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2017: 0x00A3   ListAdd                 

000589                  msTable.Add(40.0)                                                                                                                                                                                                2018: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         2019: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2020: 0x00A3   ListAdd                 

000590                  msTable.Add(40.0)                                                                                                                                                                                                2021: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         2022: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2023: 0x00A3   ListAdd                 

000591                  
000592                  msTable.Add(2.5)                                                                                                                                                                                                 2024: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         2025: 0x0000                           
                                                                                                                                                                                                                                         2026: 0x4020                           
                                                                                                                                                                                                                                         2027: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2028: 0x00A3   ListAdd                 

000593                  msTable.Add(5.0)                                                                                                                                                                                                 2029: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2030: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2031: 0x00A3   ListAdd                 

000594                  msTable.Add(10.0)                                                                                                                                                                                                2032: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         2033: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2034: 0x00A3   ListAdd                 

000595                  msTable.Add(20.0)                                                                                                                                                                                                2035: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         2036: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2037: 0x00A3   ListAdd                 

000596                  msTable.Add(40.0)                                                                                                                                                                                                2038: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         2039: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2040: 0x00A3   ListAdd                 

000597                  msTable.Add(160.0)                                                                                                                                                                                               2041: 0x0110   PushConstI32            1126170624 (0x43200000)
                                                                                                                                                                                                                                         2042: 0x0000                           
                                                                                                                                                                                                                                         2043: 0x4320                           
                                                                                                                                                                                                                                         2044: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2045: 0x00A3   ListAdd                 

000598                  msTable.Add(160.0)                                                                                                                                                                                               2046: 0x0110   PushConstI32            1126170624 (0x43200000)
                                                                                                                                                                                                                                         2047: 0x0000                           
                                                                                                                                                                                                                                         2048: 0x4320                           
                                                                                                                                                                                                                                         2049: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2050: 0x00A3   ListAdd                 

000599                  msTable.Add(160.0)                                                                                                                                                                                               2051: 0x0110   PushConstI32            1126170624 (0x43200000)
                                                                                                                                                                                                                                         2052: 0x0000                           
                                                                                                                                                                                                                                         2053: 0x4320                           
                                                                                                                                                                                                                                         2054: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2055: 0x00A3   ListAdd                 

000600                  
000601                  msTable.Add(2.5)                                                                                                                                                                                                 2056: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         2057: 0x0000                           
                                                                                                                                                                                                                                         2058: 0x4020                           
                                                                                                                                                                                                                                         2059: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2060: 0x00A3   ListAdd                 

000602                  msTable.Add(5.0)                                                                                                                                                                                                 2061: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2062: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2063: 0x00A3   ListAdd                 

000603                  msTable.Add(5.0)                                                                                                                                                                                                 2064: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2065: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2066: 0x00A3   ListAdd                 

000604                  msTable.Add(5.0)                                                                                                                                                                                                 2067: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2068: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2069: 0x00A3   ListAdd                 

000605                  msTable.Add(5.0)                                                                                                                                                                                                 2070: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2071: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2072: 0x00A3   ListAdd                 

000606                  msTable.Add(5.0)                                                                                                                                                                                                 2073: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2074: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2075: 0x00A3   ListAdd                 

000607                  msTable.Add(5.0)                                                                                                                                                                                                 2076: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2077: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2078: 0x00A3   ListAdd                 

000608                  msTable.Add(5.0)                                                                                                                                                                                                 2079: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2080: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2081: 0x00A3   ListAdd                 

000609                  
000610                  msTable.Add(2.5)                                                                                                                                                                                                 2082: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                         2083: 0x0000                           
                                                                                                                                                                                                                                         2084: 0x4020                           
                                                                                                                                                                                                                                         2085: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2086: 0x00A3   ListAdd                 

000611                  msTable.Add(5.0)                                                                                                                                                                                                 2087: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                         2088: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2089: 0x00A3   ListAdd                 

000612                  msTable.Add(10.0)                                                                                                                                                                                                2090: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                         2091: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2092: 0x00A3   ListAdd                 

000613                  msTable.Add(20.0)                                                                                                                                                                                                2093: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                         2094: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2095: 0x00A3   ListAdd                 

000614                  msTable.Add(40.0)                                                                                                                                                                                                2096: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                         2097: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2098: 0x00A3   ListAdd                 

000615                  msTable.Add(160.0)                                                                                                                                                                                               2099: 0x0110   PushConstI32            1126170624 (0x43200000)
                                                                                                                                                                                                                                         2100: 0x0000                           
                                                                                                                                                                                                                                         2101: 0x4320                           
                                                                                                                                                                                                                                         2102: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2103: 0x00A3   ListAdd                 

000616                  msTable.Add(320.0)                                                                                                                                                                                               2104: 0x0110   PushConstI32            1134559232 (0x43A00000)
                                                                                                                                                                                                                                         2105: 0x0000                           
                                                                                                                                                                                                                                         2106: 0x43A0                           
                                                                                                                                                                                                                                         2107: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2108: 0x00A3   ListAdd                 

000617                  msTable.Add(320.0)                                                                                                                                                                                               2109: 0x0110   PushConstI32            1134559232 (0x43A00000)
                                                                                                                                                                                                                                         2110: 0x0000                           
                                                                                                                                                                                                                                         2111: 0x43A0                           
                                                                                                                                                                                                                                         2112: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2113: 0x00A3   ListAdd                 

000618          End Select
000619          
000620          Select mode                                                                                                                                                                                                              2114: 0x8801   PushLocalI32            mode
                                                                                                                                                                                                                                         2115: 0x0122   CaseComputed            
                                                                                                                                                                                                                                         2116: 0x0002                           CaseCommonClass=Byte
                                                                                                                                                                                                                                         2117: 0x0004                           NumberOfCaseEntries=4
                                                                                                                                                                                                                                         2118: 0x0012                           CaseElseBranch=2137
                                                                                                                                                                                                                                         2119: 0x0000                           CaseValue=0
                                                                                                                                                                                                                                         2120: 0x0008                           CaseBranch=2127
                                                                                                                                                                                                                                         2121: 0x0001                           CaseValue=1
                                                                                                                                                                                                                                         2122: 0x000A                           CaseBranch=2129
                                                                                                                                                                                                                                         2123: 0x0002                           CaseValue=2
                                                                                                                                                                                                                                         2124: 0x000D                           CaseBranch=2132
                                                                                                                                                                                                                                         2125: 0x0003                           CaseValue=3
                                                                                                                                                                                                                                         2126: 0x0010                           CaseBranch=2135

000621              Case MMA8652_MODS.NORMAL
000622                  offset = 0                                                                                                                                                                                                       2127: 0x6004   Const0toLocalI32        offset

                                                                                                                                                                                                                                         2128: 0x4008   Branch                  2137
000623              Case MMA8652_MODS.LOW_POWER_LOW_NOISE                                                                                                                                                                                

000624                  offset = 8                                                                                                                                                                                                       2129: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         2130: 0x9004   PopLocalI32             offset

                                                                                                                                                                                                                                         2131: 0x4005   Branch                  2137
000625              Case MMA8652_MODS.HIGH_RES                                                                                                                                                                                           

000626                  offset = 16                                                                                                                                                                                                      2132: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         2133: 0x9004   PopLocalI32             offset

                                                                                                                                                                                                                                         2134: 0x4002   Branch                  2137
000627              Case MMA8652_MODS.LOW_POWER                                                                                                                                                                                          

000628                  offset = 24                                                                                                                                                                                                      2135: 0x8018   PushConstU10            24 (0x0018)
                                                                                                                                                                                                                                         2136: 0x9004   PopLocalI32             offset

000629          End Select
000630          
000631          Select frequency                                                                                                                                                                                                         2137: 0x8800   PushLocalI32            frequency
                                                                                                                                                                                                                                         2138: 0x0122   CaseComputed            
                                                                                                                                                                                                                                         2139: 0x0002                           CaseCommonClass=Byte
                                                                                                                                                                                                                                         2140: 0x0008                           NumberOfCaseEntries=8
                                                                                                                                                                                                                                         2141: 0x0044                           CaseElseBranch=2210
                                                                                                                                                                                                                                         2142: 0x0000                           CaseValue=0
                                                                                                                                                                                                                                         2143: 0x0010                           CaseBranch=2158
                                                                                                                                                                                                                                         2144: 0x0008                           CaseValue=8
                                                                                                                                                                                                                                         2145: 0x0015                           CaseBranch=2163
                                                                                                                                                                                                                                         2146: 0x0010                           CaseValue=16
                                                                                                                                                                                                                                         2147: 0x001B                           CaseBranch=2169
                                                                                                                                                                                                                                         2148: 0x0018                           CaseValue=24
                                                                                                                                                                                                                                         2149: 0x0022                           CaseBranch=2176
                                                                                                                                                                                                                                         2150: 0x0020                           CaseValue=32
                                                                                                                                                                                                                                         2151: 0x0029                           CaseBranch=2183
                                                                                                                                                                                                                                         2152: 0x0028                           CaseValue=40
                                                                                                                                                                                                                                         2153: 0x0030                           CaseBranch=2190
                                                                                                                                                                                                                                         2154: 0x0030                           CaseValue=48
                                                                                                                                                                                                                                         2155: 0x0037                           CaseBranch=2197
                                                                                                                                                                                                                                         2156: 0x0038                           CaseValue=56
                                                                                                                                                                                                                                         2157: 0x003E                           CaseBranch=2204

000632              Case MMA8652_ACTIVE_ODR._800HZ
000633                  ms = msTable.Item(offset)                                                                                                                                                                                        2158: 0x8804   PushLocalI32            offset
                                                                                                                                                                                                                                         2159: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2160: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2161: 0x9002   PopLocalI32             ms

                                                                                                                                                                                                                                         2162: 0x402F   Branch                  2210
000634              Case MMA8652_ACTIVE_ODR._400HZ                                                                                                                                                                                       

000635                  ms = msTable.Item(offset + 1)                                                                                                                                                                                    2163: 0x8804   PushLocalI32            offset
                                                                                                                                                                                                                                         2164: 0x0028   IntInc                  
                                                                                                                                                                                                                                         2165: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2166: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2167: 0x9002   PopLocalI32             ms

                                                                                                                                                                                                                                         2168: 0x4029   Branch                  2210
000636              Case MMA8652_ACTIVE_ODR._200HZ                                                                                                                                                                                       

000637                  ms = msTable.Item(offset + 2)                                                                                                                                                                                    2169: 0x8804   PushLocalI32            offset
                                                                                                                                                                                                                                         2170: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         2171: 0x001E   IntAdd                  
                                                                                                                                                                                                                                         2172: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2173: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2174: 0x9002   PopLocalI32             ms

                                                                                                                                                                                                                                         2175: 0x4022   Branch                  2210
000638              Case MMA8652_ACTIVE_ODR._100HZ                                                                                                                                                                                       

000639                  ms = msTable.Item(offset + 3)                                                                                                                                                                                    2176: 0x8804   PushLocalI32            offset
                                                                                                                                                                                                                                         2177: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         2178: 0x001E   IntAdd                  
                                                                                                                                                                                                                                         2179: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2180: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2181: 0x9002   PopLocalI32             ms

                                                                                                                                                                                                                                         2182: 0x401B   Branch                  2210
000640              Case MMA8652_ACTIVE_ODR._50HZ                                                                                                                                                                                        

000641                  ms = msTable.Item(offset + 4)                                                                                                                                                                                    2183: 0x8804   PushLocalI32            offset
                                                                                                                                                                                                                                         2184: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         2185: 0x001E   IntAdd                  
                                                                                                                                                                                                                                         2186: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2187: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2188: 0x9002   PopLocalI32             ms

                                                                                                                                                                                                                                         2189: 0x4014   Branch                  2210
000642              Case MMA8652_ACTIVE_ODR._12_5HZ                                                                                                                                                                                      

000643                  ms = msTable.Item(offset + 5)                                                                                                                                                                                    2190: 0x8804   PushLocalI32            offset
                                                                                                                                                                                                                                         2191: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                                                                                         2192: 0x001E   IntAdd                  
                                                                                                                                                                                                                                         2193: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2194: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2195: 0x9002   PopLocalI32             ms

                                                                                                                                                                                                                                         2196: 0x400D   Branch                  2210
000644              Case MMA8652_ACTIVE_ODR._6_25HZ                                                                                                                                                                                      

000645                  ms = msTable.Item(offset + 6)                                                                                                                                                                                    2197: 0x8804   PushLocalI32            offset
                                                                                                                                                                                                                                         2198: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                         2199: 0x001E   IntAdd                  
                                                                                                                                                                                                                                         2200: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2201: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2202: 0x9002   PopLocalI32             ms

                                                                                                                                                                                                                                         2203: 0x4006   Branch                  2210
000646              Case MMA8652_ACTIVE_ODR._1_56HZ                                                                                                                                                                                      

000647                  ms = msTable.Item(offset + 7)                                                                                                                                                                                    2204: 0x8804   PushLocalI32            offset
                                                                                                                                                                                                                                         2205: 0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                                                                                         2206: 0x001E   IntAdd                  
                                                                                                                                                                                                                                         2207: 0x8C01   PushLocalRef            msTable
                                                                                                                                                                                                                                         2208: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2209: 0x9002   PopLocalI32             ms

000648          End Select
000649          
000650          time = ms * 255                                                                                                                                                                                                          2210: 0x8802   PushLocalI32            ms
                                                                                                                                                                                                                                         2211: 0x80FF   PushConstU10            255 (0x00FF)
                                                                                                                                                                                                                                         2212: 0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                         2213: 0x003C   FltMul                  
                                                                                                                                                                                                                                         2214: 0x9003   PopLocalI32             time

000651          
000652          result.Add(time.Floor)                                                                                                                                                                                                   2215: 0x8803   PushLocalI32            time
                                                                                                                                                                                                                                         2216: 0x004B   FltFloor                
                                                                                                                                                                                                                                         2217: 0x8C02   PushLocalRef            result
                                                                                                                                                                                                                                         2218: 0x00A3   ListAdd                 

000653          result.Add(ms)                                                                                                                                                                                                           2219: 0x8802   PushLocalI32            ms
                                                                                                                                                                                                                                         2220: 0x8C02   PushLocalRef            result
                                                                                                                                                                                                                                         2221: 0x00A3   ListAdd                 

000654          Return result                                                                                                                                                                                                            2222: 0x8C02   PushLocalRef            result
                                                                                                                                                                                                                                         2223: 0x0095   ReturnRefType           

000655      End Function // GetMaxTimeAndTimeStep                                                                                                                                                                                        2224: 0x0096   ReturnNothing           

000656      
000657      
000658      Private Function FloatToByteRepresentation(number As Float, resolution As Float, lowThreshold As Float) As Byte                                                                                                              2225: 0x1830   EntryPoint              ValTypParams=3, RefTypParams=0

000659          Return ((number - lowThreshold) / resolution).ToByte                                                                                                                                                                     2226: 0x8800   PushLocalI32            number
                                                                                                                                                                                                                                         2227: 0x8802   PushLocalI32            lowThreshold
                                                                                                                                                                                                                                         2228: 0x003F   FltSub                  
                                                                                                                                                                                                                                         2229: 0x8801   PushLocalI32            resolution
                                                                                                                                                                                                                                         2230: 0x003B   FltDiv                  
                                                                                                                                                                                                                                         2231: 0x007B   CvtFltToInt             
                                                                                                                                                                                                                                         2232: 0x007D   CvtIntToByt             
                                                                                                                                                                                                                                         2233: 0x0092   ReturnValType           

000660      End Function // FloatToByteRepresentation                                                                                                                                                                                    2234: 0x0093   Return0                 

000661      
000662      
000663      'Private Function ByteToFloatRepresentation(number As Byte, resolution As Float, lowThreshold As Float) As Float
000664      '    Return number * resolution + lowThreshold
000665      'End Function // ByteToFloatRepresentation
000666      
000667      
000668      Public Function Standby() As Boolean                                                                                                                                                                                         2235: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000669          'set active bit to 0 put accel in standby mode
000670          Return Write(CTRL_REG1_REG, Read(CTRL_REG1_REG) & ~CTRL_REG1_ACTIVE)                                                                                                                                                     2236: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         2237: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         2238: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2239: 0x56F0   BranchSubrBack          1488
                                                                                                                                                                                                                                         2240: 0x80FE   PushConstU10            254 (0x00FE)
                                                                                                                                                                                                                                         2241: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2242: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2243: 0x56CF   BranchSubrBack          1525
                                                                                                                                                                                                                                         2244: 0x0092   ReturnValType           

000671      End Function // Standby                                                                                                                                                                                                      2245: 0x0093   Return0                 

000672      
000673      
000674      Public Function Activate() As Boolean                                                                                                                                                                                        2246: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000675          'set active bit to put accel in active mode
000676          Return Write(CTRL_REG1_REG, Read(CTRL_REG1_REG) | CTRL_REG1_ACTIVE)                                                                                                                                                      2247: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         2248: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         2249: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2250: 0x56FB   BranchSubrBack          1488
                                                                                                                                                                                                                                         2251: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         2252: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2253: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2254: 0x56DA   BranchSubrBack          1525
                                                                                                                                                                                                                                         2255: 0x0092   ReturnValType           

000677      End Function // Activate                                                                                                                                                                                                     2256: 0x0093   Return0                 

000678      
000679      
000680      Private Function GetActiveModeFrequency() As Byte                                                                                                                                                                            2257: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000681          Return Read(CTRL_REG1_REG) & CTRL_REG1_DR                                                                                                                                                                                2258: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         2259: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2260: 0x5705   BranchSubrBack          1488
                                                                                                                                                                                                                                         2261: 0x8038   PushConstU10            56 (0x0038)
                                                                                                                                                                                                                                         2262: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2263: 0x0092   ReturnValType           

000682      End Function // GetActiveModeFrequency                                                                                                                                                                                       2264: 0x0093   Return0                 

000683      
000684      
000685      Public Function DisableSleepMode() As Boolean                                                                                                                                                                                2265: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000686          Return EnableSleepMode(False, False)                                                                                                                                                                                     2266: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2267: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2268: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2269: 0x1C02   BranchSubr              2272
                                                                                                                                                                                                                                         2270: 0x0092   ReturnValType           

000687      End Function // DisableSleepMode                                                                                                                                                                                             2271: 0x0093   Return0                 

000688      
000689      
000690      Private Function EnableSleepMode(canSleep As Boolean, setPin2 As Boolean) As Boolean                                                                                                                                         2272: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0
                                                                                                                                                                                                                                         2273: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000691          Dim result As Boolean = True                                                                                                                                                                                             2274: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         2275: 0x9002   PopLocalI32             result

000692          
000693          result = result And Standby()                                                                                                                                                                                            2276: 0x8802   PushLocalI32            result
                                                                                                                                                                                                                                         2277: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2278: 0x542C   BranchSubrBack          2235
                                                                                                                                                                                                                                         2279: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2280: 0x9002   PopLocalI32             result

000694          
000695          If canSleep Then                                                                                                                                                                                                         2281: 0x8800   PushLocalI32            canSleep
                                                                                                                                                                                                                                         2282: 0x3C30   BranchFalse             2331

000696              result = result And Write(CTRL_REG2_REG, Read(CTRL_REG2_REG) | CTRL_REG2_SLPE)                                                                                                                                       2283: 0x8802   PushLocalI32            result
                                                                                                                                                                                                                                         2284: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         2285: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         2286: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2287: 0x5720   BranchSubrBack          1488
                                                                                                                                                                                                                                         2288: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         2289: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2290: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2291: 0x56FF   BranchSubrBack          1525
                                                                                                                                                                                                                                         2292: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2293: 0x9002   PopLocalI32             result

000697              result = result And Write(CTRL_REG4_REG, Read(CTRL_REG4_REG) | CTRL_REG4_INT_EN_ASLP)                                                                                                                                2294: 0x8802   PushLocalI32            result
                                                                                                                                                                                                                                         2295: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         2296: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         2297: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2298: 0x572B   BranchSubrBack          1488
                                                                                                                                                                                                                                         2299: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                         2300: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2301: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2302: 0x570A   BranchSubrBack          1525
                                                                                                                                                                                                                                         2303: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2304: 0x9002   PopLocalI32             result

000698              If setPin2 Then                                                                                                                                                                                                      2305: 0x8801   PushLocalI32            setPin2
                                                                                                                                                                                                                                         2306: 0x3C0C   BranchFalse             2319

000699                  result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) & ~CTRL_REG5_INT_CFG_ASLP)                                                                                                                          2307: 0x8802   PushLocalI32            result
                                                                                                                                                                                                                                         2308: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2309: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2310: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2311: 0x5738   BranchSubrBack          1488
                                                                                                                                                                                                                                         2312: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                         2313: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2314: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2315: 0x5717   BranchSubrBack          1525
                                                                                                                                                                                                                                         2316: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2317: 0x9002   PopLocalI32             result

                                                                                                                                                                                                                                         2318: 0x400B   Branch                  2330
000700              Else                                                                                                                                                                                                                 

000701                  result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) | CTRL_REG5_INT_CFG_ASLP)                                                                                                                           2319: 0x8802   PushLocalI32            result
                                                                                                                                                                                                                                         2320: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2321: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2322: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2323: 0x5744   BranchSubrBack          1488
                                                                                                                                                                                                                                         2324: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                         2325: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2326: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2327: 0x5723   BranchSubrBack          1525
                                                                                                                                                                                                                                         2328: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2329: 0x9002   PopLocalI32             result

000702              End If
                                                                                                                                                                                                                                         2330: 0x400B   Branch                  2342
000703          Else                                                                                                                                                                                                                     

000704              result = result And Write(CTRL_REG2_REG, Read(CTRL_REG2_REG) & ~CTRL_REG2_SLPE)                                                                                                                                      2331: 0x8802   PushLocalI32            result
                                                                                                                                                                                                                                         2332: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         2333: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         2334: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2335: 0x5750   BranchSubrBack          1488
                                                                                                                                                                                                                                         2336: 0x80FB   PushConstU10            251 (0x00FB)
                                                                                                                                                                                                                                         2337: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2338: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2339: 0x572F   BranchSubrBack          1525
                                                                                                                                                                                                                                         2340: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2341: 0x9002   PopLocalI32             result

000705          End If
000706          
000707          result = result And Activate()                                                                                                                                                                                           2342: 0x8802   PushLocalI32            result
                                                                                                                                                                                                                                         2343: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2344: 0x5463   BranchSubrBack          2246
                                                                                                                                                                                                                                         2345: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2346: 0x9002   PopLocalI32             result

000708          
000709          Return result                                                                                                                                                                                                            2347: 0x8802   PushLocalI32            result
                                                                                                                                                                                                                                         2348: 0x0092   ReturnValType           

000710      End Function // EnableSleepMode                                                                                                                                                                                              2349: 0x0093   Return0                 

000711      
000712      
000713      Public Function EnableSleepMode(duration As Float) As Boolean                                                                                                                                                                2350: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000714          Return EnableSleepMode(duration, False)                                                                                                                                                                                  2351: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2352: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2353: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2354: 0x1C02   BranchSubr              2357
                                                                                                                                                                                                                                         2355: 0x0092   ReturnValType           

000715      End Function // EnableSleepMode                                                                                                                                                                                              2356: 0x0093   Return0                 

000716      
000717      
000718      'duration - period of inactivity before device enters sleep mode, in ms
000719      Public Function EnableSleepMode(duration As Float, setPin2 As Boolean) As Boolean                                                                                                                                            2357: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0
                                                                                                                                                                                                                                         2358: 0xE040   AllocateStackSpace      ValTypeSize=2, RefTypeSize=0

000720          Dim durationByte As Byte = 0
000721          Dim result As Boolean = EnableSleepMode(True, setPin2)                                                                                                                                                                   2359: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         2360: 0x8801   PushLocalI32            setPin2
                                                                                                                                                                                                                                         2361: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2362: 0x545B   BranchSubrBack          2272
                                                                                                                                                                                                                                         2363: 0x9003   PopLocalI32             result

000722          
000723          result = result And Standby()                                                                                                                                                                                            2364: 0x8803   PushLocalI32            result
                                                                                                                                                                                                                                         2365: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2366: 0x5484   BranchSubrBack          2235
                                                                                                                                                                                                                                         2367: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2368: 0x9003   PopLocalI32             result

000724          
000725          If GetActiveModeFrequency() = MMA8652_ACTIVE_ODR._1_56HZ Then                                                                                                                                                            2369: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2370: 0x5472   BranchSubrBack          2257
                                                                                                                                                                                                                                         2371: 0x8038   PushConstU10            56 (0x0038)
                                                                                                                                                                                                                                         2372: 0x2416   BranchNE                2395

000726              If (duration < LOW_ASLP_DURATION Or duration > HIGH_ASLP_DURATION) Then                                                                                                                                              2373: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2374: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2375: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2376: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         2377: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2378: 0x0110   PushConstI32            1209938944 (0x481E3400)
                                                                                                                                                                                                                                         2379: 0x3400                           
                                                                                                                                                                                                                                         2380: 0x481E                           
                                                                                                                                                                                                                                         2381: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2382: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         2383: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2384: 0x3C01   BranchFalse             2386

000727                  Return False                                                                                                                                                                                                     2385: 0x0093   Return0                 

000728              End If
000729              
000730              durationByte = FloatToByteRepresentation(duration, HIGH_ASLP_COUNT_RESOLUTION, LOW_ASLP_DURATION)                                                                                                                    2386: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2387: 0x0110   PushConstI32            1142947840 (0x44200000)
                                                                                                                                                                                                                                         2388: 0x0000                           
                                                                                                                                                                                                                                         2389: 0x4420                           
                                                                                                                                                                                                                                         2390: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2391: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2392: 0x54A8   BranchSubrBack          2225
                                                                                                                                                                                                                                         2393: 0x9002   PopLocalI32             durationByte

                                                                                                                                                                                                                                         2394: 0x4015   Branch                  2416
000731          Else                                                                                                                                                                                                                     

000732              If (duration < LOW_ASLP_DURATION Or duration > NORMAL_ASLP_DURATION) Then                                                                                                                                            2395: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2396: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2397: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2398: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         2399: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2400: 0x0110   PushConstI32            1201550336 (0x479E3400)
                                                                                                                                                                                                                                         2401: 0x3400                           
                                                                                                                                                                                                                                         2402: 0x479E                           
                                                                                                                                                                                                                                         2403: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2404: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         2405: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2406: 0x3C01   BranchFalse             2408

000733                  Return False                                                                                                                                                                                                     2407: 0x0093   Return0                 

000734              End If
000735              
000736              durationByte = FloatToByteRepresentation(duration, NORMAL_ASLP_COUNT_RESOLUTION, LOW_ASLP_DURATION)                                                                                                                  2408: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2409: 0x0110   PushConstI32            1134559232 (0x43A00000)
                                                                                                                                                                                                                                         2410: 0x0000                           
                                                                                                                                                                                                                                         2411: 0x43A0                           
                                                                                                                                                                                                                                         2412: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2413: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2414: 0x54BE   BranchSubrBack          2225
                                                                                                                                                                                                                                         2415: 0x9002   PopLocalI32             durationByte

000737          End If
000738          
000739          result = result And Write(ASLP_COUNT_REG, durationByte)                                                                                                                                                                  2416: 0x8803   PushLocalI32            result
                                                                                                                                                                                                                                         2417: 0x8029   PushConstU10            41 (0x0029)
                                                                                                                                                                                                                                         2418: 0x8802   PushLocalI32            durationByte
                                                                                                                                                                                                                                         2419: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2420: 0x5780   BranchSubrBack          1525
                                                                                                                                                                                                                                         2421: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2422: 0x9003   PopLocalI32             result

000740          
000741          result = result And Activate()                                                                                                                                                                                           2423: 0x8803   PushLocalI32            result
                                                                                                                                                                                                                                         2424: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2425: 0x54B4   BranchSubrBack          2246
                                                                                                                                                                                                                                         2426: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2427: 0x9003   PopLocalI32             result

000742          
000743          Return result                                                                                                                                                                                                            2428: 0x8803   PushLocalI32            result
                                                                                                                                                                                                                                         2429: 0x0092   ReturnValType           

000744      End Function // EnableSleepMode                                                                                                                                                                                              2430: 0x0093   Return0                 

000745      
000746      
000747      'Configures the active output data rate, setting the sleep output data rate to the default
000748      Public Function Setup(activeHz As MMA8652_ACTIVE_ODR, activePowerScheme As MMA8652_MODS) As Boolean                                                                                                                          2431: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0

000749          Return Setup(activeHz, activePowerScheme, MMA8652_SLEEP_ODR._50HZ, MMA8652_SMODS.NORMAL)                                                                                                                                 2432: 0x8800   PushLocalI32            activeHz
                                                                                                                                                                                                                                         2433: 0x8801   PushLocalI32            activePowerScheme
                                                                                                                                                                                                                                         2434: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2435: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2436: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2437: 0x1C02   BranchSubr              2440
                                                                                                                                                                                                                                         2438: 0x0092   ReturnValType           

000750      End Function // Setup                                                                                                                                                                                                        2439: 0x0093   Return0                 

000751      
000752      
000753      'Configures the active and sleep output data rates
000754      Public Function Setup(activeHz As MMA8652_ACTIVE_ODR, activePowerScheme As MMA8652_MODS, sleepHz As MMA8652_SLEEP_ODR, sleepPowerScheme As MMA8652_SMODS) As Boolean                                                         2440: 0x1840   EntryPoint              ValTypParams=4, RefTypParams=0
                                                                                                                                                                                                                                         2441: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000755          Dim result As Boolean = True                                                                                                                                                                                             2442: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         2443: 0x9004   PopLocalI32             result

000756          
000757          result = result And Standby()                                                                                                                                                                                            2444: 0x8804   PushLocalI32            result
                                                                                                                                                                                                                                         2445: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2446: 0x54D4   BranchSubrBack          2235
                                                                                                                                                                                                                                         2447: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2448: 0x9004   PopLocalI32             result

000758          result = result And Write(CTRL_REG1_REG, (Read(CTRL_REG1_REG) & ~CTRL_REG1_DR) | activeHz)                                                                                                                               2449: 0x8804   PushLocalI32            result
                                                                                                                                                                                                                                         2450: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         2451: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         2452: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2453: 0x57C6   BranchSubrBack          1488
                                                                                                                                                                                                                                         2454: 0x80C7   PushConstU10            199 (0x00C7)
                                                                                                                                                                                                                                         2455: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2456: 0x8800   PushLocalI32            activeHz
                                                                                                                                                                                                                                         2457: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2458: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2459: 0x57A7   BranchSubrBack          1525
                                                                                                                                                                                                                                         2460: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2461: 0x9004   PopLocalI32             result

000759          result = result And Write(CTRL_REG2_REG, (Read(CTRL_REG2_REG) & ~CTRL_REG2_MODS) | activePowerScheme)                                                                                                                    2462: 0x8804   PushLocalI32            result
                                                                                                                                                                                                                                         2463: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         2464: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         2465: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2466: 0x57D3   BranchSubrBack          1488
                                                                                                                                                                                                                                         2467: 0x80FC   PushConstU10            252 (0x00FC)
                                                                                                                                                                                                                                         2468: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2469: 0x8801   PushLocalI32            activePowerScheme
                                                                                                                                                                                                                                         2470: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2471: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2472: 0x57B4   BranchSubrBack          1525
                                                                                                                                                                                                                                         2473: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2474: 0x9004   PopLocalI32             result

000760          result = result And Write(CTRL_REG1_REG, (Read(CTRL_REG1_REG) & ~CTRL_REG1_ASLP_RATE) | sleepHz)                                                                                                                         2475: 0x8804   PushLocalI32            result
                                                                                                                                                                                                                                         2476: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         2477: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                         2478: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2479: 0x57E0   BranchSubrBack          1488
                                                                                                                                                                                                                                         2480: 0x803F   PushConstU10            63 (0x003F)
                                                                                                                                                                                                                                         2481: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2482: 0x8802   PushLocalI32            sleepHz
                                                                                                                                                                                                                                         2483: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2484: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2485: 0x57C1   BranchSubrBack          1525
                                                                                                                                                                                                                                         2486: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2487: 0x9004   PopLocalI32             result

000761          result = result And Write(CTRL_REG2_REG, (Read(CTRL_REG2_REG) & ~CTRL_REG2_SMODS) | sleepPowerScheme)                                                                                                                    2488: 0x8804   PushLocalI32            result
                                                                                                                                                                                                                                         2489: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         2490: 0x802B   PushConstU10            43 (0x002B)
                                                                                                                                                                                                                                         2491: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2492: 0x57ED   BranchSubrBack          1488
                                                                                                                                                                                                                                         2493: 0x80E7   PushConstU10            231 (0x00E7)
                                                                                                                                                                                                                                         2494: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2495: 0x8803   PushLocalI32            sleepPowerScheme
                                                                                                                                                                                                                                         2496: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2497: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2498: 0x57CE   BranchSubrBack          1525
                                                                                                                                                                                                                                         2499: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2500: 0x9004   PopLocalI32             result

000762          result = result And Activate()                                                                                                                                                                                           2501: 0x8804   PushLocalI32            result
                                                                                                                                                                                                                                         2502: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2503: 0x5502   BranchSubrBack          2246
                                                                                                                                                                                                                                         2504: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2505: 0x9004   PopLocalI32             result

000763          
000764          Return result                                                                                                                                                                                                            2506: 0x8804   PushLocalI32            result
                                                                                                                                                                                                                                         2507: 0x0092   ReturnValType           

000765      End Function // Setup                                                                                                                                                                                                        2508: 0x0093   Return0                 

000766      
000767      
000768      Public Function ConfigureOrientationInterrupt(duration As Float, bfAngle As MMA8652_BF_ANGLE, zlockAngle As Float, thsAngle As MMA8652_THS_ANGLE, hysAngle As MMA8652_HYS_ANGLE) As Boolean                                  2509: 0x1850   EntryPoint              ValTypParams=5, RefTypParams=0

000769          Return ConfigureOrientationInterrupt(duration, bfAngle, zlockAngle, thsAngle, hysAngle, False)                                                                                                                           2510: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2511: 0x8801   PushLocalI32            bfAngle
                                                                                                                                                                                                                                         2512: 0x8802   PushLocalI32            zlockAngle
                                                                                                                                                                                                                                         2513: 0x8803   PushLocalI32            thsAngle
                                                                                                                                                                                                                                         2514: 0x8804   PushLocalI32            hysAngle
                                                                                                                                                                                                                                         2515: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2516: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2517: 0x1C02   BranchSubr              2520
                                                                                                                                                                                                                                         2518: 0x0092   ReturnValType           

000770      End Function // ConfigureOrientationInterrupt                                                                                                                                                                                2519: 0x0093   Return0                 

000771      
000772      
000773      'ConfigureOrientationInterrupt - configures device to interrupt on orientation change
000774      '
000775      'duration - Time for angle to be present before interrupt in ms
000776      'bfAngle - Angle for transitioning between back/front orientation
000777      'zlockAngle - Angle which determines z-axis dead zone
000778      'thsAngle - Angle which determins portrait to landscape transition
000779      'hysAngle - Angle for widening the thsAngle
000780      'setPin2 - True to route orientation interrupt to pin2
000781      Public Function ConfigureOrientationInterrupt(duration As Float, bfAngle As MMA8652_BF_ANGLE, zlockAngle As Float, thsAngle As MMA8652_THS_ANGLE, hysAngle As MMA8652_HYS_ANGLE, setPin2 As Boolean) As Boolean              2520: 0x1860   EntryPoint              ValTypParams=6, RefTypParams=0
                                                                                                                                                                                                                                         2521: 0xE061   AllocateStackSpace      ValTypeSize=3, RefTypeSize=1

000782          Dim durationByte As Byte
000783          Dim zlockAngleByte As Byte
000784          Dim result As Boolean = True                                                                                                                                                                                             2522: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         2523: 0x9008   PopLocalI32             result

000785          Dim maxTimeAndTimeStep As ListOfFloat = GetMaxTimeAndTimeStep("long")                                                                                                                                                    2524: 0x847C   PushLiteral             124
                                                                                                                                                                                                                                         2525: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2526: 0x57BC   BranchSubrBack          1571
                                                                                                                                                                                                                                         2527: 0x9400   PopLocalRef             maxTimeAndTimeStep

000786          
000787          If (duration < 0.0 Or duration > maxTimeAndTimeStep(0)) Then                                                                                                                                                             2528: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2529: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2530: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2531: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         2532: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2533: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2534: 0x8C00   PushLocalRef            maxTimeAndTimeStep
                                                                                                                                                                                                                                         2535: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2536: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2537: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         2538: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2539: 0x3C01   BranchFalse             2541

000788              Return False                                                                                                                                                                                                         2540: 0x0093   Return0                 

000789          End If
000790          
000791          If (zlockAngle < LOW_ZLOCK_THRESHOLD Or zlockAngle > HIGH_ZLOCK_THRESHOLD) Then                                                                                                                                          2541: 0x8802   PushLocalI32            zlockAngle
                                                                                                                                                                                                                                         2542: 0xEA0E   PushConstFlt            14.0
                                                                                                                                                                                                                                         2543: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2544: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         2545: 0x8802   PushLocalI32            zlockAngle
                                                                                                                                                                                                                                         2546: 0xEA2A   PushConstFlt            42.0
                                                                                                                                                                                                                                         2547: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2548: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         2549: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2550: 0x3C01   BranchFalse             2552

000792              Return False                                                                                                                                                                                                         2551: 0x0093   Return0                 

000793          End If
000794          
000795          durationByte = FloatToByteRepresentation(duration, maxTimeAndTimeStep(1), 0.0)                                                                                                                                           2552: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                         2553: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         2554: 0x8C00   PushLocalRef            maxTimeAndTimeStep
                                                                                                                                                                                                                                         2555: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2556: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2557: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2558: 0x554E   BranchSubrBack          2225
                                                                                                                                                                                                                                         2559: 0x9006   PopLocalI32             durationByte

000796          zlockAngleByte = FloatToByteRepresentation(zlockAngle, ZLOCK_THRESHOLD_RESOLUTION, LOW_ZLOCK_THRESHOLD)                                                                                                                  2560: 0x8802   PushLocalI32            zlockAngle
                                                                                                                                                                                                                                         2561: 0xEA04   PushConstFlt            4.0
                                                                                                                                                                                                                                         2562: 0xEA0E   PushConstFlt            14.0
                                                                                                                                                                                                                                         2563: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2564: 0x5554   BranchSubrBack          2225
                                                                                                                                                                                                                                         2565: 0x9007   PopLocalI32             zlockAngleByte

000797          
000798          result = result And Standby()                                                                                                                                                                                            2566: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2567: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2568: 0x554E   BranchSubrBack          2235
                                                                                                                                                                                                                                         2569: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2570: 0x9008   PopLocalI32             result

000799          
000800          'Wakeup from orientation interrupt
000801          result = result And Write(CTRL_REG3_REG, Read(CTRL_REG3_REG) | CTRL_REG3_WAKE_LNDPRT)                                                                                                                                    2571: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2572: 0x802C   PushConstU10            44 (0x002C)
                                                                                                                                                                                                                                         2573: 0x802C   PushConstU10            44 (0x002C)
                                                                                                                                                                                                                                         2574: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2575: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2576: 0x05D0                           
                                                                                                                                                                                                                                         2577: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         2578: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2579: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2580: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2581: 0x05F5                           
                                                                                                                                                                                                                                         2582: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2583: 0x9008   PopLocalI32             result

000802          'Enable orientation interrupts
000803          result = result And Write(CTRL_REG4_REG, Read(CTRL_REG4_REG) | CTRL_REG4_INT_EN_LNDPRT)                                                                                                                                  2584: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2585: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         2586: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         2587: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2588: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2589: 0x05D0                           
                                                                                                                                                                                                                                         2590: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         2591: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2592: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2593: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2594: 0x05F5                           
                                                                                                                                                                                                                                         2595: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2596: 0x9008   PopLocalI32             result

000804          
000805          If setPin2 Then                                                                                                                                                                                                          2597: 0x8805   PushLocalI32            setPin2
                                                                                                                                                                                                                                         2598: 0x3C0E   BranchFalse             2613

000806              result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) & ~CTRL_REG5_INT_CFG_LNDPRT)                                                                                                                            2599: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2600: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2601: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2602: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2603: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2604: 0x05D0                           
                                                                                                                                                                                                                                         2605: 0x80EF   PushConstU10            239 (0x00EF)
                                                                                                                                                                                                                                         2606: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2607: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2608: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2609: 0x05F5                           
                                                                                                                                                                                                                                         2610: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2611: 0x9008   PopLocalI32             result

                                                                                                                                                                                                                                         2612: 0x400D   Branch                  2626
000807          Else                                                                                                                                                                                                                     

000808              result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) | CTRL_REG5_INT_CFG_LNDPRT)                                                                                                                             2613: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2614: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2615: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2616: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2617: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2618: 0x05D0                           
                                                                                                                                                                                                                                         2619: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         2620: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2621: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2622: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2623: 0x05F5                           
                                                                                                                                                                                                                                         2624: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2625: 0x9008   PopLocalI32             result

000809          End If
000810          
000811          'Clears counter (default) and enables PL detection
000812          result = result And Write(PL_CFG_REG, PL_CFG_DBCNTM | PL_CFG_PL_EN)                                                                                                                                                      2626: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2627: 0x8011   PushConstU10            17 (0x0011)
                                                                                                                                                                                                                                         2628: 0x80C0   PushConstU10            192 (0x00C0)
                                                                                                                                                                                                                                         2629: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2630: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2631: 0x05F5                           
                                                                                                                                                                                                                                         2632: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2633: 0x9008   PopLocalI32             result

000813          
000814          'Set the debounce count
000815          result = result And Write(PL_COUNT_REG, durationByte)                                                                                                                                                                    2634: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2635: 0x8012   PushConstU10            18 (0x0012)
                                                                                                                                                                                                                                         2636: 0x8806   PushLocalI32            durationByte
                                                                                                                                                                                                                                         2637: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2638: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2639: 0x05F5                           
                                                                                                                                                                                                                                         2640: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2641: 0x9008   PopLocalI32             result

000816          'Set the back/front trip angle threshold
000817          result = result And Write(PL_BF_ZCOMP_REG, (Read(PL_BF_ZCOMP_REG) & ~PL_BF_ZCOMP_BKFR) | bfAngle)                                                                                                                        2642: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2643: 0x8013   PushConstU10            19 (0x0013)
                                                                                                                                                                                                                                         2644: 0x8013   PushConstU10            19 (0x0013)
                                                                                                                                                                                                                                         2645: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2646: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2647: 0x05D0                           
                                                                                                                                                                                                                                         2648: 0x803F   PushConstU10            63 (0x003F)
                                                                                                                                                                                                                                         2649: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2650: 0x8801   PushLocalI32            bfAngle
                                                                                                                                                                                                                                         2651: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2652: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2653: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2654: 0x05F5                           
                                                                                                                                                                                                                                         2655: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2656: 0x9008   PopLocalI32             result

000818          'Set the z-lock threshold angle
000819          result = result And Write(PL_BF_ZCOMP_REG, (Read(PL_BF_ZCOMP_REG) & ~PL_BF_ZCOMP_ZLOCK) | zlockAngleByte)                                                                                                                2657: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2658: 0x8013   PushConstU10            19 (0x0013)
                                                                                                                                                                                                                                         2659: 0x8013   PushConstU10            19 (0x0013)
                                                                                                                                                                                                                                         2660: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2661: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2662: 0x05D0                           
                                                                                                                                                                                                                                         2663: 0x80F8   PushConstU10            248 (0x00F8)
                                                                                                                                                                                                                                         2664: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2665: 0x8807   PushLocalI32            zlockAngleByte
                                                                                                                                                                                                                                         2666: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2667: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2668: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2669: 0x05F5                           
                                                                                                                                                                                                                                         2670: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2671: 0x9008   PopLocalI32             result

000820          'Set the Threshold value
000821          result = result And Write(PL_THS_REG, (Read(PL_THS_REG) & ~PL_THS_THS) | thsAngle)                                                                                                                                       2672: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2673: 0x8014   PushConstU10            20 (0x0014)
                                                                                                                                                                                                                                         2674: 0x8014   PushConstU10            20 (0x0014)
                                                                                                                                                                                                                                         2675: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2676: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2677: 0x05D0                           
                                                                                                                                                                                                                                         2678: 0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                                                                                         2679: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2680: 0x8803   PushLocalI32            thsAngle
                                                                                                                                                                                                                                         2681: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2682: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2683: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2684: 0x05F5                           
                                                                                                                                                                                                                                         2685: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2686: 0x9008   PopLocalI32             result

000822          'Set the Hysteresis value
000823          result = result And Write(PL_THS_REG, (Read(PL_THS_REG) & ~PL_THS_HYS) | hysAngle)                                                                                                                                       2687: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2688: 0x8014   PushConstU10            20 (0x0014)
                                                                                                                                                                                                                                         2689: 0x8014   PushConstU10            20 (0x0014)
                                                                                                                                                                                                                                         2690: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2691: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2692: 0x05D0                           
                                                                                                                                                                                                                                         2693: 0x80F8   PushConstU10            248 (0x00F8)
                                                                                                                                                                                                                                         2694: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2695: 0x8804   PushLocalI32            hysAngle
                                                                                                                                                                                                                                         2696: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2697: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2698: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2699: 0x05F5                           
                                                                                                                                                                                                                                         2700: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2701: 0x9008   PopLocalI32             result

000824          
000825          result = result And Activate()                                                                                                                                                                                           2702: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2703: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2704: 0x55CB   BranchSubrBack          2246
                                                                                                                                                                                                                                         2705: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2706: 0x9008   PopLocalI32             result

000826          
000827          Return result                                                                                                                                                                                                            2707: 0x8808   PushLocalI32            result
                                                                                                                                                                                                                                         2708: 0x0092   ReturnValType           

000828      End Function // ConfigureOrientationInterrupt                                                                                                                                                                                2709: 0x0093   Return0                 

000829      
000830      
000831      Public Function ConfigureFreefallInterrupt(threshold As Float, duration As Byte) As Boolean                                                                                                                                  2710: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0

000832          Return ConfigureFreefallInterrupt(threshold, duration, 0x38, False)                                                                                                                                                      2711: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         2712: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         2713: 0x8038   PushConstU10            56 (0x0038)
                                                                                                                                                                                                                                         2714: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2715: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2716: 0x1C02   BranchSubr              2719
                                                                                                                                                                                                                                         2717: 0x0092   ReturnValType           

000833      End Function // ConfigureFreefallInterrupt                                                                                                                                                                                   2718: 0x0093   Return0                 

000834      
000835      
000836      'ConfigureFreefallInterrupt - configures device to interrupt on freefall
000837      '
000838      'threshold - Trigger threshold (0.0 Gs - 8.0 Gs), 0.063mG steps
000839      'duration - Count for threshold to be present before interrupt
000840      'axis - Which axis to enable freefall. See datasheet to know which bits to set
000841      'setPin2 - True to route orientation interrupt to pin2
000842      Public Function ConfigureFreefallInterrupt(threshold As Float, duration As Byte, axis As Byte, setPin2 As Boolean) As Boolean                                                                                                2719: 0x1840   EntryPoint              ValTypParams=4, RefTypParams=0
                                                                                                                                                                                                                                         2720: 0xE040   AllocateStackSpace      ValTypeSize=2, RefTypeSize=0

000843          Dim thresholdByte As Byte
000844          Dim result As Boolean = True                                                                                                                                                                                             2721: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         2722: 0x9005   PopLocalI32             result

000845          
000846          If (threshold < LOW_GRAVITY_THRESHOLD Or threshold > HIGH_GRAVITY_THRESHOLD) Then                                                                                                                                        2723: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         2724: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2725: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2726: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         2727: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         2728: 0xEA08   PushConstFlt            8.0
                                                                                                                                                                                                                                         2729: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2730: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         2731: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2732: 0x3C01   BranchFalse             2734

000847              Return False                                                                                                                                                                                                         2733: 0x0093   Return0                 

000848          End If
000849          
000850          'Ensure that axis byte affects axis bits only in the Freefall Config Register
000851          axis = axis & FF_MT_CFG_EFE                                                                                                                                                                                              2734: 0x8802   PushLocalI32            axis
                                                                                                                                                                                                                                         2735: 0x8038   PushConstU10            56 (0x0038)
                                                                                                                                                                                                                                         2736: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2737: 0x9002   PopLocalI32             axis

000852          
000853          thresholdByte = FloatToByteRepresentation(threshold, GRAVITY_THRESHOLD_RESOLUTION, 0.0)                                                                                                                                  2738: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         2739: 0x0110   PushConstI32            1031865893 (0x3D810625)
                                                                                                                                                                                                                                         2740: 0x0625                           
                                                                                                                                                                                                                                         2741: 0x3D81                           
                                                                                                                                                                                                                                         2742: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2743: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2744: 0x5608   BranchSubrBack          2225
                                                                                                                                                                                                                                         2745: 0x9004   PopLocalI32             thresholdByte

000854          
000855          result = result And Standby()                                                                                                                                                                                            2746: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2747: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2748: 0x5602   BranchSubrBack          2235
                                                                                                                                                                                                                                         2749: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2750: 0x9005   PopLocalI32             result

000856          
000857          'Wake from freefall interrupt
000858          result = result And Write(CTRL_REG3_REG, Read(CTRL_REG3_REG) | CTRL_REG3_WAKE_FF_MT)                                                                                                                                     2751: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2752: 0x802C   PushConstU10            44 (0x002C)
                                                                                                                                                                                                                                         2753: 0x802C   PushConstU10            44 (0x002C)
                                                                                                                                                                                                                                         2754: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2755: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2756: 0x05D0                           
                                                                                                                                                                                                                                         2757: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         2758: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2759: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2760: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2761: 0x05F5                           
                                                                                                                                                                                                                                         2762: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2763: 0x9005   PopLocalI32             result

000859          'Enable freefall interrupts
000860          result = result And Write(CTRL_REG4_REG, Read(CTRL_REG4_REG) | CTRL_REG4_INT_EN_FF_MT)                                                                                                                                   2764: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2765: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         2766: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         2767: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2768: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2769: 0x05D0                           
                                                                                                                                                                                                                                         2770: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         2771: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2772: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2773: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2774: 0x05F5                           
                                                                                                                                                                                                                                         2775: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2776: 0x9005   PopLocalI32             result

000861          
000862          If setPin2 Then                                                                                                                                                                                                          2777: 0x8803   PushLocalI32            setPin2
                                                                                                                                                                                                                                         2778: 0x3C0E   BranchFalse             2793

000863              result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) & ~CTRL_REG5_INT_CFG_FF_MT)                                                                                                                             2779: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2780: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2781: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2782: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2783: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2784: 0x05D0                           
                                                                                                                                                                                                                                         2785: 0x80FB   PushConstU10            251 (0x00FB)
                                                                                                                                                                                                                                         2786: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2787: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2788: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2789: 0x05F5                           
                                                                                                                                                                                                                                         2790: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2791: 0x9005   PopLocalI32             result

                                                                                                                                                                                                                                         2792: 0x400D   Branch                  2806
000864          Else                                                                                                                                                                                                                     

000865              result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) | CTRL_REG5_INT_CFG_FF_MT)                                                                                                                              2793: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2794: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2795: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2796: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2797: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2798: 0x05D0                           
                                                                                                                                                                                                                                         2799: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         2800: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2801: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2802: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2803: 0x05F5                           
                                                                                                                                                                                                                                         2804: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2805: 0x9005   PopLocalI32             result

000866          End If
000867          
000868          'Latch events
000869          result = result And Write(FF_MT_CFG_REG, Read(FF_MT_CFG_REG) | FF_MT_CFG_ELE)                                                                                                                                            2806: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2807: 0x8015   PushConstU10            21 (0x0015)
                                                                                                                                                                                                                                         2808: 0x8015   PushConstU10            21 (0x0015)
                                                                                                                                                                                                                                         2809: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2810: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2811: 0x05D0                           
                                                                                                                                                                                                                                         2812: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                         2813: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2814: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2815: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2816: 0x05F5                           
                                                                                                                                                                                                                                         2817: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2818: 0x9005   PopLocalI32             result

000870          'Enable motion flag
000871          result = result And Write(FF_MT_CFG_REG, Read(FF_MT_CFG_REG) | FF_MT_CFG_OAE)                                                                                                                                            2819: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2820: 0x8015   PushConstU10            21 (0x0015)
                                                                                                                                                                                                                                         2821: 0x8015   PushConstU10            21 (0x0015)
                                                                                                                                                                                                                                         2822: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2823: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2824: 0x05D0                           
                                                                                                                                                                                                                                         2825: 0x8040   PushConstU10            64 (0x0040)
                                                                                                                                                                                                                                         2826: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2827: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2828: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2829: 0x05F5                           
                                                                                                                                                                                                                                         2830: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2831: 0x9005   PopLocalI32             result

000872          'Enable on axis
000873          result = result And Write(FF_MT_CFG_REG, (Read(FF_MT_CFG_REG) & ~FF_MT_CFG_EFE) | axis)                                                                                                                                  2832: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2833: 0x8015   PushConstU10            21 (0x0015)
                                                                                                                                                                                                                                         2834: 0x8015   PushConstU10            21 (0x0015)
                                                                                                                                                                                                                                         2835: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2836: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2837: 0x05D0                           
                                                                                                                                                                                                                                         2838: 0x80C7   PushConstU10            199 (0x00C7)
                                                                                                                                                                                                                                         2839: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2840: 0x8802   PushLocalI32            axis
                                                                                                                                                                                                                                         2841: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2842: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2843: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2844: 0x05F5                           
                                                                                                                                                                                                                                         2845: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2846: 0x9005   PopLocalI32             result

000874          
000875          'Set Threshold
000876          result = result And Write(FF_MT_THS_REG, thresholdByte)                                                                                                                                                                  2847: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2848: 0x8017   PushConstU10            23 (0x0017)
                                                                                                                                                                                                                                         2849: 0x8804   PushLocalI32            thresholdByte
                                                                                                                                                                                                                                         2850: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2851: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2852: 0x05F5                           
                                                                                                                                                                                                                                         2853: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2854: 0x9005   PopLocalI32             result

000877          'Set Duration
000878          result = result And Write(FF_MT_COUNT_REG, duration)                                                                                                                                                                     2855: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2856: 0x8018   PushConstU10            24 (0x0018)
                                                                                                                                                                                                                                         2857: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         2858: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2859: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2860: 0x05F5                           
                                                                                                                                                                                                                                         2861: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2862: 0x9005   PopLocalI32             result

000879          
000880          result = result And Activate()                                                                                                                                                                                           2863: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2864: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2865: 0x566C   BranchSubrBack          2246
                                                                                                                                                                                                                                         2866: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2867: 0x9005   PopLocalI32             result

000881          
000882          Return result                                                                                                                                                                                                            2868: 0x8805   PushLocalI32            result
                                                                                                                                                                                                                                         2869: 0x0092   ReturnValType           

000883      End Function // ConfigureFreefallInterrupt                                                                                                                                                                                   2870: 0x0093   Return0                 

000884      
000885      
000886      Public Function ConfigureShockInterrupt(threshold As Float, duration As Float) As Boolean                                                                                                                                    2871: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0

000887          Return ConfigureShockInterrupt(threshold, duration, 0x0e, False)                                                                                                                                                         2872: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         2873: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         2874: 0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                                                                                         2875: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2876: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2877: 0x1C02   BranchSubr              2880
                                                                                                                                                                                                                                         2878: 0x0092   ReturnValType           

000888      End Function // ConfigureShockInterrupt                                                                                                                                                                                      2879: 0x0093   Return0                 

000889      
000890      
000891      'ConfigureShockInterrupt - configures device to interrupt on shock (currently will interupt on any axis, x,y,z axis configuration can be added later)
000892      '
000893      'threshold As Float - trigger threshold (0.0 Gs - 8.0 Gs), 0.063mG steps
000894      'duration As Float - Duration for threshold to be present to active interrupt in ms
000895      'axis - Which axis to enable shock detection. See datasheet to know which bits to set
000896      'setPin2 - True to route orientation interrupt to pin2
000897      Public Function ConfigureShockInterrupt(threshold As Float, duration As Float, axis As Byte, setPin2 As Boolean) As Boolean                                                                                                  2880: 0x1840   EntryPoint              ValTypParams=4, RefTypParams=0
                                                                                                                                                                                                                                         2881: 0xE061   AllocateStackSpace      ValTypeSize=3, RefTypeSize=1

000898          Dim thresholdByte As Byte
000899          Dim durationByte As Byte
000900          Dim result As Boolean = True                                                                                                                                                                                             2882: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         2883: 0x9006   PopLocalI32             result

000901          Dim maxTimeAndTimeStep As ListOfFloat = GetMaxTimeAndTimeStep("long")                                                                                                                                                    2884: 0x847C   PushLiteral             124
                                                                                                                                                                                                                                         2885: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2886: 0x5800   JumpSubr                1571
                                                                                                                                                                                                                                         2887: 0x0623                           
                                                                                                                                                                                                                                         2888: 0x9400   PopLocalRef             maxTimeAndTimeStep

000902          
000903          If (threshold < LOW_GRAVITY_THRESHOLD Or threshold > HIGH_GRAVITY_THRESHOLD) Then                                                                                                                                        2889: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         2890: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2891: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2892: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         2893: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         2894: 0xEA08   PushConstFlt            8.0
                                                                                                                                                                                                                                         2895: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2896: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         2897: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2898: 0x3C01   BranchFalse             2900

000904              Return False                                                                                                                                                                                                         2899: 0x0093   Return0                 

000905          End If
000906          
000907          If (duration < 0.0 Or duration > maxTimeAndTimeStep(0)) Then                                                                                                                                                             2900: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         2901: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2902: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2903: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         2904: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         2905: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2906: 0x8C00   PushLocalRef            maxTimeAndTimeStep
                                                                                                                                                                                                                                         2907: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2908: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         2909: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         2910: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2911: 0x3C01   BranchFalse             2913

000908              Return False                                                                                                                                                                                                         2912: 0x0093   Return0                 

000909          End If
000910          
000911          'Ensure that axis byte affects axis bits only in the Transient Config Register
000912          axis = axis & TRANSIENT_CFG_TEFE                                                                                                                                                                                         2913: 0x8802   PushLocalI32            axis
                                                                                                                                                                                                                                         2914: 0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                                                                                         2915: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2916: 0x9002   PopLocalI32             axis

000913          
000914          'Convert threshold
000915          thresholdByte = FloatToByteRepresentation(threshold, GRAVITY_THRESHOLD_RESOLUTION, 0.0)                                                                                                                                  2917: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         2918: 0x0110   PushConstI32            1031865893 (0x3D810625)
                                                                                                                                                                                                                                         2919: 0x0625                           
                                                                                                                                                                                                                                         2920: 0x3D81                           
                                                                                                                                                                                                                                         2921: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2922: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2923: 0x56BB   BranchSubrBack          2225
                                                                                                                                                                                                                                         2924: 0x9004   PopLocalI32             thresholdByte

000916          durationByte = FloatToByteRepresentation(duration, maxTimeAndTimeStep(1), 0.0)                                                                                                                                           2925: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         2926: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         2927: 0x8C00   PushLocalRef            maxTimeAndTimeStep
                                                                                                                                                                                                                                         2928: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         2929: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         2930: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2931: 0x56C3   BranchSubrBack          2225
                                                                                                                                                                                                                                         2932: 0x9005   PopLocalI32             durationByte

000917          
000918          result = result And Standby()                                                                                                                                                                                            2933: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         2934: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2935: 0x56BD   BranchSubrBack          2235
                                                                                                                                                                                                                                         2936: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2937: 0x9006   PopLocalI32             result

000919          
000920          'Wake from transient interrupt
000921          result = result And Write(CTRL_REG3_REG, Read(CTRL_REG3_REG) | CTRL_REG3_WAKE_TRANS)                                                                                                                                     2938: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         2939: 0x802C   PushConstU10            44 (0x002C)
                                                                                                                                                                                                                                         2940: 0x802C   PushConstU10            44 (0x002C)
                                                                                                                                                                                                                                         2941: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2942: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2943: 0x05D0                           
                                                                                                                                                                                                                                         2944: 0x8040   PushConstU10            64 (0x0040)
                                                                                                                                                                                                                                         2945: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2946: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2947: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2948: 0x05F5                           
                                                                                                                                                                                                                                         2949: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2950: 0x9006   PopLocalI32             result

000922          'Enable transient interrupts
000923          result = result And Write(CTRL_REG4_REG, Read(CTRL_REG4_REG) | CTRL_REG4_INT_EN_TRANS)                                                                                                                                   2951: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         2952: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         2953: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         2954: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2955: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2956: 0x05D0                           
                                                                                                                                                                                                                                         2957: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         2958: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2959: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2960: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2961: 0x05F5                           
                                                                                                                                                                                                                                         2962: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2963: 0x9006   PopLocalI32             result

000924          
000925          If setPin2 Then                                                                                                                                                                                                          2964: 0x8803   PushLocalI32            setPin2
                                                                                                                                                                                                                                         2965: 0x3C0E   BranchFalse             2980

000926              result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) & ~CTRL_REG5_INT_CFG_TRANS)                                                                                                                             2966: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         2967: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2968: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2969: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2970: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2971: 0x05D0                           
                                                                                                                                                                                                                                         2972: 0x80DF   PushConstU10            223 (0x00DF)
                                                                                                                                                                                                                                         2973: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2974: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2975: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2976: 0x05F5                           
                                                                                                                                                                                                                                         2977: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2978: 0x9006   PopLocalI32             result

                                                                                                                                                                                                                                         2979: 0x400D   Branch                  2993
000927          Else                                                                                                                                                                                                                     

000928              result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) | CTRL_REG5_INT_CFG_TRANS)                                                                                                                              2980: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         2981: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2982: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         2983: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2984: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2985: 0x05D0                           
                                                                                                                                                                                                                                         2986: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         2987: 0x002D   IntOr                   
                                                                                                                                                                                                                                         2988: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2989: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         2990: 0x05F5                           
                                                                                                                                                                                                                                         2991: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         2992: 0x9006   PopLocalI32             result

000929          End If
000930          
000931          'Latch events
000932          result = result And Write(TRANSIENT_CFG_REG, Read(TRANSIENT_CFG_REG) | TRANSIENT_CFG_ELE)                                                                                                                                2993: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         2994: 0x801D   PushConstU10            29 (0x001D)
                                                                                                                                                                                                                                         2995: 0x801D   PushConstU10            29 (0x001D)
                                                                                                                                                                                                                                         2996: 0x000D   PushMe                  
                                                                                                                                                                                                                                         2997: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         2998: 0x05D0                           
                                                                                                                                                                                                                                         2999: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3000: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3001: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3002: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         3003: 0x05F5                           
                                                                                                                                                                                                                                         3004: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3005: 0x9006   PopLocalI32             result

000933          'Enable on axis
000934          result = result And Write(TRANSIENT_CFG_REG, (Read(TRANSIENT_CFG_REG) & ~TRANSIENT_CFG_TEFE) | axis)                                                                                                                     3006: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         3007: 0x801D   PushConstU10            29 (0x001D)
                                                                                                                                                                                                                                         3008: 0x801D   PushConstU10            29 (0x001D)
                                                                                                                                                                                                                                         3009: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3010: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         3011: 0x05D0                           
                                                                                                                                                                                                                                         3012: 0x80F1   PushConstU10            241 (0x00F1)
                                                                                                                                                                                                                                         3013: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3014: 0x8802   PushLocalI32            axis
                                                                                                                                                                                                                                         3015: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3016: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3017: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         3018: 0x05F5                           
                                                                                                                                                                                                                                         3019: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3020: 0x9006   PopLocalI32             result

000935          
000936          'Set Threshold
000937          result = result And Write(TRANSIENT_THS_REG, thresholdByte)                                                                                                                                                              3021: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         3022: 0x801F   PushConstU10            31 (0x001F)
                                                                                                                                                                                                                                         3023: 0x8804   PushLocalI32            thresholdByte
                                                                                                                                                                                                                                         3024: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3025: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         3026: 0x05F5                           
                                                                                                                                                                                                                                         3027: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3028: 0x9006   PopLocalI32             result

000938          'Set Duration
000939          result = result And Write(TRANSIENT_COUNT_REG, durationByte)                                                                                                                                                             3029: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         3030: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         3031: 0x8805   PushLocalI32            durationByte
                                                                                                                                                                                                                                         3032: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3033: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         3034: 0x05F5                           
                                                                                                                                                                                                                                         3035: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3036: 0x9006   PopLocalI32             result

000940          
000941          result = result And Activate()                                                                                                                                                                                           3037: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         3038: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3039: 0x571A   BranchSubrBack          2246
                                                                                                                                                                                                                                         3040: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3041: 0x9006   PopLocalI32             result

000942          
000943          Return result                                                                                                                                                                                                            3042: 0x8806   PushLocalI32            result
                                                                                                                                                                                                                                         3043: 0x0092   ReturnValType           

000944          
000945      End Function // ConfigureShockInterrupt                                                                                                                                                                                      3044: 0x0093   Return0                 

000946      
000947      
000948      Public Function ConfigurePulseInterrupt(threshold As Float, duration As Float, latency As Float, window As Float) As Boolean                                                                                                 3045: 0x1840   EntryPoint              ValTypParams=4, RefTypParams=0

000949          Return ConfigurePulseInterrupt(threshold, duration, latency, window, False, False, 0x3f, False)                                                                                                                          3046: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         3047: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         3048: 0x8802   PushLocalI32            latency
                                                                                                                                                                                                                                         3049: 0x8803   PushLocalI32            window
                                                                                                                                                                                                                                         3050: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3051: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3052: 0x803F   PushConstU10            63 (0x003F)
                                                                                                                                                                                                                                         3053: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3054: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3055: 0x1C0F   BranchSubr              3071
                                                                                                                                                                                                                                         3056: 0x0092   ReturnValType           

000950      End Function // ConfigurePulseInterrupt                                                                                                                                                                                      3057: 0x0093   Return0                 

000951      
000952      
000953      Public Function ConfigurePulseInterrupt(threshold As Float, duration As Float, latency As Float, window As Float, abortDoublePulse As Boolean, enableLowPassFilter As Boolean) As Boolean                                    3058: 0x1860   EntryPoint              ValTypParams=6, RefTypParams=0

000954          Return ConfigurePulseInterrupt(threshold, duration, latency, window, abortDoublePulse, enableLowPassFilter, 0x3f, False)                                                                                                 3059: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         3060: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         3061: 0x8802   PushLocalI32            latency
                                                                                                                                                                                                                                         3062: 0x8803   PushLocalI32            window
                                                                                                                                                                                                                                         3063: 0x8804   PushLocalI32            abortDoublePulse
                                                                                                                                                                                                                                         3064: 0x8805   PushLocalI32            enableLowPassFilter
                                                                                                                                                                                                                                         3065: 0x803F   PushConstU10            63 (0x003F)
                                                                                                                                                                                                                                         3066: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3067: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3068: 0x1C02   BranchSubr              3071
                                                                                                                                                                                                                                         3069: 0x0092   ReturnValType           

000955      End Function // ConfigurePulseInterrupt                                                                                                                                                                                      3070: 0x0093   Return0                 

000956      
000957      
000958      'ConfigurePulseInterrupt - configures device to interrupt on pulse
000959      '
000960      'threshold As Float - trigger threshold (0.0 Gs - 8.0 Gs), 0.063mG steps
000961      'duration As Float - Duration for threshold to be present to active interrupt in ms
000962      'latency - Time to wait after pulse before interpreting further pulses as a new pulse
000963      'window - Time after latency period to interpret another pulse as a double pulse
000964      'axis - Which axis to enable pulse detection. See datasheet to know which bits to set
000965      'setPin2 - True to route orientation interrupt to pin2
000966      Public Function ConfigurePulseInterrupt(threshold As Float, duration As Float, latency As Float, window As Float, abortDoublePulse As Boolean, enableLowPassFilter As Boolean, axis As Byte, setPin2 As Boolean) As Boolean  3071: 0x1880   EntryPoint              ValTypParams=8, RefTypParams=0
                                                                                                                                                                                                                                         3072: 0xE0A2   AllocateStackSpace      ValTypeSize=5, RefTypeSize=2

000967          Dim thresholdByte As Byte
000968          Dim durationByte As Byte
000969          Dim latencyByte As Byte
000970          Dim windowByte As Byte
000971          Dim result As Boolean = True                                                                                                                                                                                             3073: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3074: 0x900C   PopLocalI32             result

000972          Dim durationMaxTimeAndTimeStep As ListOfFloat
000973          Dim maxTimeAndTimeStep As ListOfFloat
000974          
000975          If enableLowPassFilter Then                                                                                                                                                                                              3075: 0x8805   PushLocalI32            enableLowPassFilter
                                                                                                                                                                                                                                         3076: 0x3C0B   BranchFalse             3088

000976              durationMaxTimeAndTimeStep = GetMaxTimeAndTimeStep("long")                                                                                                                                                           3077: 0x847C   PushLiteral             124
                                                                                                                                                                                                                                         3078: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3079: 0x5800   JumpSubr                1571
                                                                                                                                                                                                                                         3080: 0x0623                           
                                                                                                                                                                                                                                         3081: 0x9400   PopLocalRef             durationMaxTimeAndTimeStep

000977              maxTimeAndTimeStep = GetMaxTimeAndTimeStep("xlong")                                                                                                                                                                  3082: 0x847F   PushLiteral             127
                                                                                                                                                                                                                                         3083: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3084: 0x5800   JumpSubr                1571
                                                                                                                                                                                                                                         3085: 0x0623                           
                                                                                                                                                                                                                                         3086: 0x9401   PopLocalRef             maxTimeAndTimeStep

                                                                                                                                                                                                                                         3087: 0x400A   Branch                  3098
000978          Else                                                                                                                                                                                                                     

000979              durationMaxTimeAndTimeStep = GetMaxTimeAndTimeStep("short")                                                                                                                                                          3088: 0x8476   PushLiteral             118
                                                                                                                                                                                                                                         3089: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3090: 0x5800   JumpSubr                1571
                                                                                                                                                                                                                                         3091: 0x0623                           
                                                                                                                                                                                                                                         3092: 0x9400   PopLocalRef             durationMaxTimeAndTimeStep

000980              maxTimeAndTimeStep = GetMaxTimeAndTimeStep("medium")                                                                                                                                                                 3093: 0x8479   PushLiteral             121
                                                                                                                                                                                                                                         3094: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3095: 0x5800   JumpSubr                1571
                                                                                                                                                                                                                                         3096: 0x0623                           
                                                                                                                                                                                                                                         3097: 0x9401   PopLocalRef             maxTimeAndTimeStep

000981          End If
000982          
000983          If (threshold < LOW_GRAVITY_THRESHOLD Or threshold > HIGH_GRAVITY_THRESHOLD) Then                                                                                                                                        3098: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         3099: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3100: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         3101: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         3102: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         3103: 0xEA08   PushConstFlt            8.0
                                                                                                                                                                                                                                         3104: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         3105: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         3106: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3107: 0x3C01   BranchFalse             3109

000984              Return False                                                                                                                                                                                                         3108: 0x0093   Return0                 

000985          End If
000986          
000987          If (duration < 0.0 Or duration > durationMaxTimeAndTimeStep(0)) Then                                                                                                                                                     3109: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         3110: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3111: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         3112: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         3113: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         3114: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3115: 0x8C00   PushLocalRef            durationMaxTimeAndTimeStep
                                                                                                                                                                                                                                         3116: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         3117: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         3118: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         3119: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3120: 0x3C01   BranchFalse             3122

000988              Return False                                                                                                                                                                                                         3121: 0x0093   Return0                 

000989          End If
000990          
000991          If (latency < 0.0 Or latency > maxTimeAndTimeStep(0)) Then                                                                                                                                                               3122: 0x8802   PushLocalI32            latency
                                                                                                                                                                                                                                         3123: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3124: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         3125: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         3126: 0x8802   PushLocalI32            latency
                                                                                                                                                                                                                                         3127: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3128: 0x8C01   PushLocalRef            maxTimeAndTimeStep
                                                                                                                                                                                                                                         3129: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         3130: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         3131: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         3132: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3133: 0x3C01   BranchFalse             3135

000992              Return False                                                                                                                                                                                                         3134: 0x0093   Return0                 

000993          End If
000994          
000995          If (windowByte < 0.0 Or windowByte > maxTimeAndTimeStep(0)) Then                                                                                                                                                         3135: 0x880B   PushLocalI32            windowByte
                                                                                                                                                                                                                                         3136: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3137: 0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                         3138: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         3139: 0x0024   IntCmpLT                
                                                                                                                                                                                                                                         3140: 0x880B   PushLocalI32            windowByte
                                                                                                                                                                                                                                         3141: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3142: 0x8C01   PushLocalRef            maxTimeAndTimeStep
                                                                                                                                                                                                                                         3143: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         3144: 0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                         3145: 0x003A   FltCmp                  
                                                                                                                                                                                                                                         3146: 0x0022   IntCmpGT                
                                                                                                                                                                                                                                         3147: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3148: 0x3C01   BranchFalse             3150

000996              Return False                                                                                                                                                                                                         3149: 0x0093   Return0                 

000997          End If
000998          
000999          'Ensure that axis byte affects axis bits only in the Transient Config Register
001000          axis = axis & PULSE_CFG_PEFE                                                                                                                                                                                             3150: 0x8806   PushLocalI32            axis
                                                                                                                                                                                                                                         3151: 0x803F   PushConstU10            63 (0x003F)
                                                                                                                                                                                                                                         3152: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3153: 0x9006   PopLocalI32             axis

001001          
001002          thresholdByte = FloatToByteRepresentation(threshold, GRAVITY_THRESHOLD_RESOLUTION, 0.0)                                                                                                                                  3154: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                         3155: 0x0110   PushConstI32            1031865893 (0x3D810625)
                                                                                                                                                                                                                                         3156: 0x0625                           
                                                                                                                                                                                                                                         3157: 0x3D81                           
                                                                                                                                                                                                                                         3158: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3159: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3160: 0x57A8   BranchSubrBack          2225
                                                                                                                                                                                                                                         3161: 0x9008   PopLocalI32             thresholdByte

001003          durationByte = FloatToByteRepresentation(duration, durationMaxTimeAndTimeStep(1), 0.0)                                                                                                                                   3162: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                         3163: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3164: 0x8C00   PushLocalRef            durationMaxTimeAndTimeStep
                                                                                                                                                                                                                                         3165: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         3166: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3167: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3168: 0x57B0   BranchSubrBack          2225
                                                                                                                                                                                                                                         3169: 0x9009   PopLocalI32             durationByte

001004          latencyByte = FloatToByteRepresentation(latency, maxTimeAndTimeStep(1), 0.0)                                                                                                                                             3170: 0x8802   PushLocalI32            latency
                                                                                                                                                                                                                                         3171: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3172: 0x8C01   PushLocalRef            maxTimeAndTimeStep
                                                                                                                                                                                                                                         3173: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         3174: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3175: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3176: 0x57B8   BranchSubrBack          2225
                                                                                                                                                                                                                                         3177: 0x900A   PopLocalI32             latencyByte

001005          windowByte = FloatToByteRepresentation(window, maxTimeAndTimeStep(1), 0.0)                                                                                                                                               3178: 0x8803   PushLocalI32            window
                                                                                                                                                                                                                                         3179: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3180: 0x8C01   PushLocalRef            maxTimeAndTimeStep
                                                                                                                                                                                                                                         3181: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                         3182: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                         3183: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3184: 0x57C0   BranchSubrBack          2225
                                                                                                                                                                                                                                         3185: 0x900B   PopLocalI32             windowByte

001006          
001007          result = result And Standby()                                                                                                                                                                                            3186: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3187: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3188: 0x57BA   BranchSubrBack          2235
                                                                                                                                                                                                                                         3189: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3190: 0x900C   PopLocalI32             result

001008          
001009          'Wake from pulse interrupt
001010          result = result And Write(CTRL_REG3_REG, Read(CTRL_REG3_REG) | CTRL_REG3_WAKE_PULSE)                                                                                                                                     3191: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3192: 0x802C   PushConstU10            44 (0x002C)
                                                                                                                                                                                                                                         3193: 0x802C   PushConstU10            44 (0x002C)
                                                                                                                                                                                                                                         3194: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3195: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         3196: 0x05D0                           
                                                                                                                                                                                                                                         3197: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3198: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3199: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3200: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         3201: 0x05F5                           
                                                                                                                                                                                                                                         3202: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3203: 0x900C   PopLocalI32             result

001011          'Enable pulse interrupts
001012          result = result And Write(CTRL_REG4_REG, Read(CTRL_REG4_REG) | CTRL_REG4_INT_EN_PULSE)                                                                                                                                   3204: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3205: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         3206: 0x802D   PushConstU10            45 (0x002D)
                                                                                                                                                                                                                                         3207: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3208: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         3209: 0x05D0                           
                                                                                                                                                                                                                                         3210: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3211: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3212: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3213: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         3214: 0x05F5                           
                                                                                                                                                                                                                                         3215: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3216: 0x900C   PopLocalI32             result

001013          
001014          If setPin2 Then                                                                                                                                                                                                          3217: 0x8807   PushLocalI32            setPin2
                                                                                                                                                                                                                                         3218: 0x3C0E   BranchFalse             3233

001015              result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) & ~CTRL_REG5_INT_CFG_PULSE)                                                                                                                             3219: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3220: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         3221: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         3222: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3223: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         3224: 0x05D0                           
                                                                                                                                                                                                                                         3225: 0x80F7   PushConstU10            247 (0x00F7)
                                                                                                                                                                                                                                         3226: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3227: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3228: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         3229: 0x05F5                           
                                                                                                                                                                                                                                         3230: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3231: 0x900C   PopLocalI32             result

                                                                                                                                                                                                                                         3232: 0x400D   Branch                  3246
001016          Else                                                                                                                                                                                                                     

001017              result = result And Write(CTRL_REG5_REG, Read(CTRL_REG5_REG) | CTRL_REG5_INT_CFG_PULSE)                                                                                                                              3233: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3234: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         3235: 0x802E   PushConstU10            46 (0x002E)
                                                                                                                                                                                                                                         3236: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3237: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         3238: 0x05D0                           
                                                                                                                                                                                                                                         3239: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3240: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3241: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3242: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         3243: 0x05F5                           
                                                                                                                                                                                                                                         3244: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3245: 0x900C   PopLocalI32             result

001018          End If
001019          
001020          If abortDoublePulse Then                                                                                                                                                                                                 3246: 0x8804   PushLocalI32            abortDoublePulse
                                                                                                                                                                                                                                         3247: 0x3C0D   BranchFalse             3261

001021              result = result And Write(PULSE_CFG_REG, Read(PULSE_CFG_REG) | PULSE_CFG_DPA)                                                                                                                                        3248: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3249: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                         3250: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                         3251: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3252: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         3253: 0x05D0                           
                                                                                                                                                                                                                                         3254: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                         3255: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3256: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3257: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         3258: 0x05F5                           
                                                                                                                                                                                                                                         3259: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3260: 0x900C   PopLocalI32             result

001022          End If
001023          
001024          'Latch events
001025          result = result And Write(PULSE_CFG_REG, Read(PULSE_CFG_REG) | PULSE_CFG_ELE)                                                                                                                                            3261: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3262: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                         3263: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                         3264: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3265: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         3266: 0x05D0                           
                                                                                                                                                                                                                                         3267: 0x8040   PushConstU10            64 (0x0040)
                                                                                                                                                                                                                                         3268: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3269: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3270: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         3271: 0x05F5                           
                                                                                                                                                                                                                                         3272: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3273: 0x900C   PopLocalI32             result

001026          'Enable on axis
001027          result = result And Write(PULSE_CFG_REG, (Read(PULSE_CFG_REG) & ~PULSE_CFG_PEFE) | axis)                                                                                                                                 3274: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3275: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                         3276: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                         3277: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3278: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         3279: 0x05D0                           
                                                                                                                                                                                                                                         3280: 0x80C0   PushConstU10            192 (0x00C0)
                                                                                                                                                                                                                                         3281: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3282: 0x8806   PushLocalI32            axis
                                                                                                                                                                                                                                         3283: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3284: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3285: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         3286: 0x05F5                           
                                                                                                                                                                                                                                         3287: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3288: 0x900C   PopLocalI32             result

001028          
001029          'Set Threshold on all axis
001030          result = result And Write(PULSE_THSX_REG, thresholdByte)                                                                                                                                                                 3289: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3290: 0x8023   PushConstU10            35 (0x0023)
                                                                                                                                                                                                                                         3291: 0x8808   PushLocalI32            thresholdByte
                                                                                                                                                                                                                                         3292: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3293: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         3294: 0x05F5                           
                                                                                                                                                                                                                                         3295: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3296: 0x900C   PopLocalI32             result

001031          result = result And Write(PULSE_THSY_REG, thresholdByte)                                                                                                                                                                 3297: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3298: 0x8024   PushConstU10            36 (0x0024)
                                                                                                                                                                                                                                         3299: 0x8808   PushLocalI32            thresholdByte
                                                                                                                                                                                                                                         3300: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3301: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         3302: 0x05F5                           
                                                                                                                                                                                                                                         3303: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3304: 0x900C   PopLocalI32             result

001032          result = result And Write(PULSE_THSZ_REG, thresholdByte)                                                                                                                                                                 3305: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3306: 0x8025   PushConstU10            37 (0x0025)
                                                                                                                                                                                                                                         3307: 0x8808   PushLocalI32            thresholdByte
                                                                                                                                                                                                                                         3308: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3309: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         3310: 0x05F5                           
                                                                                                                                                                                                                                         3311: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3312: 0x900C   PopLocalI32             result

001033          
001034          If enableLowPassFilter Then                                                                                                                                                                                              3313: 0x8805   PushLocalI32            enableLowPassFilter
                                                                                                                                                                                                                                         3314: 0x3C0D   BranchFalse             3328

001035              'Enable Low-Pass Filter for pulse processing
001036              'Changes the time range/time step tables
001037              result = result And Write(HP_FILTER_CUTOFF_REG, Read(HP_FILTER_CUTOFF_REG) | HP_FILTER_CUTOFF_Pulse_LPF_EN)                                                                                                          3315: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3316: 0x800F   PushConstU10            15 (0x000F)
                                                                                                                                                                                                                                         3317: 0x800F   PushConstU10            15 (0x000F)
                                                                                                                                                                                                                                         3318: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3319: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         3320: 0x05D0                           
                                                                                                                                                                                                                                         3321: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3322: 0x002D   IntOr                   
                                                                                                                                                                                                                                         3323: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3324: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         3325: 0x05F5                           
                                                                                                                                                                                                                                         3326: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3327: 0x900C   PopLocalI32             result

001038          End If
001039          
001040          'Set Duration
001041          result = result And Write(PULSE_TMLT_REG, durationByte)                                                                                                                                                                  3328: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3329: 0x8026   PushConstU10            38 (0x0026)
                                                                                                                                                                                                                                         3330: 0x8809   PushLocalI32            durationByte
                                                                                                                                                                                                                                         3331: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3332: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         3333: 0x05F5                           
                                                                                                                                                                                                                                         3334: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3335: 0x900C   PopLocalI32             result

001042          'Set Latency
001043          result = result And Write(PULSE_LTCY_REG, latencyByte)                                                                                                                                                                   3336: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3337: 0x8027   PushConstU10            39 (0x0027)
                                                                                                                                                                                                                                         3338: 0x880A   PushLocalI32            latencyByte
                                                                                                                                                                                                                                         3339: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3340: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         3341: 0x05F5                           
                                                                                                                                                                                                                                         3342: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3343: 0x900C   PopLocalI32             result

001044          'Set Window
001045          result = result And Write(PULSE_WIND_REG, windowByte)                                                                                                                                                                    3344: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3345: 0x8028   PushConstU10            40 (0x0028)
                                                                                                                                                                                                                                         3346: 0x880B   PushLocalI32            windowByte
                                                                                                                                                                                                                                         3347: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3348: 0x5800   JumpSubr                1525
                                                                                                                                                                                                                                         3349: 0x05F5                           
                                                                                                                                                                                                                                         3350: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3351: 0x900C   PopLocalI32             result

001046          
001047          result = result And Activate()                                                                                                                                                                                           3352: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3353: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3354: 0x5800   JumpSubr                2246
                                                                                                                                                                                                                                         3355: 0x08C6                           
                                                                                                                                                                                                                                         3356: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3357: 0x900C   PopLocalI32             result

001048          
001049          Return result                                                                                                                                                                                                            3358: 0x880C   PushLocalI32            result
                                                                                                                                                                                                                                         3359: 0x0092   ReturnValType           

001050          
001051      End Function // ConfigurePulseInterrupt                                                                                                                                                                                      3360: 0x0093   Return0                 

001052      
001053      
001054      Public Function GetIntSource() As ListOfString                                                                                                                                                                               3361: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         3362: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

001055          Dim intSource As Byte = Read(INT_SOURCE_REG)                                                                                                                                                                             3363: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                         3364: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3365: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         3366: 0x05D0                           
                                                                                                                                                                                                                                         3367: 0x9000   PopLocalI32             intSource

001056          Dim result As ListOfString = New ListOfString                                                                                                                                                                            3368: 0x8013   PushConstU10            19 (0x0013)
                                                                                                                                                                                                                                         3369: 0x0010   ClassNew                
                                                                                                                                                                                                                                         3370: 0x9400   PopLocalRef             result

001057          
001058          If (intSource & INT_SOURCE_SRC_ASLP) = INT_SOURCE_SRC_ASLP Then                                                                                                                                                          3371: 0x8800   PushLocalI32            intSource
                                                                                                                                                                                                                                         3372: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                         3373: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3374: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                         3375: 0x2404   BranchNE                3380

001059              result.Add("autosleep")                                                                                                                                                                                              3376: 0x8442   PushLiteral             66
                                                                                                                                                                                                                                         3377: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3378: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3379: 0x4023   Branch                  3415
001060          ElseIf (intSource & INT_SOURCE_SRC_FF_MT) = INT_SOURCE_SRC_FF_MT Then                                                                                                                                                    3380: 0x8800   PushLocalI32            intSource
                                                                                                                                                                                                                                         3381: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         3382: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3383: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         3384: 0x2404   BranchNE                3389

001061              result.Add("freefall")                                                                                                                                                                                               3385: 0x8482   PushLiteral             130
                                                                                                                                                                                                                                         3386: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3387: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3388: 0x401A   Branch                  3415
001062          ElseIf (intSource & INT_SOURCE_SRC_LNDPRT) = INT_SOURCE_SRC_LNDPRT Then                                                                                                                                                  3389: 0x8800   PushLocalI32            intSource
                                                                                                                                                                                                                                         3390: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3391: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3392: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3393: 0x2404   BranchNE                3398

001063              result.Add("orientation")                                                                                                                                                                                            3394: 0x8486   PushLiteral             134
                                                                                                                                                                                                                                         3395: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3396: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3397: 0x4011   Branch                  3415
001064          ElseIf (intSource & INT_SOURCE_SRC_PULSE) = INT_SOURCE_SRC_PULSE Then                                                                                                                                                    3398: 0x8800   PushLocalI32            intSource
                                                                                                                                                                                                                                         3399: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3400: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3401: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3402: 0x2404   BranchNE                3407

001065              result.Add("pulse")                                                                                                                                                                                                  3403: 0x843C   PushLiteral             60
                                                                                                                                                                                                                                         3404: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3405: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3406: 0x4008   Branch                  3415
001066          ElseIf (intSource & INT_SOURCE_SRC_TRANS) = INT_SOURCE_SRC_TRANS Then                                                                                                                                                    3407: 0x8800   PushLocalI32            intSource
                                                                                                                                                                                                                                         3408: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         3409: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3410: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         3411: 0x2403   BranchNE                3415

001067              result.Add("shock")                                                                                                                                                                                                  3412: 0x8439   PushLiteral             57
                                                                                                                                                                                                                                         3413: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3414: 0x00A3   ListAdd                 

001068          End If
001069          
001070          Return result                                                                                                                                                                                                            3415: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3416: 0x0095   ReturnRefType           

001071      End Function // GetIntSource                                                                                                                                                                                                 3417: 0x0096   ReturnNothing           

001072      
001073      
001074      Public Function Autosleep() As String                                                                                                                                                                                        3418: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         3419: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

001075          Dim sysmod As Byte = Read(SYSMOD_REG)                                                                                                                                                                                    3420: 0x800B   PushConstU10            11 (0x000B)
                                                                                                                                                                                                                                         3421: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3422: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         3423: 0x05D0                           
                                                                                                                                                                                                                                         3424: 0x9000   PopLocalI32             sysmod

001076          
001077          If (sysmod & SYSMOD_SYSMOD) = SYSMOD_STANDBY Then                                                                                                                                                                        3425: 0x8800   PushLocalI32            sysmod
                                                                                                                                                                                                                                         3426: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         3427: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3428: 0x3803   BranchTrue              3432

001078              Return "standby"                                                                                                                                                                                                     3429: 0x848A   PushLiteral             138
                                                                                                                                                                                                                                         3430: 0x0095   ReturnRefType           

                                                                                                                                                                                                                                         3431: 0x400F   Branch                  3447
001079          ElseIf (sysmod & SYSMOD_SYSMOD) = SYSMOD_WAKE Then                                                                                                                                                                       3432: 0x8800   PushLocalI32            sysmod
                                                                                                                                                                                                                                         3433: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         3434: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3435: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3436: 0x2403   BranchNE                3440

001080              Return "active"                                                                                                                                                                                                      3437: 0x848D   PushLiteral             141
                                                                                                                                                                                                                                         3438: 0x0095   ReturnRefType           

                                                                                                                                                                                                                                         3439: 0x4007   Branch                  3447
001081          ElseIf (sysmod & SYSMOD_SYSMOD) = SYSMOD_SLEEP Then                                                                                                                                                                      3440: 0x8800   PushLocalI32            sysmod
                                                                                                                                                                                                                                         3441: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                         3442: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3443: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         3444: 0x2402   BranchNE                3447

001082              Return "sleep"                                                                                                                                                                                                       3445: 0x8490   PushLiteral             144
                                                                                                                                                                                                                                         3446: 0x0095   ReturnRefType           

001083          End If
001084      End Function // Autosleep                                                                                                                                                                                                    3447: 0x0096   ReturnNothing           

001085      
001086      
001087      Public Function Freefall() As ListOfString                                                                                                                                                                                   3448: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         3449: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

001088          Dim freefallStatus As Byte = Read(FF_MT_SRC_REG)                                                                                                                                                                         3450: 0x8016   PushConstU10            22 (0x0016)
                                                                                                                                                                                                                                         3451: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3452: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         3453: 0x05D0                           
                                                                                                                                                                                                                                         3454: 0x9000   PopLocalI32             freefallStatus

001089          Dim result As ListOfString = New ListOfString                                                                                                                                                                            3455: 0x8013   PushConstU10            19 (0x0013)
                                                                                                                                                                                                                                         3456: 0x0010   ClassNew                
                                                                                                                                                                                                                                         3457: 0x9400   PopLocalRef             result

001090          
001091          If (freefallStatus & FF_MT_SRC_XHE) = FF_MT_SRC_XHE Then                                                                                                                                                                 3458: 0x8800   PushLocalI32            freefallStatus
                                                                                                                                                                                                                                         3459: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         3460: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3461: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         3462: 0x2410   BranchNE                3479

001092              result.Add("x")                                                                                                                                                                                                      3463: 0x8493   PushLiteral             147
                                                                                                                                                                                                                                         3464: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3465: 0x00A3   ListAdd                 

001093              If (freefallStatus & FF_MT_SRC_XHP) = FF_MT_SRC_XHP Then                                                                                                                                                             3466: 0x8800   PushLocalI32            freefallStatus
                                                                                                                                                                                                                                         3467: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3468: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3469: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3470: 0x2404   BranchNE                3475

001094                  result.Add("neg")                                                                                                                                                                                                3471: 0x8495   PushLiteral             149
                                                                                                                                                                                                                                         3472: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3473: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3474: 0x4003   Branch                  3478
001095              Else                                                                                                                                                                                                                 

001096                  result.Add("pos")                                                                                                                                                                                                3475: 0x8497   PushLiteral             151
                                                                                                                                                                                                                                         3476: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3477: 0x00A3   ListAdd                 

001097              End If
                                                                                                                                                                                                                                         3478: 0x4029   Branch                  3520
001098          ElseIf (freefallStatus & FF_MT_SRC_YHE) = FF_MT_SRC_YHE Then                                                                                                                                                             3479: 0x8800   PushLocalI32            freefallStatus
                                                                                                                                                                                                                                         3480: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3481: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3482: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3483: 0x2410   BranchNE                3500

001099              result.Add("y")                                                                                                                                                                                                      3484: 0x8499   PushLiteral             153
                                                                                                                                                                                                                                         3485: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3486: 0x00A3   ListAdd                 

001100              If (freefallStatus & FF_MT_SRC_YHP) = FF_MT_SRC_YHP Then                                                                                                                                                             3487: 0x8800   PushLocalI32            freefallStatus
                                                                                                                                                                                                                                         3488: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         3489: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3490: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         3491: 0x2404   BranchNE                3496

001101                  result.Add("neg")                                                                                                                                                                                                3492: 0x8495   PushLiteral             149
                                                                                                                                                                                                                                         3493: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3494: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3495: 0x4003   Branch                  3499
001102              Else                                                                                                                                                                                                                 

001103                  result.Add("pos")                                                                                                                                                                                                3496: 0x8497   PushLiteral             151
                                                                                                                                                                                                                                         3497: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3498: 0x00A3   ListAdd                 

001104              End If
                                                                                                                                                                                                                                         3499: 0x4014   Branch                  3520
001105          ElseIf (freefallStatus & FF_MT_SRC_ZHE) = FF_MT_SRC_ZHE Then                                                                                                                                                             3500: 0x8800   PushLocalI32            freefallStatus
                                                                                                                                                                                                                                         3501: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         3502: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3503: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         3504: 0x240F   BranchNE                3520

001106              result.Add("z")                                                                                                                                                                                                      3505: 0x849B   PushLiteral             155
                                                                                                                                                                                                                                         3506: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3507: 0x00A3   ListAdd                 

001107              If (freefallStatus & FF_MT_SRC_ZHP) = FF_MT_SRC_ZHP Then                                                                                                                                                             3508: 0x8800   PushLocalI32            freefallStatus
                                                                                                                                                                                                                                         3509: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3510: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3511: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3512: 0x2404   BranchNE                3517

001108                  result.Add("neg")                                                                                                                                                                                                3513: 0x8495   PushLiteral             149
                                                                                                                                                                                                                                         3514: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3515: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3516: 0x4003   Branch                  3520
001109              Else                                                                                                                                                                                                                 

001110                  result.Add("pos")                                                                                                                                                                                                3517: 0x8497   PushLiteral             151
                                                                                                                                                                                                                                         3518: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3519: 0x00A3   ListAdd                 

001111              End If
001112          End If
001113          
001114          Return result                                                                                                                                                                                                            3520: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3521: 0x0095   ReturnRefType           

001115      End Function // Freefall                                                                                                                                                                                                     3522: 0x0096   ReturnNothing           

001116      
001117      
001118      Public Function Orientation() As ListOfString                                                                                                                                                                                3523: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         3524: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

001119          Dim plStatus As Byte = Read(PL_STATUS_REG)                                                                                                                                                                               3525: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3526: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3527: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         3528: 0x05D0                           
                                                                                                                                                                                                                                         3529: 0x9000   PopLocalI32             plStatus

001120          Dim result As ListOfString = New ListOfString                                                                                                                                                                            3530: 0x8013   PushConstU10            19 (0x0013)
                                                                                                                                                                                                                                         3531: 0x0010   ClassNew                
                                                                                                                                                                                                                                         3532: 0x9400   PopLocalRef             result

001121          
001122          Select plStatus & PL_STATUS_LAPO                                                                                                                                                                                         3533: 0x8800   PushLocalI32            plStatus
                                                                                                                                                                                                                                         3534: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                         3535: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3536: 0x0122   CaseComputed            
                                                                                                                                                                                                                                         3537: 0x0002                           CaseCommonClass=Byte
                                                                                                                                                                                                                                         3538: 0x0004                           NumberOfCaseEntries=4
                                                                                                                                                                                                                                         3539: 0x0017                           CaseElseBranch=3563
                                                                                                                                                                                                                                         3540: 0x0000                           CaseValue=0
                                                                                                                                                                                                                                         3541: 0x0008                           CaseBranch=3548
                                                                                                                                                                                                                                         3542: 0x0002                           CaseValue=2
                                                                                                                                                                                                                                         3543: 0x000C                           CaseBranch=3552
                                                                                                                                                                                                                                         3544: 0x0004                           CaseValue=4
                                                                                                                                                                                                                                         3545: 0x0010                           CaseBranch=3556
                                                                                                                                                                                                                                         3546: 0x0006                           CaseValue=6
                                                                                                                                                                                                                                         3547: 0x0014                           CaseBranch=3560

001123              Case 0x00
001124                  result.Add("portrait up")                                                                                                                                                                                        3548: 0x849D   PushLiteral             157
                                                                                                                                                                                                                                         3549: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3550: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3551: 0x400B   Branch                  3563
001125              Case 0x02                                                                                                                                                                                                            

001126                  result.Add("portrait down")                                                                                                                                                                                      3552: 0x84A1   PushLiteral             161
                                                                                                                                                                                                                                         3553: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3554: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3555: 0x4007   Branch                  3563
001127              Case 0x04                                                                                                                                                                                                            

001128                  result.Add("landscape right")                                                                                                                                                                                    3556: 0x84A6   PushLiteral             166
                                                                                                                                                                                                                                         3557: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3558: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3559: 0x4003   Branch                  3563
001129              Case 0x06                                                                                                                                                                                                            

001130                  result.Add("landscape left")                                                                                                                                                                                     3560: 0x84AB   PushLiteral             171
                                                                                                                                                                                                                                         3561: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3562: 0x00A3   ListAdd                 

001131          End Select
001132          
001133          If (plStatus & PL_STATUS_BAFRO) = 1 Then                                                                                                                                                                                 3563: 0x8800   PushLocalI32            plStatus
                                                                                                                                                                                                                                         3564: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3565: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3566: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3567: 0x2404   BranchNE                3572

001134              result.Add("back")                                                                                                                                                                                                   3568: 0x84B0   PushLiteral             176
                                                                                                                                                                                                                                         3569: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3570: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3571: 0x4003   Branch                  3575
001135          Else                                                                                                                                                                                                                     

001136              result.Add("front")                                                                                                                                                                                                  3572: 0x84B3   PushLiteral             179
                                                                                                                                                                                                                                         3573: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3574: 0x00A3   ListAdd                 

001137          End If
001138          
001139          Return result                                                                                                                                                                                                            3575: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3576: 0x0095   ReturnRefType           

001140      End Function // Orientation                                                                                                                                                                                                  3577: 0x0096   ReturnNothing           

001141      
001142      
001143      Public Function Pulse() As String                                                                                                                                                                                            3578: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         3579: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

001144          Dim pulseStatus As Byte = Read(PULSE_SRC_REG) & PULSE_SRC_DPE                                                                                                                                                            3580: 0x8022   PushConstU10            34 (0x0022)
                                                                                                                                                                                                                                         3581: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3582: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         3583: 0x05D0                           
                                                                                                                                                                                                                                         3584: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3585: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3586: 0x9000   PopLocalI32             pulseStatus

001145          Dim result As ListOfString = New ListOfString                                                                                                                                                                            3587: 0x8013   PushConstU10            19 (0x0013)
                                                                                                                                                                                                                                         3588: 0x0010   ClassNew                
                                                                                                                                                                                                                                         3589: 0x9400   PopLocalRef             result

001146          
001147          If pulseStatus = PULSE_SRC_DPE Then                                                                                                                                                                                      3590: 0x8800   PushLocalI32            pulseStatus
                                                                                                                                                                                                                                         3591: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3592: 0x2403   BranchNE                3596

001148              Return "double"                                                                                                                                                                                                      3593: 0x843F   PushLiteral             63
                                                                                                                                                                                                                                         3594: 0x0095   ReturnRefType           

                                                                                                                                                                                                                                         3595: 0x4002   Branch                  3598
001149          Else                                                                                                                                                                                                                     

001150              Return "single"                                                                                                                                                                                                      3596: 0x84B6   PushLiteral             182
                                                                                                                                                                                                                                         3597: 0x0095   ReturnRefType           

001151          End If
001152          
001153      End Function // Pulse                                                                                                                                                                                                        3598: 0x0096   ReturnNothing           

001154      
001155      
001156      Public Function Shock() As ListOfString                                                                                                                                                                                      3599: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                         3600: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

001157          Dim shockStatus As Byte = Read(TRANSIENT_SRC_REG)                                                                                                                                                                        3601: 0x801E   PushConstU10            30 (0x001E)
                                                                                                                                                                                                                                         3602: 0x000D   PushMe                  
                                                                                                                                                                                                                                         3603: 0x5800   JumpSubr                1488
                                                                                                                                                                                                                                         3604: 0x05D0                           
                                                                                                                                                                                                                                         3605: 0x9000   PopLocalI32             shockStatus

001158          Dim result As ListOfString = New ListOfString                                                                                                                                                                            3606: 0x8013   PushConstU10            19 (0x0013)
                                                                                                                                                                                                                                         3607: 0x0010   ClassNew                
                                                                                                                                                                                                                                         3608: 0x9400   PopLocalRef             result

001159          
001160          If (shockStatus & TRANSIENT_SRC_XTRANSE) = TRANSIENT_SRC_XTRANSE Then                                                                                                                                                    3609: 0x8800   PushLocalI32            shockStatus
                                                                                                                                                                                                                                         3610: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         3611: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3612: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                         3613: 0x2410   BranchNE                3630

001161              result.Add("x")                                                                                                                                                                                                      3614: 0x8493   PushLiteral             147
                                                                                                                                                                                                                                         3615: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3616: 0x00A3   ListAdd                 

001162              If (shockStatus & TRANSIENT_SRC_X_TRANS_POL) = TRANSIENT_SRC_X_TRANS_POL Then                                                                                                                                        3617: 0x8800   PushLocalI32            shockStatus
                                                                                                                                                                                                                                         3618: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3619: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3620: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                         3621: 0x2404   BranchNE                3626

001163                  result.Add("neg")                                                                                                                                                                                                3622: 0x8495   PushLiteral             149
                                                                                                                                                                                                                                         3623: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3624: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3625: 0x4003   Branch                  3629
001164              Else                                                                                                                                                                                                                 

001165                  result.Add("pos")                                                                                                                                                                                                3626: 0x8497   PushLiteral             151
                                                                                                                                                                                                                                         3627: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3628: 0x00A3   ListAdd                 

001166              End If
                                                                                                                                                                                                                                         3629: 0x4029   Branch                  3671
001167          ElseIf (shockStatus & TRANSIENT_SRC_YTRANSE) = TRANSIENT_SRC_YTRANSE Then                                                                                                                                                3630: 0x8800   PushLocalI32            shockStatus
                                                                                                                                                                                                                                         3631: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3632: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3633: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                         3634: 0x2410   BranchNE                3651

001168              result.Add("y")                                                                                                                                                                                                      3635: 0x8499   PushLiteral             153
                                                                                                                                                                                                                                         3636: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3637: 0x00A3   ListAdd                 

001169              If (shockStatus & TRANSIENT_SRC_Y_TRANS_POL) = TRANSIENT_SRC_Y_TRANS_POL Then                                                                                                                                        3638: 0x8800   PushLocalI32            shockStatus
                                                                                                                                                                                                                                         3639: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         3640: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3641: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                         3642: 0x2404   BranchNE                3647

001170                  result.Add("neg")                                                                                                                                                                                                3643: 0x8495   PushLiteral             149
                                                                                                                                                                                                                                         3644: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3645: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3646: 0x4003   Branch                  3650
001171              Else                                                                                                                                                                                                                 

001172                  result.Add("pos")                                                                                                                                                                                                3647: 0x8497   PushLiteral             151
                                                                                                                                                                                                                                         3648: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3649: 0x00A3   ListAdd                 

001173              End If
                                                                                                                                                                                                                                         3650: 0x4014   Branch                  3671
001174          ElseIf (shockStatus & TRANSIENT_SRC_ZTRANSE) = TRANSIENT_SRC_ZTRANSE Then                                                                                                                                                3651: 0x8800   PushLocalI32            shockStatus
                                                                                                                                                                                                                                         3652: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         3653: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3654: 0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                         3655: 0x240F   BranchNE                3671

001175              result.Add("z")                                                                                                                                                                                                      3656: 0x849B   PushLiteral             155
                                                                                                                                                                                                                                         3657: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3658: 0x00A3   ListAdd                 

001176              If (shockStatus & TRANSIENT_SRC_Z_TRANS_POL) = TRANSIENT_SRC_Z_TRANS_POL Then                                                                                                                                        3659: 0x8800   PushLocalI32            shockStatus
                                                                                                                                                                                                                                         3660: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3661: 0x001F   IntAnd                  
                                                                                                                                                                                                                                         3662: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                         3663: 0x2404   BranchNE                3668

001177                  result.Add("neg")                                                                                                                                                                                                3664: 0x8495   PushLiteral             149
                                                                                                                                                                                                                                         3665: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3666: 0x00A3   ListAdd                 

                                                                                                                                                                                                                                         3667: 0x4003   Branch                  3671
001178              Else                                                                                                                                                                                                                 

001179                  result.Add("pos")                                                                                                                                                                                                3668: 0x8497   PushLiteral             151
                                                                                                                                                                                                                                         3669: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3670: 0x00A3   ListAdd                 

001180              End If
001181          End If
001182          
001183          Return result                                                                                                                                                                                                            3671: 0x8C00   PushLocalRef            result
                                                                                                                                                                                                                                         3672: 0x0095   ReturnRefType           

001184      End Function // Shock                                                                                                                                                                                                        3673: 0x0096   ReturnNothing           

001185      
001186      
001187      Public Function GetVersion() As String                                                                                                                                                                                       3674: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

001188          Return VERSION                                                                                                                                                                                                           3675: 0x8412   PushLiteral             18
                                                                                                                                                                                                                                         3676: 0x0095   ReturnRefType           

001189      End Function // GetVersion                                                                                                                                                                                                   3677: 0x0096   ReturnNothing           

001190      
001191      
001192  End Class                                                                                                                                                                                                                        1333: 0x0097   ReturnMe                


****** BLOCKS and VARIABLES for MMA8652
    Block Class (Line 72:1192)
        MMA8652         Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        String          VERSION         (Literal="0.1.0")
        Byte            MMA8652_I2C_ADDR(Literal=29)
        Integer         I2C_SPEED       (Literal=400000)
        Byte            OUT_X_MSB_REG   (Literal=1)
        Byte            OUT_X_LSB_REG   (Literal=2)
        Byte            OUT_Y_MSB_REG   (Literal=3)
        Byte            OUT_Y_LSB_REG   (Literal=4)
        Byte            OUT_Z_MSB_REG   (Literal=5)
        Byte            OUT_Z_LSB_REG   (Literal=6)
        Byte            SYSMOD_REG      (Literal=11)
        Byte            INT_SOURCE_REG  (Literal=12)
        Byte            WHO_AM_I_REG    (Literal=13)
        Byte            XYZ_DATA_CFG_REG(Literal=14)
        Byte            HP_FILTER_CUTOFF(Literal=15)
        Byte            PL_STATUS_REG   (Literal=16)
        Byte            PL_CFG_REG      (Literal=17)
        Byte            PL_COUNT_REG    (Literal=18)
        Byte            PL_BF_ZCOMP_REG (Literal=19)
        Byte            PL_THS_REG      (Literal=20)
        Byte            FF_MT_CFG_REG   (Literal=21)
        Byte            FF_MT_SRC_REG   (Literal=22)
        Byte            FF_MT_THS_REG   (Literal=23)
        Byte            FF_MT_COUNT_REG (Literal=24)
        Byte            TRANSIENT_CFG_RE(Literal=29)
        Byte            TRANSIENT_SRC_RE(Literal=30)
        Byte            TRANSIENT_THS_RE(Literal=31)
        Byte            TRANSIENT_COUNT_(Literal=32)
        Byte            PULSE_CFG_REG   (Literal=33)
        Byte            PULSE_SRC_REG   (Literal=34)
        Byte            PULSE_THSX_REG  (Literal=35)
        Byte            PULSE_THSY_REG  (Literal=36)
        Byte            PULSE_THSZ_REG  (Literal=37)
        Byte            PULSE_TMLT_REG  (Literal=38)
        Byte            PULSE_LTCY_REG  (Literal=39)
        Byte            PULSE_WIND_REG  (Literal=40)
        Byte            ASLP_COUNT_REG  (Literal=41)
        Byte            CTRL_REG1_REG   (Literal=42)
        Byte            CTRL_REG2_REG   (Literal=43)
        Byte            CTRL_REG3_REG   (Literal=44)
        Byte            CTRL_REG4_REG   (Literal=45)
        Byte            CTRL_REG5_REG   (Literal=46)
        Byte            SYSMOD_STANDBY  (Literal=0)
        Byte            SYSMOD_WAKE     (Literal=1)
        Byte            SYSMOD_SLEEP    (Literal=2)
        Byte            SYSMOD_SYSMOD   (Literal=3)
        Byte            INT_SOURCE_SRC_A(Literal=128)
        Byte            INT_SOURCE_SRC_T(Literal=32)
        Byte            INT_SOURCE_SRC_L(Literal=16)
        Byte            INT_SOURCE_SRC_P(Literal=8)
        Byte            INT_SOURCE_SRC_F(Literal=4)
        Byte            WHO_AM_I_       (Literal=74)
        Byte            XYZ_DATA_CFG_HPF(Literal=16)
        Byte            XYZ_DATA_CFG_FS (Literal=3)
        Byte            HP_FILTER_CUTOFF(Literal=16)
        Byte            PL_STATUS_LAPO  (Literal=6)
        Byte            PL_STATUS_BAFRO (Literal=1)
        Byte            PL_CFG_DBCNTM   (Literal=128)
        Byte            PL_CFG_PL_EN    (Literal=64)
        Byte            PL_BF_ZCOMP_BKFR(Literal=192)
        Byte            PL_BF_ZCOMP_ZLOC(Literal=7)
        Byte            PL_THS_THS      (Literal=248)
        Byte            PL_THS_HYS      (Literal=7)
        Byte            FF_MT_CFG_ELE   (Literal=128)
        Byte            FF_MT_CFG_OAE   (Literal=64)
        Byte            FF_MT_CFG_ZEFE  (Literal=32)
        Byte            FF_MT_CFG_YEFE  (Literal=16)
        Byte            FF_MT_CFG_XEFE  (Literal=8)
        Byte            FF_MT_CFG_EFE   (Literal=56)
        Byte            FF_MT_SRC_ZHE   (Literal=32)
        Byte            FF_MT_SRC_ZHP   (Literal=16)
        Byte            FF_MT_SRC_YHE   (Literal=8)
        Byte            FF_MT_SRC_YHP   (Literal=4)
        Byte            FF_MT_SRC_XHE   (Literal=2)
        Byte            FF_MT_SRC_XHP   (Literal=1)
        Byte            TRANSIENT_CFG_EL(Literal=16)
        Byte            TRANSIENT_CFG_TE(Literal=14)
        Byte            TRANSIENT_SRC_ZT(Literal=32)
        Byte            TRANSIENT_SRC_Z_(Literal=16)
        Byte            TRANSIENT_SRC_YT(Literal=8)
        Byte            TRANSIENT_SRC_Y_(Literal=4)
        Byte            TRANSIENT_SRC_XT(Literal=2)
        Byte            TRANSIENT_SRC_X_(Literal=1)
        Byte            PULSE_CFG_DPA   (Literal=128)
        Byte            PULSE_CFG_ELE   (Literal=64)
        Byte            PULSE_CFG_PEFE  (Literal=63)
        Byte            PULSE_SRC_DPE   (Literal=8)
        Byte            CTRL_REG1_ASLP_R(Literal=192)
        Byte            CTRL_REG1_DR    (Literal=56)
        Byte            CTRL_REG1_ACTIVE(Literal=1)
        Byte            CTRL_REG2_RST   (Literal=64)
        Byte            CTRL_REG2_SMODS (Literal=24)
        Byte            CTRL_REG2_SLPE  (Literal=4)
        Byte            CTRL_REG2_MODS  (Literal=3)
        Byte            CTRL_REG3_WAKE_T(Literal=64)
        Byte            CTRL_REG3_WAKE_L(Literal=32)
        Byte            CTRL_REG3_WAKE_P(Literal=16)
        Byte            CTRL_REG3_WAKE_F(Literal=8)
        Byte            CTRL_REG4_INT_EN(Literal=128)
        Byte            CTRL_REG4_INT_EN(Literal=32)
        Byte            CTRL_REG4_INT_EN(Literal=16)
        Byte            CTRL_REG4_INT_EN(Literal=8)
        Byte            CTRL_REG4_INT_EN(Literal=4)
        Byte            CTRL_REG5_INT_CF(Literal=128)
        Byte            CTRL_REG5_INT_CF(Literal=32)
        Byte            CTRL_REG5_INT_CF(Literal=16)
        Byte            CTRL_REG5_INT_CF(Literal=8)
        Byte            CTRL_REG5_INT_CF(Literal=4)
        Float           LOW_ZLOCK_THRESH(Literal=14)
        Float           HIGH_ZLOCK_THRES(Literal=42)
        Float           ZLOCK_THRESHOLD_(Literal=4)
        Float           LOW_GRAVITY_THRE(Literal=0)
        Float           HIGH_GRAVITY_THR(Literal=8)
        Float           GRAVITY_THRESHOL(Literal=0.063)
        Float           LOW_ASLP_DURATIO(Literal=0)
        Float           NORMAL_ASLP_DURA(Literal=81000)
        Float           HIGH_ASLP_DURATI(Literal=162000)
        Float           NORMAL_ASLP_COUN(Literal=320)
        Float           HIGH_ASLP_COUNT_(Literal=640)
        I2c             gAccelerometer  (MemberRefTypVariableOffset=0)
        Boolean         online          (MemberValTypVariableOffset=4)
        Block Function Init (Line 354:370)
            Boolean         enableHighPassFi(LocalValTypVariableOffset=0)
            MMA8652_SCALES  outputDataFormat(LocalValTypVariableOffset=1)
            Block If Then  (Line 356:369)
                Block If Then  (Line 362:364)
                End Block
            End Block
        End Block
        Block Sub New (Line 373:375)
        End Block
        Block Sub New (Line 378:380)
            Boolean         enableHighPassFi(LocalValTypVariableOffset=0)
            MMA8652_SCALES  outputDataFormat(LocalValTypVariableOffset=1)
        End Block
        Block Function Accel (Line 383:413)
            ListOfByte      data            (LocalRefTypVariableOffset=0)
            ListOfFloat     output          (LocalRefTypVariableOffset=1)
            Byte            outputDataFormat(LocalValTypVariableOffset=0)
            Short           accelerationRead(LocalValTypVariableOffset=1)
            Float           convertedReading(LocalValTypVariableOffset=2)
            Float           scaleFactor     (LocalValTypVariableOffset=3)
            Block For  (Line 400:410)
                Integer         axisCount       (LocalValTypVariableOffset=4)
                Block If Then  (Line 404:406)
                End Block
            End Block
        End Block
        Block Function Read (Line 416:424)
            Byte            result          (LocalValTypVariableOffset=1)
            ListOfByte      value           (LocalRefTypVariableOffset=0)
            Byte            address         (LocalValTypVariableOffset=0)
            Block If Then  (Line 420:422)
            End Block
        End Block
        Block Function Read (Line 427:434)
            ListOfByte      data            (LocalRefTypVariableOffset=0)
            Byte            address         (LocalValTypVariableOffset=0)
            Byte            length          (LocalValTypVariableOffset=1)
        End Block
        Block Function Write (Line 437:443)
            ListOfByte      data            (LocalRefTypVariableOffset=0)
            Byte            address         (LocalValTypVariableOffset=0)
            Byte            value           (LocalValTypVariableOffset=1)
        End Block
        Block Function Write (Line 446:450)
            Byte            address         (LocalValTypVariableOffset=0)
            ListOfByte      values          (LocalRefTypVariableOffset=0)
        End Block
        Block Function Reset (Line 454:460)
            Boolean         result          (LocalValTypVariableOffset=0)
            Block While  (Line 456:458)
            End Block
        End Block
        Block Function GetMaxTimeAndTimeStep (Line 464:655)
            Byte            frequency       (LocalValTypVariableOffset=0)
            Byte            mode            (LocalValTypVariableOffset=1)
            Float           ms              (LocalValTypVariableOffset=2)
            Float           time            (LocalValTypVariableOffset=3)
            Integer         offset          (LocalValTypVariableOffset=4)
            ListOfFloat     msTable         (LocalRefTypVariableOffset=1)
            ListOfFloat     result          (LocalRefTypVariableOffset=2)
            String          stepSize        (LocalRefTypVariableOffset=0)
        End Block
        Block Function FloatToByteRepresentation (Line 658:660)
            Float           number          (LocalValTypVariableOffset=0)
            Float           resolution      (LocalValTypVariableOffset=1)
            Float           lowThreshold    (LocalValTypVariableOffset=2)
        End Block
        Block Function Standby (Line 668:671)
        End Block
        Block Function Activate (Line 674:677)
        End Block
        Block Function GetActiveModeFrequency (Line 680:682)
        End Block
        Block Function DisableSleepMode (Line 685:687)
        End Block
        Block Function EnableSleepMode (Line 690:710)
            Boolean         result          (LocalValTypVariableOffset=2)
            Boolean         canSleep        (LocalValTypVariableOffset=0)
            Boolean         setPin2         (LocalValTypVariableOffset=1)
            Block If Then  (Line 695:703)
                Block If Then  (Line 698:700)
                End Block
                Block Else (Line 700:702)
                End Block
            End Block
            Block Else (Line 703:705)
            End Block
        End Block
        Block Function EnableSleepMode (Line 713:715)
            Float           duration        (LocalValTypVariableOffset=0)
        End Block
        Block Function EnableSleepMode (Line 719:744)
            Byte            durationByte    (LocalValTypVariableOffset=2)
            Boolean         result          (LocalValTypVariableOffset=3)
            Float           duration        (LocalValTypVariableOffset=0)
            Boolean         setPin2         (LocalValTypVariableOffset=1)
            Block If Then  (Line 725:731)
                Block If Then  (Line 726:728)
                End Block
            End Block
            Block Else (Line 731:737)
                Block If Then  (Line 732:734)
                End Block
            End Block
        End Block
        Block Function Setup (Line 748:750)
            MMA8652_ACTIVE_OactiveHz        (LocalValTypVariableOffset=0)
            MMA8652_MODS    activePowerSchem(LocalValTypVariableOffset=1)
        End Block
        Block Function Setup (Line 754:765)
            Boolean         result          (LocalValTypVariableOffset=4)
            MMA8652_ACTIVE_OactiveHz        (LocalValTypVariableOffset=0)
            MMA8652_MODS    activePowerSchem(LocalValTypVariableOffset=1)
            MMA8652_SLEEP_ODsleepHz         (LocalValTypVariableOffset=2)
            MMA8652_SMODS   sleepPowerScheme(LocalValTypVariableOffset=3)
        End Block
        Block Function ConfigureOrientationInterrupt (Line 768:770)
            Float           duration        (LocalValTypVariableOffset=0)
            MMA8652_BF_ANGLEbfAngle         (LocalValTypVariableOffset=1)
            Float           zlockAngle      (LocalValTypVariableOffset=2)
            MMA8652_THS_ANGLthsAngle        (LocalValTypVariableOffset=3)
            MMA8652_HYS_ANGLhysAngle        (LocalValTypVariableOffset=4)
        End Block
        Block Function ConfigureOrientationInterrupt (Line 781:828)
            Byte            durationByte    (LocalValTypVariableOffset=6)
            Byte            zlockAngleByte  (LocalValTypVariableOffset=7)
            Boolean         result          (LocalValTypVariableOffset=8)
            ListOfFloat     maxTimeAndTimeSt(LocalRefTypVariableOffset=0)
            Float           duration        (LocalValTypVariableOffset=0)
            MMA8652_BF_ANGLEbfAngle         (LocalValTypVariableOffset=1)
            Float           zlockAngle      (LocalValTypVariableOffset=2)
            MMA8652_THS_ANGLthsAngle        (LocalValTypVariableOffset=3)
            MMA8652_HYS_ANGLhysAngle        (LocalValTypVariableOffset=4)
            Boolean         setPin2         (LocalValTypVariableOffset=5)
            Block If Then  (Line 787:789)
            End Block
            Block If Then  (Line 791:793)
            End Block
            Block If Then  (Line 805:807)
            End Block
            Block Else (Line 807:809)
            End Block
        End Block
        Block Function ConfigureFreefallInterrupt (Line 831:833)
            Float           threshold       (LocalValTypVariableOffset=0)
            Byte            duration        (LocalValTypVariableOffset=1)
        End Block
        Block Function ConfigureFreefallInterrupt (Line 842:883)
            Byte            thresholdByte   (LocalValTypVariableOffset=4)
            Boolean         result          (LocalValTypVariableOffset=5)
            Float           threshold       (LocalValTypVariableOffset=0)
            Byte            duration        (LocalValTypVariableOffset=1)
            Byte            axis            (LocalValTypVariableOffset=2)
            Boolean         setPin2         (LocalValTypVariableOffset=3)
            Block If Then  (Line 846:848)
            End Block
            Block If Then  (Line 862:864)
            End Block
            Block Else (Line 864:866)
            End Block
        End Block
        Block Function ConfigureShockInterrupt (Line 886:888)
            Float           threshold       (LocalValTypVariableOffset=0)
            Float           duration        (LocalValTypVariableOffset=1)
        End Block
        Block Function ConfigureShockInterrupt (Line 897:945)
            Byte            thresholdByte   (LocalValTypVariableOffset=4)
            Byte            durationByte    (LocalValTypVariableOffset=5)
            Boolean         result          (LocalValTypVariableOffset=6)
            ListOfFloat     maxTimeAndTimeSt(LocalRefTypVariableOffset=0)
            Float           threshold       (LocalValTypVariableOffset=0)
            Float           duration        (LocalValTypVariableOffset=1)
            Byte            axis            (LocalValTypVariableOffset=2)
            Boolean         setPin2         (LocalValTypVariableOffset=3)
            Block If Then  (Line 903:905)
            End Block
            Block If Then  (Line 907:909)
            End Block
            Block If Then  (Line 925:927)
            End Block
            Block Else (Line 927:929)
            End Block
        End Block
        Block Function ConfigurePulseInterrupt (Line 948:950)
            Float           threshold       (LocalValTypVariableOffset=0)
            Float           duration        (LocalValTypVariableOffset=1)
            Float           latency         (LocalValTypVariableOffset=2)
            Float           window          (LocalValTypVariableOffset=3)
        End Block
        Block Function ConfigurePulseInterrupt (Line 953:955)
            Float           threshold       (LocalValTypVariableOffset=0)
            Float           duration        (LocalValTypVariableOffset=1)
            Float           latency         (LocalValTypVariableOffset=2)
            Float           window          (LocalValTypVariableOffset=3)
            Boolean         abortDoublePulse(LocalValTypVariableOffset=4)
            Boolean         enableLowPassFil(LocalValTypVariableOffset=5)
        End Block
        Block Function ConfigurePulseInterrupt (Line 966:1051)
            Byte            thresholdByte   (LocalValTypVariableOffset=8)
            Byte            durationByte    (LocalValTypVariableOffset=9)
            Byte            latencyByte     (LocalValTypVariableOffset=10)
            Byte            windowByte      (LocalValTypVariableOffset=11)
            Boolean         result          (LocalValTypVariableOffset=12)
            ListOfFloat     durationMaxTimeA(LocalRefTypVariableOffset=0)
            ListOfFloat     maxTimeAndTimeSt(LocalRefTypVariableOffset=1)
            Float           threshold       (LocalValTypVariableOffset=0)
            Float           duration        (LocalValTypVariableOffset=1)
            Float           latency         (LocalValTypVariableOffset=2)
            Float           window          (LocalValTypVariableOffset=3)
            Boolean         abortDoublePulse(LocalValTypVariableOffset=4)
            Boolean         enableLowPassFil(LocalValTypVariableOffset=5)
            Byte            axis            (LocalValTypVariableOffset=6)
            Boolean         setPin2         (LocalValTypVariableOffset=7)
            Block If Then  (Line 975:978)
            End Block
            Block Else (Line 978:981)
            End Block
            Block If Then  (Line 983:985)
            End Block
            Block If Then  (Line 987:989)
            End Block
            Block If Then  (Line 991:993)
            End Block
            Block If Then  (Line 995:997)
            End Block
            Block If Then  (Line 1014:1016)
            End Block
            Block Else (Line 1016:1018)
            End Block
            Block If Then  (Line 1020:1022)
            End Block
            Block If Then  (Line 1034:1038)
            End Block
        End Block
        Block Function GetIntSource (Line 1054:1071)
            Byte            intSource       (LocalValTypVariableOffset=0)
            ListOfString    result          (LocalRefTypVariableOffset=0)
            Block If Then  (Line 1058:1060)
            End Block
            Block ElseIf (Line 1060:1062)
            End Block
            Block ElseIf (Line 1062:1064)
            End Block
            Block ElseIf (Line 1064:1066)
            End Block
            Block ElseIf (Line 1066:1068)
            End Block
        End Block
        Block Function Autosleep (Line 1074:1084)
            Byte            sysmod          (LocalValTypVariableOffset=0)
            Block If Then  (Line 1077:1079)
            End Block
            Block ElseIf (Line 1079:1081)
            End Block
            Block ElseIf (Line 1081:1083)
            End Block
        End Block
        Block Function Freefall (Line 1087:1115)
            Byte            freefallStatus  (LocalValTypVariableOffset=0)
            ListOfString    result          (LocalRefTypVariableOffset=0)
            Block If Then  (Line 1091:1098)
                Block If Then  (Line 1093:1095)
                End Block
                Block Else (Line 1095:1097)
                End Block
            End Block
            Block ElseIf (Line 1098:1105)
                Block If Then  (Line 1100:1102)
                End Block
                Block Else (Line 1102:1104)
                End Block
            End Block
            Block ElseIf (Line 1105:1112)
                Block If Then  (Line 1107:1109)
                End Block
                Block Else (Line 1109:1111)
                End Block
            End Block
        End Block
        Block Function Orientation (Line 1118:1140)
            Byte            plStatus        (LocalValTypVariableOffset=0)
            ListOfString    result          (LocalRefTypVariableOffset=0)
            Block If Then  (Line 1133:1135)
            End Block
            Block Else (Line 1135:1137)
            End Block
        End Block
        Block Function Pulse (Line 1143:1153)
            Byte            pulseStatus     (LocalValTypVariableOffset=0)
            ListOfString    result          (LocalRefTypVariableOffset=0)
            Block If Then  (Line 1147:1149)
            End Block
            Block Else (Line 1149:1151)
            End Block
        End Block
        Block Function Shock (Line 1156:1184)
            Byte            shockStatus     (LocalValTypVariableOffset=0)
            ListOfString    result          (LocalRefTypVariableOffset=0)
            Block If Then  (Line 1160:1167)
                Block If Then  (Line 1162:1164)
                End Block
                Block Else (Line 1164:1166)
                End Block
            End Block
            Block ElseIf (Line 1167:1174)
                Block If Then  (Line 1169:1171)
                End Block
                Block Else (Line 1171:1173)
                End Block
            End Block
            Block ElseIf (Line 1174:1181)
                Block If Then  (Line 1176:1178)
                End Block
                Block Else (Line 1178:1180)
                End Block
            End Block
        End Block
        Block Function GetVersion (Line 1187:1189)
        End Block
        Total Size of Member data including base classes = 8.
    End Block




****** GLOBAL_VARIABLES **********************************************
Sub_Topic_Knock_Enable, Class=String, Offset=0, SourceClass=Main
accel, Class=MMA8652, Offset=4, SourceClass=Main
queue, Class=ListOfObject, Offset=8, SourceClass=MQTT
publish_as, Class=ListOfByte, Offset=12, SourceClass=MQTT
Number, Class=Integer, Offset=16, IsReadoly, SourceClass=Intrinsic
Data, Class=Integer, Offset=20, IsReadoly, SourceClass=Intrinsic
ProgramCounter, Class=Integer, Offset=24, IsReadoly, SourceClass=Intrinsic
data, Class=dataType, Offset=32, SourceClass=Main
Knock_Enable, Class=Boolean, Offset=28, SourceClass=Main
Publish_data, Class=Boolean, Offset=29, SourceClass=Main
Count, Class=Integer, Offset=36, SourceClass=Main
TimeSinceKnockTriggered, Class=Integer, Offset=40, SourceClass=Main
TimeSinceDoorClosed, Class=Integer, Offset=44, SourceClass=Main
use_queue, Class=Boolean, Offset=48, SourceClass=MQTT
MQTT_priority, Class=Boolean, Offset=49, SourceClass=MQTT
timeSincePublish, Class=Integer, Offset=56, SourceClass=MQTT
running, Class=Boolean, Offset=50, SourceClass=MQTT
recheck, Class=Boolean, Offset=51, SourceClass=MQTT
item, Class=Boolean, Offset=52, SourceClass=MQTT


****** LITERALS ***********************************************
     1 String "True"
     4 String "False"
     7 String "\r\n"
     9 String "V2.0"
    12 String "MCThings/Publish"
    18 String "0.1.0"
    21 String "MCThings/"
    25 String "X8"
    27 String "/EnableDoorKnock"
    33 String "Status"
    36 String "Booted: V2.0"
    41 String "Accel Sensor Online"
    47 String "Accel Sensor Offline"
    54 String "Door"
    57 String "shock"
    60 String "pulse"
    63 String "double"
    66 String "autosleep"
    70 String "Unhandled Interrupt"
    76 String "Doorknock"
    80 String "Double"
    83 String "Publish"
    86 String " :Boolean Conversion failed"
    94 String "KnockEnable"
    98 String "Unknown"
   101 String "Uptime"
   104 String "BatteryVoltage"
   109 String "Temperature"
   113 String "OnLine"
   116 String "/"
   118 String "short"
   121 String "medium"
   124 String "long"
   127 String "xlong"
   130 String "freefall"
   134 String "orientation"
   138 String "standby"
   141 String "active"
   144 String "sleep"
   147 String "x"
   149 String "neg"
   151 String "pos"
   153 String "y"
   155 String "z"
   157 String "portrait up"
   161 String "portrait down"
   166 String "landscape right"
   171 String "landscape left"
   176 String "back"
   179 String "front"
   182 String "single"
